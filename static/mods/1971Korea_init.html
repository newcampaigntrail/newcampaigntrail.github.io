campaignTrail_temp.election_json = JSON.parse("[{\"model\": \"campaign_trail.election\", \"pk\": 10, \"fields\": {\"year\": 1971, \"summary\": \"<p>It's 1971, and South Korea's already unstable democracy is in a huge crisis. President Park Chung-hee passed a constitutional amendment for a third term two years ago, and this year, he challenges a third term according to the new constitution. Kim Dae-jung is a young candidate of the NDP, the main opposition party, and he is trying to protect democracy against President Park.</p><p>This year's election is predicted to be extremely competitive. Two candidates shall do everything to win this race. <i>Literally everything.</i></p>\", \"image_url\": \"https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/71electionimg.png\", \"winning_electoral_vote_number\": 1, \"advisor_url\": \"https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/71advisors.png\", \"recommended_reading\": \"<div style=\\\"overflow-y:scroll;height:357.133px;font-size:1em;\\\"><h1>Thank you for playing 1971 Korea!</h1><p><img src=\\\"https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/71JP.png\\\"><br></p><p>Hi. It's me, Kim Jong-pil. Thank you for playing the first mod made by FlongydOlson.</p><p><span style=\\\"width:700px;text-align:left;display:inline-block;line-height:1.33em;\\\">In real history, President Park managed to beat Kim Dae-jung to win the election. But despite the victory, Park was not satisfied at all. His government was in a major economic and diplomatic crisis, which threatened his political status. Park wanted to gain dictatorial power to overcome this situation and rule stably, and in 1972, he eventually disbanded the National Assembly and suspended the Constitution, by staging a self-coup called the October Restoration.</span></p><p><a href=\\\"https://www.nytimes.com/1971/12/28/archives/koreas-real-emergency.html\\\" target=\\\"_blank\\\">The New York Times, 1971, Korea's Real Emergency</a></p><p><a href=\\\"https://www.koreatimes.co.kr/www/nation/2023/06/113_75537.html\\\" target=\\\"_blank\\\">The Korea Times, 2010, Park got dictatorial powers with Yushin Constitution in 1972</a><br><br></p><p><span style=\\\"width:700px;text-align:left;display:inline-block;line-height:1.33em;\\\">Park revised the Constitution once again and served as president for another seven years under the new Constitution, but was eventually shot and assassinated by Kim Jae-gyu in 1979. What happened to Kim Dae-jung? Even after Park's death, Kim went through many hardships working hard for democratization, but he was eventually elected president in 1997. If you want to know more about the life of Kim and the history of Korean democracy, see the following article.</p><p><a href=\\\"https://www.asianstudies.org/publications/eaa/archives/kim-dae-jungs-role-in-the-democratization-of-south-korea/\\\" target=\\\"_blank\\\">Edward J. Baker, 2014, Kim Dae-jung’s Role in the Democratization of South Korea</a></span><br><br></p><p>Now... it's time to go. Hope you enjoyed playing this mod. See you later!</p></div>\", \"has_visits\": 1, \"no_electoral_majority_image\": \"https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/71Park.png\"}}]");
campaignTrail_temp.candidate_json = JSON.parse("[{\"model\": \"campaign_trail.candidate\", \"pk\": 91, \"fields\": {\"first_name\": \"\", \"last_name\": \"Park Chung-hee\", \"election\": 10, \"party\": \"Democratic-Republican Party (DRP)\", \"state\": \"North Gyeongsang\", \"priority\": 1, \"description\": \"<p>Park Chung-hee was elected president in 1963, after overthrowing an unpopular government in 1961 through a coup. He is supported by many people for leading the industrialization and economic growth of South Korea, which was devastated by the Korean War, but on the other hand, he is criticized by many people too, for trying to undermine democracy.<br><br>In the beginning, it seems like Kim Dae-jung's popularity is higher than yours, but don't worry. You have a strong organization and numerous strategies, and if you use them effectively, you can continue your third term...</p>\", \"color_hex\": \"#835b39\", \"secondary_color_hex\": \"#835b39\", \"is_active\": 1, \"image_url\": \"https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/71Park.png\", \"electoral_victory_message\": \"<h3>Congratulations! You have won the 1976 Presidential Election.</h3><p>Hopefully you can make good on your promises to clean up Washington and change the political and moral culture of the country. If you are successful, there is no reason you cannot run for reelection in 1980. Just be wary of any economic problems, or of some foreign policy crisis that could dent your popularity.</p>\", \"electoral_loss_message\": \"<h3>Sorry, you have lost the 1976 Presidential Election.</h3><p>As an outsider candidate, this was really your moment to make an impact on American politics and to win a national election. The beltway gossip already has it that Ted Kennedy is the frontrunner for the 1980 nomination. Perhaps you can run again for Governor of Georgia, or make an impact in some other way.</p>\", \"no_electoral_majority_message\": \"<h3>Wow! You have won in a squeaker.</h3><p>While the Electoral College ended in a tie, the Democrats have a huge advantage in the House of Representatives and are sure to elect you in that manner. Hopefully the closeness of this election doesn't undermine your promises to clean up Washington and unite the people of this country.</p>\", \"description_as_running_mate\": \"''\", \"candidate_score\": 1.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 92, \"fields\": {\"first_name\": \"\", \"last_name\": \"Kim Dae-jung\", \"election\": 10, \"party\": \"New Democratic Party (NDP)\", \"state\": \"South Jeolla\", \"priority\": 2, \"description\": \"<p>Kim Dae-jung is a young member of the National Assembly, who is 47 in 1971. Along with Kim Young-sam and Yi Cheol-seung, Kim participated in the primary, advocating the '40s Candidate Theory', which argued that young candidate should challenge Park in the upcoming presidential election. And after fierce competition with Kim Young-sam, he was nominated as the NDP's presidential candidate. He is also well known as a strong supporter of democracy and one of Park's main rivals.<br><br>Thanks to this reputation, you have an early lead in the election, but beware of Park's aggressive attacks. He and his supporters will devise all sorts of schemes to defeat you...</p>\", \"color_hex\": \"#dc352a\", \"secondary_color_hex\": \"#dc352a\", \"is_active\": 1, \"image_url\": \"https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/71Kim.png\", \"electoral_victory_message\": \"<h3>Congratulations! You have won the 1976 Presidential Election.</h3><p>Hopefully you can continue to help the United States recover from the Watergate Scandal, the recent recession, and the debacle of Vietnam. In either case, this will be your final term as President. Speculation is sure to be intense on who will replace you. Will it be Ronald Reagan? Ted Kennedy? Or someone else entirely?</p>\", \"electoral_loss_message\": \"<h3>Sorry, you have lost the 1976 Presidential Election.</h3><p>Hopefully your opponent can make good on his promises to clean up Washington and change the political and moral culture of the country. Perhaps you can still play a role in 1980, or seek your old Congressional leadership positions. In any case, you can still take solace in the fact that you did the right thing by pardoning Nixon and moving the country beyond the Watergate episode.</p>\", \"no_electoral_majority_message\": \"<h3>Sorry, you have lost the 1976 Presidential Election.</h3><p>While the Electoral College ended in a tie, the Democrats have a huge advantage in the House of Representatives and are sure to elect your opponent in that manner. Perhaps you can still play a role in 1980, or seek your old Congressional leadership positions. In any case, you can still take solace in the fact that you did the right thing by pardoning Nixon and moving the country beyond the Watergate episode.</p>\", \"description_as_running_mate\": \"''\", \"candidate_score\": 1.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 93, \"fields\": {\"first_name\": \"\", \"last_name\": \"Jin Bok-gi\", \"election\": 10, \"party\": \"Justice\", \"state\": \"South Jeolla\", \"priority\": 3, \"description\": \"''\", \"color_hex\": \"#350887\", \"secondary_color_hex\": \"#A1FFA1\", \"is_active\": 0, \"image_url\": \"''\", \"electoral_victory_message\": \"''\", \"electoral_loss_message\": \"''\", \"no_electoral_majority_message\": \"''\", \"description_as_running_mate\": \"''\", \"candidate_score\": 1.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 94, \"fields\": {\"first_name\": \"\", \"last_name\": \"Other Candidates\", \"election\": 10, \"party\": \"Independent\", \"state\": \"Jeju\", \"priority\": 4, \"description\": \"''\", \"color_hex\": \"#88c8c8\", \"secondary_color_hex\": \"#FFFFC0\", \"is_active\": 0, \"image_url\": \"''\", \"electoral_victory_message\": \"''\", \"electoral_loss_message\": \"''\", \"no_electoral_majority_message\": \"''\", \"description_as_running_mate\": \"''\", \"candidate_score\": 1.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 95, \"fields\": {\"first_name\": \"Democratic-Republican\", \"last_name\": \"Party\", \"election\": 10, \"party\": \"DRP\", \"state\": \"North Gyeongsang\", \"priority\": 5, \"description\": \"''\", \"color_hex\": \"#0000FF\", \"secondary_color_hex\": \"#90C0FF\", \"is_active\": 0, \"image_url\": \"https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/DRP.png\", \"electoral_victory_message\": \"''\", \"electoral_loss_message\": \"''\", \"no_electoral_majority_message\": \"''\", \"description_as_running_mate\": \"<p>The Democratic-Republican Party (DRP) is the first political party in Korea to have a systematic organization. It is also the conservative ruling party of the current government, but there is some backlash from within as a result of Park's attempts to ignore the party and strengthen his own power.<br><br>So please be careful when dealing with DRP, even though they will support your campaign after all...</p>\", \"candidate_score\": 0.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 96, \"fields\": {\"first_name\": \"New Democratic\", \"last_name\": \"Party\", \"election\": 10, \"party\": \"NDP\", \"state\": \"Seoul\", \"priority\": 6, \"description\": \"''\", \"color_hex\": \"#0000FF\", \"secondary_color_hex\": \"#90C0FF\", \"is_active\": 0, \"image_url\": \"https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/NDP.png\", \"electoral_victory_message\": \"''\", \"electoral_loss_message\": \"''\", \"no_electoral_majority_message\": \"''\", \"description_as_running_mate\": \"<p>The New Democratic Party (NDP) is the main opposition party in South Korea. There is not much difference ideologically between DRP and NDP, but NDP focuses on democracy heavily and struggles to defend democracy against the Park government. <br><br>With elections ahead, the party seems to be united for now, but everything might change if you make a severe mistake...</p>\", \"candidate_score\": 0.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 103, \"fields\": {\"first_name\": \"...\", \"last_name\": \"Other\", \"election\": 10, \"party\": \"Independent\", \"state\": \"Alaska\", \"priority\": 13, \"description\": \"''\", \"color_hex\": \"#00C100\", \"secondary_color_hex\": \"#A1FFA1\", \"is_active\": 0, \"image_url\": \"''\", \"electoral_victory_message\": \"''\", \"electoral_loss_message\": \"''\", \"no_electoral_majority_message\": \"''\", \"description_as_running_mate\": \"''\", \"candidate_score\": 0.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 104, \"fields\": {\"first_name\": \"...\", \"last_name\": \"Other\", \"election\": 10, \"party\": \"Independent\", \"state\": \"Alaska\", \"priority\": 14, \"description\": \"''\", \"color_hex\": \"#FFFF00\", \"secondary_color_hex\": \"#FFFFC0\", \"is_active\": 0, \"image_url\": \"''\", \"electoral_victory_message\": \"''\", \"electoral_loss_message\": \"''\", \"no_electoral_majority_message\": \"''\", \"description_as_running_mate\": \"''\", \"candidate_score\": 0.0}}]");
campaignTrail_temp.running_mate_json = JSON.parse("[{\"model\": \"campaign_trail.running_mate\", \"pk\": 66, \"fields\": {\"candidate\": 93, \"running_mate\": 103}}, {\"model\": \"campaign_trail.running_mate\", \"pk\": 67, \"fields\": {\"candidate\": 94, \"running_mate\": 104}}, {\"model\": \"campaign_trail.running_mate\", \"pk\": 58, \"fields\": {\"candidate\": 91, \"running_mate\": 95}}, {\"model\": \"campaign_trail.running_mate\", \"pk\": 59, \"fields\": {\"candidate\": 92, \"running_mate\": 96}}]");
campaignTrail_temp.opponents_default_json = JSON.parse("[{\"election\": 10, \"candidates\": [93, 94, 91, 92]}]");
campaignTrail_temp.opponents_weighted_json = JSON.parse("[{\"election\": 10, \"candidates\": [91, 92, 93, 94]}]");        
campaignTrail_temp.difficulty_level_json = JSON.parse("[{\"model\": \"campaign_trail.difficulty_level\", \"pk\": 1, \"fields\": {\"name\": \"CENSORED\", \"multiplier\": 0.97}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 2, \"fields\": {\"name\": \"CENSORED\", \"multiplier\": 0.97}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 3, \"fields\": {\"name\": \"CENSORED\", \"multiplier\": 0.97}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 4, \"fields\": {\"name\": \"Normal\", \"multiplier\": 0.97}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 5, \"fields\": {\"name\": \"CENSORED\", \"multiplier\": 0.97}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 6, \"fields\": {\"name\": \"CENSORED\", \"multiplier\": 0.97}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 7, \"fields\": {\"name\": \"CENSORED\", \"multiplier\": 0.97}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 8, \"fields\": {\"name\": \"CENSORED\", \"multiplier\": 0.97}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 9, \"fields\": {\"name\": \"CENSORED\", \"multiplier\": 0.97}}]");
campaignTrail_temp.global_parameter_json = JSON.parse("[{\"model\": \"campaign_trail.global_parameter\", \"pk\": 1, \"fields\": {\"vote_variable\": 1.125, \"max_swing\": 0.12, \"start_point\": 0.94, \"candidate_issue_weight\": 10.0, \"running_mate_issue_weight\": 3.0, \"issue_stance_1_max\": -0.71, \"issue_stance_2_max\": -0.3, \"issue_stance_3_max\": -0.125, \"issue_stance_4_max\": 0.125, \"issue_stance_5_max\": 0.3, \"issue_stance_6_max\": 0.71, \"global_variance\": 0.01, \"state_variance\": 0.005, \"question_count\": 30, \"default_map_color_hex\": \"#C9C9C9\", \"no_state_map_color_hex\": \"#999999\"}}]");
campaignTrail_temp.candidate_dropout_json = JSON.parse("[{\"model\": \"campaign_trail.candidate_dropout\", \"pk\": 1, \"fields\": {\"candidate\": 36, \"affected_candidate\": 18, \"probability\": 1.0}}]");
function updateRunningMateForm() {
  try {
    const form = document.querySelector("#running_mate_form form");
    const heading = form.querySelector("h3");
    
    heading.textContent = "Please select your party:";
  } catch {}
}
window.setInterval(updateRunningMateForm,200)
function modifyForm() {
  try {
    const form = document.querySelector('form[name="game_type_selection"]');
    const select = form.querySelector('select[name="game_type_id"]');
    const option = select.querySelector('option[value="1"]');
    option.textContent = 'Default (Plurality Voting)';
    select.querySelector('option[value="2"]').remove();
    const h3 = form.querySelector('h3');
    h3.textContent = 'How would you like the winner to be decided?';
  } catch {}
}
window.setInterval(modifyForm,200)
function changeOpponentSelectionDescription() {
  try {
    const opponentSelectionDescription = document.getElementById("opponent_selection_description_window");
    opponentSelectionDescription.innerHTML = `<p><strong>Use the default method of deciding the winner in the Korean presidential election.</strong></p><p>In the Korean presidential election, the candidate who receives votes more than any other opponents is elected president. Regardless of the majority, you just need to have the most to win. For example, in the 1963 presidential election, Park Chung-hee won 46.6 percent of the vote, beating Yun Po-sun, who won only 45.1 percent of the vote. </p>`;
  } catch {}
}
window.setInterval(changeOpponentSelectionDescription,200)

RecReading=true

campaignTrail_temp.temp_election_list = [{"id": 10, "year": 1971, "is_premium": 0, "display_year": "1971Korea"}];
campaignTrail_temp.show_premium = true;
campaignTrail_temp.premier_ab_test_version = -1;
campaignTrail_temp.credits =  "FlongydOlson, <button onclick='credits()'>And...</button>";
  
credits = function() {
  credits = [""]
  text = "CODE CREDITS:\n1964 Draft Lodge (Color Setting Codes)\n2000N (Soundtrack Code)\n2025 Netherlands (Several Codes)\nAnd Decstar for Map Background Code\n\nHAVE FUN!"
  for (i in credits) {
      text += credits[i]
  }
  alert(text)
}

nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#000000";
nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#969696";
document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;
$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;
$(".container")[0].style.backgroundColor = "#282828";
bannerlist=["https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/71bannerpark.png", "https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/71bannerkim.png"]
document.getElementById("header").src = bannerlist[Math.floor((Math.random() * bannerlist.length))] 
document.body.background = "https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/71back.png";

$(".footer a").css({"color":"#ffffff"});
nct_stuff.themes[nct_stuff.selectedTheme].text_col = "#000000"

let style = document.createElement('style');
style.type = 'text/css';
style.id = 'dynamic-style';

style.innerHTML = `
  .campaign_trail_start_emphasis {
    background-color: #000000;
  }
  a:-webkit-any-link {
  	color: #000000;
  }
`;

document.head.appendChild(style);

quotes = ["“We have been born into this land, charged with the historic mission of regenerating the nation.” - Park Chung-hee", "“We Koreans were like frogs in a well.” - Park Chung-hee", "“I will never ask you to vote for me again!” - Park Chung-hee", "“Life is beautiful, and history develops.” - Kim Dae-jung", "“I have lived, and continue to live, in the belief that God is always with me.” - Kim Dae-jung", "“Democracy and the market economy are two sides of a coin or two wheels of a cart.” - Kim Dae-jung"]
customquote = quotes[Math.floor((Math.random() * quotes.length))]

corrr=`\n<h2>제7대 대통령 선거</h2><font id='wittyquote' size='4' color='white'><em>`+customquote+`</em></font>`

musicMode = () => {
    // Initialise custom music
  
    $("#music_player")[0].children[0].style.display = "none"
    $("#music_player")[0].children[1].style.display = "none"
  
    document.getElementById("modLoadReveal").style.display = "none"
    document.getElementById("modloaddiv").style.display = "none"
  
    musicBox = document.getElementById("music_player")
    musicBox.style.display = ""
  
    var trackSel;
    e = campaignTrail_temp
    e.selectedSoundtrack = 0
  
    toTime = (seconds) => {
        var date = new Date(null);
        date.setSeconds(seconds);
        return date.toISOString().substr(11, 8);
    }
  
    generateTime = () => {
        // Get the audio element
        var audio = document.getElementById("campaigntrailmusic");
  
        timeTracker = document.createElement("div");
        timeTracker.style = `
  text-align:left;
  border-style:solid;
  border-width:3px;
  height:150px;
  width:200px;
  background-color:#999999;
  float:right;
  padding: 10px;
  `
        $("#trackSelParent")[0].prepend(timeTracker);
        $("#trackSelParent")[0].prepend(document.createElement("br"));
  
        // Create a new element to display the current position of the audio
        var positionDisplay = document.createElement("gg");
        positionDisplay.id = "position-display";
  
        // Create a new slider element to change the time
        var timeSlider = document.createElement("input");
        timeSlider.type = "range";
        timeSlider.min = 0;
        timeSlider.max = 1;
        timeSlider.step = 0.001;
        timeSlider.value = 0;
        timeSlider.style.width = "200px";
        timeSlider.id = "time-slider";
  
        var pausePlay = document.createElement("button");
        pausePlay.id = "position-display";
        pausePlay.innerHTML = "<b>Pause</b>"
        pausePlay.style.width = "100%";
  
  
        pausePlay.addEventListener("click", event => {
            event.preventDefault();
            updatePositionDisplay();
            let audio = document.getElementById("campaigntrailmusic");
            if (audio.paused) {
                audio.play();
                event.target.innerHTML = "<b>Pause</b>";
                return;
            }
            audio.pause();
            event.target.innerHTML = "<b>Play</b>";
            return;
        })
  
        var volumeLabel = document.createElement("gg");
        volumeLabel.id = "volume-label";
        volumeLabel.innerHTML = "<br><b>Volume: </b>"
  
        var volumeSlider = document.createElement("input");
        volumeSlider.type = "range";
        volumeSlider.min = 0;
        volumeSlider.max = 1;
        volumeSlider.step = 0.001;
        volumeSlider.value = 0;
        volumeSlider.style.width = "200px";
        volumeSlider.id = "volume-slider";
  
        volumeSlider.value = audio.volume;
  
        timeTracker.appendChild(pausePlay);
        timeTracker.appendChild(document.createElement("br"));
        timeTracker.appendChild(document.createElement("br"));
        timeTracker.appendChild(positionDisplay);
        timeTracker.appendChild(timeSlider);
        timeTracker.appendChild(volumeLabel);
        timeTracker.appendChild(volumeSlider);
  
        updatePositionDisplay();
  
        //for (let i = 0; i < 10; i++)
        //timeTracker.append(document.createElement("br"));
  
  
        // Function to update the position display
        function updatePositionDisplay() {
            positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
            timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
        }
  
        // Function to change the time of the audio
        function changeTime() {
            positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
            audio.currentTime = timeSlider.value * audio.duration;
        }
  
        updateVolume = event => {
            audio.volume = event.target.value;
        }
  
        // Update the position display and slider every second
        setInterval(updatePositionDisplay, 1000);
  
        // Listen for changes to the time slider and change the time of the audio
        timeSlider.addEventListener("input", changeTime);
        volumeSlider.addEventListener("input", updateVolume)
    }
  
    function newMusicPlayer() {
        trackSel = document.createElement("div");
        trackSel.id = "trackSelParent"
        let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
        z += `<b><select id='selectSoundtrack'><option value='` + soundtracks[e.selectedSoundtrack].name + `'>` + soundtracks[e.selectedSoundtrack].name + "</option>"
        for (i in soundtracks) {
            if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
                z += `<option value='` + soundtracks[i].name + `'>` + soundtracks[i].name + `</option>`
            }
        }
        z += `</select></b><br><br>`
            // <label><input type="radio" name="option" value="option1">Option 1</label><br>
        for (i in soundtracks[e.selectedSoundtrack].tracklist) {
            let a = soundtracks[e.selectedSoundtrack].tracklist[i]
            let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="` + i + `">` + a.name + `</label><br>`
            z += b
        }
        z += "</div><br><br>"
        trackSel.innerHTML = z
  
        // select correct song
  
        musicBox.appendChild(trackSel);
        Array.from(document.getElementById("trackSel").children).filter(f => {
            return f.tagName == "LABEL"
        }).map(f => f.children[0])[0].checked = true
  
        // set soundtrack changer
  
        soundtrackSelector = document.getElementById("selectSoundtrack")
        soundtrackSelector.onchange = function() {
            for (i in soundtracks) {
                if (soundtracks[i].name == soundtrackSelector.value) {
                    e.selectedSoundtrack = i
                    break
                }
            }
            document.getElementById("trackSelParent").remove()
            newMusicPlayer()
        }
  
        var matches = document.querySelectorAll('.trackSelector');
  
        for (match in matches) {
            matches[match].onchange = function() {
                audio = $("#campaigntrailmusic")[0];
                audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
                audio.currentTime = 0
            }
        }
  
        musicBox.children[2].loop = false
        musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url
  
        musicBox.children[2].onended = function() {
            console.log("next track")
            let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
            let newSel = clamp(selected + 1, soundtracks[e.selectedSoundtrack].tracklist.length - 1, 0)
            let buttons = Array.from(document.getElementById("trackSel").children).filter(f => {
                    return f.tagName == "LABEL"
                }).map(f => f.children[0])
                //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
            buttons[newSel].click()
        }
  
        for (w = 0; w < 7; w++) {
            document.getElementById("trackSelParent").appendChild(document.createElement("br"))
        }
  
        generateTime();
    }
  
    clamp = function(a, max, min, overflow = true) {
        if (overflow) {
            return a > max ? min : a < min ? max : a;
        }
        return a > max ? max : a < min ? min : a;
    }
  
  
    // Track list
  
    var soundtracks = {
        0: {
            name: "Intro Music",
            tracklist: [
              {
                "name": "Beautiful Rivers and Mountains - Shin Joong-hyun (1972)",
                "url": "https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/Beautiful_Rivers_and_Mountains.mp3"
              }
          ]
        },
               1: {
          name: "Leader of the Country",
          tracklist: [
            {
                "name": "My Fatherland - Park Chung-hee (1976)",
                "url": "https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/My_Fatherland.mp3"
            },
            {
              "name": "Song of Saemaul - Park Chung-hee (1972)",
              "url": "https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/Song_of_Saemaul.mp3"
            },
            {
              "name": "Ode to the Fatherland - Kim Dong-jin (1955)",
              "url": "https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/OdetotheFatherland.mp3"
            },
            {
                "name": "Live Well - Kim Hee-jo (1971)",
                "url": "https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/Live_Well.mp3"
            }
        ]
      },
      2: {
        name: "Leader of the People",
        tracklist: [
            {
              "name": "Morning Dew - Yang Hee-eun (1971)",
              "url": "https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/Morning_Dew.mp3"
            },
            {
              "name": "Evergreen - Kim Min-gi (1979)",
              "url": "https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/Evergreen.mp3"
            },
            {
              "name": "Fog - Jung Hoon-hee (1967)",
              "url": "https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/Fog.mp3"
            },
            {
                "name": "Please give me a water - Han Dae-soo (1974)",
                "url": "https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/Please_give_me_a_water.mp3"
            }
         ]
      }
    }

  
    // Set up new music player
  
    newMusicPlayer()
  

}

  $("#game_start").click((event) => {
    event.preventDefault();
    $("#election_id_button").click((event) => {
        musicMode()

        setInterval(changeFontColour, 200)
  
    })
  })

HistHexcolour=["#835b39","#dc352a","#350887","#88c8c8"];
        HistName=[" Park Chung-hee"," Kim Dae-jung"," Jin Bok-gi"," Other Candidates"];
        HistEV=[0,0,0,0];
        HistPV=["6,342,828","5,395,900","122,914","61,576"];
        HistPVP=["53.2%","45.3%","1.0%","0.5%"];

$("#game_window")[0].style.backgroundImage = "url(https://raw.githubusercontent.com/FlongydOlson/OlsonMods/main/1971%20Korea/71bgimg.png)"

