e = campaignTrail_temp;

campaignTrail_temp.achievements = {
	"Pride will not die softly" : {
        "image" : "https://i.imgur.com/6UcS8bP.png",
        "description" : "Successfuly prevent the de-recognition of same-sex marriage",
        "cannotBeCheated" : true
    },
	"Lay Theologian" : {
        "image" : "https://i.imgur.com/FRxtAnL.png",
        "description" : "Successfully damage Cortez among her own Evangelical voterbase.",
        "cannotBeCheated" : true
    },
	"You will never forgive yourself" : {
        "image" : "https://i.imgur.com/37cIsGd.png",
        "description" : "Incite nation-wide violence.",
        "cannotBeCheated" : true
    },
	"Militarist" : {
        "image" : "https://i.imgur.com/sxvjBUR.png",
        "description" : "Win the debate against Cortez on national security issues.",
        "cannotBeCheated" : true
    },
	"Communism Death" : {
        "image" : "https://i.imgur.com/sNOLWSr.png",
        "description" : "Destroy the Havana Internationale.",
        "cannotBeCheated" : true
    },
	"Yet Another Vietnam" : {
        "image" : "https://i.imgur.com/WwG6vNt.png",
        "description" : "Fail to destroy the Havana Internationale.",
        "cannotBeCheated" : true
    },
	"Progressive Coalition" : {
        "image" : "https://i.imgur.com/YR6hWQG.png",
        "description" : "Successfully get the Progressives on your side.",
        "cannotBeCheated" : true
    },
	"A New Coalition" : {
        "image" : "https://i.imgur.com/695KAlT.png",
        "description" : "Successfully get the Patriot Party to back you.",
        "cannotBeCheated" : true
    },
	"A Big Tent Coalition" : {
        "image" : "https://i.imgur.com/x86vY1K.png",
        "description" : "Create a big tent coalition of both Progressives, AND Conservatives with Bernie Sanders.",
        "cannotBeCheated" : true
    },
	"Neverending Bickering" : {
        "image" : "https://i.imgur.com/C9LQ8ua.png",
        "description" : "Create an impossibly big tent coalition of Progressives, Conservatives, Futurists, Militarists, and Populists with Bernie Sanders.",
        "cannotBeCheated" : true
    },
	"+10,000 Social Credit" : {
        "image" : "https://i.imgur.com/W73Wcf9.png",
        "description" : "Defect to the People's Republic of China just days before the election.",
        "cannotBeCheated" : true
    },
	"Under the Iron Crucifix" : {
        "image" : "https://i.imgur.com/P69NSiZ.png",
        "description" : "Lose to Cortez in a landslide.",
        "cannotBeCheated" : true
    },
	"An Ember in the Darkness" : {
        "image" : "https://i.imgur.com/hLtdrhq.png",
        "description" : "Lose to Cortez, but by much less than people expected.",
        "cannotBeCheated" : true
    },
	"Sweet Victory" : {
        "image" : "https://i.imgur.com/k9D9j8M.png",
        "description" : "Successfully win against Cortez.",
        "cannotBeCheated" : true
    },
	"Annihilation of America's Enemies" : {
        "image" : "https://i.imgur.com/nCECG7l.png",
        "description" : "Get the maximum possible militarism score.",
        "cannotBeCheated" : true
    },
	"Battered Peacemaker" : {
        "image" : "https://i.imgur.com/ri6Kx53.png",
        "description" : "Sign a diplomatic treaty with the Eurasians and Chinese, and immediately regret it.",
        "cannotBeCheated" : true
    },
	"Peace through Strength" : {
        "image" : "https://i.imgur.com/1w8ySJy.png",
        "description" : "Ensure peace with Eurasia and China, while having a very strong military.",
        "cannotBeCheated" : true
    },
	"Wake Up" : {
        "image" : "https://i.imgur.com/owoLWW9.png",
        "description" : "Break free from the confines of the game, achieve the true ending.",
        "cannotBeCheated" : false
    },
	"(Joke) You absolute clown" : {
        "image" : "https://i.imgur.com/scHLqYd.png",
        "description" : "Lose with Robby J as your running mate.",
        "cannotBeCheated" : false
    },
	"(Joke) America on Fire" : {
        "image" : "https://i.imgur.com/dLI132d.png",
        "description" : "Cause everyone, and I mean EVERYONE to overthrow you with Robby as your running mate.",
        "cannotBeCheated" : false
    },
	"(Joke) I am become Robby." : {
        "image" : "https://i.imgur.com/ZKd0G75.png",
        "description" : "Destroy Earth with your terrible economic policies.",
        "cannotBeCheated" : false
    },
	
}


e.election_json = [
	{
		"model":"campaign_trail.election",
		"pk": 21,
		"fields": {
			"year":2044,
			"summary":"<span id='screenintro1' style='display: initial;'>The First American Culture War has ended. The Second American Culture War is about to begin. The 5th Great Awakening has radically shifted American politics to the right. With liberalism in retreat, the movement of Cortez’s Christian nationalists threatens to overwhelm America’s remaining democratic institutions.<br><br>Patrick Walker has been selected to confront this all-consuming vortex, to save the country from the abyss it now stares down. He will have to unite a disparate coalition of liberals, moderates, and conservatives to stop the agenda of the Mad Lady of the Right, Republican President Victoria Cortez. And back the country away from the abyss.<br><br><button onclick='info()'>The World of Children of Dusk</button></span><span id='screenintro2' style='display: none;'><div style='overflow-y:scroll;height:200px;'>Children of Dusk is a speculative future timeline based on an unrealistic and unserious prediction of the future, that eventually evolved into its own universe.<br><br>The Year is 2044. The United States has undergone a fundamental transformation since America’s loss in the 3rd World War. NATO has been broken, liberal democracy is in retreat, and the world has settled into a three-way cold war between the Eurasian Union, the United States, and the People’s Republic of China.<br><br>Grazed by the embers of the apocalypse, and a generation of soldiers returning home sparked the 5th Great Awakening, sparking a great Christian revival in the United States, as many hope to find a new direction in a postliberal age. Around the world, many different nations go on their own pathes, in the myriad confused futures of Man.<br><br>The scenario is based on the canon Children of Dusk timeline, of which more is written on the subreddit, r/childrenofdusk.<br><br></div><br><br><button onclick='back()'>Back</button></span><br>","image_url":"https://i.imgur.com/TOeYMca.png",
			"winning_electoral_vote_number":270,
			"advisor_url":"",
			"recommended_reading":"<ul>\n<li><a href=https://www.chicagotribune.com/opinion/editorials/ct-edit-chicago-tribune-biden-endorsement-20200925-lnyxsb5qvrftnjjmj3rnzj33jy-story.html>Our Case For Joe Biden</a></li>\n<li><a href=https://nationalinterest.org/feature/case-trump-166808>The Case For Trump</a></li>\n<li><a href=https://www.npr.org/2020/11/18/935730100/how-biden-won-ramping-up-the-base-and-expanding-margins-in-the-suburbs>How Biden Won: Ramping Up The Base And Expanding Margins In The Suburbs</a></li>\n<li><a href=https://www.prospectmagazine.co.uk/politics/donald-trump-joe-biden-us-election-almost-win-votes-concede>Why Did Trump Almost Win?</a></li>\n<li><a href=https://www.hoover.org/research/no-evidence-voter-fraud-guide-statistical-claims-about-2020-election>No Evidence For Voter Fraud: A Guide To Statistical Claims About The 2020 Election</a></li>\n</ul>",
			"has_visits":1,
			"no_electoral_majority_image":"../static/images/2012-no-majority.jpg"}}];
		e.temp_election_list = [
			{
				"id":21,
				"year":2044,
				"is_premium":0,
				"display_year":"2044 Children of Dusk"}];
		e.credits = "u/butterenergy. Credit goes to DecstarG for music system, Astro for his modding tutorial and ending template.";
		
		e.global_parameter_json =[
			{
				"model":"campaign_trail.global_parameter",
				"pk":1,
				"fields":{"vote_variable":1.125,
				"max_swing":0.12,
				"start_point":0.94,
				"candidate_issue_weight":10,
				"running_mate_issue_weight":3,
				"issue_stance_1_max":-0.7,
				"issue_stance_2_max":-0.4,
				"issue_stance_3_max":-0.1,
				"issue_stance_4_max":0.1,
				"issue_stance_5_max":0.4,
				"issue_stance_6_max":0.7,
				"global_variance":0.01,
				"state_variance":0.005,
				"question_count":26,
				"default_map_color_hex":"#C9C9C9",
				"no_state_map_color_hex":"#999999"}
			}
		];
		
		e.candidate_json = [
			{
				"model":"campaign_trail.candidate",
				"pk":300,
				"fields":{
					"first_name":"Patrick",
					"last_name":"Walker",
					"election": 21,
					"party":"Democrat",
					"state":"New Jersey",
					"priority":1,
					"description":"The pick who offended no one, and pleased no one. He was just barely well liked enough by the Democratic Party’s many disparate factions to be selected. An expert in maintaining relationships, and navigating the complex world of deals and favors, he’s expertly crafted enough relationships to propel himself to the party’s candidate.<br><br>He’s had a highly experienced past as the governor and then senator of some no-name state, helping it thrive and stand out among the decaying East Coast. He has barely wedged out a compromise that kept everyone from progressives, to union workers, to social conservatives happy. Heading into 2044, the Democratic Party polls behind. He knows he’ll have to pivot in order to have a chance at winning, and he’ll have to piss off at least one faction in order to survive.<br>",
					"color_hex":"#5b5b9a",
					"secondary_color_hex":null,
					"is_active":1,
					"image_url":"https://i.imgur.com/67wbv0s.png",
					"electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>",
					"electoral_loss_message":"<h3>Fake News?</h3>",
					"no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>",
					"description_as_running_mate":null,
					"candidate_score":1,
					"running_mate":false,
					"scrollable":false
				}	
			},
			
			{
				"model":"campaign_trail.candidate",
				"pk":301,
				"fields":{
					"first_name":"Victoria",
					"last_name":"Cortez",
					"election": 21,
					"party":"Republican",
					"state":"Texas",
					"priority":1,
					"description":"<div style='overflow-y:scroll;height:200px;'>NOT PLAYABLE<br><br>The Mad Lady from Texas remaking America in her image, she has risen from popular president to conservative superstar. A devout Evangelical Christian, she is the Christian Awakening movement. She promises a deeply religious administration and a fundamental restructuring of American politics, turning America into a Christian nation.<br><br>She continues down the path Trump laid down, and with ex-President DeSantis as her personal mentor, she is committed to finish the transformation they began.<br><br>She has a total lock on the Evangelical vote, and a strong hold on the Hispanic vote. She rides the wave of her Awakening, and her movement is only getting stronger. She is the first Hispanic and female president of the United States. Already having a supermajority in both the House and the Senate, she cannot be allowed to win a second term, or the last hope for the left may go with it.</div>",
					"color_hex":"#b62525",
					"secondary_color_hex":null,
					"is_active":1,
					"image_url":"https://i.imgur.com/ufKt5Wk.png",
					"electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>",
					"electoral_loss_message":"<h3>Fake News?</h3>",
					"no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>",
					"description_as_running_mate":null,
					"candidate_score":1,
					"running_mate":false,
					"scrollable":true
				}
			},
			
			{
				"model":"campaign_trail.candidate",
				"pk":1003,
				"fields":{
					"first_name":"John",
					"last_name":"Eisner",
					"election": 21,
					"party":"Democrat",
					"state":"Illinois",
					"priority":1,
					"description":"Eisner is a technocratic policy expert from Illinois, popular among his constituents, and well known for his pragmatic, no-nonsense approach to policy. He is widely seen as an experienced, highly effective administrator and policymaker, especially in the field of economics. He is particularly popular among suburban voters, and moderates.<br><br>However, his outspoken Jewish faith may prove controversial while America is still in the grip of a 5th Great Awakening. He also ignores culture war politics and has somewhat of a distaste for progressivism.<br>",
					"color_hex":"#0000ff",
					"secondary_color_hex":null,
					"is_active":0,
					"image_url":"https://i.imgur.com/RTSLQDH.png",
					"electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>",
					"electoral_loss_message":"<h3>Fake News?</h3>",
					"no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>",
					"description_as_running_mate":"Eisner is a technocratic policy expert from Illinois, popular among his constituents, and well known for his pragmatic, no-nonsense approach to policy. He is widely seen as an experienced, highly effective administrator and policymaker, especially in the field of economics. He is particularly popular among suburban voters, and moderates.<br><br>However, his outspoken Jewish faith may prove controversial while America is still in the grip of a 5th Great Awakening. He also ignores culture war politics and has somewhat of a distaste for progressivism.<br>",
					"candidate_score":1,
					"running_mate":true,
					"scrollable":false,
					"partner":"0"
				}
			},
				
			{
				"model":"campaign_trail.candidate",
				"pk":1004,
				"fields":{
					"first_name":"Bernie",
					"last_name":"Sanders",
					"election": 21,
					"party":"Independent/Progressive",
					"state":"Vermont",
					"priority":1,
					"description":"How the hell this man is still alive is beyond me, but through the miracles of either science or black magic, he is turning 103 this year, on his multi-decade long crusade to bring America free healthcare. He still holds sway over the progressive movement and would be the right pick if you wish to attract voters back from the Progressive Party.<br><br>However, his policies fall well outside the American mainstream, and may be a turnoff for moderate voters… Though not the elusive Trump-Bernie voters embedded somewhere within the Cortezian coalition.<br>",
					"color_hex":"#0000ff",
					"secondary_color_hex":null,
					"is_active":0,
					"image_url":"https://i.imgur.com/0zbtdlI.png",
					"electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>",
					"electoral_loss_message":"<h3>Fake News?</h3>",
					"no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>",
					"description_as_running_mate":"How the hell this man is still alive is beyond me, but through the miracles of either science or black magic, he is turning 103 this year, on his multi-decade long crusade to bring America free healthcare. He still holds sway over the progressive movement and would be the right pick if you wish to attract voters back from the Progressive Party.<br><br>However, his policies fall well outside the American mainstream, and may be a turnoff for moderate voters… Though not the elusive Trump-Bernie voters embedded somewhere within the Cortezian coalition.<br>",
					"candidate_score":1,
					"running_mate":true,
					"scrollable":false,
					"partner":"0"
				}
			},
			
			{
				"model":"campaign_trail.candidate",
				"pk":1006,
				"fields":{
					"first_name":"Robby J.",
					"last_name":"Butterfield",
					"election": 21,
					"party":"Independent/Communist",
					"state":"Texas",
					"priority":1,
					"description":"No, dear God no. We finally have a chance to take down Cortez and you’re going to piss it away by choosing him? You want to know about him? Fine. <br><br>Robby J. Butterfield is a self-described progressive, and communist. He is most well known for having uh… Interesting outbursts about gay people. Like, actually to the right of Cortez levels of interesting outbursts. But he is super progressive, I promise guys. He is entirely infamous for having way too big an ego, and not nearly enough accomplishments to justify it.<br><br>You’re really going to pick him? Well, it’s your funeral.<br>",
					"color_hex":"#0000ff",
					"secondary_color_hex":null,
					"is_active":0,
					"image_url":"https://i.imgur.com/JGUtdSF.png",
					"electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>",
					"electoral_loss_message":"<h3>Fake News?</h3>",
					"no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>",
					"description_as_running_mate":"No, dear God no. We finally have a chance to take down Cortez and you’re going to piss it away by choosing him? You want to know about him? Fine. <br><br>Robby J. Butterfield is a self-described progressive, and communist. He is most well known for having uh… Interesting outbursts about gay people. Like, actually to the right of Cortez levels of interesting outbursts. But he is super progressive, I promise guys. He is entirely infamous for having way too big an ego, and not nearly enough accomplishments to justify it.<br><br>You’re really going to pick him? Well, it’s your funeral.<br>",
					"candidate_score":1,
					"running_mate":true,
					"scrollable":false,
					"partner":"0"
				}
			},
				
			{
				"model":"campaign_trail.candidate",
				"pk":1007,
				"fields":{
					"first_name":"Tom",
					"last_name":"Hayes",
					"election": 21,
					"party":"Republican",
					"state":"South Carolina",
					"priority":1,
					"description":"",
					"color_hex":"#0000ff",
					"secondary_color_hex":null,
					"is_active":0,
					"image_url":"../static/images/barack-obama-2012.jpg",
					"electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>",
					"electoral_loss_message":"<h3>Fake News?</h3>",
					"no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>",
					"description_as_running_mate":"",
					"candidate_score":1,
					"running_mate":true,
					"scrollable":false,
					"partner":"1"
				}
			},
			{
				"model":"campaign_trail.candidate",
				"pk":302,
				"fields":{
					"first_name":"Alexandria",
					"last_name":"Ocasio-Cortez",
					"election": 21,
					"party":"Progressive",
					"state":"New York",
					"priority":1,
					"description":"Dummy Example is a veteran from Hell. He loves puppies and magic! Dummy Example will unite America!<br><br>New line<br><br>This is <b>bold</b> and this <i>italic</i>!",
					"color_hex":"#63d971",
					"secondary_color_hex":null,
					"is_active":0,
					"image_url":"../static/images/barack-obama-2012.jpg",
					"electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>",
					"electoral_loss_message":"<h3>Fake News?</h3>",
					"no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>",
					"description_as_running_mate":null,
					"candidate_score":1,
					"running_mate":false,
					"scrollable":false
				}
			},
			
			{
				"model":"campaign_trail.candidate",
				"pk":303,
				"fields":{
					"first_name":"",
					"last_name":"Other Candidates",
					"election": 21,
					"party":"Independent",
					"state":"idk lol",
					"priority":1,
					"description":"<div style='overflow-y:scroll;height:200px;'>cock and balls</div>",
					"color_hex":"#bbbbbb",
					"secondary_color_hex":null,
					"is_active":0,
					"image_url":"",
					"electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>",
					"electoral_loss_message":"<h3>Fake News?</h3>",
					"no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>",
					"description_as_running_mate":null,
					"candidate_score":1,
					"running_mate":false,
					"scrollable":true
				}
			},
			
			{
				"model":"campaign_trail.candidate",
				"pk":1009,
				"fields":{
					"first_name":"Adam",
					"last_name":"Fate",
					"election": 21,
					"party":"Fatalist",
					"state":"Frankfurt",
					"priority":1,
					"description":"Dummy Example is a veteran from Hell. He loves puppies and magic! Dummy Example will unite America!<br><br>New line<br><br>This is <b>bold</b> and this <i>italic</i>!",
					"color_hex":"#249991",
					"secondary_color_hex":null,
					"is_active":0,
					"image_url":"../static/images/barack-obama-2012.jpg",
					"electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>",
					"electoral_loss_message":"<h3>Fake News?</h3>",
					"no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>",
					"description_as_running_mate":null,
					"candidate_score":1,
					"running_mate":false,
					"scrollable":false}
			}
		];
		
		e.running_mate_json = [
			{"model":"campaign_trail.running_mate","pk":2001,"fields":{"candidate":300,"running_mate":1003}},	//Walker-Eisner
			{"model":"campaign_trail.running_mate","pk":2002,"fields":{"candidate":300,"running_mate":1004}},	//Walker-Sanders
			// {"model":"campaign_trail.running_mate","pk":2003,"fields":{"candidate":300,"running_mate":1005}},	//Walker-Webb (Deprecated)
			{"model":"campaign_trail.running_mate","pk":2004,"fields":{"candidate":300,"running_mate":1006}},	//Walker-Butterfield
			{"model":"campaign_trail.running_mate","pk":2005,"fields":{"candidate":301,"running_mate":1007}}];	//Cortez-Hayes

// This is just some background stuff.

document.getElementById("header").src = "https://i.imgur.com/znkytKR.png"
nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#171745"
nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#CECED5"
document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title
$(".container")[0].style.backgroundColor = "#102030"
document.body.background = "https://i.imgur.com/mlvQ6mE.png" 

// Initialise custom music

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#999999;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";

    volumeSlider.value = audio.volume;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      audio = $("#campaigntrailmusic")[0];
      audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      audio.currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}


// Track list

var soundtracks = {
  0: {
	name: "Upon the Cross of Democracy",
    tracklist: [
	  {
        "name": "Resistance - Skillet",
        "url": "https://audio.jukehost.co.uk/hcimBTl6ngY9jkLbTOOVtqpWFMsqwqA5"
      },
	  {
        "name": "Hold Back the Night - The Protomen",
        "url": "https://audio.jukehost.co.uk/0CWnsgkyk5ob6TBwssPmWM0VwGxlxhRG"
      },
	  {
        "name": "Europa - Globus",
        "url": "https://audio.jukehost.co.uk/ocm8QJiRuQIL4zTuU1t6nCPAD1LCa0F9"
      },
	  {
        "name": "Starset - It has Begun",
        "url": "https://audio.jukehost.co.uk/xAmtGnNQVvFJrLL9TpRLaRcErgPgT5Vh"
      },

    ]
  }
}

// Set up new music player

newMusicPlayer()

RecReading=true

// More Info

info = function() {
    document.getElementById("screenintro1").style.display = "none" //hides the page with the given name
    document.getElementById("screenintro2").style.display = "initial" //shows the page with the given name
}

back = function() {
    document.getElementById("screenintro2").style.display = "none" //hides the page with the given name
    document.getElementById("screenintro1").style.display = "initial" //shows the page with the given name
}

function addDynamicCSS() {
    var css = `
        .inner_window_question h3 .mytooltip{
            background-color: #b6e1fc;
        }

        .mytooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
            background-color: #b6e1fc;
        }

        .mytooltip .mytooltiptext {
            width: 240px;
            background-color: white;
            color: black;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 99;
            bottom: 20%;
            left: 20%;
            margin-left: -90px;
            opacity: 0;
            transition: opacity 0.3s;
            border: 1px solid black;
            pointer-events: none;
            font-size: 13px !important;
            line-height: 1.5em !important;
            font-weight: normal !important;
            font-style: normal !important;
        }

        .mytooltip .mytooltiptext img {
            max-width: 240px;
            height: auto;
        }

        .mytooltip:hover .mytooltiptext {
            opacity: 1;
            transition-delay: 0.5s;
        }
    `;

    var styleElem = document.createElement('style');
    styleElem.type = 'text/css';
    
    styleElem.appendChild(document.createTextNode(css));
    
    document.head.appendChild(styleElem);
}


addDynamicCSS();

tooltipList = [
    {searchString: "3rd Intifada", explanationText: "A mass uprising of Palestinians that spiraled into the 2035 Arab-Israeli War. Nearly coincided with the outbreak of WW3. Led to the complete destruction of Palestine, and the mass displacement of the Palestinian people."},
	{searchString: "Andrew Yang", explanationText: "Andrew Yang. Current leader of the American Futurist Party. Managing a balance between left and right. Has to answer to his masters at SpaceX."},
	{searchString: "African Americans", explanationText: "Socially conservative, slipping away from the Democrats. The origin point for the 5th Great Awakening."},
	{searchString: "Automation", explanationText: "Automation, accelerated under Cortez, killing the Midwest as we speak."},
	{searchString: "automation", explanationText: "Automation, accelerated under Cortez, killing the Midwest as we speak."},
	{searchString: "Awakening", explanationText: "5th Great Awakening. Revival of the Christian faith that began in the late 2030's. Evangelical, 40% of the population, fanatical."},
	{searchString: "Catholics", explanationText: "Folks loyal to the church of Rome. Western members at risk of schism over the increasingly conservative direction of the church under Pope Robert Sarah I."},
	{searchString: "People's Republic of China", explanationText: "Victors of the 3rd World War. Hegemons of the new world order."},
	{searchString: "China", explanationText: "Victors of the 3rd World War. Hegemons of the new world order."},
	{searchString: "Chinese", explanationText: "Victors of the 3rd World War. Hegemons of the new world order."},
	{searchString: "Christian", explanationText: "A religion based on the sacrifice and ascension of God become man. Taking over once again. 80% of the population and rising."},
	{searchString: "Christianity", explanationText: "A religion based on the sacrifice and ascension of God become man. Taking over once again. 80% of the population and rising."},
	{searchString: "Cold War", explanationText: "A Second Cold War that began in the year 2039. A 3-Way Cold War between the Eurasian Union, People’s Republic of China, and the United States of America."},
	{searchString: "Conservative", explanationText: "A term used to refer to the non-Christian right. Subfactions include the populists, first mobilized under Trump in the Midwest, and the militarists, who rose in prominence after the 3rd World War."},
	{searchString: "Conservative Civil War", explanationText: "Informal term to refer to the struggle between Christians and Conservatives for control of the right. Sometimes known as the Christian-Conservative divide."},
	{searchString: "Conservatives", explanationText: "A term used to refer to the non-Christian right. Subfactions include the populists, first mobilized under Trump in the Midwest, and the militarists, who rose in prominence after the 3rd World War."},
	{searchString: "Cortez’s America", explanationText: "A nightmarish fever dream of Christian radicalism, guided by Cortez's Great Reset and DeSantis's Project 2025 Program. She's already halfway there, don't let her take the other half as well."},
	{searchString: "Cortezian Coalition", explanationText: "The Republican coalition assembled by Cortez in the 2040 election. Including the Christian Right as its core and center, a somewhat unhappy Conservative faction, Hispanics, and Catholics."},
	{searchString: "Musk", explanationText: "CEO of SpaceX. Richest man in the world. The real power behind the American Futurist Party."},
	{searchString: "Elon Musk", explanationText: "CEO of SpaceX. Richest man in the world. The real power behind the American Futurist Party."},
	{searchString: "Eurasian Pact", explanationText: "The alliance of Eurasia-aligned puppet states that emerged after the 3rd World War."},
	{searchString: "Eurasia", explanationText: "Adversaries in the 3rd World War. Potential ally in the fight against China."},
    	{searchString: "Eurasian", explanationText: "Adversaries in the 3rd World War. Potential ally in the fight against China."},
	{searchString: "Eurasians", explanationText: "Adversaries in the 3rd World War. Potential ally in the fight against China."},
	{searchString: "Eurasian Union", explanationText: "Adversaries in the 3rd World War. Potential ally in the fight against China."},
	{searchString: "Fighter Generation", explanationText: "Generation Z. Veterans of the 3rd World War."},
	{searchString: "Futurism", explanationText: "A new ideology based upon the advancement of technology, and especially the colonization of space. Led by figures such as Elon Musk and Andrew Yang."},
	{searchString: "Futurist", explanationText: "A new ideology based upon the advancement of technology, and especially the colonization of space. Led by figures such as Elon Musk and Andrew Yang."},
	{searchString: "Great Reset", explanationText: "Cortez’s cheekily-named plan to transform the United States towards her Christian nationalist agenda. Said to be a continuation of DeSantis’s Project 2025. Klaus Schwab is probably crying somewhere"},
	{searchString: "green states", explanationText: "As of 2040, there are three main political parties, each with a national color. Republican, Democrat, and Progressive, with red, blue, and green respectively."},
	{searchString: "Havana Internationale", explanationText: "Alliance of Communist Latin American countries, being backed by China, though relations have soured lately."},
	{searchString: "Israel and Judah", explanationText: "The growing Israeli Haredi population eventually led to irreconcilable differences, leading to the nation splitting in two."},
	{searchString: "Cortezian Tech Giants", explanationText: "Silicon Prairie. Tech giants built after the 3rd World War, after the collapse of Silicon Valley. Located primarily in Texas."},
	{searchString: "Latinx", explanationText: "Effectively a racial slur against Hispanic people since the 2020's."},
	{searchString: "Newsom", explanationText: "Senate minority leader. Former governor of California."},
	{searchString: "Ocasio-Cortez", explanationText: "The leader of the Progressive Party. Split the Democratic party in two."},
	{searchString: "Old Internet", explanationText: "Silicon Valley. World Wide Web. Largely destroyed in the 3rd World War. Still only exists in fragments and archives."},
	{searchString: "Patriot Party", explanationText: "Party that formed uh... Just now! Divided between moderate and extremist wings, one thinks Cortez did too much, the other thinks not enough."},
	{searchString: "Protection of the Unborn Act", explanationText: "Part of Cortez's Great Reset Program. A nation-wide abortion ban, after Republicans have been chipping away at reproductive rights for decades by this point."},
	{searchString: "Progressive Party", explanationText: "Party lead by Alexandria Ocasio-Cortez. Split away from the Democrats in 2040 after the Buchanan presidency."},
	{searchString: "Taylor Swift", explanationText: "Retired musician. Rumored to still be progressive, still has some pull among the Fighter Generation."},
	{searchString: "Traditional Marriage Bill", explanationText: "Exactly what it sounds like. An enshrining of traditional marriage into law, and the de-recognition of same-sex marriages."},
	{searchString: "TRINITY", explanationText: "America's orbital anti-nuclear defense array. Hundreds of satellites in low earth orbit. Estimated 99.9% effectiveness in shooting down missiles. America's guardian angel made of steel."},
	{searchString: "United Silicon", explanationText: "Unified Tech Conglomorate after the Silicon Valley Crash of 2022. Last of the Californian tech giants."},
	{searchString: "Union of Germany", explanationText: "The semi-democratic regime that rose to power in Germany after the revolt of the military and an AfD coup. On friendlier terms than most in the Eurasia Pact."},
	{searchString: "Victoria Cortez", explanationText: "The mad lady of the right. Has already served one term already. Believes she is being guided by a mandate from God to transform America forever."},
	{searchString: "Yang", explanationText: "Andrew Yang. Current leader of the American Futurist Party. Managing a balance between left and right. Has to answer to his masters at SpaceX."},
	
	{searchString: "Cortez’s", explanationText: "The mad lady of the right. Has already served one term already. Believes she is being guided by a mandate from God to transform America forever."},
	{searchString: "Cortez", explanationText: "The mad lady of the right. Has already served one term already. Believes she is being guided by a mandate from God to transform America forever."},
];

HistHexcolour=["#b62525","#5b5b9a","#bbbbbb","#63d971"];
HistName=[" Victoria Cortez"," Landon Madoff"," Other Candidates"," Alexandria Ocasio-Cortez"];
HistEV=[402,136,0,0];
HistPV=["107,951,648","80,355,939","1,173,546","12,493"];
HistPVP=["57.0%","42.4%","0.6%","0.0%"];