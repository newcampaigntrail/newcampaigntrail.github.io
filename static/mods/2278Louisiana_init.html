campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 22,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 21,
        "fields": {
            "year": 2278,
            "display_year": "2278Louisiana",
            "summary": "<robco>Largely a frontier area that lacked the glamor of New Orleans and the governmental importance of Baton Rouge, the southeastern swamps of Louisiana (now known informally as the Plaquemines) have been independent from the rest of the Big Easy for centuries. New Orleans, having faced the brunt of the atomic bomb’s horrific effects, left much of the Plaquemines isolated. The immediate effects, as holocaustic as they are, had most of the New Orleans metropolitan area flee elsewhere, creating a frontier to a place which no longer existed. The swamps, now irradiated and increasingly inhospitable, created isolated communities which only had few lifelines in crumbling highways that were often taken over by raiders. Eventually, a symbiotic relationship began to thrive between settlements which worked with the raiders against those that didn’t, and slowly but surely a type of government began to form, which tied these communities and semi-nomadic raiders together. Over the years, elections of Presidents have happened frequently and consistently as part of the agreement between civilian and “militia” sections of society.</robco>",
            "image_url": "https://files.catbox.moe/ev9av8.png",
            "winning_electoral_vote_number": 78,
            "advisor_url": "https://files.catbox.moe/co2gk0.png",
            "recommended_reading": "<ul>\n<li><a href=https://www.chicagotribune.com/opinion/editorials/ct-edit-chicago-tribune-biden-endorsement-20200925-lnyxsb5qvrftnjjmj3rnzj33jy-story.html>Our Case For Joe Biden</a></li>\n<li><a href=https://nationalinterest.org/feature/case-trump-166808>The Case For Trump</a></li>\n<li><a href=https://www.npr.org/2020/11/18/935730100/how-biden-won-ramping-up-the-base-and-expanding-margins-in-the-suburbs>How Biden Won: Ramping Up The Base And Expanding Margins In The Suburbs</a></li>\n<li><a href=https://www.prospectmagazine.co.uk/politics/donald-trump-joe-biden-us-election-almost-win-votes-concede>Why Did Trump Almost Win?</a></li>\n<li><a href=https://www.hoover.org/research/no-evidence-voter-fraud-guide-statistical-claims-about-2020-election>No Evidence For Voter Fraud: A Guide To Statistical Claims About The 2020 Election</a></li>\n</ul>",
            "has_visits": 1,
            "no_electoral_majority_image": "../static/images/2012-no-majority.jpg"
        }
    }
]
campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 300,
        "fields": {
            "first_name": "Thomas \"Buster\"",
            "last_name": "Languedoc",
            "election": 21,
            "party": "Raiders, Merchants and Mercenaries",
            "state": "Raceland",
            "priority": 1,
            "description": "<p> Thomas “Buster” Languedoc, is a fine sample of the region’s exemplary stock: Anglo-French, some even go as far as saying his family stems from a Norman Viking family of the original conquerors of England.<br>Myth-making aside, Thomas is reclusive, paranoid and was largely elected for his terrifying reputation of bloodlust and cruelty, traits often seen as “necessary” for “tough leadership”. Simultaneously, Thomas keeps an entourage of strange, eccentric characters who depend on his charity to stay safe and “innocent” from the unforgiving Wasteland. <br>Often criticized by the relatively free press of the Plaquemines as “keeping a clique of coddled degenerates”, Thomas often cites humanitarian purposes – a dying art in a land of raiders. Besides these \"wholesome\" pet projects, Buster is, hypocritically enough, significantly influenced by a social-darwinist, combatocratic vision of the world.</p>",
            "color_hex": "#56571c",
            "secondary_color_hex": null,
            "is_active": 1,
            "image_url": "https://files.catbox.moe/o9858q.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 14579,
        "fields": {
            "first_name": "Rangreuse",
            "last_name": "Liam",
            "election": 21,
            "party": "Intellectuals and Families",
            "state": "Yefferson",
            "priority": 1,
            "description": ".",
            "color_hex": "#1c4d57",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png", //thismightnotmatter
            "electoral_victory_message": ".",
            "electoral_loss_message": ".",
            "no_electoral_majority_message": ".",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 14580,
        "fields": {
            "first_name": "Omar",
            "last_name": "Qulaques",
            "election": 21,
            "party": "Intellectuals and Families",
            "state": "Yefferson",
            "priority": 1,
            "description": ".",
            "color_hex": "#1c4d57",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png", //thismightnotmatter
            "electoral_victory_message": ".",
            "electoral_loss_message": ".",
            "no_electoral_majority_message": ".",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 14581,
        "fields": {
            "first_name": "Walter",
            "last_name": "Lessoile",
            "election": 21,
            "party": "Families",
            "state": "Desalemans",
            "priority": 1,
            "description": ".",
            "color_hex": "#750385",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png", //thismightnotmatter
            "electoral_victory_message": ".",
            "electoral_loss_message": ".",
            "no_electoral_majority_message": ".",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 14582,
        "fields": {
            "first_name": "Oscar",
            "last_name": "Chiasson",
            "election": 21,
            "party": "Intellectuals",
            "state": "Yefferson",
            "priority": 1,
            "description": ".",
            "color_hex": "#85030c",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png", //thismightnotmatter
            "electoral_victory_message": ".",
            "electoral_loss_message": ".",
            "no_electoral_majority_message": ".",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 14583,
        "fields": {
            "first_name": "Ephraim",
            "last_name": "Lewden",
            "election": 21,
            "party": "Mercenaries",
            "state": "Plaquemines",
            "priority": 1,
            "description": ".",
            "color_hex": "#79b3b0",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png", //thismightnotmatter
            "electoral_victory_message": ".",
            "electoral_loss_message": ".",
            "no_electoral_majority_message": ".",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 14584,
        "fields": {
            "first_name": "Charlotte",
            "last_name": "Bakstansky",
            "election": 21,
            "party": "Merchants",
            "state": "Violet",
            "priority": 1,
            "description": ".",
            "color_hex": "#028c00",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png", //thismightnotmatter
            "electoral_victory_message": ".",
            "electoral_loss_message": ".",
            "no_electoral_majority_message": ".",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 14585,
        "fields": {
            "first_name": "Mordechai",
            "last_name": "Shahar",
            "election": 21,
            "party": "Merchants",
            "state": "Violet",
            "priority": 1,
            "description": ".",
            "color_hex": "#028c00",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png", //thismightnotmatter
            "electoral_victory_message": ".",
            "electoral_loss_message": ".",
            "no_electoral_majority_message": ".",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 14586,
        "fields": {
            "first_name": "Indon",
            "last_name": "Young",
            "election": 21,
            "party": "Mercenaries",
            "state": "Solaria",
            "priority": 1,
            "description": ".",
            "color_hex": "#028c00",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png", //thismightnotmatter
            "electoral_victory_message": ".",
            "electoral_loss_message": ".",
            "no_electoral_majority_message": ".",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 14587,
        "fields": {
            "first_name": "Velan",
            "last_name": "Bergee",
            "election": 21,
            "party": "Intellectuals",
            "state": "Meadow",
            "priority": 1,
            "description": ".",
            "color_hex": "#028c00",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png", //thismightnotmatter
            "electoral_victory_message": ".",
            "electoral_loss_message": ".",
            "no_electoral_majority_message": ".",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 14588,
        "fields": {
            "first_name": "Klane Hanks",
            "last_name": "Christiansen",
            "election": 21,
            "party": "Families",
            "state": "Whoma",
            "priority": 1,
            "description": ".",
            "color_hex": "#028c00",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png", //thismightnotmatter
            "electoral_victory_message": ".",
            "electoral_loss_message": ".",
            "no_electoral_majority_message": ".",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 14565,
        "fields": {
            "first_name": "John \"Fifteen Bullets\"",
            "last_name": "Shane",
            "election": 21,
            "party": "Raiders",
            "state": "Violet",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#56571c",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://files.catbox.moe/53ysz7.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "<p>Fifteen Bullets hails from a family of peasants-turned-violent-raiders that found purpose in looting the border communities of New Orleans in the frontiers of Violet Parish. Having found less enjoyment in that activity as his sole form of income, John decided to research and read more philosophy and political books in the Great Library of Chassis City. Having gained further literacy skills and actual political views, Shane aligned with Languedoc's political views and found interest in his dichotomy of protecting the weak whilst advocating for social-darwinist muscle-politics. Nonetheless, Shane has found a strong desire to present himself as more than just a yes-man, and will often struggle with some of Languedoc's proposals, meaning both \nwill have to keep each other happy to keep the ticket going.</p>",
            "candidate_score": 1,
            "running_mate": true
        }
    }
]
campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 109261,
        "fields": {
            "candidate": 300,
            "running_mate": 14565
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 109262,
        "fields": {
            "candidate": 14581,
            "running_mate": 14588
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 109263,
        "fields": {
            "candidate": 14582,
            "running_mate": 14587
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 109264,
        "fields": {
            "candidate": 14583,
            "running_mate": 14586
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 109265,
        "fields": {
            "candidate": 14584,
            "running_mate": 14585
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 123611,
        "fields": {
            "candidate": 14579,
            "running_mate": 14580
        }
    }
]
campaignTrail_temp.opponents_default_json = [
    {
        "election": 21,
        "candidates": [
            300,
            14579,
            14581,
            14582,
            14583,
            14584
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 21,
        "candidates": [
            300,
            14579,
            14581,
            14582,
            14583,
            14584
        ]
    }
]
campaignTrail_temp.temp_election_list = [
    {
        "id": 21,
        "year": 2278,
        "is_premium": 0,
        "display_year": "2278Louisiana"
    }
]

campaignTrail_temp.credits = "/u/RagyTheKindaHipster"

function addDynamicCSS() {
    var css = `

        label {
          display:inline;
        }

        .inner_window_question h3 .mytooltip{
            background-color: #007308;
        }

        .mytooltip {
            position: relative;
            display: inline-block;
            cursor: pointer;
            background-color: #007308;
        }

        .mytooltip .mytooltiptext {
            width: 240px;
            background-color: #007308;
            color: 00ff11;
            text-align: center;
            border-radius: 6px;
            padding: 10px;
            position: absolute;
            z-index: 99;
            bottom: 20%;
            left: 20%;
            margin-left: -90px;
            opacity: 0;
            transition: opacity 0.1s;
            border: 1px solid black;
            pointer-events: none;
            font-size: 13px !important;
            line-height: 1.5em !important;
            font-weight: normal !important;
            font-style: normal !important;
        }

        .mytooltip .mytooltiptext img {
            max-width: 240px;
            height: auto;
        }

        .mytooltip:hover .mytooltiptext {
            opacity: 1;
            transition-delay: 0.5s;
        }
    `;

    var styleElem = document.createElement('style');
    styleElem.type = 'text/css';
    
    styleElem.appendChild(document.createTextNode(css));
    
    document.head.appendChild(styleElem);
}
addDynamicCSS();
tooltipList = [
  {searchString: "Warlords", explanationText: "<img src=https://files.catbox.moe/t6lhiy.png> Frontier paramilitaries that have autonomy exceeding regular paramilitaries."},
  {searchString: "Battle Of Destrekhan", explanationText: "<img src=https://files.catbox.moe/sdxnzb.png> A battle in the banks of the Mississippi that ended in a decisive Plaqueminian victory."},
  {searchString: "Gangmen", explanationText: "Troublemakers from Landsbone. Hated by the locals, but rejected in Raceland and Whoma. They often lobby for the creation of their own Parish."},
  {searchString: "Palereeys", explanationText: "A Plaquemines-ism referring to paramilitaries of varying sizes and influence."},
  {searchString: "Citizen Houses", explanationText: "The civilian assemblies of local areas in Parishes, of varying numbers and geographic administration. They work side-by-side with the Senates and Paramilitary Assemblies."},
  {searchString: "Friendship Bridge", explanationText: "<img src=https://files.catbox.moe/5i76ys.png><br> The only bridge connecting Kouba-Timken and the rest of the Big Easy."},
  {searchString: "Kouba-Timken", explanationText: "<img src=https://files.catbox.moe/hkts2h.png> A tiny Mississippi African kingdom surrounded by us."},
  {searchString: "\"leeway\" bills", explanationText: "Bills enacted by most Parishes (except Yefferson, Meadow, Violet and Desalemans) which protects the rights of raiders to accidentally trespass into private property, as long as the incident was not intentional or harmed any persons within the property."},
  {searchString: "Scruffy", explanationText: "The first of many in Thibodaux Camp. He's just a dog, but he loves you, and everyone else in the camp, so much."},
  {searchString: "Rosie", explanationText: "One of the humans in Thibodaux Camp. A 20-something lady that speaks (and listens) to plushies and rocks back and forth in a pile of them to not get panic attacks. Claims to be able to speak to other objects. Lucky to be alive."},
  {searchString: "Baton Rouge", explanationText: "<img src=https://files.catbox.moe/wzbtj1.png>The Republic of Baton Rouge, a purported remnant of the United States federal government. Despises our way of life, a state of grey bureaucrats."},
  {searchString: "Commandments of our Confederation", explanationText: "<img src=https://files.catbox.moe/d3g2fe.png>The defining document of our Confederation, part of its wider declaration of secession from what is now Baton Rouge."},
  {searchString: "Rangreuse", explanationText: "<img src=https://files.catbox.moe/a76dxj.png>Your opponent in this election. Part of the Yefferson Free Church, huge anti-war dove, trade isolationist, in favor of reducing raids and quite a bit racist."},
  {searchString: "Golden Rule", explanationText: "The primary commandment and guiding philosophy of the Yefferson Free Church."},
  {searchString: "Eden Isle", explanationText: "<img src=https://files.catbox.moe/hoesit.png>A tiny enclave of prosperity in the wildest, most merciless and brutal parts of the Big Easy."},
  {searchString: "Big Easy", explanationText: "The local name for the area formerly called Louisiana."},
  {searchString: "Nuclear Swamp", explanationText: "<img src=https://files.catbox.moe/8oj7v8.png> A hellhole beyond imagination. Mostly ghouls and Super Mutants outside of a few enclaves."},
  {searchString: "Maurepas", explanationText: "Full name is Manchac Research Zone of Lac Maurepas. Extreme francophile catholics that believe in mass scientific progress - they fund Jet and other drugs all across the Big Easy, among other things like the production of advanced weapons."},
  {searchString: "Chassis City Declaration", explanationText: "An expansion to the original founding documents of our Confederation, it delineates how the polity functions at a local and \"national\" level."},
  {searchString: "Grand Dragon Empire", explanationText: "Despite hundreds of years, profound racism thrives still with lynching bands, all dedicated to maintaining a Whites-only republic with British Israelite ideals. Their wider potential is with exterminating all non-White persons across Louisiana and Mississippi, and then unifying the United States."},
  {searchString: "Albert Roland", explanationText: "Nicknamed \"the last good bureaucrat\". Loves working within the system and all its strange, decentralized and confusing legal, social and political structures."},
  {searchString: "Zadok", explanationText: "Senator for Yefferson Parish. One of your few allies there."}

 ];

campaignTrail_temp.modBoxTheme = {
  "header_color" : "#000000",
  "header_text_color" : "#00ff11",
  "description_text_color" : "#00ff11",
  "description_background_color" : "#000000",
  "main_color" : "#008a09",
  "secondary_color" : "#003203",
  "ui_text_color": "#00ff11"
}
//#startcode

    

    document.head.innerHTML += `<style>
    h3 {
      font-size:1.17em!important;
      color: #00ff11;
    }
    h4 {
      color: #00ff11;
    }
    h2 {
      color: #00ff11;
    }
    h1 {
      color: #00ff11;
    }
    p {
        color: #00ff11;
    }
    tooltiptext {
        color: #00ff11;
    }
    b {
        color: #00ff11;
    }
    label {
        color: #00ff11;
    }
    robco {
        color: #00ff11;
        font-size:1em!important;
        font-family: Arial, "Helvetica Neue", Helvetica, sans-serif!important;
    }
    robcored {
      font-family: Times New Roman;
      font-size: 1em;
      text-transform: uppercase;
      color: #00ff11;
    }
    robcodeath {
      font-family: Times New Roman;
      font-size: 1em;
      font-style: italic;
      text-shadow: violet 1px 1px 1px;
      color: #00ff11;
    }
    robcodeathlarge {
      font-family: Times New Roman;
      font-size: 2em;
      font-style: italic;
      text-shadow: violet 1px 1px 1px;
      color: #00ff11;
    }
    label {
      font-size:1em!important;
      font-family: Arial, "Helvetica Neue", Helvetica, sans-serif!important;
    }
  body {display:flex!important;}
  #game_window{max-width:1000px;}
button {
            appearance: none;
            background-color: #000!important;
            border: #0f1!important;
            color: #0f1!important;
}
button:active {
            appearance: none;
            background-color: #0f1!important;
            border: #000!important;
            color: #000!important;
}
button:hover {
            appearance: none;
            background-color: #32803e!important;
            border: #119e27!important;
            color: #0c2610!important;
}
select {
    color: #0f1;
    appearance: none;
    box-sizing: border-box;
    align-items: center;
    -webkit-rtl-ordering: logical;
    background-color: #000;
    cursor: default;
    margin: 0em;
    white-space: pre;
    border-width: 2px;
    border-style: solid;
    border-color: light-dark(rgb(19, 84, 29), rgb(29, 133, 44));
    border-image: initial;
    border-radius: 0px;
}
    </style>`

campaignTrail_temp.achievements = {
  "HAHAHAHA." : {
      "image" : "https://files.catbox.moe/hu4wri.png",
      "description" : "Undo an ember of democracy.",
      "cannotBeCheated" : true
  },
  "Sleep Tight" : {
      "image" : "https://files.catbox.moe/hlezn9.png",
      "description" : "Defend the weak and burn the world with it.",
      "cannotBeCheated" : true
  },
  "Le Chauviniste" : {
      "image" : "https://files.catbox.moe/rgmp50.png",
      "description" : "Add a whole new electorate to the mix.",
      "cannotBeCheated" : true
  },
  "Imperator" : {
      "image" : "https://files.catbox.moe/u4200x.png",
      "description" : "Annex as much territory as possible.",
      "cannotBeCheated" : true
  },
  "Good Natured" : {
      "image" : "https://files.catbox.moe/0qqx46.png",
      "description" : "Solve every conflict diplomatically.",
      "cannotBeCheated" : true
  },
  "My Way" : {
      "image" : "https://files.catbox.moe/xqz9r2.png",
      "description" : "Pay for what you've done.",
      "cannotBeCheated" : true
  },
  "What Goes Around Comes Around" : {
      "image" : "https://files.catbox.moe/ab1cdy.png",
      "description" : "Play stupid games, win stupid prizes.",
      "cannotBeCheated" : true
  },
  "Durr-mo-crud-cy" : {
      "image" : "https://files.catbox.moe/zjix2g.png",
      "description" : "Win the election because of annexed territory.",
      "cannotBeCheated" : true
  },
  "Double Kill" : {
      "image" : "https://files.catbox.moe/lt74el.png",
      "description" : "Ruin two lives.",
      "cannotBeCheated" : true
  },
  "Bayou King" : {
      "image" : "https://files.catbox.moe/p0f76k.png",
      "description" : "Win 130 electoral votes or more.",
      "cannotBeCheated" : true
  },
  "Venice Of The South" : {
      "image" : "https://files.catbox.moe/azwdzc.png",
      "description" : "War never changes, does it?.",
      "cannotBeCheated" : true
  },
  "It Was Never Meant To Be" : {
      "image" : "https://files.catbox.moe/jh1mu7.png",
      "description" : "Betray those who can't fend for themselves.",
      "cannotBeCheated" : true
  }
}

corrr = '\n              <h2><robco>ROBCO INDUSTRIES ENTERTAINMENT SYSTEM<robco></h2><font id="wittyquote" size="4" color="white"><em><robco>COPYRIGHT 2075-2077 ROBCO INDUSTRIES</robco></em></font>\n            ';

    
nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#000000";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#000000";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#143008";

document.getElementById("header").src = "https://files.catbox.moe/3np81n.png";

document.body.background = "https://files.catbox.moe/84fxq6.png";


document.getElementById("inner_window_1").children[1].innerHTML = `<robco><b>CAMPAIGN TRAIL VERSION 2.1<br>PUBLIC DOMAIN VIDEO-GAME FOR THE R.I.E.S.</b><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></robco>`;

document.head.innerHTML += "<style>#results_container {color:#00ff11;} .election_description_window {background-color:#000000!important} .campaign_trail_start_emphasis {background-color:#00ff11!important; color:#00ff11!important} .game_start {color:#00ff11!important} .inner_window_front {background-color:#000000!important}.inner_window_w_desc {background-color:#000000!important;} .person_description_window {background-color:#000000!important} .person_summary {color:#00ff11!important} .inner_window_w_desc {color:#00ff11!important} .description_window_small {background-color:#000000!important} </style>";

// Initialise custom music

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div-timetrack");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#1c1c1c;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";

    volumeSlider.value = audio.volume;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div-gusic");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#000000;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      audio = $("#campaigntrailmusic")[0];
      audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      audio.currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}


// Track list

soundtracks = {
  0: {
    name: "Big Easy Blues Radio",
    tracklist: [
      {
        "name": "Delmore Brothers - I've Got The Big River Blues",
        "url": "https://files.catbox.moe/zlfo91.mp3"
      },
      {
        "name": "Mississippi Fred McDowell - Freight Train Blues",
        "url": "https://files.catbox.moe/r91a5s.mp3"
      },
      {
        "name": "Robert Johnson - Four Until Late",
        "url": "https://files.catbox.moe/o6lcv4.mp3"
      },
      {
        "name": "The Monroe Brothers - New River Train",
        "url": "https://files.catbox.moe/i1s0n8.mp3"
      },
      {
        "name": "Bill Monroe - Cryin' Holy Unto My Lord",
        "url": "https://files.catbox.moe/77jyec.mp3"
      },
      {
        "name": "Dock Walsh - Going Back To Jericho",
        "url": "https://files.catbox.moe/zzoek6.mp3"
      }
    ]
  }
}

// Set up new music player

newMusicPlayer()
//#endcode
