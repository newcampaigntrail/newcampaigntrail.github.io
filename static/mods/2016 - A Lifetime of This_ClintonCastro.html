campaignTrail_temp.questions_json = [
    {
        "model": "campaign_trail.question",
        "pk": 1042,
        "fields": {
            "priority": 1,
            "description": "Five years out from that bruising 2008 loss, you’re finally free of government work. The blood clot behind your ear scared the hell out of everyone, Bill especially, but you’re recovered now. The party’s already treating you like you’re the nominee-in-waiting for 2016, which is flattering (if a bit presumptuous!). Ready for Hillary is forming without your say-so, and major donors are calling daily. But what’s your next move while they wait?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 20776,
        "fields": {
            "priority": 2,
            "description": "Well, Antonin Scalia’s dead. The Supreme Court is now evenly split between liberals and conservatives. But McConnell, that cynical bastard, is already saying they won’t even hold hearings for Obama’s nominee. Merrick Garland, they say, is a moderate as they come, and yet they’re still stonewalling. The press wants your take on this unprecedented obstruction. What’s your line?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1044,
        "fields": {
            "priority": 2,
            "description": "You wake up to terrifying news coming from Orlando. God, 49 people dead at a gay nightclub, most of them Latino. The worst mass shooting in American history, and it happened at a place that was supposed to be a sanctuary. Trump’s already exploiting it, calling for his Muslim ban or whatever’s in his mind. How do you respond to this horror?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1046,
        "fields": {
            "priority": 2,
            "description": "Just prior to the convention, you selected Tim Kaine, a Senator from Virginia, as your running mate. Safe Tim, Boring Tim, Beautiful Tim, but still a Tim. Some in the progressive wing of your party hoped for a bolder pick to energize the base. What strategic calculation led you to Kaine?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1051,
        "fields": {
            "priority": 3,
            "description": "Your primary rival, Senator Bernie Sanders of Vermont, ultimately came up short in his challenge for the nomination. Thing is, he still won’t fully endorse you. His people are planning protests at the convention, and some polls show 40% of them might not vote for you. He wants a primetime speaking slot, of course. Will you offer him one?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1043,
        "fields": {
            "priority": 4,
            "description": "The FBI director, James Comey, has delivered a sharp critique of your email practices as Secretary of State, calling them “extremely careless,” though not negligent, and he recommended no charges. He might as well have indicted you politically, that little prick. What’s your response to his findings?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1045,
        "fields": {
            "priority": 5,
            "description": "Somehow, you’ve made it. In the halls of the Democratic National Convention in Philadelphia, chants of “Hillary! Hillary!” drown out every other sound. As you step onto the stage, you look at some of the banners they put up: Democratic presidents — from FDR to JFK to Obama. Knowing that your nomination itself is already a historic feat, what message will you emphasize as you accept your party’s nomination for President of the United States?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1055,
        "fields": {
            "priority": 6,
            "description": "There’s no arguing that your husband, former President Bill Clinton, has been very interested in engaging with your campaign. Although this did not go as well in 2008, he’s been wondering if you’d like his input this time around. Do you plan to make him a part of your campaign this season?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1052,
        "fields": {
            "priority": 6,
            "description": "Overnight, a truck plowed through Bastille Day revelers in Nice, France, claiming 84 lives in an attack claimed by the Islamic State. The footage has dominated global airwaves, with critics demanding a ‘stronger’ response. How do you frame this tragedy on the campaign trail, including fears this could recur on American soil?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1077,
        "fields": {
            "priority": 6,
            "description": "You glance at your iPad, scrolling through the reactions to the Kaine announcement. Sure enough, the Jacobin crowd is furious; they call him a corporate centrist, a supporter of bank deregulation, a disappointment. They wanted a signal that you were moving left; instead, but instead you picked a harmonica player that governs from the middle, they say. It’s interesting, but you need to stop the bleeding on the left. What do you say to those who feel let down by this decision?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1065,
        "fields": {
            "priority": 7,
            "description": "The Democratic platform calls the Affordable Care Act a “critically important step” toward achieving universal health care. Will your campaign embrace a broader path to universal coverage — and how do you plan to position that fight?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1059,
        "fields": {
            "priority": 7,
            "description": "President Obama remains one of the most popular figures in the Democratic Party, and his approval rating has stayed above 50% for much of the year. How closely will you align yourself with him on <u>the campaign trail</u>?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 20735,
        "fields": {
            "priority": 7,
            "description": "As Secretary of State, you were involved in the discussions about the Trans-Pacific Partnership. Now that the final text is available, what is your current position on the TPP, and how would you approach trade agreements in the future?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1057,
        "fields": {
            "priority": 7,
            "description": "Throughout the primaries, you faced pressure from progressives to embrace a $15 federal minimum wage. You’ve supported raising it to $12/hour, with room for local increases beyond that. How central will the fight for a higher minimum wage be to your campaign?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1053,
        "fields": {
            "priority": 7,
            "description": "To the surprise of virtually no one, Donald Trump continues to generate enormous media attention, often by saying outrageous things about Mexicans, Muslims, women, and many other groups that you never thought you’d hear of. How do you plan to respond, or steer the conversation back to your own agenda?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1060,
        "fields": {
            "priority": 7,
            "description": "Your primary rival, Senator Bernie Sanders, commands a fervent grassroots movement that you can’t just easily ignore. With his supporters deeply skeptical of your campaign’s somewhat centrist leanings, to what extent will you involve him on <u>the campaign trail</u>?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1068,
        "fields": {
            "priority": 7,
            "description": "Last year, the United States and Iran signed a nuclear deal where the U.S. lifted its economic sanctions on Iran in exchange for strict, verifiable limits on its nuclear program. Did you approve of this deal?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 20695,
        "fields": {
            "priority": 7,
            "description": "In the wake of Trump’s nomination, a number of prominent anti-Trump Republicans have indicated they’re either going to sit out this election, or support third-party candidates such as the Libertarian Gary Johnson or the Independent Evan McMullin as a form of protest. What’s your reaction to this effort?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1069,
        "fields": {
            "priority": 7,
            "description": "The Syrian Civil War has been ongoing for five years, and seems unlikely to end anytime soon, particularly with the rise of ISIS and The Beatles. What is your plan for addressing the ongoing crisis there, including both the fight against ISIS and the refugee situation?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 20715,
        "fields": {
            "priority": 7,
            "description": "Nobody gives a damn about the debt anymore, apparently. This had been true for a while now, but you’re no sure of it. Trump’s promising massive tax cuts and huge spending increases; the math is impossible, yes, but his supporters don’t care. Still, do you plan to take any steps to reduce or increase spending as President, per your priorities?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1063,
        "fields": {
            "priority": 7,
            "description": "Since launching his campaign, Trump has repeatedly attacked you for your 2002 vote authorizing the Iraq War — a war he claims to have always opposed. Though you’ve expressed regret for the vote, his team is using it to paint you as part of the political establishment that led the country into one of its most costly foreign policy failures. How do you respond to these criticisms?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1066,
        "fields": {
            "priority": -7,
            "description": "At a recent fundraiser in New York City, you said that “half” of Donald Trump’s supporters belong in a “basket of deplorables,” citing racism, sexism, and xenophobia, in what has been widely seen as a gaffe. Do you stand by what you said, or do you regret it?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1067,
        "fields": {
            "priority": -6,
            "description": "You felt the heat rising from the pavement at Ground Zero. You have pneumonia, diagnosed just days ago, but you didn’t cancel because women in politics aren’t allowed to take sick days. Then, the vertigo hits, and the next thing you know, you’re being hoisted into a van like a sack of potatoes, and you’re pretty sure you left a shoe behind. God, the video is everywhere. Fox News is diagnosing you with everything from Parkinson’s to death. You need to prove you’re alive and fit to serve, <i>fast</i>.\n",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1071,
        "fields": {
            "priority": -5,
            "description": "You’ve already confirmed your presence in the customary series of three televised debates with Donald Trump in this election cycle. Given the rather unique nature of your opponent, how do you plan to approach them?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1072,
        "fields": {
            "priority": -4,
            "description": "A video has surfaced of Donald Trump bragging about seducing women, saying he can “grab them by the pussy” because of his fame. Since then, more than a dozen women have come forward accusing him of sexual misconduct. What is your reaction to these allegations?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1074,
        "fields": {
            "priority": -3,
            "description": "Speak of the devil. More leaked emails published by Wikileaks appear to show coordination between your campaign and Democratic National Committee officials to undermine your opponent Bernie Sanders — some even suggest advance access to debate questions. Any comment?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1073,
        "fields": {
            "priority": -3,
            "description": "Yesterday, Wikileaks has published an alleged transcript of a private speech you made to the Brazilian bank Itaú, in which you described your dream of a “hemispheric common market with open borders and free trade.” This, of course, was one of many paid speeches you made after leaving the Obama administration, and one that came to bite you back. How do you address this revelation?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1075,
        "fields": {
            "priority": -2,
            "description": "Just 11 days out, FBI Director James Comey announced that new emails possibly relevant to your server investigation have surfaced via the Anthony Weiner probe. Your thoughts on this development?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 1076,
        "fields": {
            "priority": -1,
            "description": "Finally, what turned out to be a long and difficult election season is nearing an end. Where do you plan to spend the last days of the campaign?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 20847,
        "fields": {
            "priority": 7,
            "description": "During the Democratic primaries, you were pressed to, and then stated, that you would not deport any illegal immigrant who has not otherwise committed a crime. Given Trump’s rather, erm, controversial rethoric on immigration, do you stand by what you said or try to clarify your way out of this?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 20870,
        "fields": {
            "priority": 7,
            "description": "Earlier this year, a World Meteorological Organization (WMO) report showed that 2015 was the hottest year in recorded history. With that in mind, what are the next steps that the United States should take to combat global warming?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 20914,
        "fields": {
            "priority": 7,
            "description": "College enrollment in the U.S. peaked around 2011, and has been on a steady decline ever since due to, among many reasons, the increasing cost of college tuition and the burden of student loan debt. What measures should be taken to make college more affordable?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 20954,
        "fields": {
            "priority": 6,
            "description": "Donald Trump currently faces multiple lawsuits over Trump University, accused of defrauding students out of tuition with false promises. His camp dismisses the claims as political attacks; his critics label it emblematic of his business ethics. Will these allegations be a pillar of your campaign messaging, and how will you frame them to motivate voters?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 21090,
        "fields": {
            "priority": 6,
            "description": "The so-called “Cuban thaw” has ushered in the first normalization of U.S.–Cuba relations in decades, aided by diplomatic overtures and Pope Francis’s backing. Do you support this reset, and how would you build on — or roll back — these policy changes if elected?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 21114,
        "fields": {
            "priority": 6,
            "description": "Following the deaths of Michael Brown in Ferguson and Eric Garner in New York, among a series of other high-profile killings, the Black Lives Matter movement has mobilized millions calling for police reform and racial justice. What is your stance on the movement, and how do you respond to their demands?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 21141,
        "fields": {
            "priority": 6,
            "description": "From suburban playgrounds to historic landmarks, millions of Americans are glued to their phones chasing funny-looking cartoon creatures in the smash-hit mobile game “Pokémon Go”. How do you assess this craze — does it represent a harmless bit of fun, or should government step in to regulate these augmented-reality excursions?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 21164,
        "fields": {
            "priority": 6,
            "description": "In Flint, Michigan, thousands of residents were exposed to lead-contaminated water after the city switched its water source to the Flint River in 2014. The crisis continued even after complaints arose, and federal attention only came after widespread media coverage. What is your assessment of the Flint crisis, and what concrete steps would you take to ensure safe drinking water and accountability going forward?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 21189,
        "fields": {
            "priority": 6,
            "description": "Trump’s economic and budget proposals, especially his protectionist trade ideas, break with decades of bipartisan consensus. These same views have especially resonated among key swing states like Michigan, which you can’t afford to lose if you wanna win this thing. What message about this will you hammer home throughout this campaign?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 21219,
        "fields": {
            "priority": 6,
            "description": "With the U.K.’s vote to leave the European Union in July still reverberating across global markets, populist movements from Italy to Poland are calling for similar exits to reclaim sovereignty over trade and immigration. Do you believe that other EU countries should leave the Union for greater independence and control of their trade and borders, or that partnerships like NATO and the EU are still our best path to security and prosperity?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 21244,
        "fields": {
            "priority": 6,
            "description": "Immigration has been a particularly hot issue this year. With Trump proposing a border wall on the southern border with Mexico, do you support any type of comprehensive immigration reform, and if so, to what extent?",
            "likelihood": 1
        }
    },
    {
        "model": "campaign_trail.question",
        "pk": 21327,
        "fields": {
            "description": "You’re halfway between stops on the campaign bus when the news breaks: ACA premiums are jumping; double digits, even 25% in parts of Arizona and North Carolina. Meanwhile, Trump’s crowing that Obamacare is “imploding,” and while you need to protect Obama’s legacy, voters are opening letters that say they’ll be paying more in a week. This cannot be good for your campaign. What do you say, right now, to keep this from blowing up the election?"
        }
    }
]

campaignTrail_temp.answers_json = [
    {
        "model": "campaign_trail.answer",
        "pk": 5139,
        "fields": {
            "question": 1042,
            "description": "Time to lock this thing down early. I’m calling every major donor, every state party chair, every union leader. Let’s solidfy our machine now so there’s no oxygen for people like Biden, Cuomo or, ugh, Jeb, whatever they do. Meanwhile, I’ll campaign for Democrats in 2014 and rack up some IOUs."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5140,
        "fields": {
            "question": 1042,
            "description": "Look, I need money. A lot of it. I want to be swimming in speaking fees from Goldman and the rest. Plus the Foundation needs funding for its work, too. I’ll write a memoir about State and help keep my foreign policy credentials fresh while the checks clear."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5141,
        "fields": {
            "question": 1042,
            "description": "I should tell my story on my own terms before the Republicans define me again. A book tour lets me talk about fighting for healthcare since the ’90s, standing up to dictators, and championing women’s rights. Let’s remind people why I got into this fight."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5142,
        "fields": {
            "question": 1042,
            "description": "Bring out the Scooby. Bill and I are gonna do a speaking tour of <i>all</i> 50 U.S. states, and highlight a list of the achievements we’ve accomplished for all Americans under him and Obama, naturally. Plus, we’ll get free hot dogs."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5143,
        "fields": {
            "question": 1043,
            "description": "This is a nothingburger. The Republicans know they can’t win debating jobs or college costs, so they and their allies push these distractions. Comey just confirmed there’s no case to pursue. Honestly, it’s time we focused on the real issues."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5144,
        "fields": {
            "question": 1043,
            "description": "Do you remember? Bush and Cheney reportedly lost 20 <i>million</i> emails from their time in office. Meanwhile, I’ve provided far more transparency and turned over my work-related emails. There’s no basis for charges, and this is just another partisan attempt to muddy the waters before the election."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5145,
        "fields": {
            "question": 1043,
            "description": "I mean… I used the same email practices as Colin Powell, and Condi Rice. I was busy trying to prevent conflicts in the Arab Spring, Libya, Russia, Syria… and not thinking about IT protocols. But I should’ve known the rules are different for me. They always are."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5146,
        "fields": {
            "question": 1043,
            "description": "Look, I’ve said before that using a personal email account was a mistake. I take responsibility for that decision. It was allowed, and it was primarily a matter of convenience; it wouldn’t be wise to carry multiple devices with me elsewhere. But in retrospect, it clearly wasn’t the best choice. I wouldn’t do it again."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5147,
        "fields": {
            "question": 1044,
            "description": "This monster attacked Americans because of who they loved. And while we grieve, Trump keeps peddling hate against Muslims. That’s not who we are. We need to stand with the LGBT community and reject this politics of division."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5148,
        "fields": {
            "question": 1044,
            "description": "Another AR-15, another massacre. How many more? We know Sandy Hook didn’t move Congress, but maybe this will. I’m calling for an assault weapons ban and universal background checks. Real action, that is, not just thoughts and prayers."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5149,
        "fields": {
            "question": 1044,
            "description": "I’m going to Orlando. These families need to know we’re with them. The LGBT+ community, the Latino community… they’re under attack from a so-called “presidential” candidate who scapegoats them daily. They need someone that will actually embrace them."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5150,
        "fields": {
            "question": 1044,
            "description": "Hmm. Yes, this appears to be ISIS-inspired terrorism, but it’s also a hate crime against LGBT Americans. We can address radical extremism without demonizing all Muslims. And Trump’s doing exactly what ISIS wants: dividing us."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5151,
        "fields": {
            "question": 1045,
            "description": "Tonight, we fight for everyone who’s been told to wait their turn, work harder, be patient. No more. We’ll make college and health care affordable, end child poverty, and get the 1% to pay their fair share. Enough is enough."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5152,
        "fields": {
            "question": 1045,
            "description": "Our party is strong because we fight for working people. We’ll raise the minimum wage, build on Obamacare, create millions of green jobs, and make college affordable. Together, we will lift every American!"
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5153,
        "fields": {
            "question": 1045,
            "description": "Donald Trump is a clear and present danger to our democracy. He’s Putin’s puppet, a con artist who’s cheated workers his whole life. We cannot let him take our country backward; I am ready to lead and move America forward, together, into a stronger tomorrow."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5154,
        "fields": {
            "question": 1045,
            "description": "I’ve fought for families my entire career — as First Lady, Senator, and Secretary of State. I know how to get things done in Washington. To all Democrats, Republicans, and Independents: I’ll be a President for all Americans, not just those who vote for me."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5155,
        "fields": {
            "question": 1046,
            "description": "I looked for someone with a proven record of getting things done, someone who understands how to make progress for families. Tim Kaine is a dedicated public servant and a real problem-solver, and that’s the kind of experience and spirit I want to bring to the White House."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5156,
        "fields": {
            "question": 1046,
            "description": "I didn’t just want a running mate; I wanted a partner who knows how to get our agenda passed and make a real difference for American families. Tim Kaine has spent his career fighting for those families. He brings us a wealth of experience and knows how to build coalitions. And I know he’s ready to roll up his sleeves with me from the very start."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5157,
        "fields": {
            "question": 1046,
            "description": "Tim Kaine has the deep experience, the sound judgment, and the commitment to the progressive values we share that I was looking for. He’s someone Americans can count on, someone who understands the issues we face, and someone I <i>personally</i> trust completely to be my partner in this work."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5170,
        "fields": {
            "question": 1051,
            "description": "Of course. I love Bernie! We had our differences, but Bernie and I fundamentally agree on the need to raise wages, tackle climate change, and make healthcare more affordable. I’d be very happy to share that stage with him."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5171,
        "fields": {
            "question": 1051,
            "description": "Fine, he can have his moment. But I’m not letting him hijack my convention with some purity test manifesto. He’ll endorse <i>moi</i>, rally his troops, some election appearances here and there, then he’ll get off my stage. We’ve got a general election to win."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5172,
        "fields": {
            "question": 1051,
            "description": "Bernie’s already pushed us left on minimum wage and trade, so giving him a speech is a small price for unity. But if he goes off script or his people boo, I’m done coddling them, pepper-spray them out of my sight or whatever."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5173,
        "fields": {
            "question": 1052,
            "description": "My heart breaks for the people of France and for every family torn apart by this brutal act. I will be giving a speech in the coming days on the values of openness and resilience that must define our response. We should not let fear or hatred divide us."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5174,
        "fields": {
            "question": 1052,
            "description": "This was a cowardly act of terror against innocent civilians. I extend my deepest condolences to the French people, and I will travel to France to express America’s solidarity and support in person."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5175,
        "fields": {
            "question": 1052,
            "description": "ISIS wants us divided, afraid, and at each other’s throats. We beat them by being smarter, working with allies, cutting off their money and recruits. And not by banning Muslims or carpet bombing Syria like Trump is suggesting… it’s insane."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5176,
        "fields": {
            "question": 1053,
            "description": "I mean, do lunar bears shit in the woods? His hateful rhetoric is beyond offensive at this point. He’s not even being provocative anymore, he’s undermining American values! We’re going to call him out on at rallies, on the internet, anywhere we can."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5177,
        "fields": {
            "question": 1053,
            "description": "Trump’s record on a lot of things is appalling, so of course we’re going to talk about it. But we’re also going to show people what the alternative looks like: equal pay, reproductive rights, and <i>real</i> respect, you know?"
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5178,
        "fields": {
            "question": 1053,
            "description": "We really, really, really shouldn’t give him the attention he wants, it’s pointless. I’d rather win on ideas. If he wants to rant on Twitter at 3 a.m., let him, but I’ll be talking to voters face to face, on the ground, and using the time we have to actually talk to voters."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5179,
        "fields": {
            "question": 1053,
            "description": "We could barely keep up with Sanders’ online presence, and now Trump’s clobbering us on this. The best bet for us to take is to what he does: get free media attention. Is there anywhere we can go in such short time? Wait— on <i>Ellen</i>? Where the hell’s my dumbass PR?"
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5184,
        "fields": {
            "question": 1055,
            "description": "Uh-duh. Bill’s still got it — the charm, the command of policy, that ability to make anyone feel heard… his approval’s through the roof. Like, wow, he has the approval rating of Jesus or something. He’ll behave this time, he promised me. Plus, the economy was actually good under him, unlike during Bush…"
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5189,
        "fields": {
            "question": 1057,
            "description": "Well, I stood for $12 in the primaries because I wanted a plan that could pass. But the truth is, workers need more than that, I think. Let’s push for a $15/hour minimum wage as part of our economic agenda."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5190,
        "fields": {
            "question": 1057,
            "description": "Donald Trump has made billions off the backs of working people while opposing fair wages for the rest of us. I believe every worker deserves a living wage, and I’ll make sure the people who punch in every day finally get their fair share."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5191,
        "fields": {
            "question": 1057,
            "description": "Honestly, my campaign is going to focus on judgment, on stability, and on the stakes of American leadership in the world. I support raising the minimum wage, but I’m not just going to let Donald Trump distract voters from the fact that he’s dangerously unfit for office."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5196,
        "fields": {
            "question": 1059,
            "description": "Isn’t it obvious? We’re gonna mention Obama as much as we can, anywhere, anytime. He’s a compelling voice for the future of this country, and I very much welcome his support."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5197,
        "fields": {
            "question": 1059,
            "description": "We definitely need him in the campaign. In particular, I hope he’ll campaign in cities like Charlotte, Detroit, Milwaukee, and other places where he can better energize the coalition that elected him. We <i>need</i> to keep building on that."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5198,
        "fields": {
            "question": 1059,
            "description": "I’m running to lead in a new direction. Of course I’ll campaign with Barack and Michelle, but I can’t just position myself as an Obama third term. There are key differences in our approaches, especially when it comes to economic reform."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5199,
        "fields": {
            "question": 1059,
            "description": "I love Obama as much as anyone, but I think this election needs to go further than defending his legacy. My campaign is about fighting for systemic economic change, and that means elevating other, younger leaders who are speaking to the anger and energy out there."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5200,
        "fields": {
            "question": 1060,
            "description": "It’s vital that we bring everyone together, and that means working closely with Sanders. We’ll be campaigning together frequently, and I’m committed to integrating many of the ideas he championed into our campaign."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5201,
        "fields": {
            "question": 1060,
            "description": "I’m very much looking forward to campaigning alongside Sanders. While we may differ on some approaches, our goals for American families are closely aligned. I was thinking of a joint appearance with him in Michigan, too, to get things going."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5202,
        "fields": {
            "question": 1060,
            "description": "Oh, we absolutely want him on the trail. We’re working together, and I’m certainly open to finding common ground on key issues to ensure our party is united and energized for November. I’m willing to make a few small promises to make that happen."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5203,
        "fields": {
            "question": 1060,
            "description": "I welcome Senator Sanders’ support and believe he can be a powerful voice in this election. The thing is, <i>I</i> won the nomination based on a platform that resonated with millions of Americans. There really is no need for me to beg on my knees for concessions."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5212,
        "fields": {
            "question": 1063,
            "description": "His attacks make no sense because he <i>also</i> supported the war. There’s a clip of him from mid-2002 where he expresses his support for it, see? We gotta nail him on this every time he brings this up."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5213,
        "fields": {
            "question": 1063,
            "description": "Trump’s attacks are illogical. He has no grasp of foreign policy, no strategy, and no consistency at all. We need a president who won’t insult our allies or stumble us into chaos."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5214,
        "fields": {
            "question": 1063,
            "description": "Rumsfeld misled the public with faulty intelligence, and George Bush called it the work of Gog and Magog. I regret my vote, obviously, but how could we have known at the time we were being fooled?"
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5215,
        "fields": {
            "question": 1063,
            "description": "Honestly, I didn’t take that vote lightly. It was based on the flawed intelligence we had, and the war had many failures, <i>but</i> we also removed a brutal dictator and gave Iraq a chance at democracy. That matters too."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5220,
        "fields": {
            "question": 1065,
            "description": "Universal healthcare has been my fight since 1993; hell, I’ve got the scars to prove it. We’ll build on the ACA by bringing in a public option, Medicare buy-in at 55, and prescription drug controls. This is very much a real and achievable progress, too."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5221,
        "fields": {
            "question": 1065,
            "description": "The public option got killed by Joe Lieberman and Max Baucus, but maybe with a bigger majority we can get it done. Lower the Medicare age, control drug costs, make sure nobody goes bankrupt from cancer. That seems like fair to me."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5222,
        "fields": {
            "question": 1065,
            "description": "Let me be clear. Trump has vowed to repeal the ACA on day one, and with it, protections for pre-existing conditions, coverage for young people, and subsidies that help millions afford care. Unlike him, I will fight every day to defend and strengthen the ACA."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5223,
        "fields": {
            "question": 1065,
            "description": "The ACA saved millions of lives. It’s one of Barack Obama’s most meaningful legacies, and I’m going to protect it with everything I’ve got."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5224,
        "fields": {
            "question": 1066,
            "description": "That comment was too broad, and I regret the phrasing. Of course not <i>all</i> of Trump’s supporters fall into that category, but I wanted to talk about how his campaign has attracted, and often courted, white nationalists, misogynists, and conspiracy theorists. That can’t happen."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5225,
        "fields": {
            "question": 1066,
            "description": "I was speaking unscripted, and I probably shouldn’t have put a number on it. But I was trying to draw attention to a serious issue: the kind of hate and intolerance that’s been emboldened by Trump’s rhetoric. We can’t ignore that."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5226,
        "fields": {
            "question": 1066,
            "description": "I’ll apologize for that remark when Donald Trump apologizes for calling Mexicans rapists, for mocking a disabled reporter, and for cozying up to white supremacists. Until then, let’s not pretend that both sides have behaved the same."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5227,
        "fields": {
            "question": 1067,
            "description": "It sucks, but I’ve been diagnosed with pneumonia, and I need to take a few days off to rest. Like millions of working Americans, I tried to power through, but I really have to listen to my doctors now."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5228,
        "fields": {
            "question": 1067,
            "description": "Look, I’m human. I had a medical episode, my doctors have released a full report, and I’m recovering well. We can adjust our schedule a bit to be more flexible, and we can use some special guests to help us out, but we still have a lot to discuss."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5229,
        "fields": {
            "question": 1067,
            "description": "I’m fine, really. This was just dehydration. If anything, you’ll see me on the trail <i>twice</i> as much next week. I’m not going anywhere, especially not with Donald Trump trying to drag us backwards."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5230,
        "fields": {
            "question": 1067,
            "description": "No, I’m not going to dignify conspiracy theories and that kind of thing. I felt faint, I got medical attention, and I’m already back on my feet. Can’t you see that? The only thing sick here is the right-wing media’s obsession with my body."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5231,
        "fields": {
            "question": 1068,
            "description": "I support the agreement. Preventing Iran from obtaining a nuclear weapon is paramount, and this deal is our best way to do that. I was part of Obama’s early effort to build the sanctions pressure that brought Iran to the table, and as President, I will vigorously enforce this deal."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5232,
        "fields": {
            "question": 1068,
            "description": "Look, no diplomatic agreement is perfect, and I understand the concerns some people have, but walking away isn’t a solution. We must remain vigilant and push back on Iran’s other destabilizing activities, and this deal stops their path to a bomb."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5233,
        "fields": {
            "question": 1068,
            "description": "My team and I will obviously assess the ongoing implementation and Iran’s compliance within the broader context of regional security. Protecting America is the top priority after all. But right now, I can’t say more than that."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5234,
        "fields": {
            "question": 1068,
            "description": "Let’s consider the alternative. Donald Trump says he’d just tear up the deal. That’s incredibly dangerous. It would isolate the U.S., not Iran, remove all the constraints and inspections we negotiated, and likely put Iran back on a path to a nuclear weapon unchecked."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5242,
        "fields": {
            "question": 1071,
            "description": "Hmm, I know how to get under his skin. I plan to needle him just enough to make him unravel, then let the American people watch him implode. Michael Moore’s telling me it will be perfect. That’s gotta work, right?"
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5243,
        "fields": {
            "question": 1071,
            "description": "Isn’t it obvious? Donald Trump lies constantly, and so I’m going to hold him accountable. Every time he dodges a question, I’ll bring it back to his broken promises. No way I’m letting him rewrite reality on that stage."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5244,
        "fields": {
            "question": 1071,
            "description": "I gotta use these debates to connect with the real voters and not the pundits. So I’ll be talking about real lives, real families, and how we’re going to bring opportunity back to places like Scranton, Akron, and Tucson. Trump can insult me all he wants, but I’ll be talking to the people."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5245,
        "fields": {
            "question": 1071,
            "description": "We’ve seen how he’s like, so I’m going to focus on policy. I’ll be outlining my plans for the economy, health care, and national security. If Trump wants to rant, well, he can do it alone."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5246,
        "fields": {
            "question": 1072,
            "description": "What the hell? This is just sickening. This isn’t just “locker room talk,” or whatever he claims, this is a man bragging about assault and laughing about it. Are these the values we want in our White House?"
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5247,
        "fields": {
            "question": 1072,
            "description": "This clip just shows us that Trump is a fake conservative. He doesn’t represent family values or Christian values. Can you see it? He’s bragged about cheating, lying and assaulting women, and shows no regret over it."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5248,
        "fields": {
            "question": 1072,
            "description": "Let him shoot himself in the foot. We still have a few weeks ahead of us, and it’s best if we keep making our case directly to the American people."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5249,
        "fields": {
            "question": 1072,
            "description": "As bad as it is, this isn’t an isolated incident. Think about it: his obsession with his own daughter, his Miss Universe comments, that video where he fondles Rudy Giuliani in drag… he is not well. I’m not saying he’s weird, but I’m saying he’s not normal."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5250,
        "fields": {
            "question": 1073,
            "description": "There is missing context here. I was discussing long-term economic theory and potential future scenarios. And let’s be clear about something: these leaks are coming from foreign actors like Russia to interfere in our democratic process."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5251,
        "fields": {
            "question": 1073,
            "description": "Throughout American history, our leaders have understood that diplomacy requires nuance. You know, Abraham Lincoln once said that, sometimes, you need to have a public position and a private position on some issues to drive true progress."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5252,
        "fields": {
            "question": 1073,
            "description": "Let’s talk about what really matters. My opponent has built his entire business empire exploiting workers and outsourcing jobs. The true scandal here is that the Republicans have abandoned their principles to rally behind someone who actively seeks foreign assistance to undermine our election."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5253,
        "fields": {
            "question": 1074,
            "description": "The DNC has already accepted reforms to ensure that it operates with fairness and transparency for all candidates going forward. I get the frustration, but the idea that the nomination was somehow stolen is simply not true. I won fair and square."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5254,
        "fields": {
            "question": 1074,
            "description": "Anyone can see that the concern Republicans have now developed for Sanders and his supporters is laughably fake. I mean, come on. As for the leaked emails, let me be clear: the incidents in question were minor and obviously didn’t impact the outcome."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5255,
        "fields": {
            "question": 1074,
            "description": "I’m amazed that people are treating this as a legitimate issue when Donald Trump is openly encouraging foreign interference in our democracy. He’s praised Putin and invited Russian hackers to attack us. <i>That</i> is the real scandal."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5256,
        "fields": {
            "question": 1075,
            "description": "It’s unprecedented and deeply troubling that Comey would choose to take this step so close to an election. Where is the similar urgency regarding Russian attempts to influence our democracy, or about Trump’s background? This is a blatant political act and the FBI should explain this decision immediately."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5257,
        "fields": {
            "question": 1075,
            "description": "Jesus. This development is, quite frankly, puzzling given the FBI already conducted a thorough review and concluded there was no wrongdoing. I am confident that this will not change their earlier conclusion. We’ll stay focused on making our case to the American people in these crucial final days."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5258,
        "fields": {
            "question": 1076,
            "description": "Our final push will be through Florida, especially Miami-Dade and Orlando. We’re going to emphasize our vision alongside key surrogates who resonate with Latino, Jewish, and African-American voters."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5259,
        "fields": {
            "question": 1076,
            "description": "Let’s take a swing through Michigan, Pennsylvania, and Wisconsin. We’ll stand shoulder-to-shoulder with Sanders and Obama and show we are united and committed against economic inequality."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5260,
        "fields": {
            "question": 1076,
            "description": "Hmm, let’s stump the Southwest corridor: Nevada, Colorado, and a quick stop in Arizona. We should highlight our immigration reform agenda and mobilize the growing Latino electorate that will be key to our victory."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5261,
        "fields": {
            "question": 1076,
            "description": "All roads lead to Philadelphia. We’ll hold a massive rally in Independence Mall and bring together our entire campaign family — especially some key celebrities — to the birthplace of American democracy."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5262,
        "fields": {
            "question": 1077,
            "description": "Come on. I’m running the most progressive campaign in American history, and we’re out here fighting for a higher minimum wage, expanded health care, immigration reform, and real accountability in our policing. You won’t get that from my opponent."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 5263,
        "fields": {
            "question": 1077,
            "description": "Tim Kaine is a former Governor, a sitting Senator, and a man of conscience. Anyone can see he’s a progressive Democrat who’s governed successfully, and I believe he’ll help us both win this election and govern effectively once we do."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20690,
        "fields": {
            "question": 1075,
            "description": "Weiner’s laptop? Honestly? You can’t make this stuff up. Look, this is frustrating, but we’ve been through worse. I’ll be cooperating fully, but I’m sure this amounts to nothing, and we’ll get our advisors to highlight this on the media. What else can you do but keep going?"
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20696,
        "fields": {
            "question": 20695,
            "description": "These Republicans know Trump’s unfit. If they want to waste their votes on Johnson or McMullin instead of doing the right thing and supporting me, that’s on them."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20711,
        "fields": {
            "question": 20695,
            "description": "I don’t wanna get involved in this, honestly. But we’d very much welcome support from across the political spectrum! Anyone who believes we need responsible leadership and practical solutions is on my team."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20716,
        "fields": {
            "question": 20715,
            "description": "Well, we’re going to get the wealthy and corporations to pay their fair share. And that’s when we can focus on supporting hardworking people in this country. I pay for everything I’ve proposed so far. Check my website, it’s all there with actual math, unlike Trump’s fantasy economics. Look it up!"
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20725,
        "fields": {
            "question": 20715,
            "description": "It’s all about smart fiscal management. The best way to handle our debt is strong economic growth that lifts everyone. We’ll make targeted investments to grow the economy, and make our finances sustainable long-term."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20731,
        "fields": {
            "question": 20715,
            "description": "Look, my priorities are clear: affordable college, protecting Social Security and Medicare, and caring for our vets. These are crucial investments, and unlike Trump, I’m not gonna use them as bargaining chips."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20736,
        "fields": {
            "question": 20735,
            "description": "Well, I have significant concerns about whether it truly protects American jobs and wages. I’ll insist on a serious re-evaluation and will only move forward if we can renegotiate key aspects to ensure it meets a high bar for American workers and our economy."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20751,
        "fields": {
            "question": 20735,
            "description": "I do not support the TPP as it’s currently written because it doesn’t meet my standards for creating good jobs and raising wages. Furthermore, I’ll implement a pause on new trade deals to ensure we get them right for our country."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20757,
        "fields": {
            "question": 20735,
            "description": "The TPP allows us — and not China — to write the rules in Asia, and it will foster economic growth there and here at home. I stand with Obama’s efforts to pass this agreement, and it will create opportunities for American businesses and workers."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20763,
        "fields": {
            "question": 20735,
            "description": "You see, I initially supported the goal of a high-standard TPP, but the final version unfortunately doesn’t meet the test of creating good jobs and raising wages for Americans. I’m disappointed with some provisions, and for that reason, I cannot support the TPP as it stands."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20777,
        "fields": {
            "question": 20776,
            "description": "Whatever our disagreements, Justice Scalia served with distinction, and I respect that. But the Constitution is also clear: the President nominates, the Senate confirms. Judge Garland deserves a hearing <i>and</i> a vote. This Republican obstruction is damaging our democracy."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20798,
        "fields": {
            "question": 20776,
            "description": "Honestly? Garland’s just too safe. I get what Obama is trying to do, but honestly, they’ll block anyone. It’s a missed opportunity on his part, too. If I win, I’m nominating someone younger, more progressive, and someone who’ll actually defend voting rights and Roe for the next 30 years."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20803,
        "fields": {
            "question": 20776,
            "description": "To be fair, Scalia spent his life trying to drag this country back to the 18th century, so I’m not gonna cry over his empty seat. Let’s issue our support for Garland and get, I don’t know, Sullivan to fetch a list of possible candidates in case his nomination falls apart."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20848,
        "fields": {
            "question": 20847,
            "description": "Look, what I meant was we’d focus enforcement on actual criminals, not families who’ve been here for years. Unlike Trump, I believe we can address this issue without cruelty. We need smarter enforcement, and a path to citizenship for people who’ve built their lives here."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20852,
        "fields": {
            "question": 20847,
            "description": "Yes. People who are working hard, paying taxes, raising American kids, following the law in every other way — no, they’re not the problem. They deserve a system that recognizes their contributions to this country, you know."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20856,
        "fields": {
            "question": 20847,
            "description": "Have you seen Donald Trump’s proposals? Mass deportations, a border wall that bankrupts taxpayers and alienates our neighbors? His plan would tear apart communities and devastate local economies. That’s not what a President should do."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20863,
        "fields": {
            "question": 20847,
            "description": "Almost. What I said was that I would focus on immigrants who have been here for years and are rooted in their communities. That’s different from saying no enforcement at all."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20871,
        "fields": {
            "question": 20870,
            "description": "I think the best way forward is through American innovation. If we give our workers and businesses the right incentives, I believe we’ll lead the world in clean energy, from solar and wind to beyond."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20893,
        "fields": {
            "question": 20870,
            "description": "A while back I heard of a “Green New Deal”, and I really liked the idea. Climate change is a threat, but we should also use it to rebuild our economy, create good-paying jobs, and invest in infrastructure that’s built to last."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20900,
        "fields": {
            "question": 20870,
            "description": "Trump thinks climate change is a hoax made up by China. Meanwhile, I’m committed to serious emissions cuts, working with international partners, and giving much-needed funding to our scientific institutions."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20907,
        "fields": {
            "question": 20870,
            "description": "I’ve spent my career fighting for environmental progress, and will personally put both Keystone XL and coal mining companies on the chopping block. Trump wants to pull us from the Paris Accords and roll back protections that have kept our air and water clean. The choice is clear."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20915,
        "fields": {
            "question": 20914,
            "description": "Cost should never be a barrier to a college education. That’s why I’m putting forward a $350 billion plan to make college debt-free for working families, and tuition-free for families under $125,000. The kids need help and this actually polls well, too."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20938,
        "fields": {
            "question": 20914,
            "description": "I’ve been thinking about this issue, and I will make sure that every young person who works hard and comes from a middle-class or struggling family can get a four-year degree without going into debt."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20948,
        "fields": {
            "question": 20914,
            "description": "We have to think bigger picture. For too long, we’ve let trade policy and economic shifts hollow out opportunities for working-class Americans. We need to create jobs for those who don’t attend, too."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20955,
        "fields": {
            "question": 20954,
            "description": "Oh, I’ll be mentioning Trump University in almost every speech I give. Maybe even in my sleep, because it tells you everything you need to know: it’s a fake university with fake promises that caused real people to lose real money. That’s his business model."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20981,
        "fields": {
            "question": 1055,
            "description": "He’s definitely brilliant, but he’s also a loose cannon. Remember South Carolina in ’08? Yeah, we can’t have that again. He’ll do some events, carefully scripted of course, mostly in Arkansas and rural areas where I need help. But no freestyling."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20988,
        "fields": {
            "question": 1055,
            "description": "I need to be my own person, not “Bill’s wife running for his third term.” or whatever. He gets it. Sort of. He can do Foundation events, maybe some fundraisers with old friends, but this is my campaign, my message, and my moment. He’ll understand. Eventually."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 20995,
        "fields": {
            "question": 1069,
            "description": "We can’t just micromanage Syria. It seems like every faction there is entangled in horrors. We should pull back entirely, let the region determine its own outcome, and focus on sending humanitarian aid and accepting more refugees at home."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21001,
        "fields": {
            "question": 1069,
            "description": "Ten thousand refugees are just appallingly low in the face of genocide. We must open our doors to them, yes. About Syria though, I would consider a sustained bombing campaign targeting ISIS, Assad’s infrastructure, and oil routes funding terror. It’s gonna be biblical. Make it rain."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21007,
        "fields": {
            "question": 1069,
            "description": "We need to establish safe zones in Syria and work toward Assad’s exit without dragging the U.S. into another ground war. Domestically, I believe we can and should admit significantly more refugees, particularly women and children, but with proper vetting."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21013,
        "fields": {
            "question": 1069,
            "description": "Have you seen how many journalists were beheaded there last year? Enough is enough. I support deploying U.S. troops to eliminate ISIS and stabilize key regions of Syria, while also admitting more refugees here at home. We’re not letting this be a second Rwanda."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21020,
        "fields": {
            "question": 20695,
            "description": "This is great. It feels like a dream, almost. It would be better if, well, you know… we got some of these Republicans to publicly share their support for my campaign. Preferably a high profile one, but a girl can dream."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21039,
        "fields": {
            "question": 1057,
            "description": "I still support raising the federal minimum wage to $12 an hour, and I’ve always said that states and cities with higher costs of living should go higher. That’s how we build consensus and still get progress."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21055,
        "fields": {
            "question": 20954,
            "description": "There’s a civil fraud case underway, so I think the facts will speak for themselves. I’ll mention it when needed, but we also have a long list of other things to hold him accountable for anyway."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21096,
        "fields": {
            "question": 21090,
            "description": "I fully support Obama’s actions here. The embargo was a Cold War relic that punished ordinary Cubans and isolated the U.S. in the Western Hemisphere. There’s no point for us to be clinging to the past, really."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21102,
        "fields": {
            "question": 21090,
            "description": "It’s good to recall that Cuba is still a dictatorship. I want us to normalize relations, but we need to be clear that, whatever we do next, it needs to have a focus on improving conditions for the Cuban people."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21108,
        "fields": {
            "question": 21090,
            "description": "Honestly, I’m not sure if the Castro regime has earned it. There are still political prisoners rotting in cells. If anything, I think we turned our backs on dissidents by rushing into this deal, and I would take a more measured approach to this."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21115,
        "fields": {
            "question": 21114,
            "description": "Black Lives Matter is a necessary cry for justice. Too many lives have been lost, and too many institutions have looked the other way. It’s about time we had sweeping reforms and take time to reconsider how and where we deploy police in our communities."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21131,
        "fields": {
            "question": 21114,
            "description": "There’s no denying the pain behind these protests. I do think we need better training, transparency, and real consequences when officers cross the line. But let’s not vilify all law enforcement; most officers serve honorably, and we should not be simply burning bridges."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21136,
        "fields": {
            "question": 21114,
            "description": "The violence we’ve seen during these protests is unacceptable. I support the right to peaceful protest, but I also stand with our police officers. We should improve policing, but that shouldn’t come at the cost of public safety or demonizing every man and woman in uniform."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21152,
        "fields": {
            "question": 21141,
            "description": "Probably not? Quite frankly, I haven’t played it. There are more pressing concerns in this election than whatever this game is."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21156,
        "fields": {
            "question": 21141,
            "description": "Let people have fun! It’s a game, anything that gets people outside, walking, and maybe even meeting their neighbors can’t be all bad. Plus, I don’t know about you, but I kinda like all these Pokémon."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21160,
        "fields": {
            "question": 21141,
            "description": "Hmm. You know, I just got an idea. A great idea, come to think of it. What if, in one of our rallies, we encouraged voters to Pokémon Go… to the polls?"
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21165,
        "fields": {
            "question": 21164,
            "description": "No American should have to drink poisoned water in one of the richest countries on Earth. As president, I’ll push for major federal investment to modernize our water systems nationwide, and ensure those responsible for Flint’s crisis are held accountable, both legally and financially."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21177,
        "fields": {
            "question": 21164,
            "description": "You see, from Newark to Jackson, aging infrastructure and ignored communities are a national problem. I’ll work with Congress to create a new public works plan focused on underserved areas like Flint. Let’s make clean water a civil right!"
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21183,
        "fields": {
            "question": 21164,
            "description": "While local mismanagement played a big role, federal oversight clearly fell short. We need a stronger EPA, more robust whistleblower protections, and investments to prevent this kind of crisis from ever happening again."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21190,
        "fields": {
            "question": 21189,
            "description": "Republicans always promise that trickle-down economics will work, but it never does. Their policies only enrich the wealthy while driving up deficits. Trump’s gonna do the same thing when he’s elected, but by then, they’ll stop complaining…"
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21204,
        "fields": {
            "question": 21189,
            "description": "Trump calls himself different, but he’s pushing the same failed Republican tax cuts for the rich that George Bush tried in the past. We tried this before, and it doesn’t work. That’s the definition of insanity."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21208,
        "fields": {
            "question": 21189,
            "description": "We’ve seen how Trump is completely unqualified and dangerously uninformed about economics, and a lot of issues in general. I’m gonna spend my time on the campaign pointing this out as much as I can, especially in comparison to <i>my</i> experience."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21213,
        "fields": {
            "question": 21189,
            "description": "Honestly, it’s clear that Trump is divisive and corrosive to our democracy. Just look at his attacks on veterans, women, Latino families, and more… we’re gonna bring this up every single time."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21220,
        "fields": {
            "question": 21219,
            "description": "Well, they definitely have the right to leave if they want. I don’t think they should, but it’s not something I can get involved in. It’s not like I’m gonna be on my knees begging for Theresa May to do a second referendum, you know?"
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21240,
        "fields": {
            "question": 21219,
            "description": "The EU isn’t perfect and needs reforms, but breaking apart our democratic alliances will only benefit our adversaries. I do hope countries will weigh the real costs before making such a decision, and that Britain can rethink this issue later on."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21245,
        "fields": {
            "question": 21244,
            "description": "This is not a time for false choices. We can and must secure our border <i>and</i> provide a pathway to earned citizenship. Real, comprehensive reform does both, and that’s what I’ll fight for."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21253,
        "fields": {
            "question": 21244,
            "description": "We need to be smart and effective, not just build a wall. I do support strong border security, but mass deportations that tear families apart are not the answer. We should focus on violent criminals."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21259,
        "fields": {
            "question": 21244,
            "description": "I am absolutely willing to find common ground on enforcement to build a bipartisan coalition. But let’s be clear: a pathway to full and equal citizenship is the heart of any real solution and is not negotiable."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21264,
        "fields": {
            "question": 21244,
            "description": "Yes, of course. In fact, I will introduce my plan within the first 100 days. This is about keeping families together and ensuring everyone plays by the same rules, which will protect the wages of all American workers."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21328,
        "fields": {
            "question": 21327,
            "description": "Wow. This is crazy, I tell you. Premium hikes are unacceptable, and I won’t pretend otherwise. But ACA is saving lives and covering over 20 million people. As president, I’ll expand tax credits and allow Medicare to negotiate lower costs so families aren’t left holding the bag."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21333,
        "fields": {
            "question": 21327,
            "description": "These increases didn’t come out of nowhere, you know. Republicans spent years sabotaging the ACA by blocking fixes, scaring insurers, and rooting for failure. I’m the only candidate with a plan to stabilize the system and lower costs, instead of handing it to insurance CEOs."
        }
    },
    {
        "model": "campaign_trail.answer",
        "pk": 21337,
        "fields": {
            "question": 21327,
            "description": "Look, if your premium is going up, I hear you. Healthcare reform is hard, I know that, uh, very well, and no big change is perfect on day one. But I would rather improve a system that protects families, than go back to one where insurers decide who deserves care. I’ll take responsibility, but Trump never will."
        }
    }
]

campaignTrail_temp.states_json = [
    {
        "model": "campaign_trail.state",
        "pk": 1000,
        "fields": {
            "name": "Alabama",
            "abbr": "AL",
            "electoral_votes": 9,
            "popular_votes": 2123372,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1001,
        "fields": {
            "name": "Alaska",
            "abbr": "AK",
            "electoral_votes": 3,
            "popular_votes": 318608,
            "poll_closing_time": 420,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1002,
        "fields": {
            "name": "Arizona",
            "abbr": "AZ",
            "electoral_votes": 11,
            "popular_votes": 2604657,
            "poll_closing_time": 180,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1003,
        "fields": {
            "name": "Arkansas",
            "abbr": "AR",
            "electoral_votes": 6,
            "popular_votes": 1130635,
            "poll_closing_time": 150,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1004,
        "fields": {
            "name": "California",
            "abbr": "CA",
            "electoral_votes": 55,
            "popular_votes": 14237893,
            "poll_closing_time": 300,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1005,
        "fields": {
            "name": "Colorado",
            "abbr": "CO",
            "electoral_votes": 9,
            "popular_votes": 2780247,
            "poll_closing_time": 180,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1006,
        "fields": {
            "name": "Connecticut",
            "abbr": "CT",
            "electoral_votes": 7,
            "popular_votes": 1644920,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1007,
        "fields": {
            "name": "Delaware",
            "abbr": "DE",
            "electoral_votes": 3,
            "popular_votes": 443814,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1008,
        "fields": {
            "name": "Florida",
            "abbr": "FL",
            "electoral_votes": 29,
            "popular_votes": 9502747,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1009,
        "fields": {
            "name": "Georgia",
            "abbr": "GA",
            "electoral_votes": 16,
            "popular_votes": 4141447,
            "poll_closing_time": 60,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1010,
        "fields": {
            "name": "Hawaii",
            "abbr": "HI",
            "electoral_votes": 4,
            "popular_votes": 428937,
            "poll_closing_time": 360,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1011,
        "fields": {
            "name": "Idaho",
            "abbr": "ID",
            "electoral_votes": 4,
            "popular_votes": 690433,
            "poll_closing_time": 300,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1012,
        "fields": {
            "name": "Illinois",
            "abbr": "IL",
            "electoral_votes": 20,
            "popular_votes": 5594825,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1013,
        "fields": {
            "name": "Indiana",
            "abbr": "IN",
            "electoral_votes": 11,
            "popular_votes": 2757965,
            "poll_closing_time": 0,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1014,
        "fields": {
            "name": "Iowa",
            "abbr": "IA",
            "electoral_votes": 6,
            "popular_votes": 1566031,
            "poll_closing_time": 240,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1015,
        "fields": {
            "name": "Kansas",
            "abbr": "KS",
            "electoral_votes": 6,
            "popular_votes": 1194755,
            "poll_closing_time": 240,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1016,
        "fields": {
            "name": "Kentucky",
            "abbr": "KY",
            "electoral_votes": 8,
            "popular_votes": 1924150,
            "poll_closing_time": 0,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1017,
        "fields": {
            "name": "Louisiana",
            "abbr": "LA",
            "electoral_votes": 8,
            "popular_votes": 2029032,
            "poll_closing_time": 180,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1018,
        "fields": {
            "name": "Maine",
            "abbr": "ME",
            "electoral_votes": 2,
            "popular_votes": 747927,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1019,
        "fields": {
            "name": "Maryland",
            "abbr": "MD",
            "electoral_votes": 10,
            "popular_votes": 2781446,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1020,
        "fields": {
            "name": "Massachusetts",
            "abbr": "MA",
            "electoral_votes": 11,
            "popular_votes": 3325046,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1021,
        "fields": {
            "name": "Michigan",
            "abbr": "MI",
            "electoral_votes": 16,
            "popular_votes": 4824542,
            "poll_closing_time": 180,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1022,
        "fields": {
            "name": "Minnesota",
            "abbr": "MN",
            "electoral_votes": 10,
            "popular_votes": 2945233,
            "poll_closing_time": 180,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1023,
        "fields": {
            "name": "Mississippi",
            "abbr": "MS",
            "electoral_votes": 6,
            "popular_votes": 1211088,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1024,
        "fields": {
            "name": "Missouri",
            "abbr": "MO",
            "electoral_votes": 10,
            "popular_votes": 2828266,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1025,
        "fields": {
            "name": "Montana",
            "abbr": "MT",
            "electoral_votes": 3,
            "popular_votes": 501822,
            "poll_closing_time": 240,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1026,
        "fields": {
            "name": "Nebraska",
            "abbr": "NE",
            "electoral_votes": 2,
            "popular_votes": 844227,
            "poll_closing_time": 180,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1027,
        "fields": {
            "name": "Nevada",
            "abbr": "NV",
            "electoral_votes": 6,
            "popular_votes": 1125385,
            "poll_closing_time": 240,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1028,
        "fields": {
            "name": "New Hampshire",
            "abbr": "NH",
            "electoral_votes": 4,
            "popular_votes": 744296,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1029,
        "fields": {
            "name": "New Jersey",
            "abbr": "NJ",
            "electoral_votes": 14,
            "popular_votes": 3906723,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1030,
        "fields": {
            "name": "New Mexico",
            "abbr": "NM",
            "electoral_votes": 5,
            "popular_votes": 798319,
            "poll_closing_time": 180,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1031,
        "fields": {
            "name": "New York",
            "abbr": "NY",
            "electoral_votes": 29,
            "popular_votes": 7721795,
            "poll_closing_time": 180,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1032,
        "fields": {
            "name": "North Carolina",
            "abbr": "NC",
            "electoral_votes": 15,
            "popular_votes": 4741564,
            "poll_closing_time": 90,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1033,
        "fields": {
            "name": "North Dakota",
            "abbr": "ND",
            "electoral_votes": 3,
            "popular_votes": 344360,
            "poll_closing_time": 300,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1034,
        "fields": {
            "name": "Ohio",
            "abbr": "OH",
            "electoral_votes": 18,
            "popular_votes": 5536547,
            "poll_closing_time": 90,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1035,
        "fields": {
            "name": "Oklahoma",
            "abbr": "OK",
            "electoral_votes": 7,
            "popular_votes": 1452992,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1036,
        "fields": {
            "name": "Oregon",
            "abbr": "OR",
            "electoral_votes": 7,
            "popular_votes": 2001336,
            "poll_closing_time": 300,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1037,
        "fields": {
            "name": "Pennsylvania",
            "abbr": "PA",
            "electoral_votes": 20,
            "popular_votes": 6166729,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1038,
        "fields": {
            "name": "Rhode Island",
            "abbr": "RI",
            "electoral_votes": 4,
            "popular_votes": 464144,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1039,
        "fields": {
            "name": "South Carolina",
            "abbr": "SC",
            "electoral_votes": 9,
            "popular_votes": 2103027,
            "poll_closing_time": 60,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1040,
        "fields": {
            "name": "South Dakota",
            "abbr": "SD",
            "electoral_votes": 3,
            "popular_votes": 370093,
            "poll_closing_time": 180,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1041,
        "fields": {
            "name": "Tennessee",
            "abbr": "TN",
            "electoral_votes": 11,
            "popular_votes": 2508027,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1042,
        "fields": {
            "name": "Texas",
            "abbr": "TX",
            "electoral_votes": 38,
            "popular_votes": 8993166,
            "poll_closing_time": 180,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1043,
        "fields": {
            "name": "Utah",
            "abbr": "UT",
            "electoral_votes": 6,
            "popular_votes": 1143601,
            "poll_closing_time": 240,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1044,
        "fields": {
            "name": "Vermont",
            "abbr": "VT",
            "electoral_votes": 3,
            "popular_votes": 315067,
            "poll_closing_time": 60,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1045,
        "fields": {
            "name": "Virginia",
            "abbr": "VA",
            "electoral_votes": 13,
            "popular_votes": 3982752,
            "poll_closing_time": 60,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1046,
        "fields": {
            "name": "Washington",
            "abbr": "WA",
            "electoral_votes": 12,
            "popular_votes": 3316996,
            "poll_closing_time": 300,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1047,
        "fields": {
            "name": "Washington DC",
            "abbr": "DC",
            "electoral_votes": 3,
            "popular_votes": 311268,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1048,
        "fields": {
            "name": "West Virginia",
            "abbr": "WV",
            "electoral_votes": 5,
            "popular_votes": 721233,
            "poll_closing_time": 90,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1049,
        "fields": {
            "name": "Wisconsin",
            "abbr": "WI",
            "electoral_votes": 10,
            "popular_votes": 2976150,
            "poll_closing_time": 180,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1050,
        "fields": {
            "name": "Wyoming",
            "abbr": "WY",
            "electoral_votes": 3,
            "popular_votes": 255849,
            "poll_closing_time": 180,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1051,
        "fields": {
            "name": "Nebraska's 1st",
            "abbr": "NE-01",
            "electoral_votes": 1,
            "popular_votes": 2000,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1052,
        "fields": {
            "name": "Nebraska's 2nd",
            "abbr": "NE-02",
            "electoral_votes": 1,
            "popular_votes": 2000,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1053,
        "fields": {
            "name": "Nebraska's 3rd",
            "abbr": "NE-03",
            "electoral_votes": 1,
            "popular_votes": 2000,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1054,
        "fields": {
            "name": "Maine's 1st",
            "abbr": "ME-01",
            "electoral_votes": 1,
            "popular_votes": 2000,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    },
    {
        "model": "campaign_trail.state",
        "pk": 1055,
        "fields": {
            "name": "Maine's 2nd",
            "abbr": "ME-02",
            "electoral_votes": 1,
            "popular_votes": 2000,
            "poll_closing_time": 120,
            "winner_take_all_flg": 1,
            "election": 20
        }
    }
]

campaignTrail_temp.issues_json = [
    {
        "model": "campaign_trail.issue",
        "pk": 100,
        "fields": {
            "name": "Ideology",
            "description": 0,
            "stance_1": "Very Conservative",
            "stance_desc_1": "Advocates traditional values, limited government, and strict adherence to established norms.",
            "stance_2": "Conservative",
            "stance_desc_2": "Favors small government and tradition but open to modest change.",
            "stance_3": "Leans Conservative",
            "stance_desc_3": "Balances tradition with some pragmatic reforms.",
            "stance_4": "Moderate",
            "stance_desc_4": "Takes a middle-ground approach, blending both conservative and liberal ideas.",
            "stance_5": "Leans Liberal",
            "stance_desc_5": "Supports progressive reforms with a focus on practicality.",
            "stance_6": "Liberal",
            "stance_desc_6": "Champions social equality, government intervention, and change.",
            "stance_7": "Very Liberal",
            "stance_desc_7": "Pushes bold, transformative policies and expansive government roles.",
            "election": 20
        }
    },
    {
        "model": "campaign_trail.issue",
        "pk": 101,
        "fields": {
            "name": "Trade",
            "description": 0,
            "stance_1": "Open Markets",
            "stance_desc_1": "Promotes free trade agreements like the TPP, minimal tariffs, and global market access.",
            "stance_2": "Mostly Open",
            "stance_desc_2": "Supports free trade with some regulatory oversight, like labor and environmental standards.",
            "stance_3": "Leans Open",
            "stance_desc_3": "Favors trade deals but with protections for American workers and industries.",
            "stance_4": "Moderate",
            "stance_desc_4": "Takes a case-by-case approach to trade policies.",
            "stance_5": "Leans Protectionist",
            "stance_desc_5": "Prioritizes domestic industries with targeted tariffs.",
            "stance_6": "Protectionist",
            "stance_desc_6": "Emphasizes strong protectionism and renegotiating deals like NAFTA to favor US jobs.",
            "stance_7": "Very Protectionist",
            "stance_desc_7": "Advocates for strict trade restrictions, aiming for self-sufficiency and minimal reliance on imports.",
            "election": 20
        }
    },
    {
        "model": "campaign_trail.issue",
        "pk": 102,
        "fields": {
            "name": "Foreign Policy",
            "description": 0,
            "stance_1": "Aggressive",
            "stance_desc_1": "Supports preemptive military action and strong global leadership, like NATO expansion.",
            "stance_2": "Hawkish",
            "stance_desc_2": "Favors robust military engagement with selective interventions, like against ISIS.",
            "stance_3": "Assertive",
            "stance_desc_3": "Backs active diplomacy backed by military readiness.",
            "stance_4": "Moderate",
            "stance_desc_4": "Balances diplomacy and force, preferring to focus on multilateral coalitions instead.",
            "stance_5": "Cautious",
            "stance_desc_5": "Prefers diplomacy, using force only when directly threatened.",
            "stance_6": "Non-Interventionist",
            "stance_desc_6": "Avoids foreign conflicts unless vital. More America, less NATO.",
            "stance_7": "Isolationist",
            "stance_desc_7": "Commits to strict non-involvement in international conflicts, avoiding entanglements abroad.",
            "election": 20
        }
    },
    {
        "model": "campaign_trail.issue",
        "pk": 103,
        "fields": {
            "name": "Social Issues",
            "description": 0,
            "stance_1": "Very Conservative",
            "stance_desc_1": "Upholds traditional social norms and resists changes to established societal structures.​",
            "stance_2": "Conservative",
            "stance_desc_2": "Supports conservative social policies with limited acceptance of progressive changes.",
            "stance_3": "Leans Conservative",
            "stance_desc_3": "Generally conservative but open to certain liberal reforms in social policies.",
            "stance_4": "Moderate",
            "stance_desc_4": "Seeks a middle ground, integrating both conservative and liberal perspectives on social issues.",
            "stance_5": "Leans Liberal",
            "stance_desc_5": "Leans liberal, promoting progressive social policies while acknowledging some traditional values.",
            "stance_6": "Liberal",
            "stance_desc_6": "Supports liberal social reforms with little emphasis on traditional norms.",
            "stance_7": "Very Liberal",
            "stance_desc_7": "Advocates for comprehensive progressive changes in social policies, emphasizing inclusivity and diversity.​",
            "election": 20
        }
    },
    {
        "model": "campaign_trail.issue",
        "pk": 104,
        "fields": {
            "name": "Immigration",
            "description": 0,
            "stance_1": "Very Conservative",
            "stance_desc_1": "Advocates for strict immigration controls, including limited quotas and enhanced border security.",
            "stance_2": "Conservative",
            "stance_desc_2": "Supports tight immigration policies with some provisions for skilled workers.",
            "stance_3": "Leans Conservative",
            "stance_desc_3": "Favors moderate restrictions, allowing for family reunification and select immigration pathways.",
            "stance_4": "Moderate",
            "stance_desc_4": "Seeks a balanced approach, combining border security with humane immigration policies.",
            "stance_5": "Leans Liberal",
            "stance_desc_5": "Leans towards more open immigration, simplifying processes for refugees and economic migrants.",
            "stance_6": "Liberal",
            "stance_desc_6": "Supports liberal immigration policies, emphasizing multiculturalism and broad acceptance criteria.​",
            "stance_7": "Very Liberal",
            "stance_desc_7": "Advocates for open borders, with minimal restrictions on movement and residency.",
            "election": 20
        }
    }
]

campaignTrail_temp.state_issue_score_json = [
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3000,
        "fields": {
            "state": 1000,
            "issue": 100,
            "state_issue_score": -0.7,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3001,
        "fields": {
            "state": 1000,
            "issue": 101,
            "state_issue_score": -0.35,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3002,
        "fields": {
            "state": 1000,
            "issue": 102,
            "state_issue_score": -0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3003,
        "fields": {
            "state": 1000,
            "issue": 103,
            "state_issue_score": -0.65,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3004,
        "fields": {
            "state": 1000,
            "issue": 104,
            "state_issue_score": -0.55,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3005,
        "fields": {
            "state": 1001,
            "issue": 100,
            "state_issue_score": -0.7,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3006,
        "fields": {
            "state": 1001,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3007,
        "fields": {
            "state": 1001,
            "issue": 102,
            "state_issue_score": 0.1,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3008,
        "fields": {
            "state": 1001,
            "issue": 103,
            "state_issue_score": 0.15,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3009,
        "fields": {
            "state": 1001,
            "issue": 104,
            "state_issue_score": -0.05,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3010,
        "fields": {
            "state": 1002,
            "issue": 100,
            "state_issue_score": -0.55,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3011,
        "fields": {
            "state": 1002,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3012,
        "fields": {
            "state": 1002,
            "issue": 102,
            "state_issue_score": -0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3013,
        "fields": {
            "state": 1002,
            "issue": 103,
            "state_issue_score": 0.15,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3014,
        "fields": {
            "state": 1002,
            "issue": 104,
            "state_issue_score": 0.2,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3015,
        "fields": {
            "state": 1003,
            "issue": 100,
            "state_issue_score": -0.75,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3016,
        "fields": {
            "state": 1003,
            "issue": 101,
            "state_issue_score": -0.35,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3017,
        "fields": {
            "state": 1003,
            "issue": 102,
            "state_issue_score": -0.35,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3018,
        "fields": {
            "state": 1003,
            "issue": 103,
            "state_issue_score": -0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3019,
        "fields": {
            "state": 1003,
            "issue": 104,
            "state_issue_score": -0.4,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3020,
        "fields": {
            "state": 1004,
            "issue": 100,
            "state_issue_score": 0.55,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3021,
        "fields": {
            "state": 1004,
            "issue": 101,
            "state_issue_score": -0.6,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3022,
        "fields": {
            "state": 1004,
            "issue": 102,
            "state_issue_score": 0.6,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3023,
        "fields": {
            "state": 1004,
            "issue": 103,
            "state_issue_score": 0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3024,
        "fields": {
            "state": 1004,
            "issue": 104,
            "state_issue_score": 0.55,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3025,
        "fields": {
            "state": 1005,
            "issue": 100,
            "state_issue_score": 0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3026,
        "fields": {
            "state": 1005,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3027,
        "fields": {
            "state": 1005,
            "issue": 102,
            "state_issue_score": 0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3028,
        "fields": {
            "state": 1005,
            "issue": 103,
            "state_issue_score": 0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3029,
        "fields": {
            "state": 1005,
            "issue": 104,
            "state_issue_score": 0.35,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3030,
        "fields": {
            "state": 1006,
            "issue": 100,
            "state_issue_score": 0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3031,
        "fields": {
            "state": 1006,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3032,
        "fields": {
            "state": 1006,
            "issue": 102,
            "state_issue_score": 0.3,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3033,
        "fields": {
            "state": 1006,
            "issue": 103,
            "state_issue_score": 0.6,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3034,
        "fields": {
            "state": 1006,
            "issue": 104,
            "state_issue_score": 0.5,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3035,
        "fields": {
            "state": 1007,
            "issue": 100,
            "state_issue_score": 0.375,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3036,
        "fields": {
            "state": 1007,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3037,
        "fields": {
            "state": 1007,
            "issue": 102,
            "state_issue_score": 0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3038,
        "fields": {
            "state": 1007,
            "issue": 103,
            "state_issue_score": 0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3039,
        "fields": {
            "state": 1007,
            "issue": 104,
            "state_issue_score": 0.45,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3040,
        "fields": {
            "state": 1008,
            "issue": 100,
            "state_issue_score": -0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3041,
        "fields": {
            "state": 1008,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3042,
        "fields": {
            "state": 1008,
            "issue": 102,
            "state_issue_score": -0.1,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3043,
        "fields": {
            "state": 1008,
            "issue": 103,
            "state_issue_score": 0.1,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3044,
        "fields": {
            "state": 1008,
            "issue": 104,
            "state_issue_score": 0.1,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3045,
        "fields": {
            "state": 1009,
            "issue": 100,
            "state_issue_score": -0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3046,
        "fields": {
            "state": 1009,
            "issue": 101,
            "state_issue_score": -0.45,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3047,
        "fields": {
            "state": 1009,
            "issue": 102,
            "state_issue_score": -0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3048,
        "fields": {
            "state": 1009,
            "issue": 103,
            "state_issue_score": -0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3049,
        "fields": {
            "state": 1009,
            "issue": 104,
            "state_issue_score": 0.1,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3050,
        "fields": {
            "state": 1010,
            "issue": 100,
            "state_issue_score": 0.45,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3051,
        "fields": {
            "state": 1010,
            "issue": 101,
            "state_issue_score": -0.6,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3052,
        "fields": {
            "state": 1010,
            "issue": 102,
            "state_issue_score": 0.6,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3053,
        "fields": {
            "state": 1010,
            "issue": 103,
            "state_issue_score": 0.55,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3054,
        "fields": {
            "state": 1010,
            "issue": 104,
            "state_issue_score": 0.6,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3055,
        "fields": {
            "state": 1011,
            "issue": 100,
            "state_issue_score": -0.8,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3056,
        "fields": {
            "state": 1011,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3057,
        "fields": {
            "state": 1011,
            "issue": 102,
            "state_issue_score": -0.1,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3058,
        "fields": {
            "state": 1011,
            "issue": 103,
            "state_issue_score": -0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3059,
        "fields": {
            "state": 1011,
            "issue": 104,
            "state_issue_score": -0.1,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3060,
        "fields": {
            "state": 1012,
            "issue": 100,
            "state_issue_score": 0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3061,
        "fields": {
            "state": 1012,
            "issue": 101,
            "state_issue_score": -0.25,
            "weight": 0.75
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3062,
        "fields": {
            "state": 1012,
            "issue": 102,
            "state_issue_score": 0.3,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3063,
        "fields": {
            "state": 1012,
            "issue": 103,
            "state_issue_score": 0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3064,
        "fields": {
            "state": 1012,
            "issue": 104,
            "state_issue_score": 0.1,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3065,
        "fields": {
            "state": 1013,
            "issue": 100,
            "state_issue_score": -0.55,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3066,
        "fields": {
            "state": 1013,
            "issue": 101,
            "state_issue_score": -0.25,
            "weight": 0.75
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3067,
        "fields": {
            "state": 1013,
            "issue": 102,
            "state_issue_score": -0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3068,
        "fields": {
            "state": 1013,
            "issue": 103,
            "state_issue_score": -0.25,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3069,
        "fields": {
            "state": 1013,
            "issue": 104,
            "state_issue_score": -0.33,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3070,
        "fields": {
            "state": 1014,
            "issue": 100,
            "state_issue_score": -0.45,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3071,
        "fields": {
            "state": 1014,
            "issue": 101,
            "state_issue_score": -0.55,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3072,
        "fields": {
            "state": 1014,
            "issue": 102,
            "state_issue_score": -0.25,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3073,
        "fields": {
            "state": 1014,
            "issue": 103,
            "state_issue_score": 0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3074,
        "fields": {
            "state": 1014,
            "issue": 104,
            "state_issue_score": -0.3,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3075,
        "fields": {
            "state": 1015,
            "issue": 100,
            "state_issue_score": -0.65,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3076,
        "fields": {
            "state": 1015,
            "issue": 101,
            "state_issue_score": -0.55,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3077,
        "fields": {
            "state": 1015,
            "issue": 102,
            "state_issue_score": -0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3078,
        "fields": {
            "state": 1015,
            "issue": 103,
            "state_issue_score": -0.15,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3079,
        "fields": {
            "state": 1015,
            "issue": 104,
            "state_issue_score": 0,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3080,
        "fields": {
            "state": 1016,
            "issue": 100,
            "state_issue_score": -0.55,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3081,
        "fields": {
            "state": 1016,
            "issue": 101,
            "state_issue_score": -0.25,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3082,
        "fields": {
            "state": 1016,
            "issue": 102,
            "state_issue_score": -0.3,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3083,
        "fields": {
            "state": 1016,
            "issue": 103,
            "state_issue_score": -0.35,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3084,
        "fields": {
            "state": 1016,
            "issue": 104,
            "state_issue_score": -0.45,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3085,
        "fields": {
            "state": 1017,
            "issue": 100,
            "state_issue_score": -0.675,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3086,
        "fields": {
            "state": 1017,
            "issue": 101,
            "state_issue_score": -0.45,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3087,
        "fields": {
            "state": 1017,
            "issue": 102,
            "state_issue_score": -0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3088,
        "fields": {
            "state": 1017,
            "issue": 103,
            "state_issue_score": -0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3089,
        "fields": {
            "state": 1017,
            "issue": 104,
            "state_issue_score": -0.4,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3090,
        "fields": {
            "state": 1018,
            "issue": 100,
            "state_issue_score": 0.25,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3091,
        "fields": {
            "state": 1018,
            "issue": 101,
            "state_issue_score": 0,
            "weight": 0.75
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3092,
        "fields": {
            "state": 1018,
            "issue": 102,
            "state_issue_score": 0.1,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3093,
        "fields": {
            "state": 1018,
            "issue": 103,
            "state_issue_score": 0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3094,
        "fields": {
            "state": 1018,
            "issue": 104,
            "state_issue_score": -0.4,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3095,
        "fields": {
            "state": 1019,
            "issue": 100,
            "state_issue_score": 0.7,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3096,
        "fields": {
            "state": 1019,
            "issue": 101,
            "state_issue_score": -0.25,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3097,
        "fields": {
            "state": 1019,
            "issue": 102,
            "state_issue_score": 0.25,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3098,
        "fields": {
            "state": 1019,
            "issue": 103,
            "state_issue_score": 0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3099,
        "fields": {
            "state": 1019,
            "issue": 104,
            "state_issue_score": 0.1,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3100,
        "fields": {
            "state": 1020,
            "issue": 100,
            "state_issue_score": 0.7,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3101,
        "fields": {
            "state": 1020,
            "issue": 101,
            "state_issue_score": -0.35,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3102,
        "fields": {
            "state": 1020,
            "issue": 102,
            "state_issue_score": 0.55,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3103,
        "fields": {
            "state": 1020,
            "issue": 103,
            "state_issue_score": 0.65,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3104,
        "fields": {
            "state": 1020,
            "issue": 104,
            "state_issue_score": 0.6,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3105,
        "fields": {
            "state": 1021,
            "issue": 100,
            "state_issue_score": 0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3106,
        "fields": {
            "state": 1021,
            "issue": 101,
            "state_issue_score": 0.4,
            "weight": 2
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3107,
        "fields": {
            "state": 1021,
            "issue": 102,
            "state_issue_score": 0.3,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3108,
        "fields": {
            "state": 1021,
            "issue": 103,
            "state_issue_score": 0.1,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3109,
        "fields": {
            "state": 1021,
            "issue": 104,
            "state_issue_score": -0.3,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3110,
        "fields": {
            "state": 1022,
            "issue": 100,
            "state_issue_score": 0.25,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3111,
        "fields": {
            "state": 1022,
            "issue": 101,
            "state_issue_score": 0,
            "weight": 0.75
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3112,
        "fields": {
            "state": 1022,
            "issue": 102,
            "state_issue_score": 0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3113,
        "fields": {
            "state": 1022,
            "issue": 103,
            "state_issue_score": 0.3,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3114,
        "fields": {
            "state": 1022,
            "issue": 104,
            "state_issue_score": -0.25,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3115,
        "fields": {
            "state": 1023,
            "issue": 100,
            "state_issue_score": -0.6,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3116,
        "fields": {
            "state": 1023,
            "issue": 101,
            "state_issue_score": -0.4,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3117,
        "fields": {
            "state": 1023,
            "issue": 102,
            "state_issue_score": -0.55,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3118,
        "fields": {
            "state": 1023,
            "issue": 103,
            "state_issue_score": -0.65,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3119,
        "fields": {
            "state": 1023,
            "issue": 104,
            "state_issue_score": -0.5,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3120,
        "fields": {
            "state": 1024,
            "issue": 100,
            "state_issue_score": -0.65,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3121,
        "fields": {
            "state": 1024,
            "issue": 101,
            "state_issue_score": -0.3,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3122,
        "fields": {
            "state": 1024,
            "issue": 102,
            "state_issue_score": -0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3123,
        "fields": {
            "state": 1024,
            "issue": 103,
            "state_issue_score": -0.05,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3124,
        "fields": {
            "state": 1024,
            "issue": 104,
            "state_issue_score": -0.25,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3125,
        "fields": {
            "state": 1025,
            "issue": 100,
            "state_issue_score": -0.75,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3126,
        "fields": {
            "state": 1025,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3127,
        "fields": {
            "state": 1025,
            "issue": 102,
            "state_issue_score": 0.1,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3128,
        "fields": {
            "state": 1025,
            "issue": 103,
            "state_issue_score": 0,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3129,
        "fields": {
            "state": 1025,
            "issue": 104,
            "state_issue_score": -0.2,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3130,
        "fields": {
            "state": 1026,
            "issue": 100,
            "state_issue_score": -0.7,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3131,
        "fields": {
            "state": 1026,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3132,
        "fields": {
            "state": 1026,
            "issue": 102,
            "state_issue_score": -0.35,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3133,
        "fields": {
            "state": 1026,
            "issue": 103,
            "state_issue_score": 0,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3134,
        "fields": {
            "state": 1026,
            "issue": 104,
            "state_issue_score": -0.25,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3135,
        "fields": {
            "state": 1027,
            "issue": 100,
            "state_issue_score": -0.1,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3136,
        "fields": {
            "state": 1027,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3137,
        "fields": {
            "state": 1027,
            "issue": 102,
            "state_issue_score": 0.3,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3138,
        "fields": {
            "state": 1027,
            "issue": 103,
            "state_issue_score": 0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3139,
        "fields": {
            "state": 1027,
            "issue": 104,
            "state_issue_score": 0.05,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3140,
        "fields": {
            "state": 1028,
            "issue": 100,
            "state_issue_score": 0.1,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3141,
        "fields": {
            "state": 1028,
            "issue": 101,
            "state_issue_score": 0.1,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3142,
        "fields": {
            "state": 1028,
            "issue": 102,
            "state_issue_score": 0.25,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3143,
        "fields": {
            "state": 1028,
            "issue": 103,
            "state_issue_score": 0.6,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3144,
        "fields": {
            "state": 1028,
            "issue": 104,
            "state_issue_score": -0.4,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3145,
        "fields": {
            "state": 1029,
            "issue": 100,
            "state_issue_score": 0.55,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3146,
        "fields": {
            "state": 1029,
            "issue": 101,
            "state_issue_score": -0.4,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3147,
        "fields": {
            "state": 1029,
            "issue": 102,
            "state_issue_score": 0.3,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3148,
        "fields": {
            "state": 1029,
            "issue": 103,
            "state_issue_score": 0.45,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3149,
        "fields": {
            "state": 1029,
            "issue": 104,
            "state_issue_score": 0.4,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3150,
        "fields": {
            "state": 1030,
            "issue": 100,
            "state_issue_score": 0.15,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3151,
        "fields": {
            "state": 1030,
            "issue": 101,
            "state_issue_score": -0.45,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3152,
        "fields": {
            "state": 1030,
            "issue": 102,
            "state_issue_score": 0.45,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3153,
        "fields": {
            "state": 1030,
            "issue": 103,
            "state_issue_score": 0.45,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3154,
        "fields": {
            "state": 1030,
            "issue": 104,
            "state_issue_score": 0.33,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3155,
        "fields": {
            "state": 1031,
            "issue": 100,
            "state_issue_score": 0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3156,
        "fields": {
            "state": 1031,
            "issue": 101,
            "state_issue_score": -0.15,
            "weight": 0.75
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3157,
        "fields": {
            "state": 1031,
            "issue": 102,
            "state_issue_score": 0.3,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3158,
        "fields": {
            "state": 1031,
            "issue": 103,
            "state_issue_score": 0.45,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3159,
        "fields": {
            "state": 1031,
            "issue": 104,
            "state_issue_score": 0.575,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3160,
        "fields": {
            "state": 1032,
            "issue": 100,
            "state_issue_score": -0.375,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3161,
        "fields": {
            "state": 1032,
            "issue": 101,
            "state_issue_score": -0.4,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3162,
        "fields": {
            "state": 1032,
            "issue": 102,
            "state_issue_score": -0.15,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3163,
        "fields": {
            "state": 1032,
            "issue": 103,
            "state_issue_score": -0.05,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3164,
        "fields": {
            "state": 1032,
            "issue": 104,
            "state_issue_score": -0.1,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3165,
        "fields": {
            "state": 1033,
            "issue": 100,
            "state_issue_score": -0.475,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3166,
        "fields": {
            "state": 1033,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3167,
        "fields": {
            "state": 1033,
            "issue": 102,
            "state_issue_score": -0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3168,
        "fields": {
            "state": 1033,
            "issue": 103,
            "state_issue_score": 0,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3169,
        "fields": {
            "state": 1033,
            "issue": 104,
            "state_issue_score": -0.4,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3170,
        "fields": {
            "state": 1034,
            "issue": 100,
            "state_issue_score": 0,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3171,
        "fields": {
            "state": 1034,
            "issue": 101,
            "state_issue_score": 0.25,
            "weight": 3
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3172,
        "fields": {
            "state": 1034,
            "issue": 102,
            "state_issue_score": -0.25,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3173,
        "fields": {
            "state": 1034,
            "issue": 103,
            "state_issue_score": -0.05,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3174,
        "fields": {
            "state": 1034,
            "issue": 104,
            "state_issue_score": -0.25,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3175,
        "fields": {
            "state": 1035,
            "issue": 100,
            "state_issue_score": -0.8,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3176,
        "fields": {
            "state": 1035,
            "issue": 101,
            "state_issue_score": -0.45,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3177,
        "fields": {
            "state": 1035,
            "issue": 102,
            "state_issue_score": -0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3178,
        "fields": {
            "state": 1035,
            "issue": 103,
            "state_issue_score": -0.25,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3179,
        "fields": {
            "state": 1035,
            "issue": 104,
            "state_issue_score": -0.1,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3180,
        "fields": {
            "state": 1036,
            "issue": 100,
            "state_issue_score": 0.35,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3181,
        "fields": {
            "state": 1036,
            "issue": 101,
            "state_issue_score": -0.15,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3182,
        "fields": {
            "state": 1036,
            "issue": 102,
            "state_issue_score": 0.6,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3183,
        "fields": {
            "state": 1036,
            "issue": 103,
            "state_issue_score": 0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3184,
        "fields": {
            "state": 1036,
            "issue": 104,
            "state_issue_score": 0.45,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3185,
        "fields": {
            "state": 1037,
            "issue": 100,
            "state_issue_score": 0,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3186,
        "fields": {
            "state": 1037,
            "issue": 101,
            "state_issue_score": 0.25,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3187,
        "fields": {
            "state": 1037,
            "issue": 102,
            "state_issue_score": 0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3188,
        "fields": {
            "state": 1037,
            "issue": 103,
            "state_issue_score": 0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3189,
        "fields": {
            "state": 1037,
            "issue": 104,
            "state_issue_score": -0.15,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3190,
        "fields": {
            "state": 1038,
            "issue": 100,
            "state_issue_score": 0.55,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3191,
        "fields": {
            "state": 1038,
            "issue": 101,
            "state_issue_score": 0,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3192,
        "fields": {
            "state": 1038,
            "issue": 102,
            "state_issue_score": 0.45,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3193,
        "fields": {
            "state": 1038,
            "issue": 103,
            "state_issue_score": 0.6,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3194,
        "fields": {
            "state": 1038,
            "issue": 104,
            "state_issue_score": 0.55,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3195,
        "fields": {
            "state": 1039,
            "issue": 100,
            "state_issue_score": -0.575,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3196,
        "fields": {
            "state": 1039,
            "issue": 101,
            "state_issue_score": -0.45,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3197,
        "fields": {
            "state": 1039,
            "issue": 102,
            "state_issue_score": -0.55,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3198,
        "fields": {
            "state": 1039,
            "issue": 103,
            "state_issue_score": -0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3199,
        "fields": {
            "state": 1039,
            "issue": 104,
            "state_issue_score": -0.375,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3200,
        "fields": {
            "state": 1040,
            "issue": 100,
            "state_issue_score": -0.45,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3201,
        "fields": {
            "state": 1040,
            "issue": 101,
            "state_issue_score": -0.55,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3202,
        "fields": {
            "state": 1040,
            "issue": 102,
            "state_issue_score": -0.3,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3203,
        "fields": {
            "state": 1040,
            "issue": 103,
            "state_issue_score": -0.25,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3204,
        "fields": {
            "state": 1040,
            "issue": 104,
            "state_issue_score": -0.45,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3205,
        "fields": {
            "state": 1041,
            "issue": 100,
            "state_issue_score": -0.65,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3206,
        "fields": {
            "state": 1041,
            "issue": 101,
            "state_issue_score": -0.35,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3207,
        "fields": {
            "state": 1041,
            "issue": 102,
            "state_issue_score": -0.45,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3208,
        "fields": {
            "state": 1041,
            "issue": 103,
            "state_issue_score": -0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3209,
        "fields": {
            "state": 1041,
            "issue": 104,
            "state_issue_score": -0.5,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3210,
        "fields": {
            "state": 1042,
            "issue": 100,
            "state_issue_score": -0.55,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3211,
        "fields": {
            "state": 1042,
            "issue": 101,
            "state_issue_score": -0.45,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3212,
        "fields": {
            "state": 1042,
            "issue": 102,
            "state_issue_score": -0.45,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3213,
        "fields": {
            "state": 1042,
            "issue": 103,
            "state_issue_score": 0,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3214,
        "fields": {
            "state": 1042,
            "issue": 104,
            "state_issue_score": 0.15,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3215,
        "fields": {
            "state": 1043,
            "issue": 100,
            "state_issue_score": -0.9,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3216,
        "fields": {
            "state": 1043,
            "issue": 101,
            "state_issue_score": -0.6,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3217,
        "fields": {
            "state": 1043,
            "issue": 102,
            "state_issue_score": -0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3218,
        "fields": {
            "state": 1043,
            "issue": 103,
            "state_issue_score": -0.25,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3219,
        "fields": {
            "state": 1043,
            "issue": 104,
            "state_issue_score": 0,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3220,
        "fields": {
            "state": 1044,
            "issue": 100,
            "state_issue_score": 0.75,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3221,
        "fields": {
            "state": 1044,
            "issue": 101,
            "state_issue_score": -0.15,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3222,
        "fields": {
            "state": 1044,
            "issue": 102,
            "state_issue_score": 0.6,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3223,
        "fields": {
            "state": 1044,
            "issue": 103,
            "state_issue_score": 0.6,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3224,
        "fields": {
            "state": 1044,
            "issue": 104,
            "state_issue_score": -0.05,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3225,
        "fields": {
            "state": 1045,
            "issue": 100,
            "state_issue_score": 0.1,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3226,
        "fields": {
            "state": 1045,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3227,
        "fields": {
            "state": 1045,
            "issue": 102,
            "state_issue_score": -0.15,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3228,
        "fields": {
            "state": 1045,
            "issue": 103,
            "state_issue_score": 0,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3229,
        "fields": {
            "state": 1045,
            "issue": 104,
            "state_issue_score": -0.05,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3230,
        "fields": {
            "state": 1046,
            "issue": 100,
            "state_issue_score": 0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3231,
        "fields": {
            "state": 1046,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3232,
        "fields": {
            "state": 1046,
            "issue": 102,
            "state_issue_score": 0.35,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3233,
        "fields": {
            "state": 1046,
            "issue": 103,
            "state_issue_score": 0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3234,
        "fields": {
            "state": 1046,
            "issue": 104,
            "state_issue_score": 0.2,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3235,
        "fields": {
            "state": 1047,
            "issue": 100,
            "state_issue_score": 0.95,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3236,
        "fields": {
            "state": 1047,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3237,
        "fields": {
            "state": 1047,
            "issue": 102,
            "state_issue_score": 0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3238,
        "fields": {
            "state": 1047,
            "issue": 103,
            "state_issue_score": 0.5,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3239,
        "fields": {
            "state": 1047,
            "issue": 104,
            "state_issue_score": 0.5,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3240,
        "fields": {
            "state": 1048,
            "issue": 100,
            "state_issue_score": -0.7,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3241,
        "fields": {
            "state": 1048,
            "issue": 101,
            "state_issue_score": 0,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3242,
        "fields": {
            "state": 1048,
            "issue": 102,
            "state_issue_score": -0.1,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3243,
        "fields": {
            "state": 1048,
            "issue": 103,
            "state_issue_score": -0.55,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3244,
        "fields": {
            "state": 1048,
            "issue": 104,
            "state_issue_score": -0.625,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3245,
        "fields": {
            "state": 1049,
            "issue": 100,
            "state_issue_score": -0.125,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3246,
        "fields": {
            "state": 1049,
            "issue": 101,
            "state_issue_score": 0.2,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3247,
        "fields": {
            "state": 1049,
            "issue": 102,
            "state_issue_score": 0.05,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3248,
        "fields": {
            "state": 1049,
            "issue": 103,
            "state_issue_score": 0.2,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3249,
        "fields": {
            "state": 1049,
            "issue": 104,
            "state_issue_score": -0.2,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3250,
        "fields": {
            "state": 1050,
            "issue": 100,
            "state_issue_score": -0.85,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3251,
        "fields": {
            "state": 1050,
            "issue": 101,
            "state_issue_score": -0.5,
            "weight": 0.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3252,
        "fields": {
            "state": 1050,
            "issue": 102,
            "state_issue_score": -0.4,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3253,
        "fields": {
            "state": 1050,
            "issue": 103,
            "state_issue_score": -0.35,
            "weight": 1
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 3254,
        "fields": {
            "state": 1050,
            "issue": 104,
            "state_issue_score": -0.75,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21091,
        "fields": {
            "state": 1051,
            "issue": 100,
            "state_issue_score": -0.3,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21092,
        "fields": {
            "state": 1051,
            "issue": 101,
            "state_issue_score": -0.4,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21093,
        "fields": {
            "state": 1051,
            "issue": 102,
            "state_issue_score": -0.3,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21094,
        "fields": {
            "state": 1051,
            "issue": 103,
            "state_issue_score": -0.15,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21095,
        "fields": {
            "state": 1051,
            "issue": 104,
            "state_issue_score": -0.1,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21101,
        "fields": {
            "state": 1052,
            "issue": 100,
            "state_issue_score": -0.4,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21102,
        "fields": {
            "state": 1052,
            "issue": 101,
            "state_issue_score": -0.2,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21103,
        "fields": {
            "state": 1052,
            "issue": 102,
            "state_issue_score": -0.1,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21104,
        "fields": {
            "state": 1052,
            "issue": 103,
            "state_issue_score": 0.2,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21105,
        "fields": {
            "state": 1052,
            "issue": 104,
            "state_issue_score": -0.2,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21111,
        "fields": {
            "state": 1053,
            "issue": 100,
            "state_issue_score": -0.6,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21112,
        "fields": {
            "state": 1053,
            "issue": 101,
            "state_issue_score": -0.4,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21113,
        "fields": {
            "state": 1053,
            "issue": 102,
            "state_issue_score": -0.4,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21114,
        "fields": {
            "state": 1053,
            "issue": 103,
            "state_issue_score": -0.6,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21115,
        "fields": {
            "state": 1053,
            "issue": 104,
            "state_issue_score": -0.3,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21121,
        "fields": {
            "state": 1054,
            "issue": 100,
            "state_issue_score": 0.5,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21122,
        "fields": {
            "state": 1054,
            "issue": 101,
            "state_issue_score": -0.1,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21123,
        "fields": {
            "state": 1054,
            "issue": 102,
            "state_issue_score": -0.1,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21124,
        "fields": {
            "state": 1054,
            "issue": 103,
            "state_issue_score": 0.5,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21125,
        "fields": {
            "state": 1054,
            "issue": 104,
            "state_issue_score": 0.5,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21131,
        "fields": {
            "state": 1055,
            "issue": 100,
            "state_issue_score": -0.2,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21132,
        "fields": {
            "state": 1055,
            "issue": 101,
            "state_issue_score": 0.2,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21133,
        "fields": {
            "state": 1055,
            "issue": 102,
            "state_issue_score": -0.3,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21134,
        "fields": {
            "state": 1055,
            "issue": 103,
            "state_issue_score": -0.1,
            "weight": 1.5
        }
    },
    {
        "model": "campaign_trail.state_issue_score",
        "pk": 21135,
        "fields": {
            "state": 1055,
            "issue": 104,
            "state_issue_score": -0.2,
            "weight": 1.5
        }
    }
]

campaignTrail_temp.candidate_issue_score_json = [
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1000,
        "fields": {
            "candidate": 200,
            "issue": 100,
            "issue_score": -0.4
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1001,
        "fields": {
            "candidate": 200,
            "issue": 101,
            "issue_score": 0.5
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1002,
        "fields": {
            "candidate": 200,
            "issue": 102,
            "issue_score": 0.1
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1003,
        "fields": {
            "candidate": 200,
            "issue": 103,
            "issue_score": -0.5
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1004,
        "fields": {
            "candidate": 200,
            "issue": 104,
            "issue_score": -0.6
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1005,
        "fields": {
            "candidate": 201,
            "issue": 100,
            "issue_score": 0.35
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1006,
        "fields": {
            "candidate": 201,
            "issue": 101,
            "issue_score": -0.3
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1007,
        "fields": {
            "candidate": 201,
            "issue": 102,
            "issue_score": 0
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1008,
        "fields": {
            "candidate": 201,
            "issue": 103,
            "issue_score": 0.55
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1009,
        "fields": {
            "candidate": 201,
            "issue": 104,
            "issue_score": 0.55
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1010,
        "fields": {
            "candidate": 202,
            "issue": 100,
            "issue_score": -0.5
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1011,
        "fields": {
            "candidate": 202,
            "issue": 101,
            "issue_score": -0.7
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1012,
        "fields": {
            "candidate": 202,
            "issue": 102,
            "issue_score": 0.6
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1013,
        "fields": {
            "candidate": 202,
            "issue": 103,
            "issue_score": 0.7
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1014,
        "fields": {
            "candidate": 202,
            "issue": 104,
            "issue_score": 0.7
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1015,
        "fields": {
            "candidate": 203,
            "issue": 100,
            "issue_score": 0.7
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1016,
        "fields": {
            "candidate": 203,
            "issue": 101,
            "issue_score": 0.7
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1017,
        "fields": {
            "candidate": 203,
            "issue": 102,
            "issue_score": 0.7
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1018,
        "fields": {
            "candidate": 203,
            "issue": 103,
            "issue_score": 0.7
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1019,
        "fields": {
            "candidate": 203,
            "issue": 104,
            "issue_score": 0.7
        }
    }
]

campaignTrail_temp.running_mate_issue_score_json = [
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1045,
        "fields": {
            "candidate": 209,
            "issue": 100,
            "issue_score": 0.3
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1046,
        "fields": {
            "candidate": 209,
            "issue": 101,
            "issue_score": -0.4
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1047,
        "fields": {
            "candidate": 209,
            "issue": 102,
            "issue_score": -0.25
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1048,
        "fields": {
            "candidate": 209,
            "issue": 103,
            "issue_score": 0.5
        }
    },
    {
        "model": "campaign_trail.candidate_issue_score",
        "pk": 1049,
        "fields": {
            "candidate": 209,
            "issue": 104,
            "issue_score": 0.45
        }
    }
]

campaignTrail_temp.candidate_state_multiplier_json = [
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2500,
        "fields": {
            "candidate": 200,
            "state": 1000,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2501,
        "fields": {
            "candidate": 200,
            "state": 1001,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2502,
        "fields": {
            "candidate": 200,
            "state": 1002,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2503,
        "fields": {
            "candidate": 200,
            "state": 1003,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2504,
        "fields": {
            "candidate": 200,
            "state": 1004,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2505,
        "fields": {
            "candidate": 200,
            "state": 1005,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2506,
        "fields": {
            "candidate": 200,
            "state": 1006,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2507,
        "fields": {
            "candidate": 200,
            "state": 1007,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2508,
        "fields": {
            "candidate": 200,
            "state": 1008,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2509,
        "fields": {
            "candidate": 200,
            "state": 1009,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2510,
        "fields": {
            "candidate": 200,
            "state": 1010,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2511,
        "fields": {
            "candidate": 200,
            "state": 1011,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2512,
        "fields": {
            "candidate": 200,
            "state": 1012,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2513,
        "fields": {
            "candidate": 200,
            "state": 1013,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2514,
        "fields": {
            "candidate": 200,
            "state": 1014,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2515,
        "fields": {
            "candidate": 200,
            "state": 1015,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2516,
        "fields": {
            "candidate": 200,
            "state": 1016,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2517,
        "fields": {
            "candidate": 200,
            "state": 1017,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2518,
        "fields": {
            "candidate": 200,
            "state": 1018,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2519,
        "fields": {
            "candidate": 200,
            "state": 1019,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2520,
        "fields": {
            "candidate": 200,
            "state": 1020,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2521,
        "fields": {
            "candidate": 200,
            "state": 1021,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2522,
        "fields": {
            "candidate": 200,
            "state": 1022,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2523,
        "fields": {
            "candidate": 200,
            "state": 1023,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2524,
        "fields": {
            "candidate": 200,
            "state": 1024,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2525,
        "fields": {
            "candidate": 200,
            "state": 1025,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2526,
        "fields": {
            "candidate": 200,
            "state": 1026,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2527,
        "fields": {
            "candidate": 200,
            "state": 1027,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2528,
        "fields": {
            "candidate": 200,
            "state": 1028,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2529,
        "fields": {
            "candidate": 200,
            "state": 1029,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2530,
        "fields": {
            "candidate": 200,
            "state": 1030,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2531,
        "fields": {
            "candidate": 200,
            "state": 1031,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2532,
        "fields": {
            "candidate": 200,
            "state": 1032,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2533,
        "fields": {
            "candidate": 200,
            "state": 1033,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2534,
        "fields": {
            "candidate": 200,
            "state": 1034,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2535,
        "fields": {
            "candidate": 200,
            "state": 1035,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2536,
        "fields": {
            "candidate": 200,
            "state": 1036,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2537,
        "fields": {
            "candidate": 200,
            "state": 1037,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2538,
        "fields": {
            "candidate": 200,
            "state": 1038,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2539,
        "fields": {
            "candidate": 200,
            "state": 1039,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2540,
        "fields": {
            "candidate": 200,
            "state": 1040,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2541,
        "fields": {
            "candidate": 200,
            "state": 1041,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2542,
        "fields": {
            "candidate": 200,
            "state": 1042,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2543,
        "fields": {
            "candidate": 200,
            "state": 1043,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2544,
        "fields": {
            "candidate": 200,
            "state": 1044,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2545,
        "fields": {
            "candidate": 200,
            "state": 1045,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2546,
        "fields": {
            "candidate": 200,
            "state": 1046,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2547,
        "fields": {
            "candidate": 200,
            "state": 1047,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2548,
        "fields": {
            "candidate": 200,
            "state": 1048,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2549,
        "fields": {
            "candidate": 200,
            "state": 1049,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2550,
        "fields": {
            "candidate": 200,
            "state": 1050,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2551,
        "fields": {
            "candidate": 201,
            "state": 1000,
            "state_multiplier": 0.839
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2552,
        "fields": {
            "candidate": 201,
            "state": 1001,
            "state_multiplier": 0.737
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2553,
        "fields": {
            "candidate": 201,
            "state": 1002,
            "state_multiplier": 0.9
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2554,
        "fields": {
            "candidate": 201,
            "state": 1003,
            "state_multiplier": 0.741
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2555,
        "fields": {
            "candidate": 201,
            "state": 1004,
            "state_multiplier": 1.244
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2556,
        "fields": {
            "candidate": 201,
            "state": 1005,
            "state_multiplier": 0.878
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2557,
        "fields": {
            "candidate": 201,
            "state": 1006,
            "state_multiplier": 0.884
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2558,
        "fields": {
            "candidate": 201,
            "state": 1007,
            "state_multiplier": 0.915
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2559,
        "fields": {
            "candidate": 201,
            "state": 1008,
            "state_multiplier": 0.959
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2560,
        "fields": {
            "candidate": 201,
            "state": 1009,
            "state_multiplier": 0.942
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2561,
        "fields": {
            "candidate": 201,
            "state": 1010,
            "state_multiplier": 1.285
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2562,
        "fields": {
            "candidate": 201,
            "state": 1011,
            "state_multiplier": 0.528
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2563,
        "fields": {
            "candidate": 201,
            "state": 1012,
            "state_multiplier": 1.223
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2564,
        "fields": {
            "candidate": 201,
            "state": 1013,
            "state_multiplier": 0.769
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2565,
        "fields": {
            "candidate": 201,
            "state": 1014,
            "state_multiplier": 0.846
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2566,
        "fields": {
            "candidate": 201,
            "state": 1015,
            "state_multiplier": 0.669
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2567,
        "fields": {
            "candidate": 201,
            "state": 1016,
            "state_multiplier": 0.666
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2568,
        "fields": {
            "candidate": 201,
            "state": 1017,
            "state_multiplier": 0.844
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2569,
        "fields": {
            "candidate": 201,
            "state": 1018,
            "state_multiplier": 1.11
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2570,
        "fields": {
            "candidate": 201,
            "state": 1019,
            "state_multiplier": 1.589
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2571,
        "fields": {
            "candidate": 201,
            "state": 1020,
            "state_multiplier": 1.103
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2572,
        "fields": {
            "candidate": 201,
            "state": 1021,
            "state_multiplier": 1.119
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2573,
        "fields": {
            "candidate": 201,
            "state": 1022,
            "state_multiplier": 0.993
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2574,
        "fields": {
            "candidate": 201,
            "state": 1023,
            "state_multiplier": 1.006
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2575,
        "fields": {
            "candidate": 201,
            "state": 1024,
            "state_multiplier": 0.738
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2576,
        "fields": {
            "candidate": 201,
            "state": 1025,
            "state_multiplier": 0.692
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2577,
        "fields": {
            "candidate": 201,
            "state": 1026,
            "state_multiplier": 0.634
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2578,
        "fields": {
            "candidate": 201,
            "state": 1027,
            "state_multiplier": 0.918
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2579,
        "fields": {
            "candidate": 201,
            "state": 1028,
            "state_multiplier": 0.98
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2580,
        "fields": {
            "candidate": 201,
            "state": 1029,
            "state_multiplier": 1.004
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2581,
        "fields": {
            "candidate": 201,
            "state": 1030,
            "state_multiplier": 0.98
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2582,
        "fields": {
            "candidate": 201,
            "state": 1031,
            "state_multiplier": 1.12
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2583,
        "fields": {
            "candidate": 201,
            "state": 1032,
            "state_multiplier": 0.963
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2584,
        "fields": {
            "candidate": 201,
            "state": 1033,
            "state_multiplier": 0.5
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2585,
        "fields": {
            "candidate": 201,
            "state": 1034,
            "state_multiplier": 0.88
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2586,
        "fields": {
            "candidate": 201,
            "state": 1035,
            "state_multiplier": 0.485
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2587,
        "fields": {
            "candidate": 201,
            "state": 1036,
            "state_multiplier": 0.913
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2588,
        "fields": {
            "candidate": 201,
            "state": 1037,
            "state_multiplier": 0.984
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2589,
        "fields": {
            "candidate": 201,
            "state": 1038,
            "state_multiplier": 0.896
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2590,
        "fields": {
            "candidate": 201,
            "state": 1039,
            "state_multiplier": 0.965
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2591,
        "fields": {
            "candidate": 201,
            "state": 1040,
            "state_multiplier": 0.638
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2592,
        "fields": {
            "candidate": 201,
            "state": 1041,
            "state_multiplier": 0.81
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2593,
        "fields": {
            "candidate": 201,
            "state": 1042,
            "state_multiplier": 0.854
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2594,
        "fields": {
            "candidate": 201,
            "state": 1043,
            "state_multiplier": 0.656
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2595,
        "fields": {
            "candidate": 201,
            "state": 1044,
            "state_multiplier": 1.487
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2596,
        "fields": {
            "candidate": 201,
            "state": 1045,
            "state_multiplier": 1.079
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2597,
        "fields": {
            "candidate": 201,
            "state": 1046,
            "state_multiplier": 1.188
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2598,
        "fields": {
            "candidate": 201,
            "state": 1047,
            "state_multiplier": 13.948
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2599,
        "fields": {
            "candidate": 201,
            "state": 1048,
            "state_multiplier": 0.597
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2600,
        "fields": {
            "candidate": 201,
            "state": 1049,
            "state_multiplier": 0.994
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2601,
        "fields": {
            "candidate": 201,
            "state": 1050,
            "state_multiplier": 0.481
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2602,
        "fields": {
            "candidate": 202,
            "state": 1000,
            "state_multiplier": 0.0942
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2603,
        "fields": {
            "candidate": 202,
            "state": 1001,
            "state_multiplier": 0.2323
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2604,
        "fields": {
            "candidate": 202,
            "state": 1002,
            "state_multiplier": 0.1122
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2605,
        "fields": {
            "candidate": 202,
            "state": 1003,
            "state_multiplier": 0.1276
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2606,
        "fields": {
            "candidate": 202,
            "state": 1004,
            "state_multiplier": 0.1005
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2607,
        "fields": {
            "candidate": 202,
            "state": 1005,
            "state_multiplier": 0.1615
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2608,
        "fields": {
            "candidate": 202,
            "state": 1006,
            "state_multiplier": 0.0605
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2609,
        "fields": {
            "candidate": 202,
            "state": 1007,
            "state_multiplier": 0.0825
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2610,
        "fields": {
            "candidate": 202,
            "state": 1008,
            "state_multiplier": 0.0601
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2611,
        "fields": {
            "candidate": 202,
            "state": 1009,
            "state_multiplier": 0.0835
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2612,
        "fields": {
            "candidate": 202,
            "state": 1010,
            "state_multiplier": 0.0989
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2613,
        "fields": {
            "candidate": 202,
            "state": 1011,
            "state_multiplier": 0.2608
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2614,
        "fields": {
            "candidate": 202,
            "state": 1012,
            "state_multiplier": 0.1176
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2615,
        "fields": {
            "candidate": 202,
            "state": 1013,
            "state_multiplier": 0.1218
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2616,
        "fields": {
            "candidate": 202,
            "state": 1014,
            "state_multiplier": 0.1441
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2617,
        "fields": {
            "candidate": 202,
            "state": 1015,
            "state_multiplier": 0.1089
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2618,
        "fields": {
            "candidate": 202,
            "state": 1016,
            "state_multiplier": 0.0984
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2619,
        "fields": {
            "candidate": 202,
            "state": 1017,
            "state_multiplier": 0.0716
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2620,
        "fields": {
            "candidate": 202,
            "state": 1018,
            "state_multiplier": 0.1754
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2621,
        "fields": {
            "candidate": 202,
            "state": 1019,
            "state_multiplier": 0.1599
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2622,
        "fields": {
            "candidate": 202,
            "state": 1020,
            "state_multiplier": 0.1111
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2623,
        "fields": {
            "candidate": 202,
            "state": 1021,
            "state_multiplier": 0.1616
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2624,
        "fields": {
            "candidate": 202,
            "state": 1022,
            "state_multiplier": 0.2002
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2625,
        "fields": {
            "candidate": 202,
            "state": 1023,
            "state_multiplier": 0.0498
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2626,
        "fields": {
            "candidate": 202,
            "state": 1024,
            "state_multiplier": 0.0959
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2627,
        "fields": {
            "candidate": 202,
            "state": 1025,
            "state_multiplier": 0.1368
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2628,
        "fields": {
            "candidate": 202,
            "state": 1026,
            "state_multiplier": 0.1398
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2629,
        "fields": {
            "candidate": 202,
            "state": 1027,
            "state_multiplier": 0.149
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2630,
        "fields": {
            "candidate": 202,
            "state": 1028,
            "state_multiplier": 0.1501
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2631,
        "fields": {
            "candidate": 202,
            "state": 1029,
            "state_multiplier": 0.0714
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2632,
        "fields": {
            "candidate": 202,
            "state": 1030,
            "state_multiplier": 0.243
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2633,
        "fields": {
            "candidate": 202,
            "state": 1031,
            "state_multiplier": 0.0752
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2634,
        "fields": {
            "candidate": 202,
            "state": 1032,
            "state_multiplier": 0.0937
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2635,
        "fields": {
            "candidate": 202,
            "state": 1033,
            "state_multiplier": 0.1794
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2636,
        "fields": {
            "candidate": 202,
            "state": 1034,
            "state_multiplier": 0.1515
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2637,
        "fields": {
            "candidate": 202,
            "state": 1035,
            "state_multiplier": 0.1129
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2638,
        "fields": {
            "candidate": 202,
            "state": 1036,
            "state_multiplier": 0.1738
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2639,
        "fields": {
            "candidate": 202,
            "state": 1037,
            "state_multiplier": 0.0944
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2640,
        "fields": {
            "candidate": 202,
            "state": 1038,
            "state_multiplier": 0.1082
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2641,
        "fields": {
            "candidate": 202,
            "state": 1039,
            "state_multiplier": 0.1049
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2642,
        "fields": {
            "candidate": 202,
            "state": 1040,
            "state_multiplier": 0.1554
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2643,
        "fields": {
            "candidate": 202,
            "state": 1041,
            "state_multiplier": 0.1095
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2644,
        "fields": {
            "candidate": 202,
            "state": 1042,
            "state_multiplier": 0.0834
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2645,
        "fields": {
            "candidate": 202,
            "state": 1043,
            "state_multiplier": 0.6883
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2646,
        "fields": {
            "candidate": 202,
            "state": 1044,
            "state_multiplier": 0.3209
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2647,
        "fields": {
            "candidate": 202,
            "state": 1045,
            "state_multiplier": 0.1431
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2648,
        "fields": {
            "candidate": 202,
            "state": 1046,
            "state_multiplier": 0.2445
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2649,
        "fields": {
            "candidate": 202,
            "state": 1047,
            "state_multiplier": 0.7139
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2650,
        "fields": {
            "candidate": 202,
            "state": 1048,
            "state_multiplier": 0.1175
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2651,
        "fields": {
            "candidate": 202,
            "state": 1049,
            "state_multiplier": 0.1675
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2652,
        "fields": {
            "candidate": 202,
            "state": 1050,
            "state_multiplier": 0.2299
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2653,
        "fields": {
            "candidate": 203,
            "state": 1000,
            "state_multiplier": 0.0207
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2654,
        "fields": {
            "candidate": 203,
            "state": 1001,
            "state_multiplier": 0.0544
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2655,
        "fields": {
            "candidate": 203,
            "state": 1002,
            "state_multiplier": 0.044
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2656,
        "fields": {
            "candidate": 203,
            "state": 1003,
            "state_multiplier": 0.0347
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2657,
        "fields": {
            "candidate": 203,
            "state": 1004,
            "state_multiplier": 0.0433
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2658,
        "fields": {
            "candidate": 203,
            "state": 1005,
            "state_multiplier": 0.0351
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2659,
        "fields": {
            "candidate": 203,
            "state": 1006,
            "state_multiplier": 0.0286
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2660,
        "fields": {
            "candidate": 203,
            "state": 1007,
            "state_multiplier": 0.0323
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2661,
        "fields": {
            "candidate": 203,
            "state": 1008,
            "state_multiplier": 0.0203
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2662,
        "fields": {
            "candidate": 203,
            "state": 1009,
            "state_multiplier": 0.0062
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2663,
        "fields": {
            "candidate": 203,
            "state": 1010,
            "state_multiplier": 0.0663
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2664,
        "fields": {
            "candidate": 203,
            "state": 1011,
            "state_multiplier": 0.0369
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2665,
        "fields": {
            "candidate": 203,
            "state": 1012,
            "state_multiplier": 0.0418
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2666,
        "fields": {
            "candidate": 203,
            "state": 1013,
            "state_multiplier": 0.0088
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2667,
        "fields": {
            "candidate": 203,
            "state": 1014,
            "state_multiplier": 0.0218
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2668,
        "fields": {
            "candidate": 203,
            "state": 1015,
            "state_multiplier": 0.0599
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2669,
        "fields": {
            "candidate": 203,
            "state": 1016,
            "state_multiplier": 0.0237
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2670,
        "fields": {
            "candidate": 203,
            "state": 1017,
            "state_multiplier": 0.0284
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2671,
        "fields": {
            "candidate": 203,
            "state": 1018,
            "state_multiplier": 0.0636
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2672,
        "fields": {
            "candidate": 203,
            "state": 1019,
            "state_multiplier": 0.0388
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2673,
        "fields": {
            "candidate": 203,
            "state": 1020,
            "state_multiplier": 0.0247
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2674,
        "fields": {
            "candidate": 203,
            "state": 1021,
            "state_multiplier": 0.0353
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2675,
        "fields": {
            "candidate": 203,
            "state": 1022,
            "state_multiplier": 0.0347
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2676,
        "fields": {
            "candidate": 203,
            "state": 1023,
            "state_multiplier": 0.017
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2677,
        "fields": {
            "candidate": 203,
            "state": 1024,
            "state_multiplier": 0.03
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2678,
        "fields": {
            "candidate": 203,
            "state": 1025,
            "state_multiplier": 0.0482
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2679,
        "fields": {
            "candidate": 203,
            "state": 1026,
            "state_multiplier": 0.0312
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2680,
        "fields": {
            "candidate": 203,
            "state": 1027,
            "state_multiplier": 0
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2681,
        "fields": {
            "candidate": 203,
            "state": 1028,
            "state_multiplier": 0.0263
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2682,
        "fields": {
            "candidate": 203,
            "state": 1029,
            "state_multiplier": 0.0228
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2683,
        "fields": {
            "candidate": 203,
            "state": 1030,
            "state_multiplier": 0.0315
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2684,
        "fields": {
            "candidate": 203,
            "state": 1031,
            "state_multiplier": 0.033
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2685,
        "fields": {
            "candidate": 203,
            "state": 1032,
            "state_multiplier": 0.0085
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2686,
        "fields": {
            "candidate": 203,
            "state": 1033,
            "state_multiplier": 0.033
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2687,
        "fields": {
            "candidate": 203,
            "state": 1034,
            "state_multiplier": 0.0347
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2688,
        "fields": {
            "candidate": 203,
            "state": 1035,
            "state_multiplier": 0
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2689,
        "fields": {
            "candidate": 203,
            "state": 1036,
            "state_multiplier": 0.052
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2690,
        "fields": {
            "candidate": 203,
            "state": 1037,
            "state_multiplier": 0.0242
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2691,
        "fields": {
            "candidate": 203,
            "state": 1038,
            "state_multiplier": 0.0259
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2692,
        "fields": {
            "candidate": 203,
            "state": 1039,
            "state_multiplier": 0.0255
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2693,
        "fields": {
            "candidate": 203,
            "state": 1040,
            "state_multiplier": 0
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2694,
        "fields": {
            "candidate": 203,
            "state": 1041,
            "state_multiplier": 0.0264
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2695,
        "fields": {
            "candidate": 203,
            "state": 1042,
            "state_multiplier": 0.0263
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2696,
        "fields": {
            "candidate": 203,
            "state": 1043,
            "state_multiplier": 0.0273
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2697,
        "fields": {
            "candidate": 203,
            "state": 1044,
            "state_multiplier": 0.0508
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2698,
        "fields": {
            "candidate": 203,
            "state": 1045,
            "state_multiplier": 0.0227
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2699,
        "fields": {
            "candidate": 203,
            "state": 1046,
            "state_multiplier": 0.0532
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2700,
        "fields": {
            "candidate": 203,
            "state": 1047,
            "state_multiplier": 0.227
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2701,
        "fields": {
            "candidate": 203,
            "state": 1048,
            "state_multiplier": 0.0535
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2702,
        "fields": {
            "candidate": 203,
            "state": 1049,
            "state_multiplier": 0.0343
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 2703,
        "fields": {
            "candidate": 203,
            "state": 1050,
            "state_multiplier": 0.0459
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21087,
        "fields": {
            "candidate": 200,
            "state": 1051,
            "state_multiplier": 0.87
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21088,
        "fields": {
            "candidate": 201,
            "state": 1051,
            "state_multiplier": 0.75
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21089,
        "fields": {
            "candidate": 202,
            "state": 1051,
            "state_multiplier": 0.05
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21090,
        "fields": {
            "candidate": 203,
            "state": 1051,
            "state_multiplier": 0.05
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21097,
        "fields": {
            "candidate": 200,
            "state": 1052,
            "state_multiplier": 0.9
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21098,
        "fields": {
            "candidate": 201,
            "state": 1052,
            "state_multiplier": 0.92
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21099,
        "fields": {
            "candidate": 202,
            "state": 1052,
            "state_multiplier": 0.05
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21100,
        "fields": {
            "candidate": 203,
            "state": 1052,
            "state_multiplier": 0.05
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21107,
        "fields": {
            "candidate": 200,
            "state": 1053,
            "state_multiplier": 0.96
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21108,
        "fields": {
            "candidate": 201,
            "state": 1053,
            "state_multiplier": 0.65
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21109,
        "fields": {
            "candidate": 202,
            "state": 1053,
            "state_multiplier": 0.05
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21110,
        "fields": {
            "candidate": 203,
            "state": 1053,
            "state_multiplier": 0.05
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21117,
        "fields": {
            "candidate": 200,
            "state": 1054,
            "state_multiplier": 0.83
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21118,
        "fields": {
            "candidate": 201,
            "state": 1054,
            "state_multiplier": 0.94
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21119,
        "fields": {
            "candidate": 202,
            "state": 1054,
            "state_multiplier": 0.1
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21120,
        "fields": {
            "candidate": 203,
            "state": 1054,
            "state_multiplier": 0.05
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21127,
        "fields": {
            "candidate": 200,
            "state": 1055,
            "state_multiplier": 0.9
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21128,
        "fields": {
            "candidate": 201,
            "state": 1055,
            "state_multiplier": 0.94
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21129,
        "fields": {
            "candidate": 202,
            "state": 1055,
            "state_multiplier": 0.25
        }
    },
    {
        "model": "campaign_trail.candidate_state_multiplier",
        "pk": 21130,
        "fields": {
            "candidate": 203,
            "state": 1055,
            "state_multiplier": 0.05
        }
    }
]

campaignTrail_temp.answer_score_global_json = [
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3086,
        "fields": {
            "answer": 5153,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3087,
        "fields": {
            "answer": 5176,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.0025
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3088,
        "fields": {
            "answer": 5177,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.0012
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3089,
        "fields": {
            "answer": 5178,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.0008
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3090,
        "fields": {
            "answer": 5179,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.0012
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3094,
        "fields": {
            "answer": 5191,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3096,
        "fields": {
            "answer": 5229,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3097,
        "fields": {
            "answer": 5230,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.008
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3098,
        "fields": {
            "answer": 5242,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3099,
        "fields": {
            "answer": 5243,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3100,
        "fields": {
            "answer": 5246,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.066
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3101,
        "fields": {
            "answer": 5247,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.07
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3102,
        "fields": {
            "answer": 5248,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.07
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3103,
        "fields": {
            "answer": 5249,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.072
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3104,
        "fields": {
            "answer": 5250,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.0255
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3105,
        "fields": {
            "answer": 5251,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.0275
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3106,
        "fields": {
            "answer": 5252,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.0245
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3107,
        "fields": {
            "answer": 5253,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.0155
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3108,
        "fields": {
            "answer": 5254,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.0142
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3109,
        "fields": {
            "answer": 5255,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.0158
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3130,
        "fields": {
            "answer": 5141,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.0075
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3131,
        "fields": {
            "answer": 5143,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3132,
        "fields": {
            "answer": 5144,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3133,
        "fields": {
            "answer": 5150,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3134,
        "fields": {
            "answer": 5151,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.008
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3135,
        "fields": {
            "answer": 5153,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3136,
        "fields": {
            "answer": 5154,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3137,
        "fields": {
            "answer": 5171,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3138,
        "fields": {
            "answer": 5172,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.03
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3139,
        "fields": {
            "answer": 5174,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3140,
        "fields": {
            "answer": 5176,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.0012
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3146,
        "fields": {
            "answer": 5189,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3147,
        "fields": {
            "answer": 5191,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.007
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3150,
        "fields": {
            "answer": 5198,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3151,
        "fields": {
            "answer": 5199,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3152,
        "fields": {
            "answer": 5200,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.006
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3153,
        "fields": {
            "answer": 5201,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3154,
        "fields": {
            "answer": 5203,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3157,
        "fields": {
            "answer": 5228,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3158,
        "fields": {
            "answer": 5229,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.006
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3159,
        "fields": {
            "answer": 5230,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.009
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3160,
        "fields": {
            "answer": 5242,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3161,
        "fields": {
            "answer": 5243,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3162,
        "fields": {
            "answer": 5244,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3163,
        "fields": {
            "answer": 5245,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3164,
        "fields": {
            "answer": 5256,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.05
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3165,
        "fields": {
            "answer": 5257,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.05
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3166,
        "fields": {
            "answer": 5263,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3181,
        "fields": {
            "answer": 5147,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": 0.04
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3182,
        "fields": {
            "answer": 5189,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": 0.015
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3183,
        "fields": {
            "answer": 5191,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": -0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3186,
        "fields": {
            "answer": 5200,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": 0.02
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3188,
        "fields": {
            "answer": 5229,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": 0.02
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3189,
        "fields": {
            "answer": 5230,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": 0.028
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3190,
        "fields": {
            "answer": 5242,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": 0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3191,
        "fields": {
            "answer": 5243,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": 0.035
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3192,
        "fields": {
            "answer": 5244,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3193,
        "fields": {
            "answer": 5245,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3202,
        "fields": {
            "answer": 5147,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.03
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3203,
        "fields": {
            "answer": 5171,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.07
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3204,
        "fields": {
            "answer": 5172,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.15
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3209,
        "fields": {
            "answer": 5199,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.03
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3210,
        "fields": {
            "answer": 5200,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.02
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3211,
        "fields": {
            "answer": 5201,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.012
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3212,
        "fields": {
            "answer": 5203,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.1064
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3215,
        "fields": {
            "answer": 5253,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.025
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3216,
        "fields": {
            "answer": 5254,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.023
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3217,
        "fields": {
            "answer": 5255,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.024
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3284,
        "fields": {
            "answer": 5141,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.0025
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3285,
        "fields": {
            "answer": 5141,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.25
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3286,
        "fields": {
            "answer": 5142,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.006
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3287,
        "fields": {
            "answer": 5148,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": 0.035
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3288,
        "fields": {
            "answer": 5148,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.015
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3289,
        "fields": {
            "answer": 5149,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": 0.035
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3290,
        "fields": {
            "answer": 5149,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.035
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3291,
        "fields": {
            "answer": 5151,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.05
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3292,
        "fields": {
            "answer": 5151,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": -0.032
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3296,
        "fields": {
            "answer": 5199,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": 0.035
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3305,
        "fields": {
            "answer": 5212,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3306,
        "fields": {
            "answer": 5212,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.00375
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3307,
        "fields": {
            "answer": 5215,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.012
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3308,
        "fields": {
            "answer": 5215,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": 0.02
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3309,
        "fields": {
            "answer": 5215,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.05
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3314,
        "fields": {
            "answer": 5220,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3315,
        "fields": {
            "answer": 5220,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": 0.03
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3316,
        "fields": {
            "answer": 5220,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.03
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3317,
        "fields": {
            "answer": 5222,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3318,
        "fields": {
            "answer": 5223,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.025
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3319,
        "fields": {
            "answer": 5224,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.007
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3320,
        "fields": {
            "answer": 5225,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.0065
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3321,
        "fields": {
            "answer": 5226,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3322,
        "fields": {
            "answer": 5226,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.009
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3323,
        "fields": {
            "answer": 5227,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3324,
        "fields": {
            "answer": 5233,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3330,
        "fields": {
            "answer": 5256,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": -0.031
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3331,
        "fields": {
            "answer": 5256,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.026
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3332,
        "fields": {
            "answer": 5257,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": -0.03
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3333,
        "fields": {
            "answer": 5257,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.033
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 3334,
        "fields": {
            "answer": 5259,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20682,
        "fields": {
            "answer": 5154,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.008
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20683,
        "fields": {
            "answer": 5152,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.009
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20684,
        "fields": {
            "answer": 5222,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.0015
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20691,
        "fields": {
            "answer": 20690,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.048
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20692,
        "fields": {
            "answer": 20690,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": -0.028
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20693,
        "fields": {
            "answer": 20690,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.032
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20698,
        "fields": {
            "answer": 20696,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": 0.0015
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20699,
        "fields": {
            "answer": 20696,
            "candidate": 200,
            "affected_candidate": 202,
            "global_multiplier": 0.08
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20713,
        "fields": {
            "answer": 20711,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20714,
        "fields": {
            "answer": 20711,
            "candidate": 200,
            "affected_candidate": 202,
            "global_multiplier": 0.09
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20729,
        "fields": {
            "answer": 20725,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.008
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20730,
        "fields": {
            "answer": 20716,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20733,
        "fields": {
            "answer": 20731,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": 0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20739,
        "fields": {
            "answer": 20736,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": 0.009
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20753,
        "fields": {
            "answer": 20751,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.0051
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20755,
        "fields": {
            "answer": 20751,
            "candidate": 202,
            "affected_candidate": 201,
            "global_multiplier": 0.022
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20756,
        "fields": {
            "answer": 20751,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": -0.052
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20759,
        "fields": {
            "answer": 20757,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.0042
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20760,
        "fields": {
            "answer": 20757,
            "candidate": 202,
            "affected_candidate": 201,
            "global_multiplier": -0.024
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20761,
        "fields": {
            "answer": 20757,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": 0.048
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20767,
        "fields": {
            "answer": 20763,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": -0.008
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20770,
        "fields": {
            "answer": 5202,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20779,
        "fields": {
            "answer": 20777,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20797,
        "fields": {
            "answer": 20777,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20800,
        "fields": {
            "answer": 20798,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20802,
        "fields": {
            "answer": 20798,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.008
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20806,
        "fields": {
            "answer": 20803,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20819,
        "fields": {
            "answer": 5202,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20850,
        "fields": {
            "answer": 20848,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20854,
        "fields": {
            "answer": 20852,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20858,
        "fields": {
            "answer": 20856,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": -0.0035
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20860,
        "fields": {
            "answer": 20848,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": 0.016
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20862,
        "fields": {
            "answer": 20856,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20865,
        "fields": {
            "answer": 20863,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": -0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20866,
        "fields": {
            "answer": 20863,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20868,
        "fields": {
            "answer": 20863,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20873,
        "fields": {
            "answer": 20871,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20874,
        "fields": {
            "answer": 20871,
            "candidate": 202,
            "affected_candidate": 201,
            "global_multiplier": -0.012
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20892,
        "fields": {
            "answer": 20871,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": 0.32
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20895,
        "fields": {
            "answer": 20893,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20896,
        "fields": {
            "answer": 20893,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20902,
        "fields": {
            "answer": 20900,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20903,
        "fields": {
            "answer": 20900,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": 0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20906,
        "fields": {
            "answer": 20900,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20913,
        "fields": {
            "answer": 20907,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": -0.012
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20917,
        "fields": {
            "answer": 20915,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20918,
        "fields": {
            "answer": 20915,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20940,
        "fields": {
            "answer": 20938,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20941,
        "fields": {
            "answer": 20938,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20950,
        "fields": {
            "answer": 20948,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20951,
        "fields": {
            "answer": 20948,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.012
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20953,
        "fields": {
            "answer": 20948,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20962,
        "fields": {
            "answer": 5184,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20966,
        "fields": {
            "answer": 5184,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": 0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20983,
        "fields": {
            "answer": 20981,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20984,
        "fields": {
            "answer": 20981,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20990,
        "fields": {
            "answer": 20988,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20991,
        "fields": {
            "answer": 20988,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": -0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 20997,
        "fields": {
            "answer": 20995,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": -0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21003,
        "fields": {
            "answer": 21001,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21006,
        "fields": {
            "answer": 21001,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.08
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21017,
        "fields": {
            "answer": 21013,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.007
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21018,
        "fields": {
            "answer": 21013,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": -0.007
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21019,
        "fields": {
            "answer": 21013,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.15
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21022,
        "fields": {
            "answer": 21020,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.0001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21023,
        "fields": {
            "answer": 21020,
            "candidate": 200,
            "affected_candidate": 202,
            "global_multiplier": 0.086
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21026,
        "fields": {
            "answer": 5150,
            "candidate": 200,
            "affected_candidate": 200,
            "global_multiplier": -0.0035
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21027,
        "fields": {
            "answer": 5170,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.1
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21035,
        "fields": {
            "answer": 5212,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21041,
        "fields": {
            "answer": 21039,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21042,
        "fields": {
            "answer": 21039,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": 0.012
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21044,
        "fields": {
            "answer": 21039,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21046,
        "fields": {
            "answer": 5263,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21049,
        "fields": {
            "answer": 5262,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21052,
        "fields": {
            "answer": 20955,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21053,
        "fields": {
            "answer": 20955,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21057,
        "fields": {
            "answer": 21055,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21060,
        "fields": {
            "answer": 5227,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21066,
        "fields": {
            "answer": 5245,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21067,
        "fields": {
            "answer": 5244,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21069,
        "fields": {
            "answer": 5247,
            "candidate": 200,
            "affected_candidate": 202,
            "global_multiplier": 0.03
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21071,
        "fields": {
            "answer": 5246,
            "candidate": 200,
            "affected_candidate": 202,
            "global_multiplier": 0.028
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21075,
        "fields": {
            "answer": 5248,
            "candidate": 200,
            "affected_candidate": 202,
            "global_multiplier": 0.015
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21076,
        "fields": {
            "answer": 5249,
            "candidate": 200,
            "affected_candidate": 202,
            "global_multiplier": 0.024
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21083,
        "fields": {
            "answer": 5252,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21085,
        "fields": {
            "answer": 5250,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21087,
        "fields": {
            "answer": 5225,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21101,
        "fields": {
            "answer": 21096,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21104,
        "fields": {
            "answer": 21102,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": -0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21107,
        "fields": {
            "answer": 21096,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": -0.006
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21110,
        "fields": {
            "answer": 21108,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": 0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21117,
        "fields": {
            "answer": 21115,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21118,
        "fields": {
            "answer": 21115,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": -0.006
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21133,
        "fields": {
            "answer": 21131,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21134,
        "fields": {
            "answer": 21131,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": 0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21139,
        "fields": {
            "answer": 21136,
            "candidate": 203,
            "affected_candidate": 201,
            "global_multiplier": 0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21159,
        "fields": {
            "answer": 21156,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21162,
        "fields": {
            "answer": 21160,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21176,
        "fields": {
            "answer": 21165,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21179,
        "fields": {
            "answer": 21177,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.0015
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21181,
        "fields": {
            "answer": 21177,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21182,
        "fields": {
            "answer": 21177,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21187,
        "fields": {
            "answer": 21183,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21192,
        "fields": {
            "answer": 21190,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.0045
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21206,
        "fields": {
            "answer": 21204,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21210,
        "fields": {
            "answer": 21208,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21212,
        "fields": {
            "answer": 21208,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21215,
        "fields": {
            "answer": 21213,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.006
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21216,
        "fields": {
            "answer": 21213,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21222,
        "fields": {
            "answer": 21220,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": -0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21242,
        "fields": {
            "answer": 21240,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21256,
        "fields": {
            "answer": 21253,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21257,
        "fields": {
            "answer": 21253,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21258,
        "fields": {
            "answer": 21245,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21261,
        "fields": {
            "answer": 21259,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.008
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21262,
        "fields": {
            "answer": 21259,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21266,
        "fields": {
            "answer": 21264,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21267,
        "fields": {
            "answer": 21264,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21269,
        "fields": {
            "answer": 21264,
            "candidate": 200,
            "affected_candidate": 201,
            "global_multiplier": 0.006
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21270,
        "fields": {
            "answer": 21259,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21271,
        "fields": {
            "answer": 21253,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21272,
        "fields": {
            "answer": 21245,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21285,
        "fields": {
            "answer": 5152,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.006
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21311,
        "fields": {
            "answer": 5198,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21316,
        "fields": {
            "answer": 5140,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21317,
        "fields": {
            "answer": 5140,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.006
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21318,
        "fields": {
            "answer": 5139,
            "candidate": 201,
            "affected_candidate": 201,
            "global_multiplier": 0.0065
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21319,
        "fields": {
            "answer": 20725,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21321,
        "fields": {
            "answer": 20725,
            "candidate": 201,
            "affected_candidate": 202,
            "global_multiplier": -0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21322,
        "fields": {
            "answer": 20848,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.004
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21330,
        "fields": {
            "answer": 21328,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.0175
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21331,
        "fields": {
            "answer": 21328,
            "candidate": 201,
            "affected_candidate": 203,
            "global_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21335,
        "fields": {
            "answer": 21333,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.0192
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21339,
        "fields": {
            "answer": 21337,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": 0.01895
        }
    },
    {
        "model": "campaign_trail.answer_score_global",
        "pk": 21340,
        "fields": {
            "answer": 21337,
            "candidate": 201,
            "affected_candidate": 200,
            "global_multiplier": -0.002
        }
    }
]

campaignTrail_temp.answer_score_issue_json = [
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2639,
        "fields": {
            "answer": 5139,
            "issue": 100,
            "issue_score": 0.7,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2640,
        "fields": {
            "answer": 5141,
            "issue": 100,
            "issue_score": -0.25,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2641,
        "fields": {
            "answer": 5147,
            "issue": 103,
            "issue_score": 0.6,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2642,
        "fields": {
            "answer": 5148,
            "issue": 103,
            "issue_score": 0.6,
            "issue_importance": 1.5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2643,
        "fields": {
            "answer": 5150,
            "issue": 102,
            "issue_score": -0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2644,
        "fields": {
            "answer": 5150,
            "issue": 103,
            "issue_score": 0,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2645,
        "fields": {
            "answer": 5151,
            "issue": 100,
            "issue_score": 0.55,
            "issue_importance": 5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2646,
        "fields": {
            "answer": 5151,
            "issue": 101,
            "issue_score": 0.55,
            "issue_importance": 5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2647,
        "fields": {
            "answer": 5151,
            "issue": 102,
            "issue_score": 0.55,
            "issue_importance": 5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2648,
        "fields": {
            "answer": 5151,
            "issue": 103,
            "issue_score": 0.55,
            "issue_importance": 5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2649,
        "fields": {
            "answer": 5151,
            "issue": 104,
            "issue_score": 0.55,
            "issue_importance": 5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2650,
        "fields": {
            "answer": 5153,
            "issue": 100,
            "issue_score": 0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2651,
        "fields": {
            "answer": 5154,
            "issue": 100,
            "issue_score": 0.25,
            "issue_importance": 4
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2652,
        "fields": {
            "answer": 5154,
            "issue": 101,
            "issue_score": -0.25,
            "issue_importance": 3
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2653,
        "fields": {
            "answer": 5154,
            "issue": 102,
            "issue_score": 0,
            "issue_importance": 3
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2654,
        "fields": {
            "answer": 5154,
            "issue": 103,
            "issue_score": 0.4,
            "issue_importance": 3
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2655,
        "fields": {
            "answer": 5154,
            "issue": 104,
            "issue_score": 0.4,
            "issue_importance": 3
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2656,
        "fields": {
            "answer": 5170,
            "issue": 100,
            "issue_score": 0.6,
            "issue_importance": 1.5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2657,
        "fields": {
            "answer": 5170,
            "issue": 101,
            "issue_score": 0.5,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2658,
        "fields": {
            "answer": 5171,
            "issue": 100,
            "issue_score": 0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2659,
        "fields": {
            "answer": 5172,
            "issue": 100,
            "issue_score": -0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2660,
        "fields": {
            "answer": 5173,
            "issue": 103,
            "issue_score": 0.7,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2661,
        "fields": {
            "answer": 5174,
            "issue": 102,
            "issue_score": 0,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2662,
        "fields": {
            "answer": 5175,
            "issue": 102,
            "issue_score": -0.35,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2663,
        "fields": {
            "answer": 5175,
            "issue": 103,
            "issue_score": 0.25,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2664,
        "fields": {
            "answer": 5178,
            "issue": 100,
            "issue_score": 0.45,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2665,
        "fields": {
            "answer": 5178,
            "issue": 101,
            "issue_score": 0.3,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2666,
        "fields": {
            "answer": 5179,
            "issue": 100,
            "issue_score": 0.32,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2667,
        "fields": {
            "answer": 5179,
            "issue": 102,
            "issue_score": 0.25,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2671,
        "fields": {
            "answer": 5189,
            "issue": 100,
            "issue_score": 0.7,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2672,
        "fields": {
            "answer": 5190,
            "issue": 100,
            "issue_score": 0.4,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2677,
        "fields": {
            "answer": 5198,
            "issue": 100,
            "issue_score": -0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2678,
        "fields": {
            "answer": 5199,
            "issue": 100,
            "issue_score": 0.65,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2679,
        "fields": {
            "answer": 5200,
            "issue": 100,
            "issue_score": 0.65,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2680,
        "fields": {
            "answer": 5200,
            "issue": 101,
            "issue_score": 0.65,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2681,
        "fields": {
            "answer": 5200,
            "issue": 102,
            "issue_score": 0.65,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2682,
        "fields": {
            "answer": 5200,
            "issue": 103,
            "issue_score": 0.65,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2683,
        "fields": {
            "answer": 5200,
            "issue": 104,
            "issue_score": 0.65,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2684,
        "fields": {
            "answer": 5201,
            "issue": 100,
            "issue_score": 0.5,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2685,
        "fields": {
            "answer": 5201,
            "issue": 101,
            "issue_score": 0.5,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2686,
        "fields": {
            "answer": 5203,
            "issue": 100,
            "issue_score": 0.1,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2687,
        "fields": {
            "answer": 5203,
            "issue": 101,
            "issue_score": -0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2688,
        "fields": {
            "answer": 5203,
            "issue": 102,
            "issue_score": 0,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2692,
        "fields": {
            "answer": 5263,
            "issue": 100,
            "issue_score": 0.3,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2693,
        "fields": {
            "answer": 5263,
            "issue": 103,
            "issue_score": 0.5,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2694,
        "fields": {
            "answer": 5263,
            "issue": 104,
            "issue_score": 0.5,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2816,
        "fields": {
            "answer": 5139,
            "issue": 101,
            "issue_score": -0.35,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2817,
        "fields": {
            "answer": 5139,
            "issue": 102,
            "issue_score": -0.1,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2818,
        "fields": {
            "answer": 5139,
            "issue": 104,
            "issue_score": 0.575,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2819,
        "fields": {
            "answer": 5140,
            "issue": 100,
            "issue_score": 0,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2820,
        "fields": {
            "answer": 5140,
            "issue": 101,
            "issue_score": -0.375,
            "issue_importance": 3
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2821,
        "fields": {
            "answer": 5140,
            "issue": 102,
            "issue_score": -0.125,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2822,
        "fields": {
            "answer": 5140,
            "issue": 104,
            "issue_score": 0.575,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2823,
        "fields": {
            "answer": 5141,
            "issue": 100,
            "issue_score": 0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2824,
        "fields": {
            "answer": 5141,
            "issue": 101,
            "issue_score": -0.15,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2825,
        "fields": {
            "answer": 5141,
            "issue": 102,
            "issue_score": 0.15,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2826,
        "fields": {
            "answer": 5141,
            "issue": 103,
            "issue_score": 0.475,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2827,
        "fields": {
            "answer": 5141,
            "issue": 104,
            "issue_score": 0.425,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2828,
        "fields": {
            "answer": 5142,
            "issue": 100,
            "issue_score": 0.32,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2829,
        "fields": {
            "answer": 5142,
            "issue": 101,
            "issue_score": -0.333,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2830,
        "fields": {
            "answer": 5142,
            "issue": 102,
            "issue_score": 0,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2831,
        "fields": {
            "answer": 5142,
            "issue": 104,
            "issue_score": 0.5,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2832,
        "fields": {
            "answer": 5143,
            "issue": 100,
            "issue_score": 0.4,
            "issue_importance": 1.2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2833,
        "fields": {
            "answer": 5143,
            "issue": 103,
            "issue_score": 0.4,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2834,
        "fields": {
            "answer": 5144,
            "issue": 100,
            "issue_score": 0.425,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2835,
        "fields": {
            "answer": 5155,
            "issue": 100,
            "issue_score": 0.4,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2836,
        "fields": {
            "answer": 5155,
            "issue": 101,
            "issue_score": -0.3,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2837,
        "fields": {
            "answer": 5155,
            "issue": 102,
            "issue_score": 0.1,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2838,
        "fields": {
            "answer": 5155,
            "issue": 103,
            "issue_score": 0.55,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2839,
        "fields": {
            "answer": 5155,
            "issue": 104,
            "issue_score": 0.55,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2840,
        "fields": {
            "answer": 5156,
            "issue": 100,
            "issue_score": 0.35,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2841,
        "fields": {
            "answer": 5156,
            "issue": 101,
            "issue_score": -0.3,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2842,
        "fields": {
            "answer": 5156,
            "issue": 102,
            "issue_score": 0,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2843,
        "fields": {
            "answer": 5156,
            "issue": 103,
            "issue_score": 0.55,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2844,
        "fields": {
            "answer": 5156,
            "issue": 104,
            "issue_score": 0.55,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2845,
        "fields": {
            "answer": 5157,
            "issue": 100,
            "issue_score": 0.35,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2846,
        "fields": {
            "answer": 5157,
            "issue": 101,
            "issue_score": -0.3,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2847,
        "fields": {
            "answer": 5157,
            "issue": 102,
            "issue_score": -0.125,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2848,
        "fields": {
            "answer": 5157,
            "issue": 103,
            "issue_score": 0.55,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2849,
        "fields": {
            "answer": 5157,
            "issue": 104,
            "issue_score": 0.55,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2856,
        "fields": {
            "answer": 5191,
            "issue": 100,
            "issue_score": 0.1,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2857,
        "fields": {
            "answer": 5191,
            "issue": 102,
            "issue_score": 0.15,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2858,
        "fields": {
            "answer": 5196,
            "issue": 100,
            "issue_score": 0.45,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2859,
        "fields": {
            "answer": 5196,
            "issue": 102,
            "issue_score": 0.25,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2860,
        "fields": {
            "answer": 5196,
            "issue": 103,
            "issue_score": 0.65,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2861,
        "fields": {
            "answer": 5197,
            "issue": 100,
            "issue_score": 0.45,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2862,
        "fields": {
            "answer": 5197,
            "issue": 102,
            "issue_score": 0.25,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2863,
        "fields": {
            "answer": 5197,
            "issue": 103,
            "issue_score": 0.65,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2864,
        "fields": {
            "answer": 5198,
            "issue": 100,
            "issue_score": 0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2865,
        "fields": {
            "answer": 5198,
            "issue": 102,
            "issue_score": -0.15,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2866,
        "fields": {
            "answer": 5199,
            "issue": 101,
            "issue_score": 0.5,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2867,
        "fields": {
            "answer": 5199,
            "issue": 102,
            "issue_score": 0.5,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2874,
        "fields": {
            "answer": 5213,
            "issue": 102,
            "issue_score": 0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2875,
        "fields": {
            "answer": 5214,
            "issue": 102,
            "issue_score": 0.25,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2876,
        "fields": {
            "answer": 5215,
            "issue": 100,
            "issue_score": -0.1,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2877,
        "fields": {
            "answer": 5215,
            "issue": 102,
            "issue_score": -0.5,
            "issue_importance": 3
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2882,
        "fields": {
            "answer": 5220,
            "issue": 100,
            "issue_score": 0.675,
            "issue_importance": 3
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2883,
        "fields": {
            "answer": 5221,
            "issue": 100,
            "issue_score": 0.35,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2884,
        "fields": {
            "answer": 5222,
            "issue": 100,
            "issue_score": 0.15,
            "issue_importance": 1.5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2885,
        "fields": {
            "answer": 5223,
            "issue": 100,
            "issue_score": 0.2,
            "issue_importance": 1.5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2886,
        "fields": {
            "answer": 5225,
            "issue": 103,
            "issue_score": 0.666,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2887,
        "fields": {
            "answer": 5231,
            "issue": 102,
            "issue_score": 0.5,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2888,
        "fields": {
            "answer": 5232,
            "issue": 102,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 2889,
        "fields": {
            "answer": 5233,
            "issue": 102,
            "issue_score": -0.3,
            "issue_importance": 3
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20687,
        "fields": {
            "answer": 5234,
            "issue": 102,
            "issue_score": -0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20724,
        "fields": {
            "answer": 20716,
            "issue": 100,
            "issue_score": 0.1,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20728,
        "fields": {
            "answer": 20725,
            "issue": 100,
            "issue_score": -0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20734,
        "fields": {
            "answer": 20731,
            "issue": 103,
            "issue_score": 0.45,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20750,
        "fields": {
            "answer": 20736,
            "issue": 101,
            "issue_score": -0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20754,
        "fields": {
            "answer": 20751,
            "issue": 101,
            "issue_score": 0.6,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20762,
        "fields": {
            "answer": 20757,
            "issue": 101,
            "issue_score": -0.4,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20768,
        "fields": {
            "answer": 20763,
            "issue": 101,
            "issue_score": 0.3,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20771,
        "fields": {
            "answer": 5202,
            "issue": 103,
            "issue_score": 0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20796,
        "fields": {
            "answer": 20777,
            "issue": 100,
            "issue_score": 0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20801,
        "fields": {
            "answer": 20798,
            "issue": 100,
            "issue_score": -0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20807,
        "fields": {
            "answer": 20803,
            "issue": 100,
            "issue_score": 0,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20851,
        "fields": {
            "answer": 20848,
            "issue": 104,
            "issue_score": 0,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20855,
        "fields": {
            "answer": 20852,
            "issue": 104,
            "issue_score": 0.45,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20859,
        "fields": {
            "answer": 20856,
            "issue": 104,
            "issue_score": 0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20861,
        "fields": {
            "answer": 20848,
            "issue": 100,
            "issue_score": -0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20867,
        "fields": {
            "answer": 20863,
            "issue": 104,
            "issue_score": 0.15,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20869,
        "fields": {
            "answer": 20777,
            "issue": 103,
            "issue_score": 0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20876,
        "fields": {
            "answer": 20871,
            "issue": 100,
            "issue_score": -0.3,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20898,
        "fields": {
            "answer": 20893,
            "issue": 100,
            "issue_score": 0.4,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20899,
        "fields": {
            "answer": 20893,
            "issue": 103,
            "issue_score": 0.5,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20904,
        "fields": {
            "answer": 20900,
            "issue": 100,
            "issue_score": 0.1,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20912,
        "fields": {
            "answer": 20907,
            "issue": 103,
            "issue_score": 0.4,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20920,
        "fields": {
            "answer": 20915,
            "issue": 103,
            "issue_score": 0.1,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20942,
        "fields": {
            "answer": 20938,
            "issue": 103,
            "issue_score": 0.25,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20952,
        "fields": {
            "answer": 20948,
            "issue": 103,
            "issue_score": -0.1,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20963,
        "fields": {
            "answer": 5184,
            "issue": 100,
            "issue_score": -0.2,
            "issue_importance": 3
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20964,
        "fields": {
            "answer": 5184,
            "issue": 101,
            "issue_score": -0.15,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20965,
        "fields": {
            "answer": 5184,
            "issue": 102,
            "issue_score": 0,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20985,
        "fields": {
            "answer": 20981,
            "issue": 100,
            "issue_score": -0.15,
            "issue_importance": 3
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20986,
        "fields": {
            "answer": 20981,
            "issue": 101,
            "issue_score": 0.1,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20987,
        "fields": {
            "answer": 20981,
            "issue": 102,
            "issue_score": 0,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20992,
        "fields": {
            "answer": 20988,
            "issue": 100,
            "issue_score": 0.1,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20993,
        "fields": {
            "answer": 20988,
            "issue": 101,
            "issue_score": 0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20994,
        "fields": {
            "answer": 20988,
            "issue": 102,
            "issue_score": 0,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20998,
        "fields": {
            "answer": 20995,
            "issue": 102,
            "issue_score": 0.4,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 20999,
        "fields": {
            "answer": 20995,
            "issue": 104,
            "issue_score": 0.25,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21004,
        "fields": {
            "answer": 21001,
            "issue": 102,
            "issue_score": -0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21005,
        "fields": {
            "answer": 21001,
            "issue": 104,
            "issue_score": 0.3,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21011,
        "fields": {
            "answer": 21007,
            "issue": 102,
            "issue_score": 0.15,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21012,
        "fields": {
            "answer": 21007,
            "issue": 104,
            "issue_score": 0.15,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21015,
        "fields": {
            "answer": 21013,
            "issue": 102,
            "issue_score": -0.5,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21016,
        "fields": {
            "answer": 21013,
            "issue": 104,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21033,
        "fields": {
            "answer": 5146,
            "issue": 102,
            "issue_score": 0.2,
            "issue_importance": 1.2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21034,
        "fields": {
            "answer": 5145,
            "issue": 102,
            "issue_score": 0.3,
            "issue_importance": 1.2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21043,
        "fields": {
            "answer": 21039,
            "issue": 100,
            "issue_score": 0.35,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21054,
        "fields": {
            "answer": 20955,
            "issue": 103,
            "issue_score": -0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21059,
        "fields": {
            "answer": 21055,
            "issue": 103,
            "issue_score": -0.1,
            "issue_importance": 0
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21061,
        "fields": {
            "answer": 5228,
            "issue": 100,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21062,
        "fields": {
            "answer": 5227,
            "issue": 100,
            "issue_score": 0,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21063,
        "fields": {
            "answer": 5229,
            "issue": 100,
            "issue_score": 0.4,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21064,
        "fields": {
            "answer": 5230,
            "issue": 100,
            "issue_score": 0.5,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21072,
        "fields": {
            "answer": 5247,
            "issue": 103,
            "issue_score": 0.2,
            "issue_importance": 3
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21073,
        "fields": {
            "answer": 5246,
            "issue": 103,
            "issue_score": 0.15,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21074,
        "fields": {
            "answer": 5248,
            "issue": 103,
            "issue_score": 0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21077,
        "fields": {
            "answer": 5249,
            "issue": 103,
            "issue_score": 0.25,
            "issue_importance": 3
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21078,
        "fields": {
            "answer": 5255,
            "issue": 102,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21079,
        "fields": {
            "answer": 5254,
            "issue": 100,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21080,
        "fields": {
            "answer": 5253,
            "issue": 100,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21081,
        "fields": {
            "answer": 5251,
            "issue": 100,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21082,
        "fields": {
            "answer": 5252,
            "issue": 101,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21084,
        "fields": {
            "answer": 5250,
            "issue": 101,
            "issue_score": -0.3,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21086,
        "fields": {
            "answer": 5226,
            "issue": 100,
            "issue_score": 0.3,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21088,
        "fields": {
            "answer": 5224,
            "issue": 100,
            "issue_score": 0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21089,
        "fields": {
            "answer": 5224,
            "issue": 100,
            "issue_score": 0,
            "issue_importance": 0
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21099,
        "fields": {
            "answer": 21096,
            "issue": 102,
            "issue_score": 0.5,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21105,
        "fields": {
            "answer": 21102,
            "issue": 102,
            "issue_score": 0.1,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21111,
        "fields": {
            "answer": 21108,
            "issue": 102,
            "issue_score": -0.5,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21119,
        "fields": {
            "answer": 21115,
            "issue": 103,
            "issue_score": 0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21135,
        "fields": {
            "answer": 21131,
            "issue": 103,
            "issue_score": 0,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21140,
        "fields": {
            "answer": 21136,
            "issue": 103,
            "issue_score": -0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21155,
        "fields": {
            "answer": 21152,
            "issue": 103,
            "issue_score": 0,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21158,
        "fields": {
            "answer": 21156,
            "issue": 103,
            "issue_score": 0,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21163,
        "fields": {
            "answer": 21160,
            "issue": 103,
            "issue_score": 0.1,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21167,
        "fields": {
            "answer": 21165,
            "issue": 103,
            "issue_score": 0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21180,
        "fields": {
            "answer": 21177,
            "issue": 103,
            "issue_score": 0.3,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21188,
        "fields": {
            "answer": 21183,
            "issue": 103,
            "issue_score": 0,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21193,
        "fields": {
            "answer": 21190,
            "issue": 103,
            "issue_score": 0.5,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21207,
        "fields": {
            "answer": 21204,
            "issue": 103,
            "issue_score": 0.45,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21211,
        "fields": {
            "answer": 21208,
            "issue": 100,
            "issue_score": 0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21217,
        "fields": {
            "answer": 21213,
            "issue": 103,
            "issue_score": 0.5,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21218,
        "fields": {
            "answer": 21213,
            "issue": 104,
            "issue_score": 0.5,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21223,
        "fields": {
            "answer": 21220,
            "issue": 102,
            "issue_score": -0.2,
            "issue_importance": 1.5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21243,
        "fields": {
            "answer": 21240,
            "issue": 102,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21248,
        "fields": {
            "answer": 21245,
            "issue": 104,
            "issue_score": 0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21255,
        "fields": {
            "answer": 21253,
            "issue": 104,
            "issue_score": -0.3,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21263,
        "fields": {
            "answer": 21259,
            "issue": 104,
            "issue_score": 0,
            "issue_importance": 1.5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21268,
        "fields": {
            "answer": 21264,
            "issue": 104,
            "issue_score": 0.5,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21273,
        "fields": {
            "answer": 5242,
            "issue": 100,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21274,
        "fields": {
            "answer": 5243,
            "issue": 100,
            "issue_score": 0.1,
            "issue_importance": 1.5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21275,
        "fields": {
            "answer": 5244,
            "issue": 100,
            "issue_score": 0.15,
            "issue_importance": 1.5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21276,
        "fields": {
            "answer": 5245,
            "issue": 100,
            "issue_score": 0.175,
            "issue_importance": 1.25
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21277,
        "fields": {
            "answer": 20798,
            "issue": 103,
            "issue_score": 0.5,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21278,
        "fields": {
            "answer": 5149,
            "issue": 103,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21280,
        "fields": {
            "answer": 5152,
            "issue": 100,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21281,
        "fields": {
            "answer": 5152,
            "issue": 101,
            "issue_score": 0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21282,
        "fields": {
            "answer": 5152,
            "issue": 102,
            "issue_score": 0.3,
            "issue_importance": 1.5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21283,
        "fields": {
            "answer": 5152,
            "issue": 103,
            "issue_score": 0.3,
            "issue_importance": 1.5
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21284,
        "fields": {
            "answer": 5152,
            "issue": 104,
            "issue_score": 0.15,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21304,
        "fields": {
            "answer": 5173,
            "issue": 102,
            "issue_score": 0.2,
            "issue_importance": 1.2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21305,
        "fields": {
            "answer": 20696,
            "issue": 100,
            "issue_score": -0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21306,
        "fields": {
            "answer": 20711,
            "issue": 100,
            "issue_score": 0.1,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21307,
        "fields": {
            "answer": 21020,
            "issue": 100,
            "issue_score": 0,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21308,
        "fields": {
            "answer": 5212,
            "issue": 102,
            "issue_score": 0.1,
            "issue_importance": 1.2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21309,
        "fields": {
            "answer": 5177,
            "issue": 100,
            "issue_score": 0.3,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21310,
        "fields": {
            "answer": 5176,
            "issue": 100,
            "issue_score": 0,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21323,
        "fields": {
            "answer": 5256,
            "issue": 102,
            "issue_score": 0.5,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21324,
        "fields": {
            "answer": 5257,
            "issue": 102,
            "issue_score": 0.3,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21325,
        "fields": {
            "answer": 20690,
            "issue": 102,
            "issue_score": 0.2,
            "issue_importance": 2
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21326,
        "fields": {
            "answer": 5262,
            "issue": 100,
            "issue_score": 0.15,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21332,
        "fields": {
            "answer": 21328,
            "issue": 103,
            "issue_score": 0.3,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21336,
        "fields": {
            "answer": 21333,
            "issue": 103,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    },
    {
        "model": "campaign_trail.answer_score_issue",
        "pk": 21341,
        "fields": {
            "answer": 21337,
            "issue": 103,
            "issue_score": 0.2,
            "issue_importance": 1
        }
    }
]

campaignTrail_temp.answer_score_state_json = [
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20515,
        "fields": {
            "answer": 5196,
            "state": 1047,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.01575
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20516,
        "fields": {
            "answer": 5196,
            "state": 1023,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0118125
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20517,
        "fields": {
            "answer": 5196,
            "state": 1017,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00984375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20518,
        "fields": {
            "answer": 5196,
            "state": 1009,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00945
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20519,
        "fields": {
            "answer": 5196,
            "state": 1019,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00905625
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20520,
        "fields": {
            "answer": 5196,
            "state": 1039,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0086625
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20521,
        "fields": {
            "answer": 5196,
            "state": 1000,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00826875
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20522,
        "fields": {
            "answer": 5196,
            "state": 1032,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00748125
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20523,
        "fields": {
            "answer": 5196,
            "state": 1007,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0070875
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20524,
        "fields": {
            "answer": 5196,
            "state": 1045,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00669375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20525,
        "fields": {
            "answer": 5196,
            "state": 1041,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0063
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20526,
        "fields": {
            "answer": 5196,
            "state": 1008,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0063
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20527,
        "fields": {
            "answer": 5196,
            "state": 1003,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0063
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20528,
        "fields": {
            "answer": 5196,
            "state": 1031,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00590625
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20529,
        "fields": {
            "answer": 5196,
            "state": 1012,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00590625
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20530,
        "fields": {
            "answer": 5196,
            "state": 1029,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.006890625
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20531,
        "fields": {
            "answer": 5196,
            "state": 1021,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00590625
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20532,
        "fields": {
            "answer": 5196,
            "state": 1034,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0055125
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20533,
        "fields": {
            "answer": 5196,
            "state": 1042,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0055125
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20534,
        "fields": {
            "answer": 5196,
            "state": 1024,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00511875
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20535,
        "fields": {
            "answer": 5196,
            "state": 1037,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00511875
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20536,
        "fields": {
            "answer": 5196,
            "state": 1006,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00511875
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20537,
        "fields": {
            "answer": 5196,
            "state": 1013,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.004725
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20538,
        "fields": {
            "answer": 5196,
            "state": 1027,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.004725
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20539,
        "fields": {
            "answer": 5196,
            "state": 1016,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0039375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20540,
        "fields": {
            "answer": 5196,
            "state": 1020,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0039375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20541,
        "fields": {
            "answer": 5196,
            "state": 1035,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0039375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20542,
        "fields": {
            "answer": 5196,
            "state": 1038,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0039375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20543,
        "fields": {
            "answer": 5196,
            "state": 1004,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00354375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20544,
        "fields": {
            "answer": 5196,
            "state": 1015,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00354375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20545,
        "fields": {
            "answer": 5196,
            "state": 1049,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00354375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20546,
        "fields": {
            "answer": 5196,
            "state": 1022,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20547,
        "fields": {
            "answer": 5196,
            "state": 1026,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20548,
        "fields": {
            "answer": 5196,
            "state": 1005,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20549,
        "fields": {
            "answer": 5196,
            "state": 1001,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20550,
        "fields": {
            "answer": 5196,
            "state": 1002,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20551,
        "fields": {
            "answer": 5196,
            "state": 1046,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00275625
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20552,
        "fields": {
            "answer": 5196,
            "state": 1048,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00275625
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20553,
        "fields": {
            "answer": 5196,
            "state": 1010,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0023625
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20554,
        "fields": {
            "answer": 5196,
            "state": 1030,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0023625
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20555,
        "fields": {
            "answer": 5196,
            "state": 1014,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.001575
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20556,
        "fields": {
            "answer": 5196,
            "state": 1036,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00118125
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20557,
        "fields": {
            "answer": 5196,
            "state": 1050,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00039375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20558,
        "fields": {
            "answer": 5196,
            "state": 1043,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00039375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20559,
        "fields": {
            "answer": 5196,
            "state": 1028,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00039375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20560,
        "fields": {
            "answer": 5196,
            "state": 1040,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00039375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20561,
        "fields": {
            "answer": 5196,
            "state": 1033,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00039375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20562,
        "fields": {
            "answer": 5196,
            "state": 1018,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00039375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20563,
        "fields": {
            "answer": 5197,
            "state": 1047,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0126
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20564,
        "fields": {
            "answer": 5197,
            "state": 1023,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00945
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20565,
        "fields": {
            "answer": 5197,
            "state": 1017,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.007875
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20566,
        "fields": {
            "answer": 5197,
            "state": 1009,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00756
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20567,
        "fields": {
            "answer": 5197,
            "state": 1019,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.007245
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20568,
        "fields": {
            "answer": 5197,
            "state": 1039,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00693
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20569,
        "fields": {
            "answer": 5197,
            "state": 1000,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.006615
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20570,
        "fields": {
            "answer": 5197,
            "state": 1032,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.005985
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20571,
        "fields": {
            "answer": 5197,
            "state": 1007,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00567
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20572,
        "fields": {
            "answer": 5197,
            "state": 1045,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.005355
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20573,
        "fields": {
            "answer": 5197,
            "state": 1041,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00504
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20574,
        "fields": {
            "answer": 5197,
            "state": 1008,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00504
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20575,
        "fields": {
            "answer": 5197,
            "state": 1003,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00504
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20576,
        "fields": {
            "answer": 5197,
            "state": 1031,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.004725
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20577,
        "fields": {
            "answer": 5197,
            "state": 1012,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.004725
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20578,
        "fields": {
            "answer": 5197,
            "state": 1029,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0055125
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20579,
        "fields": {
            "answer": 5197,
            "state": 1021,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.006
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20580,
        "fields": {
            "answer": 5197,
            "state": 1034,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00441
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20581,
        "fields": {
            "answer": 5197,
            "state": 1042,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00441
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20582,
        "fields": {
            "answer": 5197,
            "state": 1024,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.004095
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20583,
        "fields": {
            "answer": 5197,
            "state": 1037,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.006
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20584,
        "fields": {
            "answer": 5197,
            "state": 1006,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.004095
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20585,
        "fields": {
            "answer": 5197,
            "state": 1013,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00378
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20586,
        "fields": {
            "answer": 5197,
            "state": 1027,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00378
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20587,
        "fields": {
            "answer": 5197,
            "state": 1016,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20588,
        "fields": {
            "answer": 5197,
            "state": 1020,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20589,
        "fields": {
            "answer": 5197,
            "state": 1035,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20590,
        "fields": {
            "answer": 5197,
            "state": 1038,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20591,
        "fields": {
            "answer": 5197,
            "state": 1004,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.002835
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20592,
        "fields": {
            "answer": 5197,
            "state": 1015,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.002835
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20593,
        "fields": {
            "answer": 5197,
            "state": 1049,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20594,
        "fields": {
            "answer": 5197,
            "state": 1022,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00252
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20595,
        "fields": {
            "answer": 5197,
            "state": 1026,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00252
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20596,
        "fields": {
            "answer": 5197,
            "state": 1005,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00252
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20597,
        "fields": {
            "answer": 5197,
            "state": 1001,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00252
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20598,
        "fields": {
            "answer": 5197,
            "state": 1002,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00252
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20599,
        "fields": {
            "answer": 5197,
            "state": 1046,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.002205
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20600,
        "fields": {
            "answer": 5197,
            "state": 1048,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.002205
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20601,
        "fields": {
            "answer": 5197,
            "state": 1010,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00189
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20602,
        "fields": {
            "answer": 5197,
            "state": 1030,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00189
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20603,
        "fields": {
            "answer": 5197,
            "state": 1014,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00126
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20604,
        "fields": {
            "answer": 5197,
            "state": 1036,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.000945
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20605,
        "fields": {
            "answer": 5197,
            "state": 1050,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.000315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20606,
        "fields": {
            "answer": 5197,
            "state": 1043,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.000315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20607,
        "fields": {
            "answer": 5197,
            "state": 1028,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.000315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20608,
        "fields": {
            "answer": 5197,
            "state": 1040,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.000315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20609,
        "fields": {
            "answer": 5197,
            "state": 1033,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.000315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20610,
        "fields": {
            "answer": 5197,
            "state": 1018,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.000315
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20611,
        "fields": {
            "answer": 5201,
            "state": 1021,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.00333
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20612,
        "fields": {
            "answer": 5201,
            "state": 1034,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20613,
        "fields": {
            "answer": 5233,
            "state": 1047,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0063
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20614,
        "fields": {
            "answer": 5233,
            "state": 1023,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.004725
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20615,
        "fields": {
            "answer": 5233,
            "state": 1017,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0039375
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20616,
        "fields": {
            "answer": 5233,
            "state": 1009,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.00378
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20617,
        "fields": {
            "answer": 5233,
            "state": 1019,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0036225
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20618,
        "fields": {
            "answer": 5233,
            "state": 1039,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.003465
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20619,
        "fields": {
            "answer": 5233,
            "state": 1000,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0033075
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20620,
        "fields": {
            "answer": 5233,
            "state": 1032,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0029925
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20621,
        "fields": {
            "answer": 5233,
            "state": 1007,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.002835
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20622,
        "fields": {
            "answer": 5233,
            "state": 1045,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0026775
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20623,
        "fields": {
            "answer": 5233,
            "state": 1041,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.00252
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20624,
        "fields": {
            "answer": 5233,
            "state": 1008,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.00252
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20625,
        "fields": {
            "answer": 5233,
            "state": 1003,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.00252
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20626,
        "fields": {
            "answer": 5233,
            "state": 1031,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0023625
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20627,
        "fields": {
            "answer": 5233,
            "state": 1012,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0023625
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20628,
        "fields": {
            "answer": 5233,
            "state": 1029,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.00275625
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20629,
        "fields": {
            "answer": 5233,
            "state": 1021,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20630,
        "fields": {
            "answer": 5233,
            "state": 1034,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.002205
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20631,
        "fields": {
            "answer": 5233,
            "state": 1042,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.002205
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20632,
        "fields": {
            "answer": 5233,
            "state": 1024,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0020475
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20633,
        "fields": {
            "answer": 5233,
            "state": 1037,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20634,
        "fields": {
            "answer": 5233,
            "state": 1006,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0020475
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20635,
        "fields": {
            "answer": 5233,
            "state": 1013,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.00189
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20636,
        "fields": {
            "answer": 5233,
            "state": 1027,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.00189
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20637,
        "fields": {
            "answer": 5233,
            "state": 1016,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.001575
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20638,
        "fields": {
            "answer": 5233,
            "state": 1020,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.001575
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20639,
        "fields": {
            "answer": 5233,
            "state": 1035,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.001575
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20640,
        "fields": {
            "answer": 5233,
            "state": 1038,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.001575
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20641,
        "fields": {
            "answer": 5233,
            "state": 1004,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0014175
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20642,
        "fields": {
            "answer": 5233,
            "state": 1015,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0014175
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20643,
        "fields": {
            "answer": 5233,
            "state": 1049,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0025
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20644,
        "fields": {
            "answer": 5233,
            "state": 1022,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.00126
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20645,
        "fields": {
            "answer": 5233,
            "state": 1026,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.00126
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20646,
        "fields": {
            "answer": 5233,
            "state": 1005,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.00126
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20647,
        "fields": {
            "answer": 5233,
            "state": 1001,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.00126
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20648,
        "fields": {
            "answer": 5233,
            "state": 1002,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.00126
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20649,
        "fields": {
            "answer": 5233,
            "state": 1046,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0011025
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20650,
        "fields": {
            "answer": 5233,
            "state": 1048,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0011025
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20651,
        "fields": {
            "answer": 5233,
            "state": 1010,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.000945
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20652,
        "fields": {
            "answer": 5233,
            "state": 1030,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.000945
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20653,
        "fields": {
            "answer": 5233,
            "state": 1014,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.00063
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20654,
        "fields": {
            "answer": 5233,
            "state": 1036,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0004725
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20655,
        "fields": {
            "answer": 5233,
            "state": 1050,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0001575
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20656,
        "fields": {
            "answer": 5233,
            "state": 1043,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0001575
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20657,
        "fields": {
            "answer": 5233,
            "state": 1028,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0001575
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20658,
        "fields": {
            "answer": 5233,
            "state": 1040,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0001575
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20659,
        "fields": {
            "answer": 5233,
            "state": 1033,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0001575
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20660,
        "fields": {
            "answer": 5233,
            "state": 1018,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0001575
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20664,
        "fields": {
            "answer": 5258,
            "state": 1021,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0025
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20665,
        "fields": {
            "answer": 5258,
            "state": 1022,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0025
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20666,
        "fields": {
            "answer": 5258,
            "state": 1049,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0025
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20667,
        "fields": {
            "answer": 5259,
            "state": 1021,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20668,
        "fields": {
            "answer": 5259,
            "state": 1022,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20669,
        "fields": {
            "answer": 5259,
            "state": 1049,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.001
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20670,
        "fields": {
            "answer": 5260,
            "state": 1021,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0025
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20671,
        "fields": {
            "answer": 5260,
            "state": 1022,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0025
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20672,
        "fields": {
            "answer": 5260,
            "state": 1049,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0025
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20673,
        "fields": {
            "answer": 5261,
            "state": 1021,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0025
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20674,
        "fields": {
            "answer": 5261,
            "state": 1022,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0025
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20675,
        "fields": {
            "answer": 5261,
            "state": 1049,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": -0.0025
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20676,
        "fields": {
            "answer": 5258,
            "state": 1008,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0033
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20677,
        "fields": {
            "answer": 5260,
            "state": 1002,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20678,
        "fields": {
            "answer": 5260,
            "state": 1005,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20679,
        "fields": {
            "answer": 5260,
            "state": 1027,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20680,
        "fields": {
            "answer": 5260,
            "state": 1030,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.0015
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20772,
        "fields": {
            "answer": 5155,
            "state": 1045,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20773,
        "fields": {
            "answer": 5157,
            "state": 1045,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20774,
        "fields": {
            "answer": 5156,
            "state": 1045,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.002
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20811,
        "fields": {
            "answer": 5200,
            "state": 1046,
            "candidate": 202,
            "affected_candidate": 201,
            "state_multiplier": -0.12
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20812,
        "fields": {
            "answer": 5200,
            "state": 1044,
            "candidate": 203,
            "affected_candidate": 201,
            "state_multiplier": -0.2
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20813,
        "fields": {
            "answer": 5200,
            "state": 1044,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.08
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20814,
        "fields": {
            "answer": 5200,
            "state": 1046,
            "candidate": 200,
            "affected_candidate": 200,
            "state_multiplier": 0.012
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20815,
        "fields": {
            "answer": 5200,
            "state": 1036,
            "candidate": 202,
            "affected_candidate": 201,
            "state_multiplier": -0.1
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20816,
        "fields": {
            "answer": 5200,
            "state": 1028,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.003
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20817,
        "fields": {
            "answer": 5202,
            "state": 1044,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.05
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 20818,
        "fields": {
            "answer": 5202,
            "state": 1044,
            "candidate": 202,
            "affected_candidate": 201,
            "state_multiplier": -0.1
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21024,
        "fields": {
            "answer": 21020,
            "state": 1031,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.000001
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21025,
        "fields": {
            "answer": 21020,
            "state": 1031,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": -0.000001
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21028,
        "fields": {
            "answer": 5170,
            "state": 1044,
            "candidate": 202,
            "affected_candidate": 201,
            "state_multiplier": -0.12
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21029,
        "fields": {
            "answer": 5170,
            "state": 1044,
            "candidate": 201,
            "affected_candidate": 201,
            "state_multiplier": 0.4
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21031,
        "fields": {
            "answer": 5172,
            "state": 1044,
            "candidate": 202,
            "affected_candidate": 201,
            "state_multiplier": 0.01
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21287,
        "fields": {
            "answer": 5184,
            "state": 1003,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21288,
        "fields": {
            "answer": 5184,
            "state": 1009,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21289,
        "fields": {
            "answer": 5184,
            "state": 1016,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21290,
        "fields": {
            "answer": 5184,
            "state": 1017,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21291,
        "fields": {
            "answer": 5184,
            "state": 1023,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21292,
        "fields": {
            "answer": 5184,
            "state": 1034,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21293,
        "fields": {
            "answer": 5184,
            "state": 1037,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21294,
        "fields": {
            "answer": 5184,
            "state": 1041,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21295,
        "fields": {
            "answer": 5184,
            "state": 1048,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21296,
        "fields": {
            "answer": 20981,
            "state": 1000,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21297,
        "fields": {
            "answer": 20981,
            "state": 1009,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21298,
        "fields": {
            "answer": 20981,
            "state": 1016,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21299,
        "fields": {
            "answer": 20981,
            "state": 1017,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21300,
        "fields": {
            "answer": 20981,
            "state": 1023,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21301,
        "fields": {
            "answer": 20981,
            "state": 1041,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21302,
        "fields": {
            "answer": 20981,
            "state": 1048,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.005
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21303,
        "fields": {
            "answer": 20981,
            "state": 1003,
            "candidate": 200,
            "affected_candidate": 201,
            "state_multiplier": 0.007
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21312,
        "fields": {
            "answer": 21096,
            "state": 1008,
            "candidate": 201,
            "affected_candidate": 200,
            "state_multiplier": 0.006
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21313,
        "fields": {
            "answer": 21102,
            "state": 1008,
            "candidate": 201,
            "affected_candidate": 200,
            "state_multiplier": 0.0015
        }
    },
    {
        "model": "campaign_trail.answer_score_state",
        "pk": 21315,
        "fields": {
            "answer": 21108,
            "state": 1008,
            "candidate": 201,
            "affected_candidate": 200,
            "state_multiplier": -0.004
        }
    }
]

campaignTrail_temp.answer_feedback_json = [
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2620,
        "fields": {
            "answer": 5139,
            "candidate": 201,
            "answer_feedback": "Republicans end up picking up 7 seats in the House and 6 seats in the Senate, flipping it. Still, some consider it a slight underperformance, although not all of this can directly be linked to you.<br><br>Meanwhile, as the Republican primaries get surprisingly crowded, you wonder if you’re even gonna face Jeb at this rate."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2621,
        "fields": {
            "answer": 5140,
            "candidate": 201,
            "answer_feedback": "<i>Hard Choices</i> ascends to the heights of the Times bestseller list, its pages now gracing coffee tables from Georgetown to Pacific Heights. The chattering classes perceive in its prose the construction of a mainstream, establishment persona; the very archetype Obama successfully embodied on his own path to power. It worked for him, but whether lightning strikes twice remains to be seen."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2622,
        "fields": {
            "answer": 5141,
            "candidate": 201,
            "answer_feedback": "<i>A Fair Shake: A Lifetime for America</i> sells briskly, becoming a New York Times bestseller and provoking commentary that cannot decide whether you are rediscovering yourself or inventing yourself yet again. Analysts and voters alike do detect more of a populist note in your latest political persona, for better or worse."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2623,
        "fields": {
            "answer": 5142,
            "candidate": 201,
            "answer_feedback": "You do, in fact, score free hot dogs, and your knock-off Mystery Machine's a hit with the voters who actually show up. Although some voters see this as cynical, it’s also true that you just got your face on the local news in a lot of places across the country."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2624,
        "fields": {
            "answer": 5143,
            "candidate": 201,
            "answer_feedback": "Hitting back hard to shift the narrative usually helps, especially when voters are exhausted by this whole saga. Not everyone will believe you, but honestly, at this point, if you’re not pissing off certain people, you’re not doing it right. Right?"
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2625,
        "fields": {
            "answer": 5144,
            "candidate": 201,
            "answer_feedback": "This is true, although a good chunk of those emails were just mislabeled. On the other hand, maybe turning this into a “both sides” narrative will benefit you. That is, as long as no outsider candidate comes in."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2626,
        "fields": {
            "answer": 5145,
            "candidate": 201,
            "answer_feedback": "It’s true that both Rice and Powell had personal email accounts, and Powell himself once told you he used a home PC to circumvent State Department restrictions. But ants in high heels can’t climb walls; your opponents will try to rehash this story until the campaign is over. And of course, those two are not likely to step in to defend you."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2627,
        "fields": {
            "answer": 5146,
            "candidate": 201,
            "answer_feedback": "Maybe the best you can do here is show some contrition."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2628,
        "fields": {
            "answer": 5147,
            "candidate": 201,
            "answer_feedback": "It’s not hard to see you strike at Trump here, and maybe you have a point. His response to this shooting has caused some unease within members of his own party."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2629,
        "fields": {
            "answer": 5148,
            "candidate": 201,
            "answer_feedback": "Ever since Columbine, you feel like the issue of gun control in America has only run around in circles. The worst part is that it’s not an issue you can easily grapple with. It’s sad.<br/><br/>A few days later, empowered by your support, Democratic House members stage a sit-in in an attempt to force a vote on new gun control legislation. Nothing comes out of it. Nothing ever does."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2630,
        "fields": {
            "answer": 5149,
            "candidate": 201,
            "answer_feedback": "Alongside Senator Bill Nelson and Orlando Mayor Buddy Dyer, you meet with the families of the victims of the shooting that same day. You can’t even imagine the pain they are feeling right now."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2631,
        "fields": {
            "answer": 5150,
            "candidate": 201,
            "answer_feedback": "At first, it’s not yet clear whether this attack was actually terrorism. Although both you and Trump are coming under some criticism for jumping to that conclusion, it is Trump’s statements that get more of the media criticism."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2632,
        "fields": {
            "answer": 5151,
            "candidate": 201,
            "answer_feedback": "Bill thinks you sounded a lot more like Bernie Sanders than Hillary Clinton out there. Given your low favorability as of late, this may have its advantages."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2633,
        "fields": {
            "answer": 5152,
            "candidate": 201,
            "answer_feedback": "This is the standard acceptance speech that people expect from a modern Democratic candidate. Given how tense the primaries were, it’s a good idea to try and unite the convention. You’ll have to thank O’Malley later for helping with this speech, too."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2634,
        "fields": {
            "answer": 5153,
            "candidate": 201,
            "answer_feedback": "Your direct attack on Trump dominates headlines — and so do your supporters’ chants of “Lock him up! Lock him up!”. Given how he <i>also</i> attacked you at the Republican convention a week earlier, it’s good to strike back. Just keep in mind that voters want to hear ideas, too."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2635,
        "fields": {
            "answer": 5154,
            "candidate": 201,
            "answer_feedback": "When you finished your speech and returned backstage, you found Podesta dozing off on one of the couches. At some point during your speech, he got bored and went off to play the new hit game Pokémon Go. You think this may be a good sign."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2636,
        "fields": {
            "answer": 5155,
            "candidate": 201,
            "answer_feedback": "Tim appreciates the tone and is quite ready to campaign. Although quite popular within the party, he’s not very well-known nationally."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2637,
        "fields": {
            "answer": 5156,
            "candidate": 201,
            "answer_feedback": "Tim rapidly leans into his new role, stepping up appearances and even working on a few Spanish-language ads. His enthusiasm goes up when he feels genuinely included."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2638,
        "fields": {
            "answer": 5157,
            "candidate": 201,
            "answer_feedback": "Although Tim is not the first person that comes to people’s mind when they think of a “progressive”, you believe he’ll fit in nicely with your campaign."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2651,
        "fields": {
            "answer": 5170,
            "candidate": 201,
            "answer_feedback": "Bernie is happy to have your support here. On the day of the convention, his speech helps to electrify the crowd and define the Democratic Party as the real party of progress."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2652,
        "fields": {
            "answer": 5171,
            "candidate": 201,
            "answer_feedback": "The somewhat brief involvement of Bernie in your campaign does not go unnoticed by his supporters, who think you are moving too far to the center for no valid reason."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2653,
        "fields": {
            "answer": 5172,
            "candidate": 201,
            "answer_feedback": "The convention night had three good highlights. Two of them were from your former primary challengers, O’Malley and Webb, who had strong speeches. The third highlight was the front page of the Daily Kos flooded with anti-Hillary messages from alienated Bernie supporters."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2654,
        "fields": {
            "answer": 5173,
            "candidate": 201,
            "answer_feedback": "This statement resonates with your base. Trump, of course, accuses you of being too soft in the face of terror."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2655,
        "fields": {
            "answer": 5174,
            "candidate": 201,
            "answer_feedback": "This is a standard response. You end up meeting with the city’s mayor, Philippe Pradal, and also French President François Hollande, and you come across as pretty statesmanlike — especially in comparison to Trump."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2656,
        "fields": {
            "answer": 5175,
            "candidate": 201,
            "answer_feedback": "It’s not hard to notice the surprisingly strong tone of your speech about ISIS. There is at least one portion of the American political spectrum that’s excited to hear this."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2657,
        "fields": {
            "answer": 5176,
            "candidate": 201,
            "answer_feedback": "…lunar bears?"
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2658,
        "fields": {
            "answer": 5177,
            "candidate": 201,
            "answer_feedback": "You’re striking a balance between attacking Trump’s behavior and focusing on the issues of the day. Given how strange this election has been so far, this might be the best choice for you."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2659,
        "fields": {
            "answer": 5178,
            "candidate": 201,
            "answer_feedback": "Some advisors think that letting Trump off the hook is a missed opportunity. You can’t help but notice his direct attacks on you have slowed down, however. Huh."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2660,
        "fields": {
            "answer": 5179,
            "candidate": 201,
            "answer_feedback": "After much insistence, you agree to go on Ellen. They watch you whip. They watch you nae nae. Hell, they even watch you dab, which causes the crowd to go wild. The next day, amidst the media firestorm, Trump holds a mock funeral for your campaign. You don’t know what’s happening anymore."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2665,
        "fields": {
            "answer": 5184,
            "candidate": 201,
            "answer_feedback": "Bill appreciates the support; you find him on the trail with you pretty often. Although he is fairly popular with the median voter, your advisors are worried about his gaffes, and also his weaknesses with the progressive and populist wings of your party."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2669,
        "fields": {
            "answer": 5189,
            "candidate": 201,
            "answer_feedback": "This is a shift from your earlier position, but it keeps the progressive wing of your party happy. Some of your supporters worry this reversal will be framed as politically convenient."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2670,
        "fields": {
            "answer": 5191,
            "candidate": 201,
            "answer_feedback": "You know the crowd loves hearing your foreign policy stories. They don’t laugh so much, however, when you avoid the topic of minimum wage entirely, only to talk about how Mahatma Gandhi may or may not have run a gas station down in St. Louis."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2674,
        "fields": {
            "answer": 5196,
            "candidate": 201,
            "answer_feedback": "It’s an intriguing experience, but you and Obama find yourself on <b>the campaign trail</b> together more often than not, as you subtly ask for more and more campaign support and infrastructure in exchange for other concessions. Suddenly, everything feels a lot more clear."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2675,
        "fields": {
            "answer": 5197,
            "candidate": 201,
            "answer_feedback": "Obama emphasizes turnout repeatedly in his speeches across these areas. It feels a bit transactional, but you’re definitely not complaining."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2676,
        "fields": {
            "answer": 5198,
            "candidate": 201,
            "answer_feedback": "There are a few unwanted rumors out there that you and Obama don’t totally get along. Unless you wanted those to leak out?"
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2677,
        "fields": {
            "answer": 5199,
            "candidate": 201,
            "answer_feedback": "Progressives are beginning to think that, perhaps, you are a new woman after all. So is Obama, who thinks you’ve thrown him overboard for nothing."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2678,
        "fields": {
            "answer": 5200,
            "candidate": 201,
            "answer_feedback": "There are pros and cons to embracing Bernie so closely, and some advisors wonder if you’ve gone insane. To prove them wrong, you make a speech the next week talking about the trials and tribulations of modern socialism. Perhaps this is what feeling the bern feels like."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2679,
        "fields": {
            "answer": 5201,
            "candidate": 201,
            "answer_feedback": "A crowd of about 10,000 people shows up to your joint rally in Saginaw. A part of you thinks that perhaps, in the words of Dubya, you may have misunderestimated him."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2680,
        "fields": {
            "answer": 5203,
            "candidate": 201,
            "answer_feedback": "It takes about three and a half meetings mediated by Elizabeth Warren for Bernie to begrudgingly endorse you. The media circus as a result of this leaves you wishing for more late-night benders."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2684,
        "fields": {
            "answer": 5227,
            "candidate": 201,
            "answer_feedback": "Unfortunately, this issue has cost you several days of appearances during a critical part of the campaign. Still, voters appreciate your transparency, and Trump even sends you a “get well soon” card, along with many pictures of him in Jon Arbuckle-esque attire to prove he’s healthier than you."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2685,
        "fields": {
            "answer": 5228,
            "candidate": 201,
            "answer_feedback": "Eventually, this moment fades from the media, and your campaign gets back into full force."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2686,
        "fields": {
            "answer": 5229,
            "candidate": 201,
            "answer_feedback": "You push through rallies at full force, although reporters eventually start noticing how fatigued you seem at some of your rallies. It doesn’t help that in one of these rallies, you made a total of fifty-eight Pokémon jokes. If I could be Pokémon Crystal about this, you better Pokémon Snap out of whatever you’re doing and just get voters to Pokémon Go to the polls."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2687,
        "fields": {
            "answer": 5230,
            "candidate": 201,
            "answer_feedback": "Sure enough, you keep campaigning, but it gets harder and harder to hide your occasional coughing fits at times. At his rallies, Trump talks about “Hillarygate” and suggests you died and were replaced by a low-energy double."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2688,
        "fields": {
            "answer": 5242,
            "candidate": 201,
            "answer_feedback": "“Lester, I tell you this, I’ve seen many places. Beautiful places, and they all treat me with tremendous respect. But Hillary, see, she thinks I’m bad— n-no respect for our elders— she thinks I’m heroin chic. Are you heroin chic, Lester? Are we…? What did you say?”<br/><br/>Sure enough, Trump does unravel, though not exactly in the way you expected. You can’t help but laugh at times, and he finds himself doing the same. Although most polls indicate that you were the winner of the debates, you start to feel this may not affect the final results as much."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2689,
        "fields": {
            "answer": 5243,
            "candidate": 201,
            "answer_feedback": "“We’ve seen how Hillary went after Obamna. She—she couldn’t let him speak, it’s impressive. She put Joe Biden to sleep. And frankly, I look—I look at that, and I say, isn’t that sad? She has no— no respect for her friends. A very sad, very nasty woman indeed.”<br/><br/>Although you try your best, you find out that fact-checking Trump in real-time is harder than it seems, and you end up calling him a liar most of the time. Although fearing you’ve been seen as annoying, most polls indicate you won the debates."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2690,
        "fields": {
            "answer": 5244,
            "candidate": 201,
            "answer_feedback": "“Have you seen it? She wants amnesty, she wants open borders. I’ve never seen so many open— so many borders. She doesn’t know, Hillary doesn’t know what an immigrant is. Everything is legal to her, it’s terrible… the drugs— the illegal drugs. I want a strong wall, the strongest in the history of strong walls.”<br/><br/>Trump’s insults at you throughout the debate don’t exactly go unnoticed, and neither do your somewhat futile attempts at focusing on more concrete issues. Still, you hit some good notes, and polls indicate you are the winner of these debates."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2691,
        "fields": {
            "answer": 5245,
            "candidate": 201,
            "answer_feedback": "“Her health plan is very bad. So bad, I call it ‘Killarycare.’ Mrs. Clinton wants to kill your insurance— it’s terrible, really— kill our healthcare and quintuple our debt. An unbelievable amount of debt. Never— never has more debt existed in the history of debt, that’s what her plan does.”<br/><br/>Of course, you and Trump spend a lot of time attacking each other in the debates, although he follows suit and focuses more on your ideas than on yourself. Still, most polls indicate you’ve won these debates."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2692,
        "fields": {
            "answer": 5246,
            "candidate": 201,
            "answer_feedback": "The amount of backlash that Trump gets from his fellow conservatives surprises you a bit. Of course, this type of dissension can only help you."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2693,
        "fields": {
            "answer": 5247,
            "candidate": 201,
            "answer_feedback": "There’s already some talk on the Christian right of staying home on Election Day, or casting their votes for someone else. Naturally, this can only help you."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2694,
        "fields": {
            "answer": 5248,
            "candidate": 201,
            "answer_feedback": "You don’t even need to do anything here; your surrogates will spread the word while you go around the country. It can’t get any better than this."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2695,
        "fields": {
            "answer": 5249,
            "candidate": 201,
            "answer_feedback": "That same day, Trump responds to you on Twitter with a typo-filled rant about how you “have never been funny in your life.” It does not stop the bleeding he’s getting from all sides of his coalition, however, which can only help you."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2696,
        "fields": {
            "answer": 5250,
            "candidate": 201,
            "answer_feedback": "It’s always good to clarify things, but “free trade” is anathema to the progressive base and many voters in the Midwest. I don’t know about you, but I think you’re getting yourself in some deep shit."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2697,
        "fields": {
            "answer": 5251,
            "candidate": 201,
            "answer_feedback": "This is factually accurate for pretty much every American politician, but you’re seen more as two-faced rather than honest here. You’re not even sure if Lincoln actually said that or if you’re misremembering something from the Steven Spielberg movie “Lincoln”. It’s a pretty good movie. You’ll have to rewatch it sometime."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2698,
        "fields": {
            "answer": 5252,
            "candidate": 201,
            "answer_feedback": "You don’t want negative attention to your campaign at such a crucial moment. Perhaps focusing on Trump’s misdeeds will make this easier on you."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2699,
        "fields": {
            "answer": 5253,
            "candidate": 201,
            "answer_feedback": "These leaks will only add more fuel to the fire, especially with young progressives who already didn’t trust you in the first place. Not too long later, the media picks up on these leaks as well."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2700,
        "fields": {
            "answer": 5254,
            "candidate": 201,
            "answer_feedback": "You have a point here, although the very nature of these emails is still going to hurt your credibility among his supporters."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2701,
        "fields": {
            "answer": 5255,
            "candidate": 201,
            "answer_feedback": "There’s not really much you can do here besides deflecting to another, easier issue to deal with. Nevertheless, this is still gonna hurt you."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2702,
        "fields": {
            "answer": 5256,
            "candidate": 201,
            "answer_feedback": "You find yourself on the defense almost all the time, and some of your advisors worry that attacking the FBI Director directly will affect your standing with undecided voters. Comey eventually announced that no new evidence had been found, but maybe the damage has already been done."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2703,
        "fields": {
            "answer": 5257,
            "candidate": 201,
            "answer_feedback": "After a few days, Comey does announce that no new evidence was found. Unfortunately for you, there was a definite effect on the polls as early voting began."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2707,
        "fields": {
            "answer": 5212,
            "candidate": 201,
            "answer_feedback": "This is true, although Trump did not explicitly vote for the invasion like you did — and also turned on it sooner than you. You two have a back and forth on this for a couple of weeks before he gives up and moves on to greener pastures. That is, Benghazi."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2708,
        "fields": {
            "answer": 5215,
            "candidate": 201,
            "answer_feedback": "The front cover of today’s The New York Times edition has “Clinton Defends Iraq War” in a bigger font size than you’d prefer. Although your statement is factually accurate, it puts you to the right of almost everyone in your party. I don’t even need to tell you who’s enraged with you, right?"
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2711,
        "fields": {
            "answer": 5220,
            "candidate": 201,
            "answer_feedback": "Way to excite the progressive elements of your base. Although some Republicans are wary of a second Hillarycare, especially given your earlier failures on this front, maybe you could give it a shot if Dems regain control of the House and Senate this year."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2712,
        "fields": {
            "answer": 5221,
            "candidate": 201,
            "answer_feedback": "This was the stance you took in the primaries, and is a fairly mainstream position in your party."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2713,
        "fields": {
            "answer": 5223,
            "candidate": 201,
            "answer_feedback": "It’s always good to defend a popular program, although both supporters and opponents can see that you are not really rocking the boat on this issue."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2714,
        "fields": {
            "answer": 5224,
            "candidate": 201,
            "answer_feedback": "Your base hears you out, but it seems like you’ll have to apologize over this more than you’d think in the following days. It sucks."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2715,
        "fields": {
            "answer": 5225,
            "candidate": 201,
            "answer_feedback": "You definitely can’t ignore it, but voters also won’t ignore what you just said because, like it or not, you come across as dismissive of a good chunk of Trump’s base. It does not help that there are Obama voters out there who like Trump, and will not vote for you."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2716,
        "fields": {
            "answer": 5226,
            "candidate": 201,
            "answer_feedback": "The least you can do is muddy the waters a bit and hope the reaction to this dies down soon. But now that it’s been said, you’ll have to live through this anyway."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 2717,
        "fields": {
            "answer": 5233,
            "candidate": 201,
            "answer_feedback": "Behind the scenes, Obama is a bit needled by your lukewarm support for a deal you’ve endorsed from the very beginning. There are already some rumors in the political press of a rift between you two, but you insist everything is fine."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20681,
        "fields": {
            "answer": 5261,
            "candidate": 201,
            "answer_feedback": "Just as you’re wrapping up your speech, Madonna enthusiastically pulls you into an unplanned duet of “Girl Gone Wild.” You awkwardly power through the chorus with undeniable commitment and a lot of lipsyncing. At the end of it, your head is spinning. The smirk on Bill’s face will probably be ingrained in your mind for years to come."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20685,
        "fields": {
            "answer": 5222,
            "candidate": 201,
            "answer_feedback": "It’s always a good idea to establish a contrast between you and your opponent, especially given the ACA’s popularity, but keep in mind that voters want to hear ideas as well. You’ll have plenty of other opportunities for bullying Trump throughout the campaign."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20688,
        "fields": {
            "answer": 5234,
            "candidate": 201,
            "answer_feedback": "Might as well hit him back on this."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20689,
        "fields": {
            "answer": 5231,
            "candidate": 201,
            "answer_feedback": "Behind the scenes, you hear that Obama is pleased with your comments. As a gift, he sends you a pot of Häagen-Dazs® butter pecan ice cream after one of your rallies; you don’t think it tastes too good."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20694,
        "fields": {
            "answer": 20690,
            "candidate": 201,
            "answer_feedback": "The good news is that you have more than enough surrogates to do a Full Ginsburg in your defense. A few days later, Comey cleared you, again, but it’s also clear that your numbers in the polls have taken a very real hit."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20697,
        "fields": {
            "answer": 20696,
            "candidate": 201,
            "answer_feedback": "These protest votes are unlikely to amount to anything, you believe. It’s worth noting, however, that any loss of support for Trump can only help you."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20712,
        "fields": {
            "answer": 20711,
            "candidate": 201,
            "answer_feedback": "Although it’s unlikely that most of these Republicans will back you, there’s no one stopping you from twisting the knife a bit more."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20717,
        "fields": {
            "answer": 20716,
            "candidate": 201,
            "answer_feedback": "This is in line with your position so far. Of course, Democratic majorities in both chambers would make this so much easier…"
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20726,
        "fields": {
            "answer": 20725,
            "candidate": 201,
            "answer_feedback": "You wake up the next day with an unexpected <i>The Wall Street Journal</i> op-ed praising elements of your economic policy — and calling you a “second triangulator”, in a reference to your husband. Your confusion only grows when you find out it was signed by Nate Silver of 538."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20732,
        "fields": {
            "answer": 20731,
            "candidate": 201,
            "answer_feedback": "Some in the political arena think Trump is a “New Republican”, and that may not be too far from reality. But of course, you don’t want them to think that. It cannot be true."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20737,
        "fields": {
            "answer": 20736,
            "candidate": 201,
            "answer_feedback": "Threading the needle on <i>trade</i>, of all issues, has given you more headaches than you could count. Although you’re skeptical that most progressives will see through this, maybe a spoonful of sugar helps the medicine go down?"
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20752,
        "fields": {
            "answer": 20751,
            "candidate": 201,
            "answer_feedback": "You get a good day of press from about half a dozen or so progressive media outlets. Privately, however, Obama and other Democrats are disappointed."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20758,
        "fields": {
            "answer": 20757,
            "candidate": 201,
            "answer_feedback": "After some hesitancy on your part, Obama is happy to see you’re walking the walk on the TPP. For progressives, though, it may be the nail on the coffin."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20764,
        "fields": {
            "answer": 20763,
            "candidate": 201,
            "answer_feedback": "You can’t argue that this is a changed position on your part. Still, it might help mend fences with the more protectionist wing of your party. They know you’re no Sanders, but at least you can show them you’re no Bill."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20769,
        "fields": {
            "answer": 5202,
            "candidate": 201,
            "answer_feedback": "Turns out Sanders has a very enthusiastic base of operatives. Maybe some of them can do the dirty work for you."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20778,
        "fields": {
            "answer": 20777,
            "candidate": 201,
            "answer_feedback": "You don’t believe the first half of what you said, but this is the logical answer. The Republican obstructionism on Garland’s nomination has not been popular with the public, after all. Some base progressives expected more from you, however."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20799,
        "fields": {
            "answer": 20798,
            "candidate": 201,
            "answer_feedback": "You basically just told Obama he picked the wrong guy. As honest as it may have been, he’s not very happy about it."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20804,
        "fields": {
            "answer": 20803,
            "candidate": 201,
            "answer_feedback": "Some of the names floated to you include Paul Watford, Sri Srinivasan, and Ketanji Brown Jackson. On the very bottom of the list, one scribbled name needles you a bit: Barack Obama. W-what’s he doing here? You didn’t write that down. N-no. You’re not doing this."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20808,
        "fields": {
            "answer": 5258,
            "candidate": 201,
            "answer_feedback": "You remember what they did to Gore. The likes of Jeb, Harris, O’Connor… you can’t help but wonder if the same will happen here."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20809,
        "fields": {
            "answer": 5259,
            "candidate": 201,
            "answer_feedback": "Besides an awkward seven-second handshake you had with Sanders at the start of the rally, things go pretty smoothly. Soon it will be all over."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20810,
        "fields": {
            "answer": 5260,
            "candidate": 201,
            "answer_feedback": "You’d never imagined that your final campaign rally would be in Vegas, but you’re glad it was. Fifty-five years after Raoul Duke and Dr. Gonzo departed this place, you realize it’s still a bit of a mad city. It’s funny."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20849,
        "fields": {
            "answer": 20848,
            "candidate": 201,
            "answer_feedback": "It’s true that there are some on the left who, disappointed, think you’re not much of a change from Obama in this regard. But other people hear you as well."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20853,
        "fields": {
            "answer": 20852,
            "candidate": 201,
            "answer_feedback": "This makes the progressive elements of your party, including Sanders, happy with the direction you’re taking. On the other hand, it also puts you on the defense on this topic."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20857,
        "fields": {
            "answer": 20856,
            "candidate": 201,
            "answer_feedback": "This may be true, but voters would still prefer to hear an actual answer from you. Nevertheless, you persist."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20864,
        "fields": {
            "answer": 20863,
            "candidate": 201,
            "answer_feedback": "A bit of a change from your previous position, but it won’t hurt (too) much. Progressives, however, see this as another about face on your behalf."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20872,
        "fields": {
            "answer": 20871,
            "candidate": 201,
            "answer_feedback": "This is a more of a market-focused philosophy coming from you. The progressive wing of your party is not satisfied, though."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20894,
        "fields": {
            "answer": 20893,
            "candidate": 201,
            "answer_feedback": "Interesting. Although the idea of a Green New Deal isn’t mainstream yet, a few prominent environmental activists are quite enthusiastic about it. One of them is a supporter of your campaign, Robert F. Kennedy Jr."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20901,
        "fields": {
            "answer": 20900,
            "candidate": 201,
            "answer_feedback": "This is the standard Democratic position on this."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20908,
        "fields": {
            "answer": 20907,
            "candidate": 201,
            "answer_feedback": "A part of you thinks that you can win the “War on Coal”, whatever you want to call it. Another part of you, seeing the outrage from Republicans — and some members of your party, such as Manchin —, thinks it’s gonna be a long ride."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20916,
        "fields": {
            "answer": 20915,
            "candidate": 201,
            "answer_feedback": "This was your stance in the Democratic primaries. The progressive base won’t think this is enough, but well, it’s definitely a start."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20939,
        "fields": {
            "answer": 20938,
            "candidate": 201,
            "answer_feedback": "Interesting response. Sanders’ primary platform had something similar, too. This may be a good way to get some of his younger supporters to support your campaign."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20949,
        "fields": {
            "answer": 20948,
            "candidate": 201,
            "answer_feedback": "Although this is true, there are some wondering if you’ve taken this position to back away from your college tuition plan. You know who won’t be happy about this."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20956,
        "fields": {
            "answer": 20955,
            "candidate": 201,
            "answer_feedback": "Calling you “obsessed” with him, Trump plays the Mariah Carey song of the same name in his rallies over and over until his campaign gets a cease and desist order from her record label. This may not be his weakest point, but you’ll definitely keep talking about this over the campaign."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20982,
        "fields": {
            "answer": 20981,
            "candidate": 201,
            "answer_feedback": "Although disappointed, Bill understands. Despite his limited number of campaign appearances, it’s not hard to notice he’s far more effective in places like Chillicothe, Ohio, and Altoona, Pennsylvania, where your poll numbers just aren’t very comfortable."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 20989,
        "fields": {
            "answer": 20988,
            "candidate": 201,
            "answer_feedback": "Publicly, he understands your message. Privately, you notice he’s colder than usual. He thinks you’re doing the same thing that Gore did to him at the start of the millennium. At home, he spends more time reading briefing papers than you’ve ever seen. You sleep alone for a few nights, too. But maybe you know something he doesn’t."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21000,
        "fields": {
            "answer": 20995,
            "candidate": 201,
            "answer_feedback": "Compared to your position in the primaries, this is a surprisingly dovish tone on foreign policy."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21002,
        "fields": {
            "answer": 21001,
            "candidate": 201,
            "answer_feedback": "It doesn’t take long for a right-wing rumor that you are going to flood the country with immigrants to pop up, although most of it is overshadowed by your noticeably enthusiastic support for a bombing campaign. The progressive wing of your party is furious."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21008,
        "fields": {
            "answer": 21007,
            "candidate": 201,
            "answer_feedback": "This is more of a thought-out version of your position that you held in the primaries. Overall, it seems to be the mainstream view — unless you’re someone like Trump."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21014,
        "fields": {
            "answer": 21013,
            "candidate": 201,
            "answer_feedback": "Overnight, it seems like a lot of neo-con media commentators have changed their opinion on you. As the so-called Cheney-heads drum up support for an eventual strike on Syria, the progressive elements of your party are livid. They think you fucked up."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21021,
        "fields": {
            "answer": 21020,
            "candidate": 201,
            "answer_feedback": "After much discussion, Podesta presents a name to you: that of former New York Governor George Pataki. You feel like you want to cry, and your tears are not of joy."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21036,
        "fields": {
            "answer": 5214,
            "candidate": 201,
            "answer_feedback": "This point needles you from time to time. Your force-averseness didn’t stop you from voting yes, and it only reminds you of your own words of encouragement to Bill regarding bombing Serbia. But maybe there is a point to this."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21037,
        "fields": {
            "answer": 5213,
            "candidate": 201,
            "answer_feedback": "Perhaps it might be safer to pivot on this."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21038,
        "fields": {
            "answer": 5232,
            "candidate": 201,
            "answer_feedback": "A bit of a hedge, but it won’t hurt much."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21040,
        "fields": {
            "answer": 21039,
            "candidate": 201,
            "answer_feedback": "On the balance, this strikes a pragmatic tone, although this does leave some progressive voters wanting more. It’s a start, though."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21045,
        "fields": {
            "answer": 5190,
            "candidate": 201,
            "answer_feedback": "This is less policy-specific, but you’re betting a lot that making Trump less popular than you will pave the way to an easier victory. Maybe this works?"
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21047,
        "fields": {
            "answer": 5263,
            "candidate": 201,
            "answer_feedback": "Kaine was almost picked over Biden in 2008, and you don’t see him as a bad choice at all. Still, perhaps highlighting his progressive credentials may help bring these people over to the fold — or shut them up for a while."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21048,
        "fields": {
            "answer": 5262,
            "candidate": 201,
            "answer_feedback": "This is true; the 2016 Democratic platform is perhaps the most progressive of all Democratic platforms, and you’ll need the progressives on your side anyway if you win."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21056,
        "fields": {
            "answer": 21055,
            "candidate": 201,
            "answer_feedback": "There are some in your party who want you to point this out more, but do you have to? Let him shoot himself in the foot."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21097,
        "fields": {
            "answer": 21096,
            "candidate": 201,
            "answer_feedback": "Nationwide, this is a popular position, and this is one achievement of Obama that, if preserved, would be a huge bonus to your foreign policy. Meanwhile, in Miami, aging exile voters and an odd fellow named Marco Rubio call you a traitor."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21103,
        "fields": {
            "answer": 21102,
            "candidate": 201,
            "answer_feedback": "This answer offends no one and excites no one, but it’s in line with what most of your advisors believe in. You do believe in us too, right? Right?"
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21109,
        "fields": {
            "answer": 21108,
            "candidate": 201,
            "answer_feedback": "You get a standing ovation in Little Havana, and the AM radio circuit there declares you a hero. This is also a reversal from your previous position, and one that younger voters in your party just don’t get."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21116,
        "fields": {
            "answer": 21115,
            "candidate": 201,
            "answer_feedback": "Of course, Fox News schedules many negative segments on you. But for many young voters, especially Black voters, you’re finally saying what needed to be said."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21132,
        "fields": {
            "answer": 21131,
            "candidate": 201,
            "answer_feedback": "Some activists are disappointed, but this may be closer to the general public’s position."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21137,
        "fields": {
            "answer": 21136,
            "candidate": 201,
            "answer_feedback": "You sound more like 1990s Hillary than 2010s Hillary here. It does not help that one of your speeches defending the famous 1994 Crime Bill and using the term “super predators” is making the rounds in the media. Unless, of course, that was in your plans all this time?"
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21153,
        "fields": {
            "answer": 21152,
            "candidate": 201,
            "answer_feedback": "Fair enough. Some of your advisors think this is a missed opportunity to connect with the youth vote, however."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21157,
        "fields": {
            "answer": 21156,
            "candidate": 201,
            "answer_feedback": "You know Hillary, if I were a single man, I might ask that Vaporeon out. That’s a good-looking Vaporeon. Right? Right?"
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21161,
        "fields": {
            "answer": 21160,
            "candidate": 201,
            "answer_feedback": "Oh my God. This turns out to be the single most quoted line of your campaign, for better or worse. You better hope these people will Pokémon Go to a polling station and vote on that thang. I mean, your name."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21166,
        "fields": {
            "answer": 21165,
            "candidate": 201,
            "answer_feedback": "Although congressional Republicans will call this “a political stunt,” as photos of brown tap water resurface in ads, some voters will remember what “business as usual” cost them."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21178,
        "fields": {
            "answer": 21177,
            "candidate": 201,
            "answer_feedback": "Your broader focus here resonates with younger voters and progressive activists, although Trump accuses you of overgeneralizing Flint."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21184,
        "fields": {
            "answer": 21183,
            "candidate": 201,
            "answer_feedback": "A more technical response coming from you, although some in your party see this as needling your former boss, Obama."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21191,
        "fields": {
            "answer": 21190,
            "candidate": 201,
            "answer_feedback": "This is a good way to strike back at him, although there are still some people in your party who are uneasy about your administration’s economic policy."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21205,
        "fields": {
            "answer": 21204,
            "candidate": 201,
            "answer_feedback": "In retrospect, this would’ve been a more efficient attack if this were the election of 2008, or rather, the election of 2000. But maybe you have a point."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21209,
        "fields": {
            "answer": 21208,
            "candidate": 201,
            "answer_feedback": "You know, pretty much calling him a loser does poll well with some of our focus groups, in particular the moderates. What if… perchance…"
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21214,
        "fields": {
            "answer": 21213,
            "candidate": 201,
            "answer_feedback": "This is fair, but just remember that “Trump bad” probably won’t win you the election on its own. You gotta give out the details, you know."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21221,
        "fields": {
            "answer": 21220,
            "candidate": 201,
            "answer_feedback": "The funny thing here is that May herself is reportedly in favor of staying in the EU; maybe it could work if you do that. The less funny thing is how negatively the reactions to your comments are viewed in the European circuit."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21241,
        "fields": {
            "answer": 21240,
            "candidate": 201,
            "answer_feedback": "Although this is not a major issue this election, it’s good to establish how your administration will respond to this."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21246,
        "fields": {
            "answer": 21245,
            "candidate": 201,
            "answer_feedback": "This is somewhat vague on your part, but is in line with the Democratic position on this issue."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21254,
        "fields": {
            "answer": 21253,
            "candidate": 201,
            "answer_feedback": "Although this may be closer to the general public’s position, it will not please the progressive wing of your party, who’s not wishing for you to be a watered-down Trump on this issue."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21260,
        "fields": {
            "answer": 21259,
            "candidate": 201,
            "answer_feedback": "This is a good way to strike a balance between your own interests and also your party’s current situation; if they don’t do well in the House and Senate this year, there will be no point to twist and shout."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21265,
        "fields": {
            "answer": 21264,
            "candidate": 201,
            "answer_feedback": "This is in line with what you said in the primaries, and also appeals to the progressive elements of your party."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21329,
        "fields": {
            "answer": 21328,
            "candidate": 201,
            "answer_feedback": "Editorial boards love your policy answers and will underline it in green. The problem is voters aren’t reading white papers right now, especially consideringthey’re staring at a bill that went up 200 bucks. You sound competent, but this may hurt you anyway."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21334,
        "fields": {
            "answer": 21333,
            "candidate": 201,
            "answer_feedback": "This is factually accurate for pretty much every American politician, but you’re seen more as two-faced rather than honest here. You’re not even sure if Lincoln actually said that or if you’re misremembering something from the Steven Spielberg movie “Lincoln”. It’s a pretty good movie. You’ll have to rewatch it sometime."
        }
    },
    {
        "model": "campaign_trail.answer_feedback",
        "pk": 21338,
        "fields": {
            "answer": 21337,
            "candidate": 201,
            "answer_feedback": "You know, this is probably the most human you sound; which is good, given how Bill tends to suck all the oxygen out of the room. Do keep in mind that some progressives think you’re being a little too nice about a system they’ve defended for six years."
        }
    }
]

campaignTrail_temp.jet_data = [{
    "mapping_enabled": false,
    "mapping_data": {
        "mapSvg": ""
    },
    "nicknames": {
        "200": "Trump",
        "201": "Hillary",
        "202": "Johnson",
        "203": "Stein"
    },
    "cyoa_enabled": false,
    "cyoa_data": {},
    "endings_enabled": false,
    "ending_data": {}
}
]

// Candidate images
campaignTrail_temp.candidate_image_url = "https://file.garden/aNtAfG887DiA_7lO/2016ALOT/hillary.jpg";
campaignTrail_temp.running_mate_image_url = "https://file.garden/aNtAfG887DiA_7lO/2016ALOT/tim.jpg";
campaignTrail_temp.candidate_last_name = "Clinton";
campaignTrail_temp.running_mate_last_name = "Kaine";

// This is, in a way, fairly similar to astrohuncho's bunnyhop. (hi astro!)
// However, using the actual bunnyhop here was not a viable option, as many of this mod's
// questions were already set in place using Jet's Mod tool — which served for adding/removing
// most of them. Re-writing everything would take a lot of time.
// For the sake of simplicity, we had to resort to an in-house solution.

// standard Fisher-Yates shuffle function
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

const questionCount = campaignTrail_temp.global_parameter_json[0].fields.question_count;
const originalQuestions = campaignTrail_temp.questions_json;

if (questionCount == 40) {
	// questions 1-10 (indices 0-9)
    const fixedStart = originalQuestions.slice(0, 10);

    // create the main randomized batch
    // this pool has questions 11-21 AND questions 30-40
    const mainPool = [
        ...originalQuestions.slice(10, 21), // Q11-21
        ...originalQuestions.slice(29, 40)  // Q30-40
    ];
    shuffle(mainPool);

    // create the second randomized batch for questions 22-25
    const midPool = originalQuestions.slice(21, 25); // Q22-25
    shuffle(midPool);

    // questions 26-29 (fixed at the end)
    const fixedEnd = originalQuestions.slice(25, 29); // Q26-29

    // assemble the new, final question list
    const newQuestionsList = [
        ...fixedStart,
        ...mainPool,
        ...midPool,
        ...fixedEnd
    ];

    // replace the old question list with the newly constructed one
    campaignTrail_temp.questions_json = newQuestionsList;

    // update the game's question count to match the new array length
	// this is so we don't crash before going to election night
    campaignTrail_temp.global_parameter_json[0].fields.question_count = newQuestionsList.length;

} else {
    // questions 1-10 (indices 0-9)
    const fixedStart = originalQuestions.slice(0, 10);

    // first shuffle pool (questions 11-21 + extras)
    const mainPool = [
      ...originalQuestions.slice(10, 21), // Q11-21
      ...[29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39].map(i => originalQuestions[i]).filter(Boolean)
    ];
    shuffle(mainPool);
    const shuffledMainBlock = mainPool.slice(0, 11); // take 11

    // fixed middle questions (22-25, indices 21-24)
    const fixedMiddle = originalQuestions.slice(21, 25);

    // second shuffle pool (questions 26-27)
    const midPool = originalQuestions.slice(25, 27); // Q26-27
    shuffle(midPool);

    // fixed end (questions 28 onwards)
	const fixedEnd = originalQuestions.slice(27, 29);

    // assemble the final list
    const newQuestionsList = [
        ...fixedStart,
        ...shuffledMainBlock,
        ...fixedMiddle,
        ...midPool,
        ...fixedEnd
    ];

    // replace the old question list
    campaignTrail_temp.questions_json = newQuestionsList;

    // update the question count for consistency
    campaignTrail_temp.global_parameter_json[0].fields.question_count = newQuestionsList.length;
}

// for answer swapper
const activePks = new Set(campaignTrail_temp.questions_json.map(q => q.pk));
campaignTrail_temp.questions_reserve = originalQuestions.filter(q => !activePks.has(q.pk));

console.log("Question re-ordering applied. At least this is working.");

// This is so that ME and NE's districts are not counted
// towards the popular vote total, pretty Much
campaignTrail_temp.ignored_pv_states = new Set([1051, 1052, 1053, 1054, 1055]);

handleFinalResults = function(t) {
  let i = 0;
  // reset totals
  campaignTrail_temp.final_overall_results.forEach((f) => {
    f.popular_votes = 0;
    f.electoral_votes = 0;
  });
  
  // tally up states that have come in
  campaignTrail_temp.final_state_results.forEach((f) => {
    if (f.result_time <= t) {
      i++;
      f.result.forEach((g) => {
        campaignTrail_temp.final_overall_results.forEach((h) => {
          if (h.candidate === g.candidate) {
            // check if state is in ignored set before adding PV
            if (!campaignTrail_temp.ignored_pv_states.has(f.state)) {
                h.popular_votes += g.votes;
            }
            h.electoral_votes += g.electoral_votes;
          }
        });
      });
    }
  });

  // sort results
  campaignTrail_temp.final_overall_results.sort((a, b) => {
    if (b.electoral_votes !== a.electoral_votes) {
      return b.electoral_votes - a.electoral_votes;
    }
    return b.popular_votes - a.popular_votes;
  });
  
  return i;
};

getLatestRes = function(t) {
  const e = campaignTrail_temp;
  const stateDataMap = new Map(e.states_json.map(s => [s.pk, s.fields]));

  const activeCandidates = e.candidate_json.filter(
    (candidate) => e.opponents_list.includes(candidate.pk) || candidate.pk === e.candidate_id
  );

  const candidateTotals = new Map();
  activeCandidates.forEach(cand => {
    candidateTotals.set(cand.pk, { popvs: 0, evvs: 0 });
  });

  let total_v = 0;

  for (const state of t) {
    const stateFields = stateDataMap.get(state.state);
    if (!stateFields) continue;

    const stateElectoralVotes = stateFields.electoral_votes;
    const evAllocation = new Map();

    // standard EV allocation logic
    if (e.primary_states) {
        const primaryStates = JSON.parse(e.primary_states);
        if (primaryStates.some(ps => ps.state === state.state)) {
            const voteCounts = state.result.map(r => r.votes);
            const allocations = dHondtAllocation(voteCounts, stateElectoralVotes, 0.15);
            state.result.forEach((res, i) => {
                evAllocation.set(res.candidate, allocations[i] || 0);
            });
        }
    } else if (!e.primary) {
      const gameType = Number(e.game_type_id);
      if (gameType === 2) { // Proportional
        const percentages = state.result.map(r => r.percent);
        const allocations = divideElectoralVotesProp(percentages, stateElectoralVotes);
        state.result.forEach((res, i) => {
          evAllocation.set(res.candidate, allocations[i] || 0);
        });
      } else if (stateFields.winner_take_all_flg === 1) {
        const winnerPk = state.result[0]?.candidate;
        if (winnerPk) evAllocation.set(winnerPk, stateElectoralVotes);
      } else {
        const totalVotes = state.result.reduce((sum, cr) => sum + (cr.votes || 0), 0);
        const topVotes = state.result[0]?.votes || 0;
        const [winnerEVs, runnerUpEVs] = splitEVTopTwo(stateElectoralVotes, topVotes, totalVotes);
        
        if (state.result[0]?.candidate) evAllocation.set(state.result[0].candidate, winnerEVs);
        if (state.result[1]?.candidate) evAllocation.set(state.result[1].candidate, runnerUpEVs);
      }
    }

    // check if this state should be excluded from PV counts
    const isIgnored = campaignTrail_temp.ignored_pv_states.has(state.state);

    for (const candidateResult of state.result) {
      const candidatePk = candidateResult.candidate;
      const totals = candidateTotals.get(candidatePk);

      if (totals) {
        // only add PV if not ignored
        if (!isIgnored) {
            totals.popvs += candidateResult.votes;
        }
        totals.evvs += (evAllocation.get(candidatePk) || 0);
      }
      
      if (!isIgnored) {
        total_v += candidateResult.votes;
      }
    }
  }

  const finalCandidates = activeCandidates.map(candidate => {
    const totals = candidateTotals.get(candidate.pk) || { popvs: 0, evvs: 0 };
    candidate.popvs = totals.popvs;
    candidate.evvs = totals.evvs;
    candidate.pvp = total_v > 0 ? (totals.popvs / total_v) : 0;
    return candidate;
  });

  const sortedCandidates = finalCandidates.sort((a, b) => b.pvp - a.pvp);

  window.nn2 = sortedCandidates;
  window.nn3 = sortedCandidates.map(c => c.evvs || 0);

  return [sortedCandidates, answerEffects];
};

// This pretty much implements multiple allocation methods, including
// the model-based Approval/Borda/Condorcet. That's really it.
(() => {
  const METHOD = {
    SAINTE_LAGUE: 4,
    DHONDT: 5,
    HUNTINGTON_HILL: 6,
    LR_HARE: 7,
    APPROVAL_SL: 8,
    BORDA_SL: 9,
    COPELAND_SL: 10,
  };

  const CFG = (window.ALT_VOTING_CONFIG = Object.assign(
    {
      approval: { thresholdRatio: 0.85, bandAbs: null },
      clampUtilityAtZero: true,
    },
    window.ALT_VOTING_CONFIG || {}
  ));

  // helpers
  function sainteLague(votes, seats) {
    const n = votes.length;
    const alloc = Array(n).fill(0);
    if (seats <= 0) return alloc;
    for (let s = 0; s < seats; s++) {
      let best = -1, bestScore = -Infinity;
      for (let i = 0; i < n; i++) {
        const score = votes[i] / (2 * alloc[i] + 1);
        if (score > bestScore) { bestScore = score; best = i; }
      }
      alloc[best]++;
    }
    return alloc;
  }

  function dHondt(votes, seats) {
    const n = votes.length;
    const alloc = Array(n).fill(0);
    if (seats <= 0) return alloc;
    for (let s = 0; s < seats; s++) {
      let best = -1, bestScore = -Infinity;
      for (let i = 0; i < n; i++) {
        const score = votes[i] / (alloc[i] + 1);
        if (score > bestScore) { bestScore = score; best = i; }
      }
      alloc[best]++;
    }
    return alloc;
  }

  function huntingtonHill(votes, seats) {
    const n = votes.length;
    const alloc = Array(n).fill(0);
    if (seats <= 0) return alloc;
    for (let s = 0; s < seats; s++) {
      let best = -1, bestScore = -Infinity;
      for (let i = 0; i < n; i++) {
        const a = alloc[i];
        // ensure candidates with 0 votes don't get priority even if seats are 0
        const priority = (votes[i] <= 0) ? -Infinity : (a === 0) ? Infinity : votes[i] / Math.sqrt(a * (a + 1));
        if (priority > bestScore) { bestScore = priority; best = i; }
      }
      if (best !== -1) {
          alloc[best]++;
      } else {
          // fallback if all valid candidates have 0 votes but seats remain
          break; 
      }
    }
    return alloc;
  }

  function largestRemainderHare(votes, seats) {
    const n = votes.length;
    if (seats <= 0) return Array(n).fill(0);
    const total = votes.reduce((a, b) => a + b, 0);
    if (total <= 0) {
      const a = Array(n).fill(0);
      if (n > 0) a[0] = seats;
      return a;
    }
    const quota = total / seats;
    const base = votes.map((v) => Math.floor(v / quota));
    let assigned = base.reduce((a, b) => a + b, 0);
    const rem = votes.map((v, i) => ({ i, r: v / quota - base[i] }));
    rem.sort((a, b) => (b.r - a.r) || (a.i - b.i));
    let idx = 0;
    while (assigned < seats) {
      base[rem[idx % n].i]++;
      assigned++;
      idx++;
    }
    return base;
  }

  function allocateByMethod(method, weights, seats) {
    switch (method) {
      case METHOD.SAINTE_LAGUE: return sainteLague(weights, seats);
      case METHOD.DHONDT: return dHondt(weights, seats);
      case METHOD.HUNTINGTON_HILL: return huntingtonHill(weights, seats);
      case METHOD.LR_HARE: return largestRemainderHare(weights, seats);
      default: return sainteLague(weights, seats);
    }
  }

  // context builder
  function buildContext(e) {
    const gp = e.global_parameter_json?.[0]?.fields || {};
    const voteVar = gp.vote_variable ?? 1.0; 
    const cIW = gp.candidate_issue_weight ?? 1;
    const rIW = gp.running_mate_issue_weight ?? 1;

    const answers = e.player_answers || [];
    const playerId = e.candidate_id;
    const candidates = [playerId, ...(e.opponents_list || [])];

    const rmByIssue = new Map(
      (e.running_mate_issue_score_json || []).map((x) => [x.fields.issue, x.fields.issue_score])
    );

    const ansIssueAgg = new Map(); 
    for (const it of e.answer_score_issue_json || []) {
      const f = it.fields;
      if (!answers.includes(f.answer)) continue;
      const prev = ansIssueAgg.get(f.issue) || { g: 0, b: 0 };
      prev.g += f.issue_score * f.issue_importance;
      prev.b += f.issue_importance;
      ansIssueAgg.set(f.issue, prev);
    }

    const candIssue = new Map(); 
    for (const row of e.candidate_issue_score_json || []) {
      const c = row.fields.candidate;
      if (!candIssue.has(c)) candIssue.set(c, new Map());
      candIssue.get(c).set(row.fields.issue, row.fields.issue_score);
    }

    const effCandIssue = new Map();
    for (const cand of candidates) {
      const base = candIssue.get(cand) || new Map();
      if (cand !== playerId) {
        effCandIssue.set(cand, base);
      } else {
        const adj = new Map();
        for (const [issue, score] of base.entries()) {
          const rmScore = rmByIssue.get(issue);
          const agg = ansIssueAgg.get(issue) || { g: 0, b: 0 };
          if (rmScore == null) {
            adj.set(issue, score);
          } else {
            const num = score * cIW + rmScore * rIW + agg.g;
            const den = cIW + rIW + agg.b;
            adj.set(issue, num / (den || 1));
          }
        }
        effCandIssue.set(cand, adj);
      }
    }

    const asgByKey = new Map();
    for (const it of e.answer_score_global_json || []) {
      const f = it.fields;
      if (f.candidate !== playerId) continue;
      const k = `${f.answer}|${f.affected_candidate}`;
      asgByKey.set(k, f.global_multiplier + (asgByKey.get(k) || 0));
    }
    
    const globalMultiplier = new Map();
    for (const cand of candidates) {
      let cumul = 0;
      for (const ans of answers) {
        cumul += asgByKey.get(`${ans}|${cand}`) || 0;
      }
      const base = (cand === playerId && cumul < -0.4) ? 0.6 : 1 + cumul;
      const gm = (cand === playerId) ? base * (e.difficulty_level_multiplier || 1) : base;
      globalMultiplier.set(cand, isNaN(gm) ? 1 : gm);
    }

    const csm = new Map(); 
    for (const cand of candidates) csm.set(cand, new Map());
    for (const row of e.candidate_state_multiplier_json || []) {
      if (row.model !== "campaign_trail.candidate_state_multiplier") continue;
      const cand = row.fields.candidate;
      if (!globalMultiplier.has(cand)) continue;
      if (!csm.has(cand)) csm.set(cand, new Map());
      const gm = globalMultiplier.get(cand);
      const sm = (row.fields.state_multiplier || 0) * gm;
      csm.get(cand).set(row.fields.state, sm);
    }

    const stateIssues = new Map();
    for (const row of e.state_issue_score_json || []) {
      const f = row.fields;
      if (!stateIssues.has(f.state)) stateIssues.set(f.state, []);
      stateIssues.get(f.state).push({ issue: f.issue, s: f.state_issue_score, w: f.weight || 1 });
    }

    const stateEVByPk = new Map((e.states_json || []).map((s) => [s.pk, s.fields.electoral_votes || 0]));

    return { candidates, effCandIssue, csm, stateIssues, voteVar, stateEVByPk };
  }

  function computeUtilitiesForState(ctx, statePk, orderCandIds) {
    const { effCandIssue, csm, stateIssues, voteVar } = ctx;
    const issues = stateIssues.get(statePk) || [];
    const weights = [];

    for (const candId of orderCandIds) {
      const sm = csm.get(candId)?.get(statePk) ?? 0;
      let sum = 0;
      const issueMap = effCandIssue.get(candId) || new Map();
      for (const { issue, s: stateScore, w } of issues) {
        const cs = issueMap.get(issue) ?? 0;
        const S = cs * Math.abs(cs);
        const E = stateScore * Math.abs(stateScore);
        sum += voteVar - Math.abs((S - E) * w);
      }
      let util = sum * sm;
      if (CFG.clampUtilityAtZero) util = Math.max(0, util);
      weights.push(util);
    }
    return weights;
  }

  function weightsApproval(utils) {
    const n = utils.length;
    if (n === 0) return [];
    const maxU = Math.max(...utils);
    const bandAbs = CFG.approval.bandAbs;
    const thr = CFG.approval.thresholdRatio ?? 0.85;
    const cutoff = bandAbs != null ? (maxU - bandAbs) : (maxU * thr);
    let any = false;
    const approvals = utils.map((u) => {
        const a = u >= cutoff && maxU > 0 ? 1 : 0;
        if(a) any=true; 
        return a;
    });
    if (!any) {
      const topIdx = utils.indexOf(maxU);
      if (topIdx >= 0) approvals[topIdx] = 1;
    }
    return approvals;
  }

  function weightsBorda(utils) {
    const n = utils.length;
    if (n === 0) return [];
    
    let items = utils.map((u, i) => ({ i, u }));
    items.sort((a, b) => b.u - a.u);

    const pts = Array(n).fill(0);
    let i = 0;
    while (i < n) {
      let j = i + 1;
      while (j < n && items[j].u === items[i].u) j++;
      
      let sumPoints = 0;
      for (let k = i; k < j; k++) sumPoints += (n - 1 - k);
      const avg = sumPoints / (j - i);

      for (let k = i; k < j; k++) pts[items[k].i] = Math.max(0, avg);
      i = j;
    }
    return pts;
  }

  function weightsCopeland(utils) {
    const n = utils.length;
    if (n === 0) return [];
    const score = Array(n).fill(0);
    for (let i = 0; i < n; i++) {
      for (let j = i + 1; j < n; j++) {
        if (utils[i] > utils[j]) score[i] += 1;
        else if (utils[j] > utils[i]) score[j] += 1;
      }
    }
    return score;
  }

  let _cachedCtx = null;
  let _lastCandId = null;
  let _lastAnswerLength = -1;

  // the patch.
  const __origA = window.A;
  if (typeof __origA !== "function") return;

  window.A = function patchedA(t) {
    const out = __origA.apply(this, arguments);

    try {
      const e = window.campaignTrail_temp || window.e;
      if (!e || e.primary) return out;

      const mode = Number(e.game_type_id);
      if (!Object.values(METHOD).includes(mode)) return out;

      // simple modes
      if (mode >= METHOD.SAINTE_LAGUE && mode <= METHOD.LR_HARE) {
        const stateFieldsByPk = new Map((e.states_json || []).map((s) => [s.pk, s.fields]));
        for (const st of out) {
          const sf = stateFieldsByPk.get(st.state);
          const seats = Number(sf?.electoral_votes || 0);
          if (seats <= 0) continue;
          const weights = st.result.map((r) => Math.max(0, Number(r.votes) || 0));
          const alloc = allocateByMethod(mode, weights, seats);
          for (let i = 0; i < st.result.length; i++) st.result[i].electoral_votes = alloc[i];
        }
        return out;
      }
	  
      const currentAnswerLength = e.player_answers ? e.player_answers.length : 0;
      const currentCandId = e.candidate_id;

      if (!_cachedCtx || currentAnswerLength !== _lastAnswerLength || _lastCandId !== currentCandId) {
          _cachedCtx = buildContext(e);
          _lastAnswerLength = currentAnswerLength;
          _lastCandId = currentCandId;
      }
      
      const ctx = _cachedCtx;

      for (const st of out) {
        const seats = Number(ctx.stateEVByPk.get(st.state) || 0);
        if (seats <= 0) continue;

        const orderCandIds = st.result.map((r) => r.candidate);
        const utils = computeUtilitiesForState(ctx, st.state, orderCandIds);

        let weights;
        switch (mode) {
          case METHOD.APPROVAL_SL: weights = weightsApproval(utils); break;
          case METHOD.BORDA_SL:    weights = weightsBorda(utils); break;
          case METHOD.COPELAND_SL: weights = weightsCopeland(utils); break;
          default: weights = utils.slice();
        }

        const sumW = weights.reduce((a, b) => a + b, 0);
        let alloc;
        if (sumW <= 0) {
          alloc = Array(weights.length).fill(0);
          if (weights.length > 0) alloc[0] = seats;
        } else {
          alloc = sainteLague(weights, seats);
        }

        for (let i = 0; i < st.result.length; i++) {
          st.result[i].electoral_votes = alloc[i];
        }
      }
    } catch (err) {
      console.error("[AltVoting] Error:", err);
      return out;
    }

    return out;
  };

  const __origGetLatestRes = window.getLatestRes;
  window.getLatestRes = function patchedGetLatestRes(t) {
    const e = window.campaignTrail_temp || window.e;
    const mode = Number(e.game_type_id);
    
    if (Object.values(METHOD).includes(mode)) {
        const activeCandidates = e.candidate_json.filter(
            (candidate) => e.opponents_list.includes(candidate.pk) || candidate.pk === e.candidate_id
        );

        const candidateTotals = new Map();
        activeCandidates.forEach(cand => {
            candidateTotals.set(cand.pk, { popvs: 0, evvs: 0 });
        });

        let total_v = 0;

        for (const state of t) {
            for (const candidateResult of state.result) {
                const candidatePk = candidateResult.candidate;
                const totals = candidateTotals.get(candidatePk);
                
                if (totals) {
                    totals.popvs += (candidateResult.votes || 0);
                    totals.evvs += (candidateResult.electoral_votes || 0);
                }
                total_v += (candidateResult.votes || 0);
            }
        }
        
        const finalCandidates = activeCandidates.map(candidate => {
            const totals = candidateTotals.get(candidate.pk) || { popvs: 0, evvs: 0 };
            candidate.popvs = totals.popvs;
            candidate.evvs = totals.evvs;
            candidate.pvp = total_v > 0 ? (totals.popvs / total_v) : 0;
            return candidate;
        });

        const sortedCandidates = finalCandidates.sort((a, b) => b.pvp - a.pvp);

        window.nn2 = sortedCandidates;
        window.nn3 = sortedCandidates.map(c => c.evvs || 0);

        return [sortedCandidates, window.answerEffects];
    }
    
    return __origGetLatestRes.apply(this, arguments);
  };

})();

// This is used to replace a series of images & question data for each running mate.
// 211 is Booker, 212 is Patrick, 213 is Biden, 215 is Biden, 216 is Garcetti.
// Kaine is unaffected, for obvious reasons

const UNLOCK_THRESHOLD_EV = 306; // EV threshold to unlock running mates
const STORAGE_KEY = 'hillary2016_unlocked_rms';

const RUNNING_MATE_IDS = {
    KAINE: 209,
    BOOKER: 211,
    PATRICK: 212,
	BIDEN: 213,
    CASTRO: 214,
    GARCETTI: 215,
};

const STATE_IDS = {
    NEW_JERSEY: 1029,
    MASSACHUSETTS: 1020,
	DELAWARE: 1007,
    TEXAS: 1042,
    CALIFORNIA: 1004,
};

const RUNNING_MATE_DATA = {
    [RUNNING_MATE_IDS.BOOKER]: {
        name: "Booker",
		bannerUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/hillarybooker.png',
        mateImageUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/cory.jpg',
        advisorUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/2016b_advisors_booker.jpg',
        questions: {
            1046: "Just prior to the convention, you selected Cory Booker, a Senator from New Jersey, as your running mate. What was your rationale behind selecting him?",
            1077: "Progressive activists wanted a more left-wing choice than Cory Booker, and don’t feel very enthusiastic about your new running mate. How do you respond to those who feel he’s too centrist?"
        },
        answers: {
            5155: "Cory Booker’s grassroots work in Newark taught him how to bring people together across divides to solve problems. I knew we needed that kind of bridge-building leadership and collaborative spirit on our team. There was no way I could say no to that.",
            5156: "See, I wanted a partner who could authentically speak to both working-class families and the business community. Cory’s proven record not only shows he can bridge those worlds effectively, but he can also make real differences for families while understanding how to drive economic opportunity.",
            5157: "What excites me about Cory is how he combines genuine compassion with effective action. He’s earned widespread trust through his criminal justice reform work, and I have complete confidence in his ability to help advance our agenda for America.",
            5262: "His record in the Senate is there to prove that Cory is a safe, pragmatic <i>and</i> progressive choice. Not only that, but he’s garnered a ton of experience in the Senate and is more than qualified to hold the position of Vice President.",
            5263: "Read my lips: Booker and I will be running the most progressive administration in American history. Our platform shows that, and together we will tackle climate change and maternal mortality, while protecting Social Security and Medicare."
        },
        feedback: {
            5155: "Cory is a bit of a rising star in the Democratic Party, and this selection only reinforces that. In fact, he’s so excited that he’s already lining up new community events for you.",
			5156: (() => {
                const favoriteMovies = [
                    'Click', 'Grown Ups', 'Grown Ups 2', 'Paul Blart: Mall Cop', 'Paul Blart: Mall Cop 2', 'Jack and Jill', 'Hoodwinked', 'Hoodwinked Two! Hood vs. Evil', 'Pixels', 'Zookeeper', 'That’s My Boy', 'Fred: The Movie', 'Little Nicky', 'Gigli', 'Happily N’Ever After', 'Bridge to Terabithia', 'Tenacious D in The Pick of Destiny', 'Alvin and the Chipmunks: The Squeakquel', 'Happy Feet', 'Miss Congeniality', 'The Pink Panther', 'The Pink Panther 2', 'Reno 911!: Miami', 'Taxi (2004)', 'D.E.B.S.', 'Bad Girls from Valley High', 'Legally Blondes', 'Dream a Little Dream 2', 'An Extremely Goofy Movie', 'National Lampoon’s Last Resort', 'The Aristocrats', 'The Longest Yard', 'Bingo', 'The Human Centipede (First Sequence)', 'The Heartbreak Kid', 'Dirty Rotten Scoundrels', 'The Out-of-Towners (1999)', 'Arthur (2011)', 'Bedazzled (2000)', 'A Bucket of Blood (1995)', 'The Kid from Left Field (1979)', 'Gambit (2012)', 'Piranha 3D', 'I Don’t Know How She Does It', 'I Want Someone to Eat Cheese With', 'School for Scoundrels (2006)', 'Spy Kids: All the Time in the World', 'The Magic Roundabout', 'TMMT (2007)',
                ];
                const movie = favoriteMovies[Math.floor(Math.random() * favoriteMovies.length)];
                return `Happy to be on your team, Booker wants to be directly involved in your outreach efforts. His enthusiasm is quite infectious, and he brings copies of one of his favorite movies, <i>${movie}</i>, to every rally he’s in. A lot of copies, actually.`;
            })(),
            5157: "Though some see him as more pragmatic than progressive, you believe his blend of idealism might help you win over skeptical moderates, and maybe get some of those Bernie-bros to look more into him.",
            5262: "To be fair, Cory’s only been in the Senate for about three years now, although you think his experience in Newark more than makes up for it. Whether the others in your party will be convinced, well…",
            5263: "The good news is that, if anything goes wrong in the next four years, you can at least twist the meaning of “progressive” to favor your side. You’d better hope they look at Cory and see him as someone they can also trust.",
			// other feedback
			5176: "I’m telling you, I don’t get why you talk so much about lunar bears. There aren’t any. Right?",
			5214: "We can’t be everywhere all at once, but you gotta take risks sometimes. Do you think Trump would be as strong on Milosevic as your husband was?",
			5220: "Who knows how this will end up, but you can always get Magaziner to come up with a plan that suits you if all goes well.",
			5231: "Behind the scenes, you hear that Obama is pleased with your comments. As a gift, he sends you a pot of Häagen-Dazs® creamy mango ice cream after one of your rallies; it’s a funny taste, and not your favorite, but you’re slowly warming up to it.",
			20803: "Some of the names floated to you include Amy Klobuchar, Lucy Koh, and… wait, Cory Booker? H-hold on a bit. But— are you— did you write this down, Hill?",
			20893: "Good call. After our failures with Kyoto, the least we want to see is a Trump presidency turning the nation into a seaQuestian-like dystopian nightmare.",
			21020: "After much discussion, Podesta presents a name to you: that of former eBay CEO Meg Whitman. You feel like you want to cry, and your tears are not of joy.",
			21156: "You know, Saddam tried to ban Pokémon in Iraq once. If he wasn’t history now, I’d get my— what do they call it again? Oh yeah, a “Machamp” to whoop his ass."
        },
        issueScores: {
            5155: [
                { issue: 100, score: 0.4 }, { issue: 101, score: -0.3 }, { issue: 102, score: 0.1 },
                { issue: 103, score: 0.55 }, { issue: 104, score: 0.55 }
            ],
            5156: [
                { issue: 100, score: 0.35 }, { issue: 101, score: -0.3 }, { issue: 102, score: 0 },
                { issue: 103, score: 0.55 }, { issue: 104, score: 0.55 }
            ],
            5157: [
                { issue: 100, score: 0.35 }, { issue: 101, score: -0.3 }, { issue: 102, score: -0.125 },
                { issue: 103, score: 0.55 }, { issue: 104, score: 0.55 }
            ]
        },
        stateScores: [
            { answer: 5155, state: STATE_IDS.NEW_JERSEY },
            { answer: 5156, state: STATE_IDS.NEW_JERSEY },
            { answer: 5157, state: STATE_IDS.NEW_JERSEY },
        ],
        globalScores: {
            5262: [
                { candidate: 201, affected_candidate: 203, global_multiplier: -0.002 }
            ]
        }
    },
    [RUNNING_MATE_IDS.PATRICK]: {
        name: "Patrick",
		bannerUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/hillarypatrick.png',
        mateImageUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/deval.jpg',
        advisorUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/2016b_advisors_patrick.jpg',
        questions: {
            1046: "Unexpectedly, you’ve chosen former Massachusetts Governor Deval Patrick as your running mate. As he was on none of the rumored shortlists for your running mate pick, what was your rationale behind selecting him?",
            1077: "It’s not easy to say this, but there are a lot on the left who feel deflated by your choice of Deval Patrick as your running mate, finding him to be an “Obama pick” and nothing else. What’s your message to those critics?"
        },
        answers: {
            5155: "Deval Patrick transformed Massachusetts into a genuine laboratory for progressive ideas that work, from healthcare expansion to comprehensive education reform. That’s exactly the kind of proven track record and innovative leadership we need to bring to the White House.",
            5156: "I needed a vice president who could both innovate with bold ideas and govern effectively from day one. Deval’s record speaks for itself; he created jobs, reduced crime, and improved schools across Massachusetts. He’s the ideal partner for our administration.",
            5157: "Governor Patrick’s extensive experience makes him someone the American people can truly count on. President Obama was absolutely right when he praised Deval’s leadership, and I couldn’t agree more.",
            5262: "Anyone can see that Patrick is a progressive pick, for God’s sake. He’s fought for same-sex marriage and passed a plan that brought Massachusetts’ transportation system into the 21st century. If that’s not progress, what else could it be? I stand by him 1000%.",
            5263: "They don’t need to worry. Patrick and I have evolved just as much on the issues as other progressives have, and we’re both gonna bring hope and change into America by moving forward on issues like child poverty, paternity leave, infrastructure, and much more."
        },
        feedback: {
            5155: "When you think of a progressive, I’m pretty sure Deval Patrick is not at top of the list. Or in the middle. I don’t even know if he’d be at the bottom. But perhaps you have a point.",
            5156: "Massachusetts hasn’t been a competitive state in decades, but if you had any fears of underperforming in nearby states such as New Hampshire and Maine, perhaps those fears are unfounded?",
            5157: "Ding ding ding! You think you’re being too obvious, but by linking Patrick to Obama, you’re clearly showing where your administration is heading next.",
            5262: "Perhaps highlighting Patrick’s credentials will make people understand your side; it’s good to keep your party united. As Obama once told you, you gotta have them bells… and whistles too.",
            5263: "The Democratic Party has evolved quite a bit in a lot of issues over the last 25 years. You’ve just got to prove to them that, after your leftward swings in the primaries, that your new stances are for real-real, and not for play-play.",
			// other feedback
			5176: "As you focus more and more on the size of your rally crowds, your use of “Fight Song” has quintupled at increasingly aggressive decibel levels. An unlucky crowd in Toledo, Ohio goes home with ruptured eardrums. At least my earpiece works, but so much for lunar bears.",
			5199: "No! You can’t say that! He-he’s… <i>he’s</i> listening.",
			5203: "The Notorious H.R.C. strikes again. You know, for someone who seems so unburdened by what can be and has been, you’re giving us the heebie-jeebies here.",
			5231: "Behind the scenes, you hear that Obama is pleased with your comments. As a gift, he sends you a pot of Häagen-Dazs® vanilla swiss almond ice cream after one of your rallies; you don’t think it— wait. Damn. It actually tastes really good.",
			20751: "Damn Hillary. Back at it again with the anti-trade comments. You know, my job’s on the line too—",
			20803: "Some of the names floated to you include Paul Watford, Sri Srinivasan, and Ketanji Brown Jackson. On the very bottom of the list, one scribbled name needles you a bit: Barack Obama. Heh. I didn’t add him. You know what, I think we can keep that one.",
			21020: "After much discussion, Podesta presents a name to you: that of former mayor of New York City Michael Bloomberg. I mean, he was a Republican once, so it counts. You feel like you want to cry, and your tears are not of joy.",
			21156: "We love the Pokémon, we’re telling you. On my way home, I almost stepped into a Squirtle. Poor guy."
        },
        issueScores: {
            5155: [
                { issue: 100, score: 0.3 }, { issue: 101, score: -0.2 }, { issue: 102, score: 0.15 },
                { issue: 103, score: 0.45 }, { issue: 104, score: 0.5 }
            ],
            5156: [
                { issue: 100, score: 0.25 }, { issue: 101, score: -0.25 }, { issue: 102, score: 0.05 },
                { issue: 103, score: 0.5 }, { issue: 104, score: 0.5 }
            ],
            5157: [
                { issue: 100, score: 0.25 }, { issue: 101, score: -0.25 }, { issue: 102, score: -0.1 },
                { issue: 103, score: 0.5 }, { issue: 104, score: 0.5 }
            ]
        },
        stateScores: [
            { answer: 5155, state: STATE_IDS.MASSACHUSETTS },
            { answer: 5156, state: STATE_IDS.MASSACHUSETTS },
            { answer: 5157, state: STATE_IDS.MASSACHUSETTS },
        ],
        globalScores: {
            5262: [
                { candidate: 201, affected_candidate: 203, global_multiplier: -0.002 }
            ]
        }
    },
	[RUNNING_MATE_IDS.BIDEN]: {
        name: "Biden",
		bannerUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/hillarybiden.png',
        mateImageUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/biden.jpg',
        advisorUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/2016b_advisors_biden.jpg',
        questions: {
            1046: "In an interesting move, you’ve selected sitting Vice President Joe Biden as your running mate. What was the thinking behind this highly unusual ‘continuity’ ticket?",
            1077: "The progressive wing of the party is underwhelmed, to say the least. They see Joe Biden as a relic of a bygone era and feel your ticket lacks any forward-looking energy. How do you respond to them?"
        },
        answers: {
            5155: "Look, folks, here’s the deal. Joe’s been in the room where it happens for eight years. There is literally no one more prepared to be Vice President on day one. It’s a no-brainer, really.",
            5156: "I chose a partner who can speak directly to the folks in Scranton and across the Rust Belt. Joe understands their values and their struggles better than anyone in Washington, and he served the state of Delaware admirably for over 30 years.",
            5157: "This election is a clear choice between the steady leadership of the Obama-Biden administration and the chaos of Donald Trump and the Republicans. With Joe on the ticket, we’re making that choice crystal clear.",
			5259: "We’re gonna be barnstorming Pennsylvania. I’ll take Philly and the suburbs, and I’m sending Joe to Scranton and the Steel Valley to bring those voters home.",
            5262: "Give me a break. Joe Biden helped pass the Recovery Act, he championed the Violence Against Women Act, and he’s been a leader on foreign policy for decades. That’s a record any progressive should be proud of. If he’s not progressive, then I must be a blender.",
            5263: "This isn’t about looking back, it’s about building on our progress. Joe and I are going to take the successes of the last eight years and supercharge them to create the strongest, fairest economy in American history."
        },
        feedback: {
            5155: "A very safe, if unexciting, choice. Biden has already started measuring the drapes in the VP residence… again. He seems quite happy about not having to move, though.",
            5156: "At a rally in Cleveland, Biden goes off-script for 15 minutes to talk about his ’67 Corvette. The crowd is confused but strangely entertained. So are we. You’re starting to think this will be a good campaign after all.",
            5157: "You’re making it very clear to voters that your administration will be an extension of Obama’s. Of course, Trump immediately nicknames you two “Sleepy Hillary and Sleepier Joe,” which you have to admit has a certain ring to it, unfortunately.",
            5262: "To be fair, there are many laws Biden voted for in the 1990s that would make progressives tremble, and not in a good way. But who knows; maybe they like blenders?",
            5263: "You’re trying to frame this as a continuation of progress, which is a solid message. Whether voters want to keep following that path is a completely different thing, though.",
            // other feedback
            5176: "You know, I never met lunar bears, but I met a couple of polar bears. Very funny guys, strange sense of humor though.",
			5198: "Privately, Biden’s surrogates tell you this is a good thing. They say he’s too busy with his newest love affair, Jennifer Aniston, to campaign with you anyway.",
            5231: "Behind the scenes, you hear that Obama is pleased with your comments. As a gift, he sends you a pot of Häagen-Dazs® chocolate chip cookie dough ice cream after one of your rallies; attached to it is a note. “This is Joe’s favorite,” the note reads. “He can eat a whole pint in one sitting. It’s a little frightening, honestly.”",
			20803: "Some of the names floated to you include Jane Kelly, Jacqueline Nguyen, and Kamala Harris. On the very bottom of the list, one scribbled name needles you a bit: Barack Obama. <i>This is malarkey, jack…</i>",
			21020: "After much discussion, Podesta presents a name to you: that of— wait, what? Bush Sr? H-how did that even happen? You feel strange.",
            21156: "I wish we could do Donkey Kong Country references here, but I’m not sure if “Donkey Kong go to the polls” works."
        },
        issueScores: {
            5155: [
                { issue: 100, score: 0.1 }, { issue: 101, score: -0.3 }, { issue: 102, score: 0.25 },
                { issue: 103, score: 0.8 }, { issue: 104, score: 0.5 }
            ],
            5156: [
                { issue: 100, score: 0.4 }, { issue: 101, score: -0.2 }, { issue: 102, score: 0.1 },
                { issue: 103, score: 0.6 }, { issue: 104, score: 0.55 }
            ],
            5157: [
                { issue: 100, score: 0.2 }, { issue: 101, score: -0.15 }, { issue: 102, score: 0.15 },
                { issue: 103, score: 0.7 }, { issue: 104, score: 0.6 }
            ]
        },
        stateScores: [{ answer: 5155, state: STATE_IDS.DELAWARE }, { answer: 5156, state: STATE_IDS.DELAWARE }, { answer: 5157, state: STATE_IDS.DELAWARE }],
		globalScores: {
            5262: [
                { candidate: 201, affected_candidate: 203, global_multiplier: -0.002 }
            ]
        }
    },
    [RUNNING_MATE_IDS.CASTRO]: {
        name: "Castro",
		bannerUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/hillarycastro.png',
        mateImageUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/castro.jpg',
        advisorUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/2016b_advisors_castro.jpg',
        questions: {
            1046: "Just prior to the convention, you selected Julian Castro, the Secretary of Housing and Urban Development, as your running mate. What was your rationale behind selecting him?",
            1077: "Some pundits and voters are questioning Castro’s national experience, with some calling him a ‘lightweight’ choice. How do you counter the narrative that he’s not ready for the national stage?"
        },
        answers: {
            5155: "Julian’s story is the American story. From his humble beginnings in San Antonio to the President’s cabinet, he represents the promise of our nation. That’s the vision I want for all Americans.",
            5156: "With Castro on the ticket, we are making it clear that we intend to compete everywhere, including his home state of Texas. He’s more than qualified for this position, as we’ve seen at HUD, and together, we are building a coalition that looks like America.",
            5157: "I didn’t choose a running mate for the past; I chose one for the future! Castro represents the next generation of Democratic leadership, and he’ll be a vital partner in building a 21st-century economy.",
            5262: "Honestly, this is just ridiculous. Being the mayor of a major American city like San Antonio and a member of the Presidential Cabinet is more executive experience than Donald Trump and many other Republicans will ever have. He’s ready, period.",
            5263: "This ticket is about bringing new voices to the table. Julian’s perspective on housing, urban development, and community-building is exactly what we need to tackle inequality and create opportunity."
        },
        feedback: {
            5155: "It’s a compelling narrative, and Castro is a polished speaker. Your campaign’s media team is already cutting ads featuring his mother and their inspiring backstory, which could help make him more known.",
            5156: "Texas has not been won by a Democratic presidential candidate in 40 years, but you have to admire your optimism here. Who knows what could happen?",
            5157: "Just the other day I saw a couple of young voters doing… well, they are making… what are those things… Vines? to show their support for the Clinton-Castro ticket. It’s a six-second video of someone dabbing. They’re telling us this is a good thing.",
            5262: "A solid defense that your supporters appreciate. Podesta accidentally briefs Julian’s twin brother, Joaquin, for a full hour before anyone realizes the mistake. To his credit, Joaquin was surprisingly well-informed on housing policy.",
            5263: "This focus on his cabinet experience helps shore up his credentials. He’s an effective surrogate, although the public still needs to see quite a bit more of Castro on the campaign before forming their opinions about him.",
            // other feedback
			5148: "You recall that after Columbine, the Republican-led House refused to vote on the gun control bills your husband introduced. You haven’t forgiven them for it since.",
			5176: "God, I hope there are no lunar bears around here. Lunar bears can sure be a downer.",
            21156: "Good, good. We honestly ran out of jokes to include here, Hill. So uh… get those Pokémon or whatever.",			
			21264: "I’m putting Julian in charge of a task force on day one. We will have a comprehensive immigration reform bill on the floor of Congress within 100 days, and he will be its face."
        },
        issueScores: {
            5155: [
                { issue: 100, score: 0.5 }, { issue: 101, score: 0.3 }, { issue: 102, score: 0.1 },
                { issue: 103, score: -0.2 }, { issue: 104, score: 0.6 }
            ],
            5156: [
                { issue: 100, score: 0.3 }, { issue: 101, score: 0.1 }, { issue: 102, score: 0.05 },
                { issue: 103, score: -0.1 }, { issue: 104, score: 0.55 }
            ],
            5157: [
                { issue: 100, score: 0.4 }, { issue: 101, score: 0.4 }, { issue: 102, score: 0.0 },
                { issue: 103, score: -0.25 }, { issue: 104, score: 0.65 }
            ]
        },
        stateScores: [{ answer: 5155, state: STATE_IDS.TEXAS }, { answer: 5156, state: STATE_IDS.TEXAS }, { answer: 5157, state: STATE_IDS.TEXAS }],
		globalScores: {
            5262: [
                { candidate: 201, affected_candidate: 203, global_multiplier: -0.002 }
            ]
        }
    },
    [RUNNING_MATE_IDS.GARCETTI]: {
        name: "Garcetti",
        bannerUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/hillarygarcetti.png',
        mateImageUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/garcetti.jpg',
        advisorUrl: 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/2016b_advisors_garcetti.jpg',
        questions: {
            1046: "In an unexpected move, you’ve pulled a true dark horse, selecting Los Angeles Mayor Eric Garcetti as your running mate. What was your rationale behind selecting him?",
            1077: "The main criticism of Garcetti is that he’s a ‘coastal elite’ whose experience running liberal Los Angeles won’t play in places like Peoria. How do you convince swing voters he’s on their side?"
        },
        answers: {
            5155: "Running America’s second-largest city is a tougher job than anything my opponents have ever done. Eric has managed a massive budget and an increasingly diverse population in Los Angeles. He’s an executive and not a reality TV star, you know.",
            5156: "I chose a partner who understands how to build the infrastructure of the future. Eric has been a leader on transit, technology, and green energy, and that’s exactly the experience we need in Washington.",
            5157: "Look, our ticket is about turning the page on old arguments. Eric is a pragmatic, post-partisan leader who has brought people together to get things done. That’s a message that resonates everywhere, and no one can argue with that.",
			5179: "We could barely keep up with Sanders’ online presence, and now Trump’s clobbering us on this. The best bet for us to take is to what he does: get free media attention. Is there anywhere we can go in such short time? Eric Garcetti has been talking about this show, <i>Rick and Morty</i>. Can we get a 5-minute short there?",
            5262: "If by ‘coastal elite’ they mean a Rhodes Scholar with a track record of creating jobs and lowering crime, then I’ll take it. Anyone can see Eric is a proven problem-solver and not just your average big city mayor. He’s in it for America and so am I.",
            5263: "The challenges facing our cities are the same challenges facing our nation. Eric understands that; I’ve never heard of an Eric who doesn’t. We’re going to talk about solutions that work, regardless of whether you live, and get our country moving forward."
        },
        feedback: {
            5155: "A strong defense of his executive experience. It’s not like Garcetti will ask you to replace Air Force One with a fleet of electric scooters and a hyperloop tunnel to Camp David; but he will get the celebrities who like these ideas to vote for <i>you</i>.",
            5156: "Garcetti is an interesting choice, to say the least. Let’s see how that pans out.",
            5157: "Fox News host Tucker Carlson spends a week or so trying to pronounce his name correctly before giving up and just using ‘GAR-seth’. Although some pundits praise your ‘outside-the-beltway’ thinking, you think that’s mostly because they have nothing else to say about him. That’s good, right?",
			5179: "— Honey, why is there a robot-looking Hillary Clinton on our couch watching TV? Is she with you?<br/>— There is a— ohhh. Huh? Well. Actually— no. Good question, actually.",
            5262: "It’s a good line, but you have to admit it sounds a little defensive. Garcetti tries to help by showing up to a Pennsylvania rally in a locally-made flannel shirt, which he wears over his perfectly-tailored suit. Somehow, it works.",
            5263: "The good news is that Garcetti’s presence on your campaign has all but erased ‘Fight Song’ on your rally playlists. On the other hand, you’re a bit puzzled to find out the replacement has been, well, greatest hits from the band Korn.",
            // other feedback
			5176: "Hmm, no, but they’ve been known to shit in the liquor tent, if I remember it right.",
			5261: "Thanks to Garcetti, he manages to get actor Shia LaBeouf on stage with you. Your rally quickly derails when the two of them keep talking the early 2000s show Even Stevens and nothing else.",
			21096: "Why can’t Cuban-Americans see the light? You’re so 3008, they’re so 2000 and late.",
            21156: "I always liked Tetris better, to be honest."
        },
        issueScores: {
            5155: [
                { issue: 100, score: 0.2 }, { issue: 101, score: 0.1 }, { issue: 102, score: 0.15 },
                { issue: 103, score: 0.2 }, { issue: 104, score: -0.2 }
            ],
            5156: [
                { issue: 100, score: 0.1 }, { issue: 101, score: 0.25 }, { issue: 102, score: 0.05 },
                { issue: 103, score: 0.1 }, { issue: 104, score: 0.1 }
            ],
            5157: [
                { issue: 100, score: 0.25 }, { issue: 101, score: 0.15 }, { issue: 102, score: 0.15 },
                { issue: 103, score: 0.0 }, { issue: 104, score: 0.0 }
            ]
        },
        stateScores: [{ answer: 5155, state: STATE_IDS.CALIFORNIA }, { answer: 5156, state: STATE_IDS.CALIFORNIA }, { answer: 5157, state: STATE_IDS.CALIFORNIA }],
		globalScores: {
            5262: [
                { candidate: 201, affected_candidate: 203, global_multiplier: -0.002 }
            ]
        }
    }
};

const generateMockPK = () => Math.floor(Math.random() * 100000);
let lastDataAppliedMateId = -1;
let hasInjectedMates = false;

// modifies the questions/answers/feedback
function applyDataModifications() {
    const runningMateId = campaignTrail_temp.running_mate_id;
    if (runningMateId === lastDataAppliedMateId) return;

    const mateData = RUNNING_MATE_DATA[runningMateId];

    if (mateData) {
        console.log(`Applying data for ${mateData.name}...`);

        // update text content
        mateData.questions && campaignTrail_temp.questions_json.forEach(q => { if (mateData.questions[q.pk]) q.fields.description = mateData.questions[q.pk]; });
        mateData.answers && campaignTrail_temp.answers_json.forEach(a => { if (mateData.answers[a.pk]) a.fields.description = mateData.answers[a.pk]; });
        mateData.feedback && campaignTrail_temp.answer_feedback_json.forEach(fb => { if (mateData.feedback[fb.fields.answer]) fb.fields.answer_feedback = mateData.feedback[fb.fields.answer]; });
		
		// update issue scores
		if (mateData.issueScores && Array.isArray(campaignTrail_temp.answer_score_issue_json)) {
		  const answersToReplace = Object.keys(mateData.issueScores).map(Number);
		  campaignTrail_temp.answer_score_issue_json = campaignTrail_temp.answer_score_issue_json
			.filter(e => !answersToReplace.includes(Number(e.fields.answer)));

		  for (const [answerIdStr, scores] of Object.entries(mateData.issueScores)) {
			const answerId = Number(answerIdStr);
			scores.forEach(({ issue, score }) => {
			  campaignTrail_temp.answer_score_issue_json.push({
				model: "campaign_trail.answer_score_issue",
				pk: generateMockPK(),
				fields: {
				  answer: answerId,
				  issue,
				  issue_score: score,
				  issue_importance: 2
				}
			  });
			});
		  }
		}

        // update global scores
        if (mateData.globalScores) {
            const answersToReplace = Object.keys(mateData.globalScores);
            campaignTrail_temp.answer_score_global_json = campaignTrail_temp.answer_score_global_json.filter(e => !answersToReplace.includes(String(e.fields.answer)));
            for (const [answerId, scores] of Object.entries(mateData.globalScores)) {
                scores.forEach(scoreData => campaignTrail_temp.answer_score_global_json.push({ model: "campaign_trail.answer_score_global", pk: generateMockPK(), fields: { answer: parseInt(answerId), ...scoreData } }));
            }
        }

        // update state scores
        if (mateData.stateScores) {
            const answersToReplace = mateData.stateScores.map(s => s.answer);
            campaignTrail_temp.answer_score_state_json = campaignTrail_temp.answer_score_state_json.filter(e => !answersToReplace.includes(e.fields.answer));
            mateData.stateScores.forEach(({ answer, state }) => campaignTrail_temp.answer_score_state_json.push({ model: "campaign_trail.answer_score_state", pk: generateMockPK(), fields: { answer, state, candidate: 201, affected_candidate: 201, state_multiplier: 0.01 } }));
        }
    }

    lastDataAppliedMateId = runningMateId;
}

function updateDynamicUI() {
    const runningMateId = campaignTrail_temp.running_mate_id;
    const mateData = RUNNING_MATE_DATA[runningMateId];

    // default info for 1st running mate (Kaine)
    let bannerUrl = 'https://file.garden/aNtAfG887DiA_7lO/2016ALOT/hillarykaine.png';
    let mateImageUrl = campaignTrail_temp.running_mate_image_url;
    let advisorUrl = campaignTrail_temp.election_json[0].fields.advisor_url;

    // overwrite with specific mate data
    if (mateData) {
        bannerUrl = mateData.bannerUrl;
        mateImageUrl = mateData.mateImageUrl;
        advisorUrl = mateData.advisorUrl;
    }

    // apply to DOM elements if they exist
    const questionBanner = document.getElementById("campaign_sign");
    if (questionBanner) {
        questionBanner.style.backgroundImage = `url('${bannerUrl}')`;
    }

    const runningMateImg = document.getElementById("running_mate_image_ui");
    if (runningMateImg) {
        runningMateImg.src = mateImageUrl;
    }

    // update global state
    campaignTrail_temp.running_mate_image_url = mateImageUrl;
    const election = campaignTrail_temp.election_json?.[0]?.fields;
    if (election) {
        election.advisor_url = advisorUrl;
    }
}

function onGameChange() {
	if (!hasInjectedMates) {
        hasInjectedMates = true; // set the flag so it doesn't run again
    }

    applyDataModifications();
    updateDynamicUI();
}

const gameWindow = document.getElementById("game_window");
if (gameWindow) {
    const observer = new MutationObserver(onGameChange);
    observer.observe(gameWindow, { childList: true, subtree: true });

    onGameChange();
} else {
    console.error("Game window element not found.");
}

// This is to basically unlock the extra running mates for the mod.
const UNLOCK_MAP = {
    209: 213, // Kaine -> Biden
    211: 214, // Booker -> Castro
    212: 215, // Patrick -> Garcetti
};

// helper function to read from storage.
function getUnlockedRmsFromStorage() {
    try {
        const stored = localStorage.getItem(STORAGE_KEY);
        return stored ? JSON.parse(stored) : [];
    } catch (e) {
        return [];
    }
}

// write the unlock status in storage
function unlockRmInStorage(pk) {
    const unlocked = getUnlockedRmsFromStorage();
    if (!unlocked.includes(pk)) {
        unlocked.push(pk);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(unlocked));
        return true;
    }
    return false;
}

function showUnlockNotification(mateName) {
    const notification = document.createElement('div');
    notification.className = 'unlock-notification';
    notification.innerHTML = `<strong>Guess who...</strong><br/>You can now select ${mateName} on your next playthrough.`;
    document.body.appendChild(notification);

    requestAnimationFrame(() => {
        notification.classList.add('show');
    });

    setTimeout(() => {
        notification.classList.remove('show');
        notification.addEventListener('transitionend', () => notification.remove(), { once: true });
    }, 5000);
}

// runs on endgame to check for unlocks
function checkAndApplyUnlocks(playerEV, runningMateId) {
    if (playerEV < UNLOCK_THRESHOLD_EV) return;

    const unlockedPk = UNLOCK_MAP[runningMateId];
    if (unlockedPk && unlockRmInStorage(unlockedPk)) {
        const mateData = campaignTrail_temp.candidate_json.find(c => c.pk === unlockedPk);
        if (mateData) {
            const mateName = `${mateData.fields.first_name} ${mateData.fields.last_name}`;
            showUnlockNotification(mateName);
        }
    }
}

// This loads up the achievements for the mod.
let unlockedAchievements = JSON.parse(localStorage.getItem("unlockedAch")) || {};

const achievementQueue = [];
let playthroughAchievements = {};
let isAchievementShowing = false;
const achievementSoundURL = "";

function unlockAchievement(title) {
	if (typeof cheatsActive === 'undefined' || typeof campaignTrail_temp === 'undefined' || !campaignTrail_temp.CTS) { // not on CTS? then do nothing
		return;
	}
	if (unlockedAchievements[title]) { // has been unlocked? then do nothing
        return;
    }
	if (playthroughAchievements[title]) { // has been unlocked in this playthrough? then do nothing
        return;
    }
	
    // look up the achievement data using the title
    const achData = campaignTrail_temp.achievements[title];

    // if the achievement doesn't exist, log an error and exit
    if (!achData) {
        console.error(`Achievement with title "${title}" not found. Check for typos?`);
        return;
    }

    // check conditions before awarding
    if (achData.cannotBeCheated && cheatsActive) {
        console.log(`Cannot unlock "${title}" because cheats are active.`);
        return;
    }
    if (playthroughAchievements[title]) {
        return; // already earned
    }

    // mark as earned for this playthrough
    playthroughAchievements[title] = true;

    // add the achievement to the display queue
    queueAchievementPopup(title, achData.image, achievementSoundURL, achData.description);

    // save to local storage if it's a new unlock and difficulty is valid
    if (campaignTrail_temp.difficulty_level_multiplier <= 1 && campaignTrail_temp.CTS) {
        // only queue the popup for a brand new unlock
        queueAchievementPopup(title, achData.image, achievementSoundURL, achData.description);

        // mark as permanently unlocked and save
        unlockedAchievements[title] = true;
        localStorage.setItem("unlockedAch", JSON.stringify(unlockedAchievements));
        addAllAchievements();
    }
}

function queueAchievementPopup(title, imageUrl, soundUrl, description) {
	if (achievementQueue.some(ach => ach.title === title)) {
			return;
    }
    achievementQueue.push({ title, imageUrl, soundUrl, description });
    processAchievementQueue();
}

function processAchievementQueue() {
    if (isAchievementShowing || achievementQueue.length === 0) return;

    isAchievementShowing = true;
    const { title, imageUrl, soundUrl, description } = achievementQueue.shift();

    const achievementOverlay = document.createElement('div');
    achievementOverlay.className = 'achievement-popup';

    achievementOverlay.innerHTML = `
        <img src="${imageUrl}" class="achievement-popup-image" alt="Achievement Icon">
        <div>
            <h3 class="achievement-popup-title">${title}</h3>
            <p class="achievement-popup-desc">${description}</p>
        </div>
    `;

    document.body.appendChild(achievementOverlay);

    requestAnimationFrame(() => {
        achievementOverlay.classList.add('show');
    });
    
    // sound (we don't currently use this)
    // const achievementSound = new Audio(soundUrl);
    // ...

    setTimeout(() => {
        closeOverlay(achievementOverlay);
    }, 7000);
}

function closeOverlay(overlay) {
    overlay.classList.remove('show');
    
    overlay.addEventListener('transitionend', () => {
        overlay.remove();
        isAchievementShowing = false;
        processAchievementQueue();
    }, { once: true });
}

// This is for the squeaky clean no swearing option, if enabled
(function () {
  if (typeof window === "undefined") return;
  const GAME_WINDOW_ID = "game_window";
  const UI_WRAPPER_ID = "squeaky_clean_wrapper"; // don't touch anything inside this element for the love of God
  const SCHEDULE_DEBOUNCE_MS = 100;

  const gameWindow = document.getElementById(GAME_WINDOW_ID);
  if (!gameWindow) return;

  const REPLACEMENTS = [
    // specific idioms
    { re: /\bdeep shit\b/gi, replace: (m) => preserveCase("deep trouble", m) },
    { re: /\ball that shit\b/gi, replace: (m) => preserveCase("all that stuff", m) },
    { re: /\bshit in the woods\b/gi, replace: (m) => preserveCase("poop in the woods", m) },
    { re: /\bshit in the liquor tent\b/gi, replace: (m) => preserveCase("relieve themselves in the liquor tent", m) },

    // 'shit' suffixes and variants
    { re: /\bshitty\b/gi, replace: (m) => preserveCase("poor", m) },
    { re: /\bshitter\b/gi, replace: (m) => preserveCase("toilet", m) },
    // standalone 'shit' — if single-word exclamation, map to Shoot; otherwise prefer 'poop'
    { re: /\bshit\b/gi, replace: (m, ...args) => {
        // if original is short or followed/preceded by punctuation, treat as exclamation
        const original = m;
        // if it's exactly "Shit" possibly with punctuation nearby, prefer "Shoot"
        if (/^Shit[.!?]?$/i.test(original) || original.length <= 5) return preserveCase("Shoot", original);
        return preserveCase("poop", original);
      }
    },

    // 'fuck' forms
    // "fucked up" or "fucked" -> "messed up" / "messed"
    { re: /\bfucked up\b/gi, replace: (m) => preserveCase("messed up", m) },
    { re: /\bfucked\b/gi, replace: (m) => preserveCase("messed", m) },
    { re: /\bfucking\b/gi, replace: (m) => preserveCase("really", m) },
    // standalone "fuck" as interjection -> "darn"/"shoot"/"well" depending on context. fallback to "fudge"
    { re: /\bFuck yeah\b/gi, replace: (m) => preserveCase("Absolutely", m) },
    { re: /\bFuck yes\b/gi, replace: (m) => preserveCase("Absolutely", m) },
    { re: /\bFuck\b/gi, replace: (m) => {
        // if followed/preceded by "yeah" keep "hell yeah" replacement
        // otherwise use "fudge" to preserve rhythm; single-word "Well, fuck." -> "Well, fudge."
        return preserveCase("fudge", m);
      }
    },

    // other insults / swears
    { re: /\bbastard\b/gi, replace: (m) => preserveCase("scoundrel", m) },
    { re: /\bbitch(es)?\b/gi, replace: (m, s) => preserveCase(s ? "cruel people" : "jerk", m) },
    { re: /\bdamn(ed|ing|s)?\b/gi, replace: (m, s) => {
        // keep suffixes when natural
        if (/damned/i.test(m) || /damn(ed)/i.test(m)) return preserveCase("darned", m);
        if (/damning/i.test(m)) return preserveCase("darn", m);
        return preserveCase("darn", m);
      }
    },
  ];

  // preserve capitalization of original string (match)
  function preserveCase(replacement, original) {
    if (!original) return replacement;
    // if original is all-caps -> all caps replacement
    if (original.toUpperCase() === original) return replacement.toUpperCase();
    // if original starts with capital letter -> title case replacement
    if (original[0] && original[0] === original[0].toUpperCase()) {
      return replacement.charAt(0).toUpperCase() + replacement.slice(1);
    }
    // default lower-case
    return replacement;
  }

  // walk text nodes under root and apply fn to nodeValue
  function walkTextNodes(root, fn) {
    if (!root) return;
    const walker = document.createTreeWalker(root, NodeFilter.SHOW_TEXT, {
      acceptNode(node) {
        // skip empty/whitespace-only nodes
        if (!node.nodeValue || !node.nodeValue.trim()) return NodeFilter.FILTER_REJECT;
        // skip nodes that are inside the UI wrapper
        if (node.parentElement && node.parentElement.closest && node.parentElement.closest(`#${UI_WRAPPER_ID}`)) {
          return NodeFilter.FILTER_REJECT;
        }
        return NodeFilter.FILTER_ACCEPT;
      }
    }, false);

    const nodes = [];
    let node;
    while ((node = walker.nextNode())) nodes.push(node);

    for (const n of nodes) {
      try {
        const newText = fn(n.nodeValue);
        if (newText !== n.nodeValue) n.nodeValue = newText;
      } catch (err) {
        // don't let one failure stop others
        console.warn("squeaky-clean walkTextNodes error:", err);
      }
    }
  }

  // apply replacements to a single string
  function replaceSwearsInText(text) {
    if (typeof text !== "string" || text.length === 0) return text;
    let out = text;
    for (const { re, replace } of REPLACEMENTS) {
      out = out.replace(re, function () {
        try {
          // call replace with full match first param for convenience
          const args = Array.prototype.slice.call(arguments);
          // some replace functions expect only (match) or (match, g1, g2, ...)
          return replace.apply(null, args);
        } catch (e) {
          return arguments[0];
        }
      });
    }
    return out;
  }

  // apply squeaky-cleaning to a root element
  function applySqueakyClean(root) {
    if (!root) return;
    // skip if the UI wrapper is not present? no, just avoid touching it via walkTextNodes
    try {
      walkTextNodes(root, replaceSwearsInText); // text nodes

      // attributes we may want to sanitize
      const ATTRS = ["title", "alt", "placeholder", "value"];
      const elements = root.querySelectorAll("*");
      for (const el of elements) {
        // skip UI wrapper descendants
        if (el.closest && el.closest(`#${UI_WRAPPER_ID}`)) continue;
        for (const attr of ATTRS) {
          if (el.hasAttribute && el.hasAttribute(attr)) {
            const val = el.getAttribute(attr);
            if (!val) continue;
            const newVal = replaceSwearsInText(val);
            if (newVal !== val) el.setAttribute(attr, newVal);
          }
        }
      }
    } catch (err) {
      console.warn("squeaky-clean apply error:", err);
    }
  }

  let _applyingSqueaky = false; // to avoid infinite loops
  let scheduled = false;

  function scheduleApply() {
    if (scheduled) return;
    scheduled = true;
    setTimeout(() => {
      scheduled = false;
      if (!window.campaignTrail_temp?.squeaky_clean_mode) return;
      if (_applyingSqueaky) return;
      _applyingSqueaky = true;
      try {
        const gw = document.getElementById(GAME_WINDOW_ID);
        if (gw) applySqueakyClean(gw);
      } finally {
        // small timeout before releasing guard to let observer settle
        setTimeout(() => { _applyingSqueaky = false; }, 0);
      }
    }, SCHEDULE_DEBOUNCE_MS);
  }

  const observer = new MutationObserver((mutationsList) => {
    if (!window.campaignTrail_temp?.squeaky_clean_mode) return;
    // if we are currently applying changes ourselves, bail out (guard)
    if (_applyingSqueaky) return;
    // if all mutations are inside the UI wrapper, ignore
    const interesting = mutationsList.some((m) => {
      const target = m.target;
      if (!target) return true;
      if (target instanceof Node && target.nodeType === Node.TEXT_NODE) {
        const parent = target.parentElement;
        if (parent && parent.closest && parent.closest(`#${UI_WRAPPER_ID}`)) return false;
      } else if (target instanceof Element) {
        if (target.closest && target.closest(`#${UI_WRAPPER_ID}`)) return false;
      }
      return true;
    });
    if (!interesting) return;
    scheduleApply();
  });

  try {
    observer.observe(gameWindow, { childList: true, subtree: true, characterData: true, attributes: true });
  } catch (e) {
    console.warn("squeaky-clean observer failed to start:", e);
  }

  // if enabled at load, do one pass
  if (window.campaignTrail_temp && window.campaignTrail_temp.squeaky_clean_mode) {
    try {
      _applyingSqueaky = true;
      applySqueakyClean(gameWindow);
    } finally {
      _applyingSqueaky = false;
    }
  }

  // when enabling, run an immediate pass
  window.enableSqueakyClean = function (enabled) {
    if (!window.campaignTrail_temp) window.campaignTrail_temp = {};
    window.campaignTrail_temp.squeaky_clean_mode = Boolean(enabled);
    if (enabled) {
      // run one immediate pass
      if (_applyingSqueaky) return;
      _applyingSqueaky = true;
      try {
        applySqueakyClean(document.getElementById(GAME_WINDOW_ID));
      } finally {
        _applyingSqueaky = false;
      }
    }
  };

  // allow other modules to sanitize strings before injecting them into DOM
  window.replaceSwearsInText = replaceSwearsInText;

  // export a small helper
  window._squeakyCleanUtils = {
    applyToRoot: applySqueakyClean,
    isEnabled: () => Boolean(window.campaignTrail_temp?.squeaky_clean_mode),
  };
})();



// This is fairly similar to the ending loader used in Things That Never Were.
// Well, I don't know if it was developed for that mod or not, but I took inspiration
// from the one there. Part of the design, that is — the underlying implementation
// for this took longer than I wanted to.

campaignTrail_temp.multiple_endings = true;

campaignTrail_temp.page = 0;
campaignTrail_temp.pages = [];
campaignTrail_temp.header = "";
campaignTrail_temp.image = false;
campaignTrail_temp.executable = [];

let endingObserver = null;
let contingentMode = false;

// helper function to set image
function setImage(url) {
    if (!url) return;

    const selector = ".person_image";

    const immediateImg = document.querySelector(selector);
    if (immediateImg) {
        immediateImg.src = url;
        return;
    }

    const observer = new MutationObserver((mutations, obs) => {
        const img = document.querySelector(selector);
        if (img) {
            img.src = url;
            obs.disconnect();
        }
    });

    observer.observe(document.body, {
        childList: true,
        subtree: true
    });

    setTimeout(() => {
        observer.disconnect();
    }, 5000);
}

// construct the HTML for the ending page
construct = (a = 1) => {
    // ensure page index is within bounds    
	if (a !== 'rerender') {
        const newPage = campaignTrail_temp.page + a;
        if (newPage >= 0 && newPage < campaignTrail_temp.pages.length) {
            campaignTrail_temp.page = newPage;
        } else if (a === 0) {
            campaignTrail_temp.page = 0;
        }
    }
	
    let html = campaignTrail_temp.header;

    // main scrollable container for both narrative and stats
    html += `<div id="main-ending-scroll-container" style="height: 38em; overflow: auto; position: relative;">`;
    
    // container for the narrative text
    html += `<div id="endingtxt" class="ending-narrative-content">
                <table style='margin:0px;padding:0px;display: table;width:100%;'>
                    <tbody style='display: table-row-group;'>
                        <tr style='display: table-row;'>
                            <td style='border: none;padding: 0px;display: table-cell;'>
                                <p style='margin-left: 0em;margin-right: 0em;'>${campaignTrail_temp.pages[campaignTrail_temp.page]}</p>
                            </td>
                        </tr>
                    </tbody>
                </table>
             </div>`;

    // placeholder for stats, inside the main scrollable container, after the narrative
    html += `<div id="ending-stats-container" style="padding-top: 1rem;"></div>`;
    html += `</div>`;
    
    let buttons = "<div class=\"button_container\" style=\"margin-top: 0.5rem;\">";
    const existingButtons = document.querySelector(".button_container");
    if (existingButtons) existingButtons.remove();

    const currentPage = campaignTrail_temp.page;
    const lastPage = campaignTrail_temp.pages.length - 1;
    
    if (campaignTrail_temp.pages.length > 1) { // only show buttons if there's more than one page
        if(currentPage === 0){
            buttons += `<button style='position: relative;' onclick='endingConstructor(1)'>Next</button>`;
        } else if(currentPage === lastPage){
            buttons += `<button style='z-index: 10; position: relative;' onclick='endingConstructor(-1)'>Back</button>`;
        } else {
            buttons += `<button style='z-index: 10; position: relative;' onclick='endingConstructor(-1)'>Back</button>
                       <button style='margin-left: 5px; position: relative;' onclick='endingConstructor(1)'>Next</button>`;
        }
    }
    buttons += "</div>";

    for (let i = 0; i < campaignTrail_temp.executable.length; i++) {
        if (campaignTrail_temp.executable[i][0] === currentPage) {
            campaignTrail_temp.executable[i][1]();
        }
    }
  
    setTimeout(() => {
        const candImg = document.querySelector(".person_image");
        const resultsDesc = document.getElementById("final_results_description");

        if (resultsDesc) {
            // clear previous buttons before adding new ones, if any
            const oldButtons = resultsDesc.parentElement.querySelector(".button_container");
            if(oldButtons) oldButtons.remove();

            resultsDesc.style.textAlign = "left";
            resultsDesc.style.width = "72%";
            resultsDesc.style.height = "auto"; 
            resultsDesc.style.textOverflow = "ellipsis";
            resultsDesc.style.marginLeft = "auto";
            resultsDesc.style.marginRight = "auto";

            if (candImg) {
                if (campaignTrail_temp.image === true) {
                    candImg.style.display = 'none';
                } else if (campaignTrail_temp.image) {
                    candImg.src = campaignTrail_temp.image;
                    candImg.style.display = '';
                }
                 if (buttons !== "<div class=\"button_container\" style=\"margin-top: 0.5rem;\"></div>" && (typeof CONTINGENT === 'undefined' || CONTINGENT !== 0)) {
                    resultsDesc.insertAdjacentHTML('afterend', buttons);
                }
            } else {
                 if (buttons !== "<div class=\"button_container\" style=\"margin-top: 0.5rem;\"></div>" && (typeof CONTINGENT === 'undefined' || CONTINGENT !== 0)) {
                    resultsDesc.insertAdjacentHTML('afterend', buttons);
                }
            }
        }
    }, 10);
    
    return html;
};

let resetPage = false;
endingConstructor = (a = 1) => {
    if(resetPage){
        a = 0;
        resetPage = false;
    }

    const finalDesc = document.getElementById("final_results_description");
    const difficultyTxt = document.getElementById("difficulty_mult");
    const overallVote = document.getElementById("overall_vote_statistics");
    const mapFooter = document.getElementById("map_footer");
    
    if (!finalDesc) {
        console.log("#final_results_description not found. Ending cannot be displayed.");
        return;
    }
    if (!difficultyTxt || !overallVote || !mapFooter) {
        console.warn("One or more stats elements (#difficulty_mult, #overall_vote_statistics, #map_footer) not found. Stats display might be incomplete.");
    }

    if(overallVote) { overallVote.style.position = "relative"; overallVote.style.display = "block"; }
    if(mapFooter) { mapFooter.style.position = "relative"; mapFooter.style.display = "block"; }

    finalDesc.innerHTML = construct(a); 
    
    // append the stats elements to the #ending-stats-container
    const statsContainer = document.getElementById("ending-stats-container");
    if (statsContainer) {
        statsContainer.innerHTML = '';
        
        if(difficultyTxt) statsContainer.appendChild(difficultyTxt);
        if(overallVote) statsContainer.appendChild(overallVote);
        if(mapFooter) statsContainer.appendChild(mapFooter);
        
        statsContainer.querySelectorAll(":scope > div, :scope > p, :scope > span").forEach(el => {
            el.style.margin = "0.5rem 0"; 
        });
    } else {
        console.error("#ending-stats-container not found after construct call. Stats cannot be placed.");
    }
};

function attemptRenderEnding() {
    // if we're in contingent mode, don't attempt to render regular endings
    if (contingentMode) {
        return true;
    }
    
    const finalDesc = document.getElementById("final_results_description");
    const difficultyTxt = document.getElementById("difficulty_mult");
    const overallVote = document.getElementById("overall_vote_statistics");
    const mapFooter = document.getElementById("map_footer");

    if (finalDesc && difficultyTxt && overallVote && mapFooter) {
        console.log("Ending elements found. Rendering ending.");
        endingConstructor(0);
        if (endingObserver) {
            endingObserver.disconnect();
            endingObserver = null;
            //console.log("Ending observer disconnected.");
        }
        return true;
    }
    //console.log("Ending elements not yet ready. Observer will continue watching.");
    return false;
}

// this makes the contingent scheme work at least
function addContingent(likelihoodA, likelihoodB, likelihoodC) {
  let tableAdded = false;
  const observer = new MutationObserver((mutationsList, obs) => {
    const container = document.getElementById("coalitionList");
    if (!container || tableAdded) return;

    tableAdded = true;

    // build table
    const tbl = document.createElement("table");
    Object.assign(tbl.style, {
      backgroundColor: "#fff",
      margin: "1em auto",
      width: "70%",
      border: "1px solid #000",
      borderCollapse: "collapse"
    });

    // header
    const hdr = ["Delegation", "Party", "Negotiate?", "Willingness"];
    const hr = document.createElement("tr");
    hdr.forEach(txt => {
      const th = document.createElement("th");
      th.textContent = txt;
      Object.assign(th.style, { border: "1px solid #ccc", padding: "0.5em" });
      hr.appendChild(th);
    });
    tbl.appendChild(hr);

    // data rows
    const rows = [
      ["Democratic Leadership",   "Democratic",   likelihoodA],
      ["Blue Dog Democrats",      "Democratic",   likelihoodB],
      ["Republican Moderates",    "Republican",   likelihoodC],
	  ["Donald J. Trump",         "Republican",   -1]
    ];

    // keep refs to checkboxes
    const checks = [];

    rows.forEach(([name, party, lik], idx) => {
      const tr = document.createElement("tr");

      // name cell
      [name, party].forEach(text => {
        const td = document.createElement("td");
        td.textContent = text;
        Object.assign(td.style, { border: "1px solid #ccc", padding: "0.5em" });
        tr.appendChild(td);
      });

      // checkbox cell
      const tdChk = document.createElement("td");
      const cb = document.createElement("input");
      cb.type = "checkbox";
      tdChk.appendChild(cb);
      Object.assign(tdChk.style, { border: "1px solid #ccc", padding: "0.5em", textAlign: "center" });
      tr.appendChild(tdChk);
      checks.push({ cb, lik });

      // willingness cell
      const tdLik = document.createElement("td");
      let label;
      if (lik === -1) {
          label = "???";
      } else if (lik >= 3) {
          label = "Highly Likely";
      } else if (lik === 2) {
          label = "Possible";
      } else if (lik === 1) {
          label = "Unlikely";
      } else {
          label = "Impossible";
      }
      tdLik.textContent = label;
      Object.assign(tdLik.style, { border: "1px solid #ccc", padding: "0.5em" });
      tr.appendChild(tdLik);

      tbl.appendChild(tr);
    });

    container.appendChild(tbl);

    // negotiate button
    const btn = document.createElement("button");
    btn.textContent = "Negotiate!";
    btn.style.display = "block";
    btn.style.margin = "1em auto";
    btn.addEventListener("click", () => {
      // ensure exactly one selected
      const selected = checks.filter(o => o.cb.checked);
      if (selected.length !== 1) {
        return alert("Please pick exactly one delegation.");
      }

      const { lik } = selected[0];
      // set CONTINGENT code: 
      //   1 = democratic leadership,
      //   2 = blue dogs,
      //   3 = republican moderates,
	  //   4 = trump
      const idx = checks.indexOf(selected[0]) + 1;
      window.CONTINGENT = idx;

      // now rerun the special ending picker
      resetPage = true;
      endingPickerCONT();
    });
    container.appendChild(btn);

    obs.disconnect();
  });

  observer.observe(document.body, { childList: true, subtree: true });
}

function endingPickerCONT() {
  contingentMode = true;
  
  // tear down any observer
  if (endingObserver) {
    endingObserver.disconnect();
    endingObserver = null;
  }

  // reset the temp state
  campaignTrail_temp.pages      = [];
  campaignTrail_temp.executable = [];
  campaignTrail_temp.page       = 0;
  campaignTrail_temp.image      = false;

  // choose the content based on CONTINGENT
  let title, bodyHtml;
  
  const scores = {
      sandersRelations: window.sandersRelations || 0,
      wallStreetScore: window.wallStreetScore || 0,
      globalistScore: window.globalistScore || 0,
      hawkScore: window.hawkScore || 0,
      obamaLoyalty: window.obamaLoyalty || 0,
	  
      populistScore: window.populistScore || 0,
      aggressiveScore: window.aggressiveScore || 0,
      embracedSanders: window.embracedSanders === true,
      tookResponsibilityForEmails: window.tookResponsibilityForEmails === true,
  };
  const playerEV = window.playerEV || 260;
  const runningMateID = campaignTrail_temp.running_mate_id;
  
  switch (window.CONTINGENT) {
    case 1:
	  unlockAchievement("Tainted Love");
      title = "government hooker";
      bodyHtml = `
		<p>You turn to Nancy Pelosi and the Democratic leadership in the House. Behind closed doors in the Speaker’s office, you promise key committee chairs to wavering members and commit to supporting their pet projects in your first hundred days.</p>
		<p>The whip count is brutal. You need every single Democratic vote <i>plus</i> a couple of Republican defectors. After 72 hours of intense negotiations, you secure the razor-thin majority you needed.</p>
		<hr/>
		<p>The gavel fell, and just like that, it was over. The chamber didn’t erupt in cheers. It was quieter than that, actually. I had won. And what a victory that was.</p> <p>Every promise I’d made was an IOU written in my blood. Pretty much a mortgage was taken out on the soul of my presidency before it even drew its first breath. Oh boy. A piece of the EPA for a wavering vote from Colorado, a slice of the defense budget for a hawk in Virginia… my presidency was carved up and served on a platter to keep the wolves at bay. And I had sold the office to save it.</p> <p>Outside, the winter air over Washington was very unforgiving. The television screens were already on fire; Trump wasn’t screaming about a rigged election anymore, no. Now, he had a new story, a better one, forged in the truth of my compromise. He called it the "Corrupt Bargain of the Century", said I was so corrupt I was redefining the definition of corrupt. That I had bought the presidency, or that I had done with Congress what Tony Blair had done to Gordon Brown in 1994, when both wanted the leadership of the Labour Party. None of this was the case, or at least not in the way they said it was, but what could I say? The news anchors, those thieving bastards, spoke of a constitutional crisis, and of a Hillary administration whose legitimacy was dead on arrival.</p> <p>I stood in a quiet office overlooking the Capitol dome. My friend, Nancy Pelosi, had offered me a glass of champagne, but I declined. Staring at the bubbles would’ve made me feel like I was swallowing glass. She saw the look on my face. “We did what we had to do, Hillary,” she said, her voice a low whisper, as if the walls themselves were listening. “It was this, or <i>him</i>.”</p> <p>She was right, of course. It was a hard choice, but it was a choice. I was given the choice between a poisoned chalice and a loaded gun to the nation’s head. I could never live with the death of America. And so I chose the poison, hoping I could find the antidote later. But looking out at the city, I knew there was no antidote. There wasn’t. I hated saying this, but there wasn’t. The sickness was already in the bloodstream.</p> <p>The half a dozen “moderate” Republican defectors who saved me would be, eventually, retiring. They hailed from districts I’d won by double digits, and were already pariahs in the making. Paul Ryan wouldn’t live with that, no no. And neither would they. Their political careers were dead, and I was the one who had pulled the trigger. And their "profiles in courage" only reminded me of the price of power, whatever this meant at this point. They were not the first.</p> <p>Soon, I would have to walk out and give a speech. I’d have to talk about healing, about coming together, about being a president for all Americans and all that. The words were already forming on my tongue. But how do you unite a country when you began by proving its worst suspicions true? That power was a commodity, bought and sold by people who smiled while holding a knife behind their back?</p> <p>I had wanted this job my whole life. I’d climbed a really tall mountain, clawed my way up the sheer rock face through storms of scandal and rivers of doubt… and now here I was, at the summit. But it wasn’t a peak like I thought it would be. It was actually a ledge overlooking a chasm. The phone on the desk in front of me buzzed. It was my first call in prison.</p> <p>I had won the White House. But standing there, in the quiet dark, I felt like the biggest loser in the world. I fucked up. The real fight hadn’t ended with the vote. If anything, it had just begun, and I was starting it with my hands tied and my back against the wall.</p>
      `;
      campaignTrail_temp.executable.push([0, () => { campaignTrail_temp.image = 'https://media.gettyimages.com/id/632215016/pt/foto/topshot-former-us-president-bill-clinton-and-hillary-clinton-bow-their-heads-in-prayer-during.jpg?s=612x612&w=0&k=20&c=1hZ-z-r-DeVtaJcSKfCE8PG2NwM9bW0hzlFwF1JE3iw='; }]);
      break;

    case 2:
	  unlockAchievement("In Present Tense");
      title = "the hand that feeds";
      bodyHtml = `
        <p>You reach out to conservative Democrats who have grown uncomfortable with the party’s leftward shift. You promise to moderate your positions on gun control and environmental regulations, hoping to appeal to their rural constituencies.</p>
		<p>It’s not an easy strategy.</p>
		<hr/>
		<p>They called themselves “Blue Dogs”. I should have known a stray would bite the hand that tried to pet it. To be fair, the Blue Dogs were a dying species; they got whooped in 2010 and whoever was left got whooped by 2014. But I still believed that, in their hearts, they could understand the points I was making. The news broke on a flickering TV in a borrowed, rather forgotten office in the Rayburn building: “CLINTON GAMBLE FAILS: CONSERVATIVE DEMS TO BACK TRUMP.” Well, fuck.</p> <p>A staffer, barely old enough to remember my first run, turned off the screen as if that could stop the bleeding. It couldn’t. No, it couldn’t. That wound was mortal. I had reached across the aisle inside my own party, and they had sawn my arm off at the shoulder. Those bastards. They’d labeled me part of the “coastal elite”. It was a two-dollar insult from men whose districts I could have bought with a single fundraiser. And yet it stuck, and worked its way to the heart. Their hearts, that is.</p> <p>I had offered them a compromise. I’d offered to sand the edges off my platform, to speak their language, and to give them a shield to take back home, something none of the Republicans would’ve done. But they didn’t want it. And I knew why: they looked at me and saw the ghost of every factory that had closed, every regulation they hated, and every cultural battle they felt they were losing. To them, I wasn’t a potential president; I was a symbol of their decline. And by voting for Trump, they could turn the page, they thought. They were all very, very happy to watch the whole system go up in smoke.</p> <p>The progressives, who I’d nearly alienated with my offer, were now silent. Not only had I failed at my bridge-making efforts, but I had unintentionally dynamited both sides of the canyon, leaving me stranded in the middle with nothing but the fall below. They fucking Wile E. Coyote’d me. I was toxic to the left, a traitor to the center, and a punchline to the right. Hell, was anyone even on my side?</p> <p>Washington felt different now. Its beautiful monuments didn’t seem like symbols of enduring democracy anymore.</p> <p>“We should get you out of here,” my Secret Service agent said. His name was Rob, I think, and he was trained for threats you could see, for bullets and bombs. He obviously had no protocol for this. We didn’t take the main entrance; we took the back ways, the service tunnels and empty corridors, like I was a fugitive fleeing my own life. As I walked, it seemed like every portrait of a past leader on the walls seemed to stare at me with accusing eyes. What would they say if they looked at me?</p> <p>Our car was waiting in a secluded loading dock, and by then rain was beginning to slick the asphalt. The drops on the window looked a lot like prison bars. As we pulled out into the gridlocked traffic, the city was a blur of red taillights and neon. So much neon, what the hell. Trump was probably on TV, though I didn’t really care what he would say anymore. If anything, he had it easy; he didn’t have to rig or collude or whatever. He just had to wait! And so he did, waiting for us to tear ourselves apart. It’s like I had handed him the knife and told him to stab me.</p> <p>There was a long, dark road ahead, with no destination for me in sight. What I had just witnessed could’ve been the end of a particularly terrifying nightmare. It isn’t.</p><p><i>It’s the beginning.</i></p>
		`;
      campaignTrail_temp.executable.push([0, () => { campaignTrail_temp.image = 'https://media.gettyimages.com/id/81072012/pt/foto/washington-democratic-presidential-hopeful-sen-hillary-clinton-enters-the-u-s-capitol-may-13.jpg?s=612x612&w=0&k=20&c=vt_TrGMKhOBST9SR8RF6AEIgGHhnpaTm4I5gFFEFRvc='; }]);
      break;

    case 3:
	  unlockAchievement("Little Illusion Machine");
      title = "die another day";
      bodyHtml = `
        <p>In an unprecedented move, you reach across the aisle to moderate Republicans uncomfortable with Trump’s divisive rhetoric. You offer them significant input on Supreme Court nominations and promise a more centrist approach to fiscal policy.</p>
        <p>After tense negotiations led by senators Susan Collins and Lisa Murkowski, a couple of Republican representatives break ranks, citing the need for "healing and unity" in these turbulent times.</p>
		<hr/>
		<p>The final tally flickered onto the screen: I was the 45th President of the United States. It felt less like a victory and more like a diagnosis, however. Of course, the press was already spinning the narrative and painting it as a moment of national grace, a triumph of pragmatism over partisanship. How enlightening. “Healing and Unity.” The words sounded pretty under the bright lights of the TV cameras, and they did look pretty; it might’ve been the font they used. And yet, to an extent, it sounded just like the terms of a surrender.</p> <p>The Republicans who crossed the aisle might’ve saved the country from Trump, but this also meant that I owned them. The first vacancy on the Court wouldn’t be mine; it would be theirs. Garland would have a hard time anyway trying to get past them, unless he’d still be up for it. The upcoming budget and my fiscal policy would definitely make my own party’s blood run cold.</p> <p>I was President, but my hands were tied. Every decision would be a negotiation, and every bill a battle on two, three, four, many, many fronts. The right would hold the concessions over my head like a guillotine, and the left… the left would never forgive me.</p> <p>The calls from my own side had already started. They weren’t congratulatory, not at all. They were accusations. The venom in their voices was hotter than any Republican attack. I had betrayed their cause, and sold out the platform for a tainted title. What a "Madam President" I was, they said. To them, I hadn’t prevented a disaster; I had become one. It’s like I was a Trojan horse for the very policies we’d fought against. I was a president with no party, a leader with no followers, and forced to go along with "bipartisanship" while the sharks from both sides circled.</p> <p>I looked out the window at the Washington Monument, piercing the gray sky like a needle. I had wanted to heal a divided nation. Instead, I had just institutionalized the division inside the Oval Office itself. My administration would be in a permanent state of war, essentially.</p> <p>The history books would call it the “Grand Compromise”, or whatever they’d name it. It’d be a very neat, tidy, respectable name for what was more of a hostage situation. I had stared into the abyss of a Trump presidency and flinched. Instead, I walked into a prison built for me, and willingly locked the door from the inside.</p> <p>Someone knocked. Ugh. It was time to go out and face the cameras, to smile and talk about the dawning of a new day. I practiced my smile in the reflection of the dark window. It looked like a grimace. God, I was such a damsel in distress. I was the woman who had finally broken the highest, hardest glass ceiling… and yet all I could feel were the shards under my feet, and the cold draft coming through the hole where my power was supposed to be. I had the title, the office, the Chaos Emeralds. Hell, I had saved the republic. And in the process, I had lost everything.</p><p>It’s morning in America.</p>
      `;
      campaignTrail_temp.executable.push([0, () => { campaignTrail_temp.image = 'https://media.gettyimages.com/id/1309740/pt/foto/us-senator-elect-and-first-lady-hillary-clinton-speaks-to-reporters-at-the-us-capitol-during-a.jpg?s=612x612&w=0&k=20&c=tLLNKXzRSRiPAasnZCiIxD62NjZlKA7dkiXlKrx5lzg='; }]);	  
      break;
	  
	case 4:
	  unlockAchievement("Say Goodbye Forever");
      title = "hold me, thrill me, kiss me, kill me";
      bodyHtml = `
        <p>After thinking of your choices, you wondered if this one was possible. You couldn’t believe it. A single phone call with the man himself. No. No…</p>
        <hr/>
        <p>The ride to Trump Tower was silent. My chief of staff stared out the window, as if the gray Manhattan skyline held some profound answer he couldn’t find in my face. It didn’t. Unfortunately, there were no answers here, only consequences. We were ushered up to his penthouse, a place I had only ever seen in glossy magazine spreads. It was even bigger in person, honestly. There was gold everywhere. I didn’t even know if it was real gold or fake gold, but it was definitely gold. Quite the declaration that taste, after all, was for losers. I felt very out of place there.</p>
        <p>Trump was there, waiting, and flanked by his children, who looked on with a mixture of suspicion and, strangely, some piety. I tried not to stare too much at them. Trump, of course, was very excited. “Hillary! Welcome! We’re going to do something great today, really great.” The small talk was excruciating. He talked about his golf courses, about the ratings the press conference would get, all that shit. I just nodded and smiled; it felt like there was only white noise in my mind. But I also knew this was the only way to stop a constitutional crisis, to end the deadlock, and to prevent months of chaos that would tear the country apart. It was a rational, logical choice. Right? And yet, every instinct in my body was screaming that I had just walked into a trap of historic proportions.</p>
        <p>Then it was time. We walked out to the atrium, to a forest of cameras and a sea of many expectant faces. Oh God. What would they print about this? I felt the burn of a thousand lenses over my retina, and I knew they were all trying to decipher what was going on in here. Who am I? Why am I here? These questions echoed in the spaces of my mind. Standing beside him felt like an out-of-body experience. He stepped to the podium first, of course.</p>
        <p>“We had a tough campaign,” he began. “A very, very tough campaign. People said a lot of things. The fake news media, you know— they’re not happy, I can tell you. They’re very unhappy people. But we both love this country. We love this country more than anything.” He paused, letting the statement hang in the air. “And when you love America, you do what’s right for America. You make deals. You make the best deals.”</p>
        <p>A reporter from, I think, Vox, would later liken my vacant, twitchy expression to Harmony Korine at Cannes in ’95, trying to explain — or in his case, not explain — his unexplainable film, “Kids”. At that moment, he wasn’t entirely wrong. If you’re a passenger in, say, a roller coaster, you’re gonna wait for it to crest the hill. Usually, it does. Ours did, unfortunately. “So we sat down,” Trump continued, leaning into the microphone. He truly was a showman at heart. “And we came to an agreement. It’s an amazing agreement, a historic agreement. Something nobody’s ever seen before. Hillary Clinton… she fought hard, very hard, I saw that… and she will be the next President of the United States.”</p>
        <p>A wave of gasps and frantic murmurs rippled through the press corps. He rapidly held up a hand, silencing them with a gesture. “And I… <i>I</i> will be proud to serve this country. I will be proud to serve as her <i>Vice President</i>.”</p>
        <p>And there it was. The words landed in the room with the force of a physical blow. He said it. He fucking said it. The deal was real. My mind, which had been blissfully, mercifully blank until then, snapped back into focus with rather painful clarity. This was happening. Trump beamed. “We are going to do a tremendous job,” he declared, his voice rising. “We are going to fix our country. We are going to bring back our jobs. And we are going to Make America Great Again—Together!”</p>
        <p>He turned to me, his smile wide, and grabbed my hand. On autopilot, my own facial muscles contorted into what I hoped was, and probably was, a smile. We stood up. He raised our joined hands in the air; his hands were smaller than I had thought. For a split second, the room was utterly silent. And then, it erupted. Not with boos or questions or anything like that, but with surprising, thunderous, and stunning applause. They were clapping. They were all clapping. For the deal, for the show? I had no clue. But maybe it was for the audacity of it all.</p>
        <p>The walk offstage was such a blur, I almost couldn’t remember what happened next. In the elevator back up, no one spoke. Nor in the car on the way back home. Or maybe they did say something, but I genuinely didn’t recall. I had the presidency. I had done what I set out to do. I had stopped him from taking the highest office, which was an achievement in itself. But I hadn’t <i>defeated</i> him. Worse: I had absorbed him. It was funny to imagine that the presidency had turned from an office into a joint venture in such quick time, but actually— no, no, it was different. It was like a reality show with two headliners.</p><p>But I knew who the real star would always be.</p>
      `;
      campaignTrail_temp.executable.push([0, () => { campaignTrail_temp.image = 'https://media.gettyimages.com/id/610598194/pt/foto/hempstead-ny-democratic-presidential-nominee-hillary-clinton-takes-the-stage-with-republican.jpg?s=612x612&w=0&k=20&c=PMWkuNKLiu2aouvVd8VEjwLYHuz4rNRH5TYTKoVpFcI='; }]);	  
      break;

    default:
      title = "Error";
      bodyHtml = `<em>No coalition path selected. Something went wrong.</em>`;
  }
  
  // push the narrative page first
  const narrativePageHTML = `
	<div id="contingent-ending-flag"></div>
    <div style="
      background: #fdfaf2 url('https://www.transparenttextures.com/patterns/paper-fibers.png');
      color: #212121; border: 2px solid #ddd; padding: 1.5em;
      font-family: Georgia, serif; line-height: 1.6;
      box-shadow: 0 3px 6px rgba(0,0,0,0.08), 0 10px 20px rgba(0,0,0,0.12);
      max-width: 800px; margin: 2em auto;
    ">
      <h2 style="text-align:center; color:#002D62; margin-bottom:1em; border-bottom: 2px solid #b38600; padding-bottom: 0.5em;">You have made a decision.</h2>
      <h3 style="text-align:center; color:#b38600; margin-bottom:1.5em; font-style: italic;">${title}</h3>
      <div style="padding:0 1em;">${bodyHtml}</div>
    </div>
  `;
  campaignTrail_temp.pages.push(narrativePageHTML);

  // push the cabinet pages next
  let cabinetHTML;
  switch (window.CONTINGENT) {
    case 1:
      let establishmentScores = {...scores, obamaLoyalty: scores.obamaLoyalty + 3, sandersRelations: scores.sandersRelations - 2};
      const cabinetHTML_case1 = generateCabinetTimeline('win', playerEV, runningMateID, establishmentScores);
	  campaignTrail_temp.pages.push('<div id="contingent-ending-flag"></div>' + cabinetHTML_case1);
	  campaignTrail_temp.executable.push([1, () => { 
			campaignTrail_temp.image = 'https://www.trolleytours.com/wp-content/uploads/2016/06/white-house-480x270.jpg';
			setImage(campaignTrail_temp.image); 
	  }]);
      break;
    case 2:
      const cabinetHTML_case2 = generateCabinetTimeline('loss', playerEV, runningMateID, scores);
      campaignTrail_temp.pages.push('<div id="contingent-ending-flag"></div>' + cabinetHTML_case2);
	  campaignTrail_temp.executable.push([1, () => { 
			campaignTrail_temp.image = 'https://www.trolleytours.com/wp-content/uploads/2016/06/white-house-480x270.jpg';
			setImage(campaignTrail_temp.image); 
	  }]);
      break;
    case 3:
      const unityPlayerEV = 271;
      const cabinetHTML_case3 = generateCabinetTimeline('win', unityPlayerEV, runningMateID, scores);
      campaignTrail_temp.pages.push('<div id="contingent-ending-flag"></div>' + cabinetHTML_case3);
	  campaignTrail_temp.executable.push([1, () => { 
			campaignTrail_temp.image = 'https://www.trolleytours.com/wp-content/uploads/2016/06/white-house-480x270.jpg';
			setImage(campaignTrail_temp.image); 
	  }]);
	  break;
    case 4:
	  const placeholderVP_ID_for_Trump = 999;
      let unityTicketScores = {...scores, globalistScore: -5, hawkScore: 5};
      const cabinetHTML_case4 = generateCabinetTimeline('win', playerEV, placeholderVP_ID_for_Trump, unityTicketScores);
      campaignTrail_temp.pages.push('<div id="contingent-ending-flag"></div>' + cabinetHTML_case4);
	  campaignTrail_temp.executable.push([1, () => { 
			campaignTrail_temp.image = 'https://www.trolleytours.com/wp-content/uploads/2016/06/white-house-480x270.jpg';
			setImage(campaignTrail_temp.image); 
	  }]);
	  break;
  }

  // render immediately
  endingConstructor(0);
  
  const contingentObserver = new MutationObserver((mutationsList, observer) => {
        const finalDesc = document.getElementById("final_results_description");

        if (finalDesc && !finalDesc.querySelector("#contingent-ending-flag")) {
            console.log("Contingent ending was overwritten, re-rendering...");
            
            endingConstructor('rerender');
        }
    });
  
    const targetNode = document.getElementById('game_screen') || document.getElementById('main_content') || document.body;
    contingentObserver.observe(targetNode, { childList: true, subtree: true });
}

// This is for a Wikipedia-style cabinet generator as an ending page.
// Famously, All The Way has a presidents list, which is quite neat,
// but probably wouldn't fit well here. Well, we had to resort to
// another idea.

window.generatedCabinetCache = window.generatedCabinetCache || {}; // store confirmation dates

// for announcement dates
function generateAnnouncementDate(tier) {
    const baseDate = new Date('2016-11-09T12:00:00Z'); // day after election
    let delayDays;

    switch (tier) {
        case 1: delayDays = Math.floor(Math.random() * 10) + 5; break;  // mid-to-late Nov
        case 2: delayDays = Math.floor(Math.random() * 15) + 20; break; // early-to-mid Dec
        case 3: delayDays = Math.floor(Math.random() * 20) + 40; break; // late Dec - early Jan
        default: delayDays = 25;
    }
    baseDate.setDate(baseDate.getDate() + delayDays);
    return baseDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
}

// for confirmation dates
function generateConfirmationDate(tier) {
    const baseDate = new Date('2017-01-20T12:00:00Z'); // Inauguration Day
    let delayDays;

    switch (tier) {
        case 1: delayDays = Math.floor(Math.random() * 7) + 1; break;   // Jan 21-27
        case 2: delayDays = Math.floor(Math.random() * 14) + 14; break; // Feb 3-17
        case 3: delayDays = Math.floor(Math.random() * 21) + 28; break; // Feb 17 - Mar 10
        default: delayDays = 21;
    }
    baseDate.setDate(baseDate.getDate() + delayDays);
    return baseDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
}

// generates the HTML for one pair of cells (office + designee)
function generateCabinetCells(member, victoryType) {
    const isElected = (member.position === 'President' || member.position === 'Vice President');
    const bgColor = isElected ? 'background: #90EE90;' : '';

    let dateHtml;
    if (member.position === 'Vice President') {
        const announceDate = (victoryType === 'win') ? 'July 22, 2016' : 'July 15, 2016';
        dateHtml = `
            Announced ${announceDate}<br>
            Elected November 8, 2016<br>
            Assumed office January 20, 2017
        `;
    } else if (member.position === 'President') {
        dateHtml = `
            Elected November 8, 2016<br>
            Assumed office January 20, 2017
        `;
    } else {
        dateHtml = `
            Announced ${member.announcedDate}<br>
            Assumed office ${member.confirmedDate}
        `;
    }

    const officeCell = `
        <td style="vertical-align: top; padding: 5px; ${bgColor}">
            <img src="${member.seal}" style="width: 75px; height: 75px; object-fit: contain;">
            <p style="margin: 0.5em 0; font-weight: bold;">${member.position}</p>
            <p style="font-size: 85%; margin: 0;">${dateHtml}</p>
        </td>
    `;

    const designeeCell = `
        <td style="vertical-align: top; padding: 5px; ${bgColor}">
            <img src="${member.img}" style="width: 95px; height: 120px; object-fit: cover; border: 1px solid #ccc;">
            <br>
            <span style="font-size: 85%;">${member.formerRole}</span>
            <br>
            <b>${member.name}</b>
            <br>
            <span style="font-size: 85%;">from ${member.state}</span>
        </td>
    `;
    return officeCell + designeeCell;
}

// the main function generator
function generateCabinetTimeline(victoryType, playerEV, runningMateID, scores) {
    // create a unique key for this specific contingent outcome
    const cacheKey = `contingent_${window.CONTINGENT}`;

    // if we've already generated a cabinet for this outcome, use the cached version
    if (window.generatedCabinetCache[cacheKey]) {
        const cachedData = window.generatedCabinetCache[cacheKey];
        // re-use the cached HTML directly to ensure everything is identical
        return cachedData.html;
    }
		
    const { sandersRelations, wallStreetScore, globalistScore, hawkScore, obamaLoyalty } = scores;
    let cabinet = [];
    let president, vicePresident, party, headerColor;
    let assignedPeople = new Set(); 

    const assignNominee = (position, nominee, seal, announceTier, confirmTier) => {
        if (!assignedPeople.has(nominee.name)) {
            const nomineeData = {
                position, ...nominee, seal,
                announcedDate: generateAnnouncementDate(announceTier),
                confirmedDate: generateConfirmationDate(confirmTier)
            };
            cabinet.push(nomineeData);
            assignedPeople.add(nominee.name);
            return true;
        }
        return false;
    };
	
	const pickAndAssign = (position, candidates, seal, announceTier) => {
        for (const nominee of candidates) {
            if (nominee && assignNominee(position, nominee, seal, announceTier, announceTier)) {
                return; 
            }
        }
    };

    // candidate & seal pools
    const seals = {
		potus: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Seal_of_the_President_of_the_United_States.svg/120px-Seal_of_the_President_of_the_United_States.svg.png",
        vp: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Seal_of_the_Vice_President_of_the_United_States.svg/120px-Seal_of_the_Vice_President_of_the_United_States.svg.png",
        state: "https://upload.wikimedia.org/wikipedia/commons/thumb/f/fc/Seal_of_the_United_States_Secretary_of_State.svg/120px-Seal_of_the_United_States_Secretary_of_State.svg.png",
        treasury: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/cb/Seal_of_the_United_States_Department_of_the_Treasury.svg/120px-Seal_of_the_United_States_Department_of_the_Treasury.svg.png",
        defense: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Seal_of_the_United_States_Department_of_Defense.svg/120px-Seal_of_the_United_States_Department_of_Defense.svg.png",
        attorneyGeneral: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/54/Seal_of_the_United_States_Department_of_Justice.svg/120px-Seal_of_the_United_States_Department_of_Justice.svg.png",
        interior: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Seal_of_the_United_States_Department_of_the_Interior.svg/120px-Seal_of_the_United_States_Department_of_the_Interior.svg.png",
        agriculture: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/88/Seal_of_the_U.S._Department_of_Agriculture.svg/120px-Seal_of_the_U.S._Department_of_Agriculture.svg.png",
        commerce: "https://upload.wikimedia.org/wikipedia/commons/thumb/1/1a/Seal_of_the_United_States_Department_of_Commerce.svg/120px-Seal_of_the_United_States_Department_of_Commerce.svg.png",
        labor: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c1/Seal_of_the_United_States_Department_of_Labor.svg/120px-Seal_of_the_United_States_Department_of_Labor.svg.png",
        hhs: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/b7/US_Department_of_Health_and_Human_Services_seal.svg/120px-US_Department_of_Health_and_Human_Services_seal.svg.png",
        hud: "https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Seal_of_the_United_States_Department_of_Housing_and_Urban_Development.svg/120px-Seal_of_the_United_States_Department_of_Housing_and_Urban_Development.svg.png",
        transportation: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/34/Seal_of_the_United_States_Department_of_Transportation_-_Alternate_Version.svg/120px-Seal_of_the_United_States_Department_of_Transportation_-_Alternate_Version.svg.png",
        energy: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Seal_of_the_United_States_Department_of_Energy.svg/120px-Seal_of_the_United_States_Department_of_Energy.svg.png",
        education: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/ad/Seal_of_the_United_States_Department_of_Education.svg/120px-Seal_of_the_United_States_Department_of_Education.svg.png",
        veterans: "https://upload.wikimedia.org/wikipedia/commons/thumb/0/05/Seal_of_the_U.S._Department_of_Veterans_Affairs.svg/120px-Seal_of_the_U.S._Department_of_Veterans_Affairs.svg.png",
        homeland: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Seal_of_the_United_States_Department_of_Homeland_Security.svg/120px-Seal_of_the_United_States_Department_of_Homeland_Security.svg.png"
    };

	// veeps
    const clintonVPs = {
        209: { name: "Tim Kaine", img: "https://static.wikia.nocookie.net/althistory/images/0/06/Tim_Kaine_VP_portrait.png", formerRole: "U.S. Senator", state: "Virginia" },
        211: { name: "Cory Booker", img: "https://content.time.com/time/2009/time_100_walkup/cory_booker.jpg", formerRole: "U.S. Senator", state: "New Jersey" },
        212: { name: "Deval Patrick", img: "https://panamaadvisoryinternationalgroup.com/blog/wp-content/uploads/2014/03/massachusetts-governor-deval-patrick.jpg", formerRole: "Former Governor", state: "Massachusetts" },
        213: { name: "Joe Biden", img: "https://www.jornaldocomercio.com/_midias/jpg/2015/12/23/pol_22015-411473.jpg", formerRole: "Vice President", state: "Delaware" },
        214: { name: "Julián Castro", img: "https://npeaction.org/wp-content/uploads/2019/02/oEOE5IDE_400x400.jpg", formerRole: "Secretary of HUD", state: "Texas" },
        215: { name: "Eric Garcetti", img: "https://cdn.britannica.com/14/191614-050-DFF52410/Eric-Garcetti.jpg", formerRole: "Mayor of Los Angeles", state: "California" },
    };
	const trumpVPs = {
		"Mike Pence": { name: "Mike Pence", img: "https://upload.wikimedia.org/wikipedia/commons/0/06/Mike_Pence_February_2015_cropped_color_corrected_2_by_3.jpg", formerRole: "Governor of Indiana", state: "Indiana" },
		"Scott Brown": { name: "Scott Brown", img: "https://api.time.com/wp-content/uploads/2014/03/ap903125175694-copy.jpg", formerRole: "Former U.S. Senator", state: "Massachusetts" },
		"Ted Cruz": { name: "Ted Cruz", img: "https://hips.hearstapps.com/hmg-prod/images/gettyimages-1211620932-copy.jpg?crop=1xw:1.0xh;center,top&resize=640:*", formerRole: "U.S. Senator", state: "Texas" },
		"Mike Flynn": { name: "Mike Flynn", img: "https://s.hdnux.com/photos/55/42/06/11936176/4/rawImage.jpg", formerRole: "Former Lieutenant-General", state: "Rhode Island" },
		"Newt Gingrich": { name: "Newt Gingrich", img: "https://upload.wikimedia.org/wikipedia/commons/2/2c/Newt_Gingrich_by_Gage_Skidmore_6.jpg", formerRole: "Former Speaker of the House", state: "Georgia" },
		"Sarah Palin": { name: "Sarah Palin", img: "https://media.gazetadopovo.com.br/2008/10/sarah_palin_abuso_de_poder_10-10-1.0.115749785-gpMega.jpg", formerRole: "Former Governor of Alaska", state: "Alaska" },
		"Chris Christie": { name: "Chris Christie", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTKLqhEwJTWRgGxUlOMoCBH3CQA8TAfzrmH-Q&s", formerRole: "Governor of New Jersey", state: "New Jersey" },
		"Tom Cotton": { name: "Tom Cotton", img: "https://static.politico.com/48/2d/6898963f427c8b3e81b986507086/160212-tom-cotton-ap-1160.jpg", formerRole: "U.S. Senator", state: "Arkansas" },
		"Jeff Sessions": { name: "Jeff Sessions", img: "https://m.media-amazon.com/images/M/MV5BMTRhNTM4ZTMtMjk0OS00MWY4LWIyYjUtZjBmYWRlOGYwYjBlXkEyXkFqcGc@._V1_.jpg", formerRole: "U.S. Senator", state: "Alabama" },
		"Bob Corker": { name: "Bob Corker", img: "https://www.congress.gov/img/member/c001071_200.jpg", formerRole: "U.S. Senator", state: "Tennessee" },
		"Mary Fallin": { name: "Mary Fallin", img: "https://upload.wikimedia.org/wikipedia/commons/6/64/Mary_Fallin_official_110th_Congress_photo.jpg", formerRole: "Governor of Oklahoma", state: "Oklahoma" }
	};

    // candidates & etc
	const clintonCandidates = {
		state: {
			hawk: { name: "Victoria Nuland", img: "https://upload.wikimedia.org/wikipedia/commons/8/89/Victoria_Nuland_State_Department.jpg", formerRole: "Assistant Secretary of State", state: "Connecticut" },
			establishment: { name: "Bill Burns", img: "https://upload.wikimedia.org/wikipedia/commons/9/91/Assignment-_59-CF-DS-22432-05%29_Official_portrait_of_William_Burns%2C_U.S._Ambassador-designate_to_Russia_%28Photographer-_Ann_Thomas--State%29_%2859-CF-DS-22432-05_Amb_BillBurns0086_fromPSD_-_DPLA_-_24e3adb7aadd75ad1930cff23ef02645.jpg", formerRole: "Deputy Secretary of State", state: "Pennsylvania" },
			loyalist: { name: "Jake Sullivan", img: "https://ballotpedia.s3.amazonaws.com/images/thumb/f/fb/Jake_Sullivan.jpg/150px-Jake_Sullivan.jpg", formerRole: "National Security Advisor to the VP", state: "Minnesota" },
			progressive: { name: "Chris Murphy", img: "https://file.garden/aNtAfG887DiA_7lO/2016ALOT/412194-200px.jpeg", formerRole: "U.S. Senator", state: "Connecticut" },
			biden_vp_loyalist: { name: "Anthony Blinken", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Secretary_Blinken%27s_Official_Department_Photo_%28cropped%29.jpg/220px-Secretary_Blinken%27s_Official_Department_Photo_%28cropped%29.jpg", formerRole: "Deputy National Security Advisor", state: "New York" }
		},
		treasury: {
			progressive: { name: "Gary Gensler", img: "https://www.cftc.gov/sites/default/files/inline-images/38817-1.gif", formerRole: "Chair of the CFTC", state: "Maryland" },
			corporate: { name: "Sheryl Sandberg", img: "https://hcsanfrancisco.clubs.harvard.edu/images/article_images/105.jpg", formerRole: "COO of Facebook", state: "California" },
			establishment: { name: "Lael Brainard", img: "https://www.cmc.edu/sites/default/files/news/2014/04/Lael_Brainard1-214x300.jpg", formerRole: "Federal Reserve Governor", state: "Virginia" },
			technocrat: { name: "Janet Yellen", img: "https://www.frbsf.org/wp-content/uploads/yellen.jpg", formerRole: "Chair of the Federal Reserve", state: "New York" },
			loyalist: { name: "Gene Sperling", img: "https://obamawhitehouse.archives.gov/sites/obamawhitehouse.archives.gov/files/person-photo/sperlingphoto.jpg", formerRole: "Director, National Economic Council", state: "Michigan" }
		},
		defense: {
			hawk: { name: "Michèle Flournoy", img: "https://i.dailymail.co.uk/i/pix/2013/01/04/article-2257216-16C0DB90000005DC-894_634x411.jpg", formerRole: "Under Secretary of Defense", state: "California" },
			dove: { name: "Adam Smith", img: "https://upload.wikimedia.org/wikipedia/commons/1/17/Adam_Smith_WA-9.jpg", formerRole: "Ranking Member, HASC", state: "Washington" },
			unity: { name: "Susan Collins", img: "https://www.nndb.com/people/210/000032114/susan-collins.jpg", formerRole: "U.S. Senator (R)", state: "Maine" },
			establishment: { name: "Ash Carter", img: "https://www.nextgov.com/media/ps360/GIG/FCWNow/People/C/Carter_Ashton.png", formerRole: "Secretary of Defense", state: "Pennsylvania" },
			biden_vp_loyalist: { name: "Gen. Lloyd Austin", img: "https://upload.wikimedia.org/wikipedia/commons/9/9a/Lloyd_J._Austin.jpg", formerRole: "Commander, U.S. Central Command", state: "Georgia" }
		},
		attorneyGeneral: {
			progressive: { name: "Xavier Becerra", img: "https://upload.wikimedia.org/wikipedia/commons/6/61/Xavier_Becerra%2C_Official_Portrait.JPG", formerRole: "U.S. Representative", state: "California" },
			loyalist: { name: "Jennifer Granholm", img: "https://www.mackinac.org/media/images/2018/Granholm.jpg", formerRole: "Former Governor", state: "Michigan" },
			incumbent: { name: "Loretta Lynch", img: "https://www.justice.gov/usao/biographies/images/spotlight-lynch-full.jpg", formerRole: "Attorney General", state: "New York" },
			prosecutor: { name: "Preet Bharara", img: "https://static01.nyt.com/images/2013/06/10/world/asia/10-preet-interview-IndiaInk/10-preet-interview-IndiaInk-articleInline.jpg", formerRole: "U.S. Attorney, SDNY", state: "New York" },
			biden_vp_loyalist: { name: "Sally Yates", img: "https://upload.wikimedia.org/wikipedia/commons/4/49/Sally_Yates.jpg", formerRole: "Deputy Attorney General", state: "Georgia" },
			unity: { name: "Brian Sandoval", img: "https://www.ontheissues.org/Governor/Brian_Sandoval.jpg", formerRole: "Governor of Nevada (R)", state: "Nevada" }
		},
		interior: {
			progressive: { name: "Raúl Grijalva", img: "https://reproductivefreedomforall.org/wp-content/uploads/2017/11/croc-raul-grijalva.jpg", formerRole: "U.S. Representative", state: "Arizona" },
			establishment: { name: "Sally Jewell", img: "https://www.usatoday.com/gcdn/media/USATODAY/USATODAY/2013/02/06/ap-obama-interior-3_4.jpg?width=660&height=879&fit=crop&format=pjpg&auto=webp", formerRole: "Secretary of the Interior", state: "Washington" },
			western_dem: { name: "John Hickenlooper", img: "https://upload.wikimedia.org/wikipedia/commons/1/15/John_W._Hickenlooper_World_Economic_Forum_2013_%28cropped%29.jpg", formerRole: "Governor of Colorado", state: "Colorado" },
			tribal_affairs: { name: "Denise Juneau", img: "https://epe.brightspotcdn.com/ca/bc/76bc24b7eedcbc75a3680df57e61/10-campaign-denise-juneau-mug.jpg", formerRole: "State Supt. of Public Instruction", state: "Montana" }
		},
		agriculture: {
			progressive: { name: "Chellie Pingree", img: "https://www.pressherald.com/wp-content/uploads/sites/4/2013/04/KJ-Chellie-Pingree-gif.gif", formerRole: "U.S. Representative", state: "Maine" },
			establishment: { name: "Tom Vilsack", img: "https://www.hamilton.edu/assets/mmlibrary/images/670x/vilsack.jpg", formerRole: "Secretary of Agriculture", state: "Iowa" },
			rural_outreach: { name: "Heidi Heitkamp", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Heidi_Heitkamp_official_portrait.jpg/250px-Heidi_Heitkamp_official_portrait.jpg", formerRole: "U.S. Senator", state: "North Dakota" },
			biden_vp_loyalist: { name: "Krysta Harden", img: "https://www.motherjones.com/wp-content/uploads/Krysta_Harden_hirez.jpg", formerRole: "Deputy Secretary of Agriculture", state: "Georgia" }
		},
		commerce: {
			corporate: { name: "Terry McAuliffe", img: "https://images.squarespace-cdn.com/content/v1/5c7e8397ebfc7ff3dfb5acb1/1566489866793-FNJJ89353S7MC9PAFLHW/mcauliffe.jpg", formerRole: "Governor of Virginia", state: "Virginia" },
			unity: { name: "Meg Whitman", img: "https://cdn.mos.cms.futurecdn.net/2z4RhTK2CtBRLhvc3Adp9C.jpg", formerRole: "CEO of Hewlett Packard (R)", state: "California" },
			protectionist: { name: "Leo Gerard", img: "https://media.bizj.us/view/img/1626591/gerard-leo*400xx600-600-0-0.jpg", formerRole: "President, United Steelworkers", state: "Ontario" },
			establishment: { name: "Penny Pritzker", img: "https://upload.wikimedia.org/wikipedia/commons/c/cd/Penny_Pritzker_official_photograph.jpg", formerRole: "Secretary of Commerce", state: "Illinois" }
		},
		labor: {
			union: { name: "Richard Trumka", img: "https://aflcio.org/sites/default/files/migrate/files/Trumka-Bad-Trade-Deals-Kill-American-Jobs.jpg", formerRole: "President, AFL-CIO", state: "Pennsylvania" },
			progressive_unity: { name: "Bernie Sanders", img: "https://cdn.mos.cms.futurecdn.net/ZMoRE73eiomr8gfjR2PPv5.jpg", formerRole: "U.S. Senator", state: "Vermont" },
			establishment: { name: "Tom Perez", img: "https://cwa-union.org/sites/default/files/migrated/cwafiles.org/national/issues/PolicyIssues/NLRB/Perez_photo2.jpg", formerRole: "Secretary of Labor", state: "Maryland" },
			biden_vp_loyalist: { name: "Seth Harris", img: "https://upload.wikimedia.org/wikipedia/commons/9/94/Seth_Harris_DOL.jpg", formerRole: "Deputy Secretary of Labor", state: "New York" },
			corporate: { name: "Howard Schultz", img: "https://images.ctfassets.net/dkn3vuwtp1le/58JROkU1mUq4lNEWl8UDXP/3dd2e6e7b743004e5a1836bf2bd2c97d/howardschultz.jpg", formerRole: "CEO of Starbucks", state: "Washington" }
		},
		hhs: {
			loyalist: { name: "Neera Tanden", img: "https://static.wikia.nocookie.net/althistory/images/b/b2/Tanden_neera.jpg", formerRole: "President, Center for American Progress", state: "Massachusetts" },
			establishment: { name: "Sylvia Mathews Burwell", img: "https://www.wsb.com/wp-content/uploads/2021/06/Buwell_Sylvia_ORIGINAL.jpg", formerRole: "Secretary of HHS", state: "West Virginia" },
			progressive: { name: "Donna Edwards", img: "https://i0.wp.com/afro.com/wp-content/uploads/2014/05/Donna%20F%20Edwards%20Portrait.jpg?fit=239%2C360&ssl=1", formerRole: "U.S. Representative", state: "Maryland" },
			technocrat: { name: "Vivek Murthy", img: "https://imagesvs.oneindia.com/img/2014/12/16-1418705548-vivek.jpg", formerRole: "Surgeon General", state: "Florida" }
		},
		hud: {
			establishment: { name: "Julián Castro", img: "https://npeaction.org/wp-content/uploads/2019/02/oEOE5IDE_400x400.jpg", formerRole: "Secretary of HUD", state: "Texas" },
			progressive: { name: "Keith Ellison", img: "https://s3.amazonaws.com/berkley-center/KeithEllison.jpg", formerRole: "U.S. Representative", state: "Minnesota" },
			mayor: { name: "Stephanie Rawlings-Blake", img: "https://m.media-amazon.com/images/M/MV5BMTc5OTgwNTg5NV5BMl5BanBnXkFtZTgwMDY3MzcyOTE@._V1_.jpg", formerRole: "Mayor of Baltimore", state: "Maryland" },
			booker_vp_loyalist: { name: "Shaun Donovan", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQy4AHQdOABzeH4kcS3d1BzX-BbAgTz-OWxwA&s", formerRole: "Former Secretary of HUD", state: "New York" }
		},
		transportation: {
			infrastructure: { name: "Eric Garcetti", img: "https://cdn.britannica.com/14/191614-050-DFF52410/Eric-Garcetti.jpg", formerRole: "Mayor of Los Angeles", state: "California" },
			establishment: { name: "Anthony Foxx", img: "https://s.wsj.net/public/resources/images/OB-XG443_0428tr_G_20130428174057.jpg", formerRole: "Secretary of Transportation", state: "North Carolina" },
			technocrat: { name: "Jane Garvey", img: "https://media.gettyimages.com/id/1164441/pt/foto/federal-aviation-administration-administrator-jane-garvey-testifies-september-20-2001-during-a.jpg?s=612x612&w=0&k=20&c=gB48z4EW3clmEPMlSKngr7HYs9e0HSyUGT_6gdVzgkA=", formerRole: "Administrator of the FAA", state: "Massachusetts" },
			unity: { name: "Ray LaHood", img: "https://www.ttnews.com/sites/default/files/images/articles/ray-lahood.jpg", formerRole: "Former Sec. of Transportation (R)", state: "Illinois" }
		},
		energy: {
			green: { name: "Jay Inslee", img: "https://media2.s-nbcnews.com/i/streams/2012/November/121110/1C4694604-121109-inslee-723p.jpg", formerRole: "Governor of Washington", state: "Washington" },
			establishment: { name: "Ernest Moniz", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR-132pp0u7ilUTH4eZ8nhtzDfEDv3NT68DLg&s", formerRole: "Secretary of Energy", state: "Massachusetts" },
			technocrat: { name: "Arun Majumdar", img: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRmmT0CsHJ1wxTRYqCCLim05qFEFFBDn647lEgRGYtloZx04BgP9-EoBQMQGejNOPWmM04&usqp=CAU", formerRole: "Director of ARPA-E", state: "California" },
			progressive: { name: "Carol Browner", img: "https://obamawhitehouse.archives.gov/sites/obamawhitehouse.archives.gov/files/person-photo/browner_01.jpg", formerRole: "Director, WH Office of Energy", state: "Florida" }
		},
		education: {
			union: { name: "Randi Weingarten", img: "https://static.wikia.nocookie.net/althistory/images/2/2e/Weingarten_108.jpg", formerRole: "President, AFT", state: "New York" },
			reformer: { name: "Linda Darling-Hammond", img: "https://www.aera.net/portals/38/darling-hammond.jpg", formerRole: "Professor, Stanford University", state: "California" },
			establishment: { name: "John King Jr.", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3a/John_B._King_official_portrait.jpg/250px-John_B._King_official_portrait.jpg", formerRole: "Secretary of Education", state: "New York" },
			unity: { name: "Bill Haslam", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/39/Bill-haslam-highlands-debate-tn1.jpg/640px-Bill-haslam-highlands-debate-tn1.jpg", formerRole: "Governor of Tennessee (R)", state: "Tennessee" }
		},
		veterans: {
			bipartisan: { name: "Robert McDonald", img: "https://www.vetshq.com/wp-content/blogs.dir/files/sites/11/2014/06/IMAGE-POST-BOB-MCDONALD-063014.jpg", formerRole: "Secretary of Veterans Affairs (R)", state: "Ohio" },
			war_veteran: { name: "Tulsi Gabbard", img: "https://upload.wikimedia.org/wikipedia/commons/5/53/Tulsi_pic.jpg", formerRole: "U.S. Representative", state: "Hawaii" },
			biden_vp_loyalist: { name: "Martin Dempsey", img: "https://upload.wikimedia.org/wikipedia/commons/1/1c/General_Martin_E._Dempsey.jpg", formerRole: "Chairman of the Joint Chiefs", state: "New York" },
			progressive: { name: "Patty Murray", img: "https://upload.wikimedia.org/wikipedia/commons/f/fd/Patty_Murray_official_portrait.jpg", formerRole: "U.S. Senator", state: "Washington" }
		},
		homeland: {
			establishment: { name: "Jeh Johnson", img: "https://s3.amazonaws.com/ballotpedia-api4/files/thumbs/200/300/Jeh_Johnson_official_portrait.jpg", formerRole: "Secretary of Homeland Security", state: "New Jersey" },
			centrist: { name: "Alejandro Mayorkas", img: "https://i.dailymail.co.uk/i/pix/2013/07/23/article-2375290-1AF571D6000005DC-143_306x423.jpg", formerRole: "Deputy Secretary of DHS", state: "California" },
			counter_terror: { name: "Lisa Monaco", img: "https://images.axios.com/V43dgt0tHYh2gvGY9Mx0zOZqeMk=/723x0:4191x3468/1024x1024/2021/04/20/1618924706388.jpg", formerRole: "Homeland Security Advisor", state: "Massachusetts" },
			unity: { name: "Michael Chertoff", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/Michael_Chertoff%2C_official_DHS_photo_portrait%2C_2007.jpg/250px-Michael_Chertoff%2C_official_DHS_photo_portrait%2C_2007.jpg", formerRole: "Former Secretary of DHS (R)", state: "New Jersey" }
		}
	};
    
	const trumpCandidates = {
		vp: { name: "Mike Pence", img: "https://upload.wikimedia.org/wikipedia/commons/0/06/Mike_Pence_February_2015_cropped_color_corrected_2_by_3.jpg", formerRole: "Governor of Indiana", state: "Indiana" },
		state: {
			loyalist: { name: "Newt Gingrich", img: "https://upload.wikimedia.org/wikipedia/commons/2/2c/Newt_Gingrich_by_Gage_Skidmore_6.jpg", formerRole: "Former Speaker of the House", state: "Georgia" },
			hawk: { name: "John Bolton", img: "https://upload.wikimedia.org/wikipedia/commons/6/68/John_Bolton_by_Gage_Skidmore.jpg", formerRole: "Former U.S. Ambassador to the UN", state: "Maryland" },
			wildcard: { name: "Rex Tillerson", img: "https://www.hollywoodreporter.com/wp-content/uploads/2016/12/rex_tillerson.jpg", formerRole: "CEO of ExxonMobil", state: "Texas" },
			alternate_loyalist: { name: "Rudy Giuliani", img: "https://www.uu.edu/events/scholarshipbanquet/2003/Giuliani-raw.jpg", formerRole: "Former Mayor of New York City", state: "New York" }
		},
		treasury: {
			establishment: { name: "Steven Mnuchin", img: "https://s.wsj.net/public/resources/images/BN-QZ801_1130mn_GR_20161130083306.jpg", formerRole: "CEO, Dune Entertainment", state: "California" },
			populist: { name: "Carl Icahn", img: "https://media.syracuse.com/haveyouheard/photo/icahn-investorsjpg-f9bad02bcbb3b758.jpg", formerRole: "Investor", state: "New York" },
			unity: { name: "Jamie Dimon", img: "https://static01.nyt.com/images/2014/07/02/business/dealbook/dbpix-dimon-bank/dbpix-dimon-tmagArticle.jpg", formerRole: "CEO of JPMorgan Chase (D)", state: "New York" }
		},
		defense: {
			general: { name: "James Mattis", img: "https://www.hoover.org/sites/default/files/uploads/images/Mattis_Centcom_2010-201308031626.jpg", formerRole: "Commander, U.S. Central Command", state: "Washington" },
			loyalist: { name: "Michael Flynn", img: "https://s.hdnux.com/photos/55/42/06/11936176/4/rawImage.jpg", formerRole: "Former Director of the DIA", state: "Rhode Island" },
			hardliner: { name: "Jeff Sessions", img: "https://encyclopediaofalabama.org/wp-content/uploads/2023/04/Jeff-Sessions-561x600.jpg?theia_smart_thumbnails_file_version=2", formerRole: "U.S. Senator", state: "Alabama" }
		},
		attorneyGeneral: {
			loyalist_1: { name: "Rudy Giuliani", img: "https://www.uu.edu/events/scholarshipbanquet/2003/Giuliani-raw.jpg", formerRole: "Former Mayor of New York City", state: "New York" },
			loyalist_2: { name: "Chris Christie", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Chris_Christie_by_Gage_Skidmore.jpg/220px-Chris_Christie_by_Gage_Skidmore.jpg", formerRole: "Governor", state: "New Jersey" },
			hardliner: { name: "Jeff Sessions", img: "https://m.media-amazon.com/images/M/MV5BMTRhNTM4ZTMtMjk0OS00MWY4LWIyYjUtZjBmYWRlOGYwYjBlXkEyXkFqcGc@._V1_.jpg", formerRole: "U.S. Senator", state: "Alabama" }
		},
		interior: {
			firebrand: { name: "Sarah Palin", img: "https://media.gettyimages.com/id/499973456/pt/foto/universal-city-ca-sarah-palin-visits-extra-at-universal-studios-hollywood-on-december-4-2015-in.jpg?s=612x612&w=0&k=20&c=w5B9KZhVcOmNc4zXpk-A_8IitiGPw0V6ND83csvojwU=", formerRole: "Former Governor", state: "Alaska" },
			establishment: { name: "Mary Fallin", img: "https://upload.wikimedia.org/wikipedia/commons/6/64/Mary_Fallin_official_110th_Congress_photo.jpg", formerRole: "Governor", state: "Oklahoma" },
			western: { name: "Cathy McMorris Rodgers", img: "https://upload.wikimedia.org/wikipedia/commons/1/14/Cathy_McMorris%2C_official_photo_portrait%2C_color.jpg", formerRole: "U.S. Representative", state: "Washington" }
		},
		agriculture: {
			establishment: { name: "Sonny Perdue", img: "https://cloudfront-us-east-1.images.arcpublishing.com/ajc/MR6G2TQBM27BQZLUPINJPZONYY.jpg", formerRole: "Former Governor", state: "Georgia" },
			populist: { name: "Sid Miller", img: "https://cdn.houstonpublicmedia.org/wp-content/uploads/2016/04/Sid-Miller-804x1000.jpg", formerRole: "Agriculture Commissioner", state: "Texas" },
			agribusiness: { name: "Chuck Conner", img: "https://upload.wikimedia.org/wikipedia/commons/6/66/Charles_F._Conner%2C_official_USDA_photo_portrait.jpg", formerRole: "CEO, National Council of Farmer Co-ops", state: "Indiana" }
		},
		commerce: {
			business: { name: "Wilbur Ross", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/54/Wilbur_Ross.jpg/960px-Wilbur_Ross.jpg", formerRole: "Investor", state: "New York" },
			populist: { name: "Dan DiMicco", img: "https://leadersbowl.wordpress.com/wp-content/uploads/2012/12/wpid-dimicco-dan.jpg", formerRole: "CEO of Nucor Corporation", state: "North Carolina" },
			establishment: { name: "Rick Snyder", img: "https://riponsociety.org/wp-content/uploads/2014/08/rsnyderrf132.jpg", formerRole: "Governor", state: "Michigan" }
		},
		labor: {
			business: { name: "Andrew Puzder", img: "https://www.kennesaw.edu/coles/events/images/andy-puzder.jpg", formerRole: "CEO of CKE Restaurants", state: "California" },
			establishment: { name: "Victoria A. Lipnic", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Victoria_Lipnic.jpg/1200px-Victoria_Lipnic.jpg", formerRole: "Commissioner of the EEOC", state: "Maryland" }
		},
		hhs: {
			establishment: { name: "Tom Price", img: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/Tom_Price_official_Transition_portrait.jpg/960px-Tom_Price_official_Transition_portrait.jpg", formerRole: "U.S. Representative", state: "Georgia" },
			loyalist: { name: "Ben Carson", img: "https://www.pbs.org/newshour/app/uploads/2016/12/RTSUQQB-1024x683.jpg", formerRole: "Neurosurgeon", state: "Florida" },
			unity: { name: "Rick Scott", img: "https://www.cleanenergy.org/wp-content/uploads/Rick_Scott_official_portrait.jpg", formerRole: "Governor", state: "Florida" }
		},
		hud: {
			loyalist: { name: "Ben Carson", img: "https://www.pbs.org/newshour/app/uploads/2016/12/RTSUQQB-1024x683.jpg", formerRole: "Neurosurgeon", state: "Florida" },
			alternate: { name: "Pam Bondi", img: "https://floridapolitics.com/wp-content/uploads/2014/12/bondi-pam-fp1-1024x1024.jpg", formerRole: "Attorney General", state: "Florida" }
		},
		transportation: {
			establishment: { name: "Elaine Chao", img: "https://upload.wikimedia.org/wikipedia/commons/b/b1/Elaine_Chao_large.jpg", formerRole: "Former Secretary of Labor", state: "Kentucky" },
			alternate: { name: "John Mica", img: "https://upload.wikimedia.org/wikipedia/commons/f/f5/John_L._Mica_113th_Congress.jpg", formerRole: "U.S. Representative", state: "Florida" }
		},
		energy: {
			establishment: { name: "Rick Perry", img: "https://upload.wikimedia.org/wikipedia/commons/2/2f/Rick_Perry_by_Gage_Skidmore_3.jpg", formerRole: "Former Governor", state: "Texas" },
			oil_gas: { name: "Harold Hamm", img: "https://upload.wikimedia.org/wikipedia/commons/2/20/Harold_Hamm_2012_Shankbone.JPG", formerRole: "CEO of Continental Resources", state: "Oklahoma" }
		},
		education: {
			establishment: { name: "Betsy DeVos", img: "https://cdn.videos.rollcall.com/author/2016/11/23160739/betsydevos.jpg", formerRole: "Chair, American Federation for Children", state: "Michigan" },
			alternate: { name: "Gerard Robinson", img: "https://miamiherald.typepad.com/.a/6a00d83451b26169e2016768f681ba970b-pi", formerRole: "Former Education Commissioner", state: "Florida" }
		},
		veterans: {
			establishment: { name: "Jeff Miller", img: "https://upload.wikimedia.org/wikipedia/commons/c/ce/Jeff_Miller_Congress.JPG", formerRole: "U.S. Representative", state: "Florida" },
			alternate: { name: "David Shulkin", img: "https://upload.wikimedia.org/wikipedia/commons/4/40/David_Shulkin%2C_Under_Secretary_of_Health%2C_portrait.jpg", formerRole: "Under Secretary of V.A. for Health", state: "Pennsylvania" }
		},
		homeland: {
			general: { name: "John Kelly", img: "https://upload.wikimedia.org/wikipedia/commons/9/92/John_F._Kelly%2C_2012.jpg", formerRole: "Commander, U.S. Southern Command", state: "Virginia" },
			hardliner: { name: "Kris Kobach", img: "https://thesunflower.com/wp-content/uploads/2017/08/kriskobach.jpg", formerRole: "Secretary of State", state: "Kansas" },
			loyalist: { name: "David Clarke", img: "https://swiftmedia.s3.amazonaws.com/mountain.swiftcom.com/images/sites/9/2016/09/07013940/constitutionweek-shn-090916.jpg", formerRole: "Sheriff of Milwaukee County", state: "Wisconsin" }
		}
	};

    // picker logic
    if (victoryType === 'win') {
		president = { name: "Hillary Clinton", img: "https://upload.wikimedia.org/wikipedia/commons/7/7e/Secretary_Clinton_and_Australian_Foreign_Minister_Rudd_Deliver_Remarks_%285681069115%29_%28cropped%29.jpg", formerRole: "Former Secretary of State", state: "New York" };
		party = "Democratic";
		headerColor = "#002D62";
		
		let tempVP;
		if (runningMateID === 999) {
			tempVP = { name: "Donald Trump", img: "https://www.thesun.co.uk/wp-content/uploads/2019/06/NINTCHDBPICT000494691093-e1559546002438.jpg?strip=all&w=960", formerRole: "Businessman", state: "New York" };
		} else {
			tempVP = clintonVPs[runningMateID] || clintonVPs[209];
		}

		vicePresident = {
			position: "Vice President",
			...tempVP,
			seal: seals.vp
		};
		assignedPeople.add(vicePresident.name);

		const candidates = clintonCandidates;

        // Tier 1 appointments
        const statePicks = [
			(runningMateID === 213 && candidates.state.biden_vp_loyalist),
			(runningMateID === 209 && candidates.state.establishment),
			(sandersRelations >= 4 && candidates.state.progressive),
			(hawkScore >= 3 && candidates.state.hawk),
			candidates.state.loyalist
        ].filter(Boolean);
        pickAndAssign("Secretary of State", statePicks, seals.state, 1);

        const defensePicks = [
			(runningMateID === 213 && candidates.defense.biden_vp_loyalist),
			(runningMateID === 209 && candidates.defense.hawk),
			(playerEV < 280 && candidates.defense.unity),
			(sandersRelations >= 3 && candidates.defense.dove),
			candidates.defense.establishment
        ].filter(Boolean);
        pickAndAssign("Secretary of Defense", defensePicks, seals.defense, 1);

        const treasuryPicks = [
			(runningMateID === 212 && candidates.treasury.establishment),
			(wallStreetScore <= -2 && candidates.treasury.progressive),
			(playerEV > 330 && candidates.treasury.technocrat),
			(wallStreetScore >= 2 && candidates.treasury.corporate),
			candidates.treasury.loyalist
        ].filter(Boolean);
        pickAndAssign("Secretary of the Treasury", treasuryPicks, seals.treasury, 1);

        const homelandPicks = [
			(playerEV < 290 && candidates.homeland.unity),
			(hawkScore >= 2 && candidates.homeland.counter_terror),
			(obamaLoyalty >= 3 && candidates.homeland.establishment),
			candidates.homeland.centrist
        ].filter(Boolean);
        pickAndAssign("Secretary of Homeland Security", homelandPicks, seals.homeland, 1);

        // Tier 2 appointments
		const agPicks = [
			(runningMateID === 212 && candidates.attorneyGeneral.incumbent),
            (runningMateID === 213 && candidates.attorneyGeneral.biden_vp_loyalist),
            (playerEV < 290 && candidates.attorneyGeneral.unity),
            (wallStreetScore >= 2 && candidates.attorneyGeneral.prosecutor),
            (sandersRelations >= 3 && candidates.attorneyGeneral.progressive),
            candidates.attorneyGeneral.loyalist
        ].filter(Boolean);
        pickAndAssign("Attorney General", agPicks, seals.attorneyGeneral, 2);

        const hhsPicks = [
			(sandersRelations >= 3 && candidates.hhs.progressive),
			(obamaLoyalty >= 2 && candidates.hhs.establishment),
			(globalistScore >= 1 && candidates.hhs.technocrat),
			candidates.hhs.loyalist
        ].filter(Boolean);
        pickAndAssign("Secretary of Health & Human Services", hhsPicks, seals.hhs, 2);

        const transportPicks = [
			(runningMateID === 215 && candidates.transportation.technocrat),
			(playerEV < 290 && candidates.transportation.unity),
			(obamaLoyalty >= 3 && candidates.transportation.establishment),
			candidates.transportation.infrastructure
        ].filter(Boolean);
        pickAndAssign("Secretary of Transportation", transportPicks, seals.transportation, 2);

        const energyPicks = [
			(campaignTrail_temp.player_answers.includes(20893) && candidates.energy.green),
			(sandersRelations >= 3 && candidates.energy.progressive),
			(obamaLoyalty >= 3 && candidates.energy.establishment),
			candidates.energy.technocrat
        ].filter(Boolean);
        pickAndAssign("Secretary of Energy", energyPicks, seals.energy, 2);

        // Tier 3 appointments
        const interiorPicks = [
			(sandersRelations >= 3 && candidates.interior.progressive),
			(playerEV > 320 && candidates.interior.western_dem),
			(obamaLoyalty >= 2 && candidates.interior.establishment),
			candidates.interior.tribal_affairs
        ].filter(Boolean);
        pickAndAssign("Secretary of the Interior", interiorPicks, seals.interior, 3);
        
        const agriculturePicks = [
			(runningMateID === 213 && candidates.agriculture.biden_vp_loyalist),
			(playerEV < 300 && candidates.agriculture.rural_outreach),
			(sandersRelations >= 2 && candidates.agriculture.progressive),
			candidates.agriculture.establishment
        ].filter(Boolean);
        pickAndAssign("Secretary of Agriculture", agriculturePicks, seals.agriculture, 3);

        const commercePicks = [
            (globalistScore <= -2 && candidates.commerce.protectionist),
			(playerEV < 300 && candidates.commerce.unity),
			(wallStreetScore >= 1 && candidates.commerce.corporate),
			candidates.commerce.establishment
        ].filter(Boolean);
        pickAndAssign("Secretary of Commerce", commercePicks, seals.commerce, 3);
        
        const laborPicks = [
			(sandersRelations >= 5 && playerEV > 330 && candidates.labor.progressive_unity),
            (sandersRelations >= 3 && candidates.labor.union),
            (runningMateID === 213 && candidates.labor.biden_vp_loyalist),
            (wallStreetScore >= 1 && candidates.labor.corporate),
            candidates.labor.establishment
        ].filter(Boolean);
        pickAndAssign("Secretary of Labor", laborPicks, seals.labor, 3);

        const hudPicks = [
			([211, 214].includes(runningMateID) && candidates.hud.booker_vp_loyalist),
			(sandersRelations >= 4 && candidates.hud.progressive),
			(obamaLoyalty >= 2 && runningMateID !== 214 && candidates.hud.establishment),
			candidates.hud.mayor
        ].filter(Boolean);
        pickAndAssign("Secretary of Housing & Urban Development", hudPicks, seals.hud, 3);

        const educationPicks = [
            (playerEV < 300 && candidates.education.unity),
			(sandersRelations >= 4 && candidates.education.union),
			(obamaLoyalty >= 2 && candidates.education.establishment), 
			candidates.education.reformer
        ].filter(Boolean);
        pickAndAssign("Secretary of Education", educationPicks, seals.education, 3);

        const veteransPicks = [
            (runningMateID === 213 && candidates.veterans.biden_vp_loyalist),
			(hawkScore <= 0 && candidates.veterans.war_veteran),
			(sandersRelations >= 2 && candidates.veterans.progressive),
			candidates.veterans.bipartisan
        ].filter(Boolean);
        pickAndAssign("Secretary of Veterans Affairs", veteransPicks, seals.veterans, 3);

	} else { // Trump victory
		president = { name: "Donald Trump", img: "https://www.thesun.co.uk/wp-content/uploads/2019/06/NINTCHDBPICT000494691093-e1559546002438.jpg?strip=all&w=960", formerRole: "Businessman", state: "New York" };
		party = "Republican";
		headerColor = "#AE1C23";
		
		const populistScore = window.populistScore || 0;
		const aggressiveScore = window.aggressiveScore || 0;
		
		const embracedSanders = window.embracedSanders === true;
		const tookResponsibilityForEmails = window.tookResponsibilityForEmails === true;

		const vpName = getTrumpVP(populistScore, aggressiveScore, embracedSanders, tookResponsibilityForEmails);

		const selectedVPData = trumpVPs[vpName] || trumpVPs["Mike Pence"];
		
		// define and assign the final vicePresident object
		vicePresident = { position: "Vice President", ...selectedVPData, seal: seals.vp };
		assignedPeople.add(vicePresident.name);

		const candidates = trumpCandidates;
		const trumpMandate = (playerEV < 200) ? 100 : (270 - playerEV);
		
		// Tier 1 appointments
		const agPicks = [
			(vpName === "Chris Christie" && candidates.attorneyGeneral.loyalist_2),
			(aggressiveScore >= 2 && candidates.attorneyGeneral.loyalist_1),     // Aggressive campaign -> Giuliani
			(vpName === "Jeff Sessions" && candidates.attorneyGeneral.hardliner),
			candidates.attorneyGeneral.loyalist_1                                  // Default loyalist -> Giuliani
		].filter(Boolean);
		pickAndAssign("Attorney General", agPicks, seals.attorneyGeneral, 1);
		
		const defensePicks = [
			(vpName === "Mike Flynn" && candidates.defense.loyalist),
			(aggressiveScore >= 3 && candidates.defense.hardliner), 
			(vpName === "Mike Pence" && candidates.defense.general),
			candidates.defense.general
		].filter(Boolean);
		pickAndAssign("Secretary of Defense", defensePicks, seals.defense, 1);
		
		const treasuryPicks = [
			(populistScore >= 4 && candidates.treasury.populist),
			(trumpMandate < 40 && candidates.treasury.unity),
			(vpName === "Mike Pence" && candidates.treasury.establishment),
			candidates.treasury.establishment
		].filter(Boolean);
		pickAndAssign("Secretary of the Treasury", treasuryPicks, seals.treasury, 1);
		
		const homelandPicks = [
			(aggressiveScore >= 3 && candidates.homeland.hardliner),
			(populistScore >= 3 && candidates.homeland.loyalist),
			(vpName === "Mike Pence" && candidates.homeland.general),
			candidates.homeland.general
		].filter(Boolean);
		pickAndAssign("Secretary of Homeland Security", homelandPicks, seals.homeland, 1);
		
		// Tier 2 appointments
		const statePicks = [
			(hawkScore >= 3 && candidates.state.hawk),
			(vpName === "Newt Gingrich" && candidates.state.loyalist),
			(populistScore >= 2 && candidates.state.wildcard),
			candidates.state.alternate_loyalist
		].filter(Boolean);
		pickAndAssign("Secretary of State", statePicks, seals.state, 2);

		const hhsPicks = [
			(populistScore >= 2 && candidates.hhs.loyalist),
			(trumpMandate < 50 && candidates.hhs.unity),
			(vpName === "Mike Pence" && candidates.hhs.establishment),
			candidates.hhs.establishment
		].filter(Boolean);
		pickAndAssign("Secretary of HHS", hhsPicks, seals.hhs, 2);
		
		const commercePicks = [
			(populistScore >= 3 && candidates.commerce.populist),
			(trumpMandate < 50 && candidates.commerce.establishment),
			candidates.commerce.business
		].filter(Boolean);
		pickAndAssign("Secretary of Commerce", commercePicks, seals.commerce, 2);
		
		pickAndAssign("Secretary of Transportation", [candidates.transportation.establishment, candidates.transportation.alternate], seals.transportation, 2);

		// Tier 3 appointments
		const interiorPicks = [
			(populistScore >= 5 && candidates.interior.firebrand),
			(vpName === "Mary Fallin" && candidates.interior.establishment),
			(populistScore >= 2 && candidates.interior.establishment),
			candidates.interior.western
		].filter(Boolean);
		pickAndAssign("Secretary of the Interior", interiorPicks, seals.interior, 3);
		
		pickAndAssign("Secretary of Agriculture", [candidates.agriculture.establishment, candidates.agriculture.populist, candidates.agriculture.agribusiness], seals.agriculture, 3);
		
		pickAndAssign("Secretary of Labor", [candidates.labor.business, candidates.labor.establishment], seals.labor, 3);
		
		const hudPicks = [
			(populistScore >= 3 && candidates.hud.loyalist),
			candidates.hud.alternate
		].filter(Boolean);
		pickAndAssign("Secretary of Housing & Urban Development", hudPicks, seals.hud, 3);
		
		const energyPicks = [
			(populistScore >= 3 && candidates.energy.oil_gas),
			candidates.energy.establishment
		].filter(Boolean);
		pickAndAssign("Secretary of Energy", energyPicks, seals.energy, 3);
		
		const educationPicks = [
			(vpName === "Mike Pence" && candidates.education.alternate),
			candidates.education.establishment
		].filter(Boolean);
		pickAndAssign("Secretary of Education", educationPicks, seals.education, 3);

		pickAndAssign("Secretary of Veterans Affairs", [candidates.veterans.establishment, candidates.veterans.alternate], seals.veterans, 3);
	}
    
    // html generation
	let html = `
	<div style="max-width: 800px; margin: 1em auto; font-family: sans-serif;">
		<style>
			.wikitable { background-color: #f8f9fa; color: #202122; margin: 1em 0; border: 1px solid #a2a9b1; border-collapse: collapse; }
			.wikitable > tbody > tr > th, .wikitable > tbody > tr > td { border: 1px solid #a2a9b1; padding: 0.35em 0.4em; }
			.wikitable > thead > tr > th { border: 1px solid #a2a9b1; padding: 0.35em 0.4em; }
			.wikitable > * > tr > th { background-color: #eaecf0; text-align: center; font-weight: bold; }
		</style>
		<table class="wikitable" style="text-align:center; width: 100%;">
			<thead>
				<tr>
					<th colspan="4" style="font-size:110%; color:white; background:${headerColor};">
						<b>Cabinet of President ${president.name}</b>
					</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td colspan="4" style="text-align:left; font-size: 90%; background-color: #f8f9fa;">
						<div style="display:inline-block; border:1px solid #a2a9b1; width:1em; height:1em; background-color:#90EE90; vertical-align: middle;"></div> Elected to office
					</td>
				</tr>
	`;

	const presidentOfficeCell = `
		<td style="vertical-align: top; padding: 5px; background: #90EE90;" colspan="2">
			<img src="${seals.potus}" style="width: 75px; height: 75px; object-fit: contain;">
			<p style="margin: 0.5em 0; font-weight: bold;">President</p>
			<p style="font-size: 85%; margin: 0;">
				Elected November 8, 2016<br>
				Assumed office January 20, 2017
			</p>
		</td>
	`;
	const presidentDesigneeCell = `
		<td style="vertical-align: top; padding: 5px; background: #90EE90;" colspan="2">
			<img src="${president.img}" style="width: 95px; height: 120px; object-fit: cover; border: 1px solid #ccc;">
			<br>
			<span style="font-size: 85%;">${president.formerRole}</span>
			<br>
			<b>${president.name}</b>
			<br>
			<span style="font-size: 85%;">from ${president.state}</span>
		</td>
	`;
	html += `<tr>${presidentOfficeCell}${presidentDesigneeCell}</tr>`;

	// two-column header
	html += `
				<tr>
					<th scope="col" style="width: 30%;">Office<br><small>Date announced/confirmed</small></th>
					<th scope="col" style="width: 20%;">Designee</th>
					<th scope="col" style="width: 30%;">Office<br><small>Date announced/confirmed</small></th>
					<th scope="col" style="width: 20%;">Designee</th>
				</tr>
	`;

	// create the final list
	const cabinetMembers = [vicePresident, ...cabinet];

	for (let i = 0; i < cabinetMembers.length; i += 2) {
		html += '<tr>';
		const member1 = cabinetMembers[i];
		if (member1) {
			html += generateCabinetCells(member1, victoryType);
		}

		const member2 = cabinetMembers[i + 1];
		if (member2) {
			html += generateCabinetCells(member2, victoryType);
		} else {
			html += '<td colspan="2"></td>';
		}
		html += '</tr>';
	}

	html += `</tbody></table></div>`;
	
	window.generatedCabinetCache[cacheKey] = { html };
	 
	return html;
}

// main ending picker function
endingPicker = (out, totv, aa, quickstats) => {
    console.log("Preparing ending data...");
    
    // reset contingent mode when starting a new ending picker
    contingentMode = false;
    
    campaignTrail_temp.pages = [];
    campaignTrail_temp.header = "";
    campaignTrail_temp.executable = [];
    campaignTrail_temp.page = 0;
    campaignTrail_temp.image = false;

    const playerEV = quickstats[0];
    const playerCandidateId = campaignTrail_temp.candidate_id;
    let popularVoteWon = aa[0].popular_votes > aa[1].popular_votes;
    
    // sort by electoral votes to ensure we handle any number of candidates correctly
    const sortedResults = [...aa].sort((a, b) => b.electoral_votes - a.electoral_votes);
    
    // find the player's position in the sorted results
    const playerIndex = sortedResults.findIndex(result => result.candidate === playerCandidateId);
    
    // get opponent EVs (that is, the candidate with most EVs who isn't the player)
    let opponentEVs = 0;
    let otherOpponentEVs = 0;
    
    if (playerIndex === 0) {
        // player is winning, get second and third place
        opponentEVs = sortedResults.length > 1 ? sortedResults[1].electoral_votes : 0;
        otherOpponentEVs = sortedResults.length > 2 ? sortedResults[2].electoral_votes : 0;
    } else {
        // player isn't winning, get first place and third place (or second non-player)
        opponentEVs = sortedResults[0].electoral_votes;
        
        // find the next highest candidate who isn't the player
        for (let i = 1; i < sortedResults.length; i++) {
            if (sortedResults[i].candidate !== playerCandidateId) {
                otherOpponentEVs = sortedResults[i].electoral_votes;
                break;
            }
        }
    }
	
	const winningEV =
	  campaignTrail_temp?.election_json?.find(f => Number(f.pk) === Number(campaignTrail_temp.election_id))
		?.fields?.winning_electoral_vote_number ?? 270;

	const someoneHasMajority = aa.some(r => (r.electoral_votes || 0) >= winningEV);
    
    if (typeof CONTINGENT !== 'undefined' && CONTINGENT > 0) {
        endingPickerCONT();
        return "";
    }
	
	// for the achievements
	if (out === "win") {
		checkAndApplyUnlocks(playerEV, campaignTrail_temp.running_mate_id);
		unlockAchievement("Just Like Heaven");
		if (playerEV >= 332) unlockAchievement("Mother's Pride");
		if (campaignTrail_temp.player_answers.includes(5184)) unlockAchievement("If I Was Your Girlfriend");
		if (campaignTrail_temp.player_answers.includes(20988)) unlockAchievement("I Could Never Take The Place of Your Man");
		if (feelthebern >= 5) unlockAchievement("Eminence Front");
		if (feelthebern == 0) unlockAchievement("By Blood and Tears Alone");
		if (yeshillaryyes >= 3) unlockAchievement("Walking On A Dream");
		if (campaignTrail_temp.running_mate_id == 211) unlockAchievement("One Way Ticket");
		if (campaignTrail_temp.running_mate_id == 212) unlockAchievement("I Can See Clearly Now");
		if (hawkhill >= 3) unlockAchievement("Hoist The Colors");
		if (hipnfly >= 3) unlockAchievement("Fashion Is Danger");
		if (floor13 == false) unlockAchievement("Abhorrent to Every Instinct");
		if (campaignTrail_temp.difficulty_level_multiplier <= 0.93) unlockAchievement("Spitting Off The Edge of The World");
		if (campaignTrail_temp.final_state_results[42]["result"][0]["candidate"] == 201) unlockAchievement("Saturday Nighter");
		if (goodtimes >= 3) unlockAchievement("Class of '93");
		if (campaignTrail_temp.running_mate_id == 213) unlockAchievement("Before My Telephone Rings");
		if (campaignTrail_temp.running_mate_id == 214) unlockAchievement("Ghosts and Creatures");
		if (campaignTrail_temp.running_mate_id == 215) unlockAchievement("Perfect Celebrity");
	} else {
		if (out === "loss" & (!popularVoteWon)) {
			unlockAchievement("Plastic Machinery");
		} else if (out === "loss") {
			unlockAchievement("Nothing Has Changed");
		}
	}
	if (playerEV < 270 && opponentEVs < 270) {
		unlockAchievement("Tongue-Tied");
	}
	    
    if(typeof nct_stuff !== 'undefined' && nct_stuff.themes && nct_stuff.selectedTheme) {
        nct_stuff.themes[nct_stuff.selectedTheme].text_col = "white";
    }
	
	// Define scores with a neutral starting point
	let scores = {
		sandersRelations: 0,
		wallStreetScore: 0,
		globalistScore: 0,
		hawkScore: 0,
		obamaLoyalty: 0,
	};

	const answers = campaignTrail_temp.player_answers;

	// Sanders relations
	if (answers.includes(5170)) scores.sandersRelations += 2;
	if (answers.includes(5171)) scores.sandersRelations += 1;
	if (answers.includes(5172)) scores.sandersRelations -= 2;
	if (answers.includes(5200)) scores.sandersRelations += 2;
	if (answers.includes(5203)) scores.sandersRelations -= 3;
	if (answers.includes(5151)) scores.sandersRelations += 1;
	if (answers.includes(5189)) scores.sandersRelations += 1;
	if (answers.includes(20798)) scores.sandersRelations += 1;
	if (answers.includes(20893)) scores.sandersRelations += 1;

	// Wall Street
	if (answers.includes(5140)) scores.wallStreetScore += 2;
	if (answers.includes(5250) || answers.includes(5251)) scores.wallStreetScore += 1;
	if (answers.includes(5151)) scores.wallStreetScore -= 2;
	if (answers.includes(20725)) scores.wallStreetScore += 1;

	// Globalist score
	if (answers.includes(20757)) scores.globalistScore += 2;
	if (answers.includes(20751) || answers.includes(20736)) scores.globalistScore -= 2;
	if (answers.includes(21240)) scores.globalistScore += 1;

	// Hawk score
	if (answers.includes(21001) || answers.includes(21013)) scores.hawkScore += 2;
	if (answers.includes(20995)) scores.hawkScore -= 2;
	if (answers.includes(5215)) scores.hawkScore += 1;
	if (answers.includes(5214)) scores.hawkScore -= 1;

	// Obama loyalty
	if (answers.includes(5196)) scores.obamaLoyalty += 2;
	if (answers.includes(5223)) scores.obamaLoyalty += 1;
	if (answers.includes(21096)) scores.obamaLoyalty += 1;
	if (answers.includes(5198)) scores.obamaLoyalty -= 2;
	if (answers.includes(5199)) scores.obamaLoyalty -= 1;

    
    // Clinton loss - nothing.
	if ((playerEV == 0 || playerEV == 3)){
        campaignTrail_temp.pages.push(`<div style="font-family: 'Times New Roman', Times, serif; border: 1px solid #ccc; padding: 15px; background-color: #fdfdfd;"> <h3 style="text-align: center; border-bottom: 2px solid #333; padding-bottom: 5px; margin-top: 0;">The Chappaqua Chronicle</h3> <p style="text-align: center; font-size: 0.9em; color: #555;">Your Community, Your News | Saturday, March 18, 2017</p> <h4 style="font-weight: bold;">Mrs. Clinton Parks Car on Chappaqua Street</h4> <p><strong>CHAPPAQUA, NY</strong> – In a display of normalcy that has become increasingly common for the former presidential candidate, Chappaqua resident Hillary Clinton successfully parallel parked a dark-colored SUV on South Greeley Avenue this morning. The maneuver, described by one onlooker as “pretty good, maybe a little close to the curb,” preceded a brief trip into the local DeCicco & Sons Market.</p> <p>Inside, dressed in a black jacket, Mrs. Clinton was seen navigating the produce aisle, pausing to inspect a bunch of kale before moving on to the dairy section. She offered polite smiles to the few shoppers who recognized her, eventually purchasing a carton of milk, a bag of quinoa, and a rotisserie chicken.</p> <p>“Oh yes, she and the President [Bill Clinton] come in from time to time,” remarked Brenda Scofield, 62, a retired teacher bagging her groceries nearby. “We just try to give them their space. They’re our neighbors, after all.”</p> <p>Mrs. Clinton has kept a decidedly low profile since the conclusion to last fall’s presidential contest, which saw her fail to win any of the 50 states in the country and their votes in the Electoral College. Aside from occasional walks in the nearby woods with her husband and their dogs, a local pastime that has gained some national attention, she has made few public appearances since.</p> <p>However, whispers in local Democratic circles have begun to circulate about a potential next act. With veteran Congresswoman Nita Lowey (D-NY17), 79, reportedly mulling retirement ahead of the 2018 midterms, some party insiders have quietly wondered if Mrs. Clinton might consider a run for the House of Representatives. Such a move would allow her to re-enter the political fray, representing the community she has called home for nearly two decades.</p> <p>When asked by this reporter for comment on her parking technique or future political plans, the former First Lady simply offered a warm smile and a slight wave before loading her groceries into her vehicle. For now, it seems her most immediate concern isn’t holding a congressional district, but simply getting home before the ice cream melts.</p> </div>`);
        campaignTrail_temp.executable.push([0, () => { campaignTrail_temp.image = 'https://media.gettyimages.com/id/1236930867/pt/foto/us-first-lady-and-senator-elect-hillary-rodham-clinton-is-bundled-against-the-cold-during-a.jpg?s=612x612&w=0&k=20&c=pRr63Borwnky7WeZShL8dnEhpwTdo__8Lgwx3nK7CGQ='; }]);
		
		const cabinetHTML = generateCabinetTimeline('loss', playerEV, campaignTrail_temp.running_mate_id, scores);
		campaignTrail_temp.pages.push(cabinetHTML);
		campaignTrail_temp.executable.push([1, () => { 
			campaignTrail_temp.image = 'https://www.trolleytours.com/wp-content/uploads/2016/06/white-house-480x270.jpg';
			setImage(campaignTrail_temp.image); 
		}]);
		
		campaignTrail_temp.pages.push(`<head><link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Special+Elite&display=swap" rel="stylesheet"></head><div style="background-color: #F3EAD3; font-family: 'Special Elite', 'Courier New', monospace; color: #4a4a4a; padding: 40px; border: 1px solid #dcdcdc; max-width: 600px; margin: auto; text-align: left;"><div style="text-align: center; font-size: 12px; font-style: italic; color: #666; margin-bottom: 15px;">An excerpt from Harmony Korine's forthcoming collection, <i>The Last American Car Wash</i>.</div><hr style="border: none; border-top: 1px solid #ccc; margin: 0 auto 25px auto; width: 80%;"><h4 style="text-align: center; font-weight: bold; margin-bottom: 40px; letter-spacing: 2px;">SUICIDE NOTE #8</h4> <p style="line-height: 1.8; font-size: 16px;"> The car keeps going to the same house, my driver told<br> me. They just change the face in the back seat. That's<br> not a thing you people want to hear. You think the<br> speeches change the direction of the wheels. That the<br> family photos on the Resolute Desk mean a new chapter<br> is being written. In the real rooms they just pass<br> the keys from one hand to the next. The windows are<br> tinted so you can't see there's no one driving at all.</p><div style="text-align: right; margin-top: 50px;"> <p style="font-family: 'Brush Script MT', cursive; font-size: 24px; margin: 0; padding-bottom: 2px; border-bottom: 1px solid #888;"> Barack </p> <p style="font-size: 14px; color: #666; margin: 0;"> signature </p></div> </div>`);
		campaignTrail_temp.executable.push([2, () => { campaignTrail_temp.image = 'https://media.newyorker.com/photos/59097d6d019dfc3494ea3ac5/master/pass/Cunnane-ElectionNightattheWhiteHousewithWaffleFries.jpg'; }]);
		
    }
	// Clinton loss - bigly!
    else if (playerEV >= 4 && playerEV < 200 && someoneHasMajority) {
        campaignTrail_temp.pages.push(`<div style="background: rgba(0, 0, 0, 0.5); color: white; padding: 1.2em; display: inline-block; border-radius: .5em 0 0 .5em;"><h3><span style="color:#eee;">chasing pirates</span></h3><p>The first domino was Florida, as it so often is. The second one was Ohio. But the one that broke the spell was Pennsylvania. The networks called it at 1:36 a.m. With it, the red bar for Trump nudged past the threshold, and the state on the holographic TV map flickered from toss-up gray to a deep, final crimson.<br/><br/>No one screamed. No one threw anything. The sound that followed was worse: a collective exhalation, as if a hundred people or so had been holding their breath for eighteen months and had all let it go at once. If anything, it felt like whatever energy they had was sucked out of them entirely. They had already abandoned the Javits Center hours ago, and were in a random Manhattan hotel waiting for a miracle that wasn’t coming.<br/><br/>Hillary stood before the wall of screens, her expression unreadable. She had watched the Blue Wall, the firewall she had been assured would hold, crumble brick by brick. Michigan was bleeding, Wisconsin was gone, and she didn’t even wanna think about Minnesota. This wasn’t like a normal landslide, no, it was like a death by a thousand cuts... each one a precinct in a county she’d never heard of, and each one a vote <i>she</i> was supposed to have. The final margin wouldn’t be a chasm.<br/><br/>Slowly, as if moving through water, she walked to the main television. She picked up the remote from a table littered with half-empty coffee cups and some binders. With a quiet <i>click</i>, the screen went black. It was over.<br/><br/>The sudden silence was absolute. In the dark glass of the TV, she saw not a President-elect, but a woman. Tired. Impossibly tired, too, with lines around her eyes that not even the best makeup could hide, and her reflection was so pale she looked as if she had seen a ghost.<br/><br/>Bill moved to her side and put a hand on her arm. His voice was quite low. “Hillary… Barack is on the line. He thinks… h-he says for the good of the country, we should think about a concession call.”<br/><br/>She didn’t turn to look at him. She just kept staring at the TV screen. “I want to go home, Bill.”<br/><br/>“I know,” he said gently. “But the markets, the transition… we need a smooth transfer of power, Hill. We have to show…”<br/><br/>“No,” she said. Her voice wasn’t sharp or angry, although it was quite flat. “I want to go home. Please.”<br/><br/>He looked from his wife to the stunned faces of Podesta and Huma and the rest of her inner circle, all standing frozen. They looked like figures in a wax museum. It was pathetic. And he saw the truth in her eyes. Their fight was over. There was nothing left to give them anymore. And so he nodded. “Okay,” he whispered. “Okay, honey. We’ll go home.”<br/><br/>The ride to Chappaqua was a silent, rather surreal journey through a world that no longer belonged to her. The Secret Service motorcade moved through the sleeping suburbs of New York. She didn’t even want to think about the thousands of Hillary voters in this area who were having it just as bad as her, if not worse. Hillary leaned her head against the cool glass of the window, watching the streetlights streak by in blurry lines of gold and white and some red.<br/><br/>Why? This question wasn’t just political analysis, unfortunately. What had she done? She’d built a working coalition, she’d won the debates, she’d endured every attack, every smear, and every resurrected ghost from their long, public life. She had been told, and had believed, that she was the most qualified person to ever seek the office. And it wasn’t enough. Shit. By the barest of margins, in just the right places, it wasn’t enough. Was it the emails? Was it Russia? Was it fucking James Comey? Or was it something more fundamental? Was it… <i>her</i>? The question echoed in her mind. She didn’t want to answer it.<br/><br/>They pulled into their driveway just before 3 a.m. The house was understandably dark and quiet, and it was a sanctuary that felt worlds away from the noise and the numbers of NYC. Bill unlocked the front door, and the familiar scent of home washed over them. It was hard to describe it, but it felt good.<br/><br/>Hillary walked into the living room, letting her purse slide from her shoulder and hit the floor with a soft thud. She looked at the living room couch — it was a normal couch, to be honest, but at least she could call it comfortable — and sighed. Her legs seemed to give way beneath her. She sank onto the cushions, curled into a ball, pulled a pillow into her chest and held it like a toy.<br/><br/>Bill was there in an instant. He sat on the edge of the couch, and let his hand rest on her back, rubbing slow, gentle circles between her shoulder blades. He didn’t speak. There were no words for this, no good words for it, at least. There was no talk of tomorrow; tomorrow was a foreign country. Trump threatened to lock her up. His supporters wanted her dead. Hillary didn’t know what else awaited her.<br/><br/>She didn’t cry. Her grief was probably too deep for tears. It was just a cold, heavy stone in her stomach. She lay there, thinking about all the work, all the hope, the hands she’d shaken, the babies she’d held, and all the the stories she’d listened to. All of it had, somehow, led to this. To her being in a dark room, with a silent phone, and a few questions that would haunt her for the rest of her life.<br/><br/><i>Why? Why now? What had I done to the world to deserve this?</i><br/><br/>She didn’t know. And as her husband sat beside her, she had a terrifying feeling that perhaps, she never would.</p></div>`);
        campaignTrail_temp.executable.push([0, () => { campaignTrail_temp.image = 'https://media.gettyimages.com/id/777997/pt/foto/first-lady-and-u-s-senate-candidate-hillary-rodham-clinton-appearsh-on-a-television-screen-as-she.jpg?s=612x612&w=0&k=20&c=GNPJvElysf-yudqc52g6i-KsqSZnafiXbG85aYyG0UU='; }]);
		
		const cabinetHTML = generateCabinetTimeline('loss', playerEV, campaignTrail_temp.running_mate_id, scores);
		campaignTrail_temp.pages.push(cabinetHTML);
		campaignTrail_temp.executable.push([1, () => { 
			campaignTrail_temp.image = 'https://www.trolleytours.com/wp-content/uploads/2016/06/white-house-480x270.jpg';
			setImage(campaignTrail_temp.image); 
		}]);
		
		campaignTrail_temp.pages.push(`<div style="background: #000000; color: white; padding: 15px; display: inline-block; border-radius: 0px;"><h2><span style="color:#FF0000; font-family: Impact, sans-serif; font-size: 48px;">TMZ</span></h2><h3><span style="color:#FFFFFF; font-family: Arial, sans-serif;">BREAKING: TRUMP'S MCDONALD'S INAUGURATION FEAST -- 300 BIG MACS, DIET COKES & 'WINNERS ONLY' POLICY!!!</h3><p><span style="color:#FFFFFF; font-family: Arial, sans-serif;"> <b>Posted January 21st, 2017 @ 2:47 AM PT</b><br><br><span style="background-color: #FF0000; padding: 2px 5px;">EXCLUSIVE</span> Donald Trump just threw what multiple White House sources are calling the "most insane" inaugural celebration in presidential history -- and we've got ALL the deets!!!<br><br>TMZ has learned the new President ordered over 300 Big Macs, 400 orders of fries, and what one staffer described as "enough Diet Coke to fill the Lincoln Memorial reflecting pool" for last night's victory party. Sources tell us Trump personally inspected each burger to ensure they had "the perfect amount of special sauce," which we determined was Szechuan sauce, introduced briefly in 1998 as part of a promotional stunt for the Disney movie "Mulan".<br><br>Here's where it gets CRAZY -- we're told Hillary Clinton's portrait from her time as First Lady was temporarily removed from the East Wing and replaced with a gold-framed photo of Trump eating KFC on his private jet!!! The photo (or rather, art) in question was made by cartoonist Ben Garrison, who reportedly drew this last December to celebrate the President's triumpant win in the elections last year.<br><br>GET THIS ... Trump allegedly made guests eat their Big Macs with GOLD-PLATED UTENSILS he had specially made for the occasion. One of the 'special guests' told us, "He kept saying 'winners eat like winners' and wouldn't let anyone have dessert until they admitted his crowd was bigger than Obama's." It has also been informed to us that the "gold aesthetic" of the President is something he is planning to  focus on as he opens his first term.<br><br>The guest list was WILD too -- Kid Rock performed the national anthem (twice), followed by a rendition of his song "American Bad Ass" (relesed 2000), and -- you're not gonna believe this -- Trump advisors reportedly had a cardboard cutout of Hillary placed near the buffet table with a sign reading "LOSER'S TABLE - NO FOOD."<br><br>Multiple attendees confirmed Trump gave a toast at midnight where he declared, "The White House has never been more classy" while literally holding a Big Mac in one hand and a Diet Coke in the other. Impressive! It has also been reported that one of the attendants, 2012 nominee Mitt Romney, was spotted eating his burger with a knife and fork in the corner, looking "profoundly uncomfortable."<br><br>We reached out to Hillary's team for comment about the cardboard cutout ... this story will be updated when they reply to us.<br><br><b>UPDATE 7:48 AM:</b> Trump just tweeted: "FAKE NEWS TMZ got it wrong - I've never held a party with 300, 400, 500 Big Macs. I would Have definitely Done it, However! Thankfully, my Parties are Much bigger than all Parties that have been reported in History before. The bazinga"</span></p></div>`);
		campaignTrail_temp.executable.push([2, () => { campaignTrail_temp.image = 'https://www.thetimes.com/imageserver/image/%2Fmethode%2Ftimes%2Fprod%2Fweb%2Fbin%2F8567e550-18ac-11e9-944c-54b267eb465b.jpg?crop=711%2C1067%2C444%2C0'; }]);
		
    }
	// Clinton loss
    else if (playerEV < 270 && opponentEVs >= 270) {
        campaignTrail_temp.pages.push(`<div style="background: rgba(0, 0, 0, 0.5); color: white; padding: 1.2em; display: inline-block; border-radius: .5em 0 0 .5em;"><h3><span style="color:#eee;">dead on arrival</span></h3><p><span style="color:#eee;">The television screen went black with a soft sigh, leaving only the reflection of Hillary’s face staring back from the dark glass. She’d turned it off somewhere between Florida falling and the inevitable mathematics of defeat becoming undeniable. Outside, November rain tapped against the hotel window.<br/><br/>It wasn’t supposed to happen this way. No, no, not after everything. Not after building her ground game, gaining endorsements, and the coalition-building that she had taken years to construct. Not after being told she was the most qualified candidate in history, for God’s sake. Not like <i>this</i>. But here she was, watching her future dissolve in real time, state by state, vote by vote.<br/><br/>The phone buzzed on the nightstand. It was Huma’s phone, apparently forgotten in the rush of the night’s unraveling. The caller ID read “Conway, K.” Hillary sighed. She picked it up anyway. What else was there to do?<br/><br/>“Huma? Oh-oh, Mrs. Clinton? This is Kellyanne Conway. I—well, I wanted to—” There was a pause. “Uh, here, let me put him on.”<br/><br/>Trump’s voice came through surprisingly tinny. “Hillary? Wow. I mean, wow. That happened, huh? I don’t—I don’t even know what to say. You ran a great campaign, really, I mean it. Great campaign. The best. Really tremendous. Better than anyone expected, to be honest. I don’t know what happened, you probably don’t either, right? These things, they just—they happen, you know? The American people, they spoke, and I respect that. I really do. We both do, right?”<br/><br/>“Yeah,” she said, although she was not sure if she was being fully honest or not. “Yeah, we do.”<br/><br/>“You know, Hillary, you’re very talented. Very smart. Always said that. I told you this at my wedding, right? It was a great wedding, too. Even when we disagreed—and we disagreed a lot, didn’t we?—I always said Hillary’s smart. Really smart. Scary smart, actually. Maybe we should work together, you know? I’m gonna need good people. The best people. And you’re good people, Hillary. Really good. Maybe Secretary of State again? You were good at that. I don’t know, UN Ambassador? We’ll figure it out. We’ll make it work.”<br/><br/>“Sure,” she heard herself say. “Sure, Donald.”<br/><br/>“See? That’s what I’m talking about. Unity. That’s what this country needs. Unity, healing. And you and me, we can do that. We’re both New Yorkers, right? Well, sorta. But we understand each other. We get it. The media, they don’t get it, but we do. We’re dealmakers, we make things happen. That’s why—I mean, tonight was crazy, wasn’t it? Just crazy. Nobody saw this coming. Nobody. Well, maybe some people did, but I definitely didn’t. It was insane. Have you seen those numbers in Indiana? E-Evan Bayh, that little guy, he tried so hard. And yet he died like a dog. Crazy stuff.”<br/><br/>“Mm-hmm.” She nodded at her reflection in the dark window. At that point, some numbness had settled in almost completely. Although strange, it felt quite familiar.<br/><br/>“And the rallies, Hillary—did you see the rallies? The crowds were incredible. Really incredible. Thousands and thousands of people. Beautiful MAGA people. Great Americans. They really wanted change, you know? Real change. Not that I’m saying you weren’t change—you would have been change too, in your own way. A different kind of change. Historic change, actually. First woman president, that would have been something. But they wanted my kind of change, I guess. Who knows? Politics, right? It’s crazy. Really crazy business. Always has been.”<br/><br/>“Yeah, you too, Donald.” The words came out automatically.<br/><br/>“You too what? Oh, right, yeah. Thanks. You’re very gracious, Hillary. Very classy. Always said that about you. Classy lady, presidential, really. That’s why I think we could really work together. Make America Great Again, but together, you know? That would be funny. Can you believe it? The media would love that, they’d eat it up. It’s like having your cake and eating it too. Think about it. ’Hillary Clinton joins the Trump administration.’ CNN would double their ratings. Think about the fake news media, how would they react. Can you imagine? Better than The Apprentice, probably.”<br/><br/>“Sounds good,” she whispered, her breath fogging the window for a moment before disappearing. Like, well, everything else tonight.<br/><br/>“I mean, we could do infrastructure. You always talked about infrastructure. Roads, bridges, airports. I love building things. We could build together. Make deals. Great deals, beautiful deals. The greatest deals anyone’s ever seen. We’re gonna redefine the definition of a deal. China wouldn’t know what hit them. Russia either. We’d show these losers what we can do.”<br/><br/>“Mm-hmm.” The rain kept falling, each drop sliding down the glass, as was expected.<br/><br/>She thought about her mother suddenly. Oh, Dorothy, who had traveled across the country on a train as a child, abandoned and alone. She’d told that story so many times during the campaign, about wanting to go back and tell that little girl that her daughter would grow up to be president. But now that train was disappearing into the distance, and the little girl would never know. The future Hillary had promised her was gone.<br/><br/>“You know what, Hillary? I’m really glad we’re talking like this. Really glad. Shows we’re both bigger than the campaign, you know? Bigger than the attacks and the ads and all that stuff. That’s politics. Business is business, but this is different. This is about America. About making things better. And we can do that. Together. I really believe that.”<br/><br/>“Yeah,” she said again, though the word was barely audible. “Yeah, Donald.”<br/><br/>For all that mattered, she was already gone. The person who had walked into this room hours ago, the one who had believed, who had planned, and had seen tomorrow stretching out in front of her like a golden highway — well, that person had died somewhere between the first swing state falling and the moment she reached for the remote. What remained was just a mere echo, nodding at random promises that would never be fulfilled, while the rain washed away the last traces of things that might have been.<br/><br/>And the phone kept buzzing with Trump’s voice, enthusiastic and uncertain all at once. But Hillary Clinton had already left the building. She was somewhere else now, in a place where eighteen months of fighting and hoping and dreaming couldn’t reach her. It was somewhere where the weight of history and the expectations of millions couldn’t follow her.<br/><br/>Perhaps it was true that the past is a gaping hole. She ran from it, so far away, and after it grew to an unbelievable size — think of, say, a snowball —, she decided to fight back. She lost.<br/><br/>She was dead on arrival, and she knew it. The rest was just paperwork.</span></p></div>`);
        campaignTrail_temp.executable.push([0, () => { campaignTrail_temp.image = 'https://media.gettyimages.com/id/1450259207/pt/foto/american-first-lady-of-the-united-states-hillary-clinton-at-the-white-house-in-washington-dc.jpg?s=612x612&w=0&k=20&c=geQrzWOiztdD73tNJ_TTC5x4yaY4KT6UclrHzCn7GAs='; }]);
		
		const cabinetHTML = generateCabinetTimeline('loss', playerEV, campaignTrail_temp.running_mate_id, scores);
		campaignTrail_temp.pages.push(cabinetHTML);
		campaignTrail_temp.executable.push([1, () => { 
			campaignTrail_temp.image = 'https://www.trolleytours.com/wp-content/uploads/2016/06/white-house-480x270.jpg';
			setImage(campaignTrail_temp.image); 
		}]);
		
		campaignTrail_temp.pages.push(`<div style="background: #000000; color: white; padding: 15px; display: inline-block; border-radius: 0px;"><h2><span style="color:#FF0000; font-family: Impact, sans-serif; font-size: 48px;">TMZ</span></h2><h3><span style="color:#FFFFFF; font-family: Arial, sans-serif;">BREAKING: TRUMP'S MCDONALD'S INAUGURATION FEAST -- 300 BIG MACS, DIET COKES & 'WINNERS ONLY' POLICY!!!</h3><p><span style="color:#FFFFFF; font-family: Arial, sans-serif;"> <b>Posted January 21st, 2017 @ 2:47 AM PT</b><br><br><span style="background-color: #FF0000; padding: 2px 5px;">EXCLUSIVE</span> Donald Trump just threw what multiple White House sources are calling the "most insane" inaugural celebration in presidential history -- and we've got ALL the deets!!!<br><br>TMZ has learned the new President ordered over 300 Big Macs, 400 orders of fries, and what one staffer described as "enough Diet Coke to fill the Lincoln Memorial reflecting pool" for last night's victory party. Sources tell us Trump personally inspected each burger to ensure they had "the perfect amount of special sauce," which we determined was Szechuan sauce, introduced briefly in 1998 as part of a promotional stunt for the Disney movie "Mulan".<br><br>Here's where it gets CRAZY -- we're told Hillary Clinton's portrait from her time as First Lady was temporarily removed from the East Wing and replaced with a gold-framed photo of Trump eating KFC on his private jet!!! The photo (or rather, art) in question was made by cartoonist Ben Garrison, who reportedly drew this last December to celebrate the President's triumpant win in the elections last year.<br><br>GET THIS ... Trump allegedly made guests eat their Big Macs with GOLD-PLATED UTENSILS he had specially made for the occasion. One of the 'special guests' told us, "He kept saying 'winners eat like winners' and wouldn't let anyone have dessert until they admitted his crowd was bigger than Obama's." It has also been informed to us that the "gold aesthetic" of the President is something he is planning to  focus on as he opens his first term.<br><br>The guest list was WILD too -- Kid Rock performed the national anthem (twice), followed by a rendition of his song "American Bad Ass" (relesed 2000), and -- you're not gonna believe this -- Trump advisors reportedly had a cardboard cutout of Hillary placed near the buffet table with a sign reading "LOSER'S TABLE - NO FOOD."<br><br>Multiple attendees confirmed Trump gave a toast at midnight where he declared, "The White House has never been more classy" while literally holding a Big Mac in one hand and a Diet Coke in the other. Impressive! It has also been reported that one of the attendants, 2012 nominee Mitt Romney, was spotted eating his burger with a knife and fork in the corner, looking "profoundly uncomfortable."<br><br>We reached out to Hillary's team for comment about the cardboard cutout ... this story will be updated when they reply to us.<br><br><b>UPDATE 7:48 AM:</b> Trump just tweeted: "FAKE NEWS TMZ got it wrong - I've never held a party with 300, 400, 500 Big Macs. I would Have definitely Done it, However! Thankfully, my Parties are Much bigger than all Parties that have been reported in History before. So sad!"</span></p></div>`);
		campaignTrail_temp.executable.push([2, () => { campaignTrail_temp.image = 'https://www.thetimes.com/imageserver/image/%2Fmethode%2Ftimes%2Fprod%2Fweb%2Fbin%2F8567e550-18ac-11e9-944c-54b267eb465b.jpg?crop=711%2C1067%2C444%2C0'; }]);
    }
	// Clinton win - mega landslide
	else if (playerEV >= 535){
        campaignTrail_temp.pages.push(`<div style="background: rgba(0, 0, 0, 0.5); color: white; padding: 1.2em; display: inline-block; border-radius: .5em 0 0 .5em;"><h3><span style="color:#eee;">young presidents</span></h3><p>The music was perfect. It was something with just enough beat to move to, and just enough joy to lift her spirits. Hillary found herself in the center of it all. It was funny, too — she was spinning with her arms outstretched, laughing in a way that felt both foreign and familiar. The room was pulsing with energy. There were faces beaming at her from every direction, and it was not hard to guess why.</p><p>She was grinning! Actually grinning, and it felt wonderful. When was the last time she’d smiled like this? It was not her usual campaign smile, but it was this pure, unguarded joy that seemed to bubble up from somewhere deep inside her chest.</p><p>There was a kaleidoscope of supporters and staffers and friends, all moving to the same rhythm, swirling around her. It was amazing. She caught glimpses of familiar faces within the blur; she was pretty sure she saw Huma there. There was a laugh that was almost certainly Podesta’s, but the rest was all very blurry.</p><p>She spun faster and faster, and the room was becoming a whirl of golden light. Her feet felt light, almost like she was floating. This was what victory felt like, she thought. What vindication tasted like, too. Every doubt, every sleepless night, every moment of wondering if she was asking too much of the universe… well, all of it was worth this feeling.</p><p>The music seemed to swell, to lift her higher. Hillary closed her eyes and let herself be carried by it. It was… stunning. Someone was calling her name, but it sounded distant. She was too busy, too. No, she was flying now, spinning in space, untethered from gravity and worry and a lot of other things.</p><p>“Hillary!”</p><p>The voice was sharper now. She kept spinning, kept smiling, but something was tugging at the edges of whatever was going on with her. That golden light was flickering.</p><p>“Hillary, wake up!”</p><p>Her eyes snapped open. The music cut off abruptly, and was replaced by a ringing silence that felt much more empty. She was staring at a ceiling; not the ornate ceiling of a hotel ballroom, no, but the familiar expanse of their living room in Chappaqua. She was at home. The spinning sensation continued for a moment before gradually settling into stillness.</p><p>Hillary was lying on the couch with her head against the armrest. Bill’s worried face was just hovering above her. His hand was on her shoulder.</p><p>“Hey,” he said softly. “Um… you’re okay. You’re home.”</p><p>She blinked, trying to orient herself. What?</p><p>“I was…” she started, then stopped. Had she been dancing? There had been music, she was sure of that. And lights. And a lot of faces, too. She just couldn’t remember all of them.</p><p>“What happened?” she asked, her voice sounding strange to her own ears.</p><p>Bill sat down on the edge of the coffee table, close enough to touch but giving her space to breathe. “I-I found you here about ten minutes ago. You were… I don’t know, it looked like you were dreaming, but your eyes were open. You were smiling and moving like you were dancing, but you wouldn’t respond when I called your name.”</p><p>She sat up slowly, the room tilting slightly before settling. “I… I don’t remember coming in here.”</p><p>“You were in the kitchen making tea,” Bill said carefully. “I heard the kettle whistling from upstairs, but when I came down, the stove was still on and you were here on the couch. Hillary, you were gone for almost twenty minutes.”</p><p><i>What!?</i> Twenty minutes? It had felt like hours in that other place, that… beautiful, shiny space full of music and light and the kind of happiness she’d almost forgotten was possible. But twenty minutes was, honestly, a lot.</p><p>She pressed her palms against her temples, trying to piece together the sequence of events. Tea. Hmm. She remembered wanting tea. Then the kettle, yeah. And then… nothing until the party, the dancing, and the good feeling of being exactly where she was supposed to be.</p><p>“I’m scared,” she whispered, her admission coming out before she could stop it.</p><p>Bill moved closer, taking her hands in his. “Look, we’re going to figure this out. Maybe it’s stress, maybe you’re just exhausted. When’s the last time you really slept?”</p><p>She couldn’t remember that either. The days had been blending together lately, each one carrying the weight of whatever came next, and it seemed she was always busy doing something — especially at this time of year. If anything, it felt like sleep to her had been replaced by some sort of half-conscious state that never felt like true rest.</p><p>“The party felt so real,” she said quietly. “I was so happy there.”</p><p>Bill’s expression softened. He’d watched her carry so much for so long, and had seen the way she held herself together even when the seams were showing. “Tell me about it.”</p><p>But as she tried to describe it, the details slipped away through her fingers. (Figuratively, that is.) There had been music, celebration, sure, and at least a general feeling of everything falling into place. But the specifics were gone.</p><p>Outside, evening was settling over their quiet street. She’d almost forgotten that it was Christmas season. Not that it changed much, of course, but still. She was supposed to be <i>happy</i> and not doing… whatever this was.</p><p>Hillary leaned against Bill’s shoulder, grateful for his solid presence, even as part of her longed to slip back into that other place where everything made sense and happiness wasn’t such a rare and precious thing.</p></div>`);
        campaignTrail_temp.executable.push([0, () => { campaignTrail_temp.image = 'https://media.gettyimages.com/id/51761681/pt/foto/little-rock-ar-former-u-s-president-william-j-clinton-his-wife-u-s-senator-hillary-rodham.jpg?s=612x612&w=0&k=20&c=BHLBdfEp3Q3L45QDPwBfuLO0nbs-YwEcA2jq0XzPAfk='; }]);
		
		const cabinetHTML = generateCabinetTimeline('win', playerEV, campaignTrail_temp.running_mate_id, scores);
		campaignTrail_temp.pages.push(cabinetHTML);
		campaignTrail_temp.executable.push([1, () => { 
			campaignTrail_temp.image = 'https://www.trolleytours.com/wp-content/uploads/2016/06/white-house-480x270.jpg';
			setImage(campaignTrail_temp.image); 
		}]);
    }
    // Clinton win - Obama-esque
    else if(playerEV >= 333){
        campaignTrail_temp.pages.push(`<div style="background: rgba(0, 0, 0, 0.5); color: white; padding: 1.2em; display: inline-block; border-radius: .5em 0 0 .5em;"><h3><span style="color:#eee;">all that glitters is gold</span></h3><p>It wasn’t even 11:00 PM when Pennsylvania fell. Then Wisconsin. Then Michigan. The states that were supposed to be hers all along, the ones that had slipped through her fingers like water in every poll, every projection, in every nightmare of her sleepless nights for the past eighteen months… they came home. <br/><br/>Hillary stood backstage at the Javits Center, watching the numbers crawl across the monitors. She couldn’t believe it. She was President-elect. For real real, not for play play. Everything felt strange.<br/><br/>The crowd beyond the curtain was already roaring. They knew before she did, somehow. Maybe that’s what the internet was for. Or maybe they’d always known. Perhaps they always believed in something she’d been too battered to trust.<br/><br/>She walked to the podium on rather unsteady legs. The lights were blinding and the noise was incredibly overwhelming. Thousands of faces looked up at her — men and women, young and old, black and white, and many more.<br/><br/>“My fellow Americans,” she began, and her voice caught. <em>Ouch.</em> She cleared her throat and tried again. “My fellow Americans, we have made history tonight.”<br/><br/>The roar was almost deafening. She stood there, letting it wash over her, and letting it fill the hollow spaces that over sixteen years of public service had carved out. All the times she’d been told to step aside, to wait her turn, to smile more, to be less — hell, all the ways she’d been diminished, dissected, dismissed —, it all led to this. What a ride.<br/><br/>She thought of Arkansas, of being the governor’s wife who wouldn’t take his name at first. She thought of the White House, of being the First Lady who dared to have opinions; a lot of them, too. She thought of the Senate, of having to prove herself over and over again. She thought of 2008, of coming so close the first time only to watch it slip away.<br/><br/>But tonight, ha. Tonight was different.<br/><br/>“This summer,” she continued, finding her rhythm now, “a writer asked me: If I could go back in time and tell anyone in history about this milestone, who would it be? And the answer was easy: my mother, Dorothy.”<br/><br/><i>Oh, mother.</i><br/><br/>“You may have heard me talk about her difficult childhood. She was abandoned by her parents when she was just 8 years old. They put her on a train to California, where she was mistreated by her grandparents and ended up out on her own, working as a housemaid. Yet she still found a way to offer me the boundless love and support she never received herself.”<br/><br/>Hillary’s voice was more steady now, but her heart was racing. The more she thought about it, the more it started pumping. It was as if she could feel the weight of every woman who had been told no, every girl who had been told to lower her voice, and every person who had been made to feel small. It was revealing.<br/><br/>“She taught me the words of our Methodist faith: ’Do all the good you can, for all the people you can, in all the ways you can, as long as ever you can.’”<br/><br/>The crowd was quieter now, listening. She could feel them leaning in. The moment was pretty much crystallizing around them all.<br/><br/>“I think about my mother every day. Sometimes, I think about her on that train. I wish I could walk down the aisle and find the little wooden seats where she sat, holding tight to her even-younger sister, alone, terrified. She doesn’t yet know how much she will suffer. She doesn’t yet know she will find the strength to escape that suffering — that is still a long way off. The whole future is still unknown as she stares out at the vast country moving past her.”<br/><br/>She paused. Her eyes were bright with unshed tears and, for a moment, she thought she would break down there. <i>N-no</i>. “I dream of going up to her, and sitting down next to her, taking her in my arms and saying: look at me, listen to me. You will survive. You will have a good family of your own, and three children. And as hard as it might be to imagine, your daughter will grow up and become the president of the United States.”<br/><br/>And then it all erupted. God, it felt like thunder. It may’ve very well been actual thunder. Well, kind of like breaking glass. Shattering it — haha, get it? — and every barrier that had ever existed at once.<br/><br/>“I am as sure of this as anything I have ever known,” Hillary shouted over the noise, trying her best to keep her voice strong and clear, “America is the greatest country in the world. And from tonight, going forward, together we will make America even greater than it has ever been — for <i>each and every one of us</i>.”<br/><br/>It was over. Confetti began to fall, thousands and thousands of pieces of carefully-crafted glass-like material floating down from the ceiling above, each one catching the light from the stage. The applause she was receiving now was so loud that she almost wanted to ask them to stop. It was really over.<br/><br/>Hillary stood there in the center of it all, watching it cascade around her, and for a moment she couldn’t see anything. Not the crowd, not the cameras, not the many people just a few feet behind her on stage, and not even the future that stretched out before her.<br/><br/>She smiled. It was a real smile, too, and not the practiced one she’d worn through a thousand campaign events. She laid her head down on the podium in front of her, feeling the cool wood against her forehead, and for the first time in longer than she could remember, she cried.<br/><br/>Not from sadness or exhaustion or the weight of what was to come, no. But from something simpler, something she’d almost forgotten how to feel.<br/><br/>Relief… joy… or well, the knowledge that she was enough. That she had always been enough. Hillary just couldn’t see it then.<br/><br/>She did it. The glass ceiling above her was already broken. But the one inside her, the one built from years of doubt and criticism that always whispered in her ear that she wasn’t quite what America wanted… well, that one finally shattered too.<br/><br/>In the cascading light and noise and pure, irresistible love of the moment, Hillary Clinton became what she’d always been destined to be: not just the first woman president, but exactly the president America needed.<br/><br/>She had enough. Finally, beautifully, completely, she had enough.</p></div>`);
        campaignTrail_temp.executable.push([0, () => { campaignTrail_temp.image = 'https://media.gettyimages.com/id/584451190/pt/foto/democratic-presidential-nominee-hillary-clinton-after-her-speech-to-the-democratic-national.jpg?s=612x612&w=0&k=20&c=jDrKfbdnLjsITQYNU2boMylnFF2jTAESdKwAbABqh6s='; }]);
		
		const cabinetHTML = generateCabinetTimeline('win', playerEV, campaignTrail_temp.running_mate_id, scores);
		campaignTrail_temp.pages.push(cabinetHTML);
		campaignTrail_temp.executable.push([1, () => { 
			campaignTrail_temp.image = 'https://www.trolleytours.com/wp-content/uploads/2016/06/white-house-480x270.jpg';
			setImage(campaignTrail_temp.image); 
		}]);		
    }
    // Clinton win - normal
    else if(playerEV >= 270){
        campaignTrail_temp.pages.push(`<div style="background: #fdfaf2 url('https://www.transparenttextures.com/patterns/paper-fibers.png'); color: #212121; border: 2px solid #ddd; padding: .5em 3.5em; font-family: 'Georgia', serif; line-height: 1.7; box-shadow: 0 3px 6px rgba(0,0,0,0.08), 0 10px 20px rgba(0,0,0,0.12); max-width: 800px; margin: 2em auto;"><div style="text-align: center; margin-bottom: 3.5em; border-bottom: 2px solid #b38600; padding-bottom: 2em;"> <h1 style="font-family: 'Times New Roman', Times, serif; font-size: 2.5em; font-weight: bold; color: #002D62; margin-bottom: 0.4em; letter-spacing: 0.05em;">WHAT HAPPENED NEXT</h1> <h2 style="font-family: 'Georgia', serif; font-size: 1.1em; font-weight: normal; color: #5A768A; font-style: italic; margin-bottom: 0.5em;">A Memoir of Breaking Through</h2> <p style="font-size: 0.9em; color: #5A768A; margin: 0; font-variant: small-caps; letter-spacing: 0.1em; text-align: center">Hillary Rodham Clinton</p></div><h3 style="text-align: center; font-family: 'Georgia', serif; font-weight: normal; font-style: italic; letter-spacing: .1em; border-bottom: 1px solid #e0e0e0; padding-bottom: 1em; margin-bottom: 1.5em; color: #b38600;">Chapter 18: Miss Americana</h3><blockquote style="text-align: center; font-style: italic; margin-bottom: 3em; color: #4a4a4a;"> “You have to make the good out of the bad because that’s all you have got to make it out of.” <br><cite>— Robert Penn Warren, <em>All the King’s Men</em></cite></blockquote><p style="text-indent: 0;"><span style="font-size: 4.5em; float: left; line-height: .7em; margin-right: 0.05em; margin-top: 0.1em; color: #b38600; font-family: 'Georgia', serif;">T</span>he Javits Center was all glass and steel. It was like a cathedral built to house a coronation, Bill once told me. But ambition, I learned that night, has a curfew. Ours was 2 a.m. The networks were still calling it a razor’s edge, and the union guys, who were far less patient than the rest of us, started rolling up the carpets. You can definitely rent the future, but only by the hour. That’s a detail they don’t teach you in civics class and that I should’ve recalled that night.</p><p style="text-indent: 2em;">The numbers coming in were a slow-motion car wreck. It was a cascade of bad news from places I really, really, <i>really</i> couldn’t afford to lose. Florida went south, in every sense of the word, Ohio followed it down the drain, and I watched as easily winnable Senate seats for our party swept away. The electoral map on the giant screens wasn’t just turning red; it was hemorrhaging. It felt as if I was staring at a crime scene photo where I was the primary suspect. It hurt.</p><p style="text-indent: 2em;">It’s a funny thing, politics. You spend a billion dollars to conquer the free world and you end up in a room with a minibar and a television bolted to the wall to keep honest people from stealing it. It reminds me of a quote from Vladimir Lenin, the former head of the Soviet Union. He once said “there are decades where nothing happens, and there are weeks where decades happen.” Of course, what he didn’t know is that there were also hours where millennia happen. I saw it all that night. And so there we were, like a government-in-exile before we had even formed a government, decamping to a Midtown Hilton with none of the glamour we had seen earlier that day. Our victory party had become a wake, we’d kicked ourselves out of the funeral home, and the election wasn’t even over yet.</p><p style="text-indent: 2em;">The electoral map was a splash of red with islands of blue bleeding at the edges. That had been the case for a couple of elections now, although seeing the Obama coalition made me realize that, perhaps, this could stop being the case. And then people kept going to the Blue Wall. It wasn’t a wall. Maybe once it was, but not anymore. It was just a fence at this point, and there was a big, orange-haired wolf huffing and puffing at it and making surprising headway. I’d been in a lot of fights, but this one was different. This one I was supposed to win on points, and here I was, on the ropes, praying to hear a bell that could never ring.</p><p style="text-indent: 2em;">“We’re still breathing in Michigan,” Podesta kept telling me. “If we hold Pennsylvania…” He trailed off. I didn’t even bother listening to the rest. I was tired. Ultimately, these “ifs” were cheap chips in a game where the house was raking them all in.</p><p style="text-indent: 2em;">I’d had enough. To me, hope had become that last shot of whiskey in a glass; I knew it wouldn’t be enough, and I took it anyway out of habit, but I still wanted more. More and more and more and more. But it never came. I walked into the adjoining bedroom. The bed was a rather generic slab of foam that wasn’t very comfortable. I didn’t even bother with the covers, all I wanted for a moment was to pull the plug on the world and relax in the quiet darkness behind my own eyes. For a few hours, at least, I could be a civilian again. A former First Lady. A former Secretary of State. A Presidential candidate… a loser. It’s like there was a blind spot in my head, a bullet-shaped hole where the answers should be. One could call it denial. I’ve never been a detective, and I hardly had the answers to anything, but just like one, I wanted to dig inside my skull and scrape out the pain.</p><hr style="border: 1px solid #e0e0e0"/><p style="text-indent: 2em;">I barely slept. The knock came in my door an hour or two later. Grey light was seeping through the curtains like smoke; my watch said it was a little after five. My aide, Huma stood in the doorway, silhouetted against the hallway light, looking like she’d just witnessed the end of the world. I prepared myself for it.</p><p style="text-indent: 2em;">“T-they called it,” she said. “It’s yours. It’s over.”</p><p style="text-indent: 2em;">I sat up, and it felt like the room was spinning for a second from the sudden return to consciousness. “Over how?”</p><p style="text-indent: 2em;">Something flickered across her face. It looked like a smile; I never wondered if it was meant to be one. “It’s over. You won.”</p><p style="text-indent: 2em;">Her words didn’t land. They just hung there. <em>Madam President-elect.</em> Pfft. It didn’t click. I walked back into the other room, where the other talking heads in my campaign were screaming now. The map was finally filled in. I was over 270; I won. A lot closer than I had imagined, admittedly, and this kind of felt a lot like surviving a car crash.</p><p style="text-indent: 2em;">“Give me a moment,” I said to the room. Luckily, nobody argued. Power, even the kind that comes with a few bruises, commands a certain respect.</p><p style="text-indent: 2em;">The hotel bathroom had this harsh, fluorescent light that made me shiver. I stared at the mirror and realized I looked like hell warmed over. There was mascara smudged into dark crescents under my eyes, my lipstick had all but worn off, and my hair was out of place. Still, the makeup was good stuff — god bless waterproofing. A few splashes of cold water, a little repair work with what was left in my purse, and I started to recognize myself again.</p><p style="text-indent: 2em;">That woman. That woman in the mirror had climbed mountains before. She’d taken punches from better fighters than she had ever seen. And sure, she’d been counted out more times than a bad boxer, but here she was, still standing and still swinging. I straightened my shoulders and felt something click back into place; probably my actual shoulder.</p><p style="text-indent: 2em;">When I walked back out, the room had filled up. Staffers were appearing like crazy, and all of them were trying to look like they’d never doubted this moment would come. If I walked into a tree and shook it, at least thirty of them would fall down. Podesta was on three phones at once, and his voice was strong now that he had good news to peddle. The television was still babbling, but the sound had changed. It was the sound of victory.</p><p style="text-indent: 2em;">I looked out the window. The sun was coming up over Manhattan, painting the sky the color of a rather nice purple and gold and red. It was beautiful. Especially now that I’d won the whole damn thing. The glass ceiling was broken, all right, and now I just had to walk barefoot across the shards.</p><p style="text-indent: 2em;">This wasn’t the end of the fight. I realized it was just the start of a much harder one. But I’d been getting ready for hard fights my whole life, so I expected this. And after everything, from the emails to the investigations to the rallies to the debates… I was still here. </p><p style="text-indent: 2em;">The phone was ringing again. I assumed it was probably congratulations from people who’d written my obituary twelve hours ago — famously, the New York Times does a lot of that —, but I just let someone else answer it. I needed to, even if just for a few more minutes, stand in this cracked light and remember what winning felt like. It’s what I did. It felt… different. Especially when it comes to proving the bastards wrong.</p><p style="text-indent: 2em;">Outside, New York was waking up to a different world. But inside, I was getting ready to build it.</p><div style="margin-top: 3.5em; padding-top: 2em; border-top: 1px solid #e0e0e0; text-align: center; color: #5A768A; font-size: 0.85em; font-style: italic;"> snippet from "<em>What Happened Next: A Memoir of Breaking Through</em>"<br> Published by Simon & Schuster, 2018</div></div>`);
        campaignTrail_temp.executable.push([0, () => { campaignTrail_temp.image = 'https://media.gettyimages.com/id/1430734089/pt/foto/american-politician-diplomat-and-former-lawyer-first-lady-hillary-clinton-talks-to-media-after.jpg?s=612x612&w=0&k=20&c=6H4sHrlutyJm-y74Zi1b2R4TbL29h5wH6y29ZXjFU-Q='; }]);
		
		const cabinetHTML = generateCabinetTimeline('win', playerEV, campaignTrail_temp.running_mate_id, scores);
		campaignTrail_temp.pages.push(cabinetHTML);
		campaignTrail_temp.executable.push([1, () => { 
			campaignTrail_temp.image = 'https://www.trolleytours.com/wp-content/uploads/2016/06/white-house-480x270.jpg';
			setImage(campaignTrail_temp.image); 
		}]);
    }
    // Tie/no one above 270
    else if (playerEV < 270 && opponentEVs < 270) {
        campaignTrail_temp.pages.push(`
          <div style="background: rgba(0, 0, 0, 0.5); color: white; padding: 1.2em; display: inline-block; border-radius: .5em 0 0 .5em;">
            <h3><span style="color:#eee;">awkward…!</span></h3>
            <p style="text-align:center; margin-bottom:1.5em;">
              <strong>Final Results:</strong><br>
              Clinton: ${playerEV} • Trump: ${opponentEVs || 0}
            </p>
            <p>The unthinkable has happened. For the first time since 1824, no presidential candidate has secured the 270 electoral votes needed to win. Under the 12th Amendment, the election now moves to the House of Representatives, where each state delegation gets one vote.</p>
            <p>Pundits and constitutional scholars will debate procedures not used in nearly two centuries, but you’re not thinking of that. With Republicans controlling more state delegations, the outcome seems uncertain. You think you’re screwed. You may be, indeed, screwed. But perhaps not entirely. You must now navigate the waters of Congressional politics to secure the presidency.</p>
            <p style="text-align:center; margin-top:2em; font-weight:bold;">
              Choose which House delegation to approach for negotiations:
            </p>
            <div id="coalitionList" style="margin-top:1em;"></div>
          </div>
        `);
		campaignTrail_temp.executable.push([0, () => { campaignTrail_temp.image = 'https://media.gettyimages.com/id/504723292/pt/foto/washington-dc-u-s-president-barack-obama-delivers-the-state-of-the-union-speech-before-members.jpg?s=612x612&w=0&k=20&c=2QxqRxKwm0XDen8DDZAm4oi3aqb_vNI0CfEirHi_Yrs='; }]);

        // set up the contingent election interface
        campaignTrail_temp.executable.push([0, () => {
          // calculate likelihood scores based on performance
          const likA = Math.min(4, Math.max(0, Math.round(playerEV / 270 * 4))); // Democratic Leadership
          const likB = Math.min(4, Math.max(0, Math.round((playerEV - 200) / 70 * 2))); // Blue Dogs
          const likC = Math.min(4, Math.max(0, Math.round((300 - opponentEVs) / 100 * 2))); // Republican Moderates

          addContingent(likA, likB, likC);
        }]);
    }
	
	if (playerEV >= 270 && campaignTrail_temp.running_mate_id == 211) { // Booker
		campaignTrail_temp.pages.push(`<div style="background: #ffffff; color: #111111; padding: 20px; display: inline-block; border-radius: 3px; border: 1px solid #e3e3e3; text-align: left;"> <head> <meta charset="UTF-8"> <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=PT+Serif:wght@400&display=swap" rel="stylesheet"> <style> .politico-article-container { font-family: 'Roboto', sans-serif; } .politico-category { color: #d71e25; font-weight: 700; font-size: 14px; text-transform: uppercase; margin-bottom: 8px; } .politico-headline { font-family: 'Roboto', sans-serif; font-size: 32px; font-weight: 700; line-height: 1.1; margin-bottom: 10px; color: #000000; } .politico-byline { font-size: 13px; color: #6c6c6c; margin-bottom: 15px; } .politico-body { font-family: 'PT Serif', serif; font-size: 18px; line-height: 1.6; color: #333333; } .politico-body a { color: #0065a4; text-decoration: none; } .politico-social-btn { display: inline-block; padding: 8px 12px; margin-right: 8px; border-radius: 4px; color: white; text-decoration: none; font-size: 14px; font-weight: bold; } .facebook { background-color: #3b5998; } .twitter { background-color: #1da1f2; } .politico-tags-container { border-top: 1px solid #e3e3e3; padding-top: 15px; margin-top: 20px; } .politico-tag { display: inline-block; background-color: #f1f1f1; color: #555; padding: 5px 10px; border-radius: 15px; font-size: 12px; margin: 3px; text-decoration: none; } </style> </head> <div class="politico-article-container"> <img src="https://upload.wikimedia.org/wikipedia/commons/1/11/POLITICOLOGO.svg" alt="Politico logo"> <div class="politico-category">WHITE HOUSE</div> <h1 class="politico-headline">The First 'Second Girlfriend'</h1> <p class="politico-byline">By <b>TARA PALMERI</b> and <b>JAKE SHERMAN</b> | 04/12/2017 06:12 AM EDT</p> <div style="margin-bottom: 20px;"> <a href="#" class="politico-social-btn facebook">Share on Facebook</a> <a href="#" class="politico-social-btn twitter">Share on Twitter</a> </div> <div class="politico-body"> <p>While President Clinton is busy wrangling Congress over judicial nominees, the real drama in Washington isn’t at 1600 Pennsylvania Avenue — it’s actually few miles away at Number One Observatory Circle, where the official residence of the Vice President has a new, and historically unofficial, occupant: ROSARIO DAWSON.</p> <p>The celebrated actress and activist, currently dating VICE PRESIDENT CORY BOOKER, has become a fixture in the administration’s social scene, but her undefined role is causing heartburn on both sides of the aisle. The White House has yet to issue official guidance on her title, with internal memos reportedly referring to her simply as “the Vice President’s partner.”</p> <p>Social conservatives are having a field day. “The Vice President’s residence is a symbol of the American family, not a co-ed dorm room,” said Mark Fields of the American Heritage Council in a blistering press release. The criticism has become a constant hum on conservative talk radio, but also on networks such as Fox News.</p> <p>More surprising, perhaps, is the consternation on the left. Dawson, who was a fiery surrogate for Bernie Sanders during the 2016 primary, has found herself at the heart of the establishment she once railed against. “It’s jarring,” one former Sanders staffer told POLITICO. “Everyone thought she’d be pushing for a $15 minimum wage from inside the Naval Observatory, but it seems like she's just having fun?”</p> <p>The tension boiled over last month when Dawson went off-script at a charity gala, calling the administration’s position on charter schools “a little too cozy with Wall Street for my taste.” The comment, which directly contradicted remarks by the Education Secretary, sent the VP’s comms shop into a five-alarm fire drill. For a White House that values message discipline above all, perhaps an engagement might be the cleanest way to solve its Rosario problem.</p> </div> <div class="politico-tags-container"> <span style="font-size: 14px; font-weight: bold; color: #333;">This article tagged under:</span><br> <a href="#" class="politico-tag">White House</a> <a href="#" class="politico-tag">Hillary Clinton</a> <a href="#" class="politico-tag">Cory Booker</a> <a href="#" class="politico-tag">Rosario Dawson</a> <a href="#" class="politico-tag">Clinton Administration</a> </div> </div> </div>`);
		campaignTrail_temp.executable.push([2, () => { campaignTrail_temp.image = 'https://arc-anglerfish-washpost-prod-washpost.s3.amazonaws.com/public/UVBZC6HQFQI6TCPL5RLM2QKHGI.jpg'; }]);
	}
    
    if (endingObserver) {
        endingObserver.disconnect();
        endingObserver = null;
        //console.log("Previous ending observer disconnected.");
    }

    if (attemptRenderEnding()) {
        return "";
    }

    console.log("Setting up observer for ending elements.");
    const targetNode = document.getElementById('game_screen') || document.getElementById('main_content') || document.body;
    const config = { childList: true, subtree: true };

    endingObserver = new MutationObserver((mutationsList, observer) => {
        for(const mutation of mutationsList) {
            if (mutation.type === 'childList') {
                if (attemptRenderEnding()) {
                    break;
                }
            }
        }
    });

    endingObserver.observe(targetNode, config);
    
    return "";
};

// This is a bit of a weird implementation, but it allows you
// to visualize other types of datas for your map. Cheers?
// It was made for 2012 LBM, though you might see this elsewhere.
// A couple of the visualizators here were made by routevenus,
// including the issue, coalition, and combiner ones.
// Many thanks to them for getting these cool features out!
(function () {
    const VISUALIZATION_MODES = {
        SOLID: 'solid',
        MARGINS: 'margins',
        VOTE_SHARE: 'vote_share',
        CANDIDATE_STRENGTH: 'candidate_strength',
        COMPETITIVENESS: 'competitiveness',
        TURNOUT_CHANGE: 'turnout_change',
        TIPPING_POINT: 'tipping_point',
        ISSUE_STANCE: 'issue_stance',
        ISSUE_WEIGHT: 'issue_weight',
        CANDIDATE_ISSUE_ALIGNMENT: 'candidate_issue_alignment',
        COALITION_BUILDER: 'coalition_builder',
        CANDIDATE_COMBINER: 'candidate_combiner',
        //SENATE_RACES: 'senate_races',
        //HOUSE_COMPOSITION: 'house_composition'
    };

    let currentMode = VISUALIZATION_MODES.SOLID;
    let selectedCandidateIndex = 0;
    let candidatePerformanceMode = 'absolute';
    let styleCache = {};
    let isInitialized = false;
    let candidateMaxPercentages = {};
    let stateDataCache = {};
    let selectedIssueIndex = 0;
    let selectedAlignmentCandidateIndex = 0;
    let alignmentComparisonMode = 'single';
    let selectedComparisonCandidates = [0, 1, 2, 3];
    let coalitionCandidateIndex = 0;
    let coalitionVoteShare = 0.5;
    let coalitionMode = 'solid';
    let coalitionResults = {};
    let candidates = {};

    let combinedCandidateIndex1 = 0;
    let combinedCandidateIndex2 = 2;
    let combinedCandidateIndex3 = -1;
    let combinerMode = 'two';
    let combinerResults = {};
    let showAverageIssueStance = false;

    let headToHeadMode = false;
    let headToHeadTeam1Index1 = 0;
    let headToHeadTeam1Index2 = 1;
    let headToHeadTeam2Index1 = 2;
    let headToHeadTeam2Index2 = 3;
    let headToHeadResults = {};

    let legendPosition = null;
    let legendMoved = false;

    const colorCache = {};
    const stateUpdateQueue = [];
    let animationFrameRequested = false;

    let dragState = {
        isDragging: false,
        currentElement: null,
        startX: 0,
        startY: 0,
        startLeft: 0,
        startTop: 0
    };

    const SENATE_INCUMBENT_PARTIES = {
        'AZ': 'R', 'CA': 'D', 'CT': 'I', 'DE': 'D', 'FL': 'D', 'HI': 'D', 'IN': 'R', 'ME': 'R',
        'MD': 'D', 'MA': 'R', 'MI': 'D', 'MN': 'D', 'MS': 'R', 'MO': 'D', 'MT': 'D', 'NE': 'D',
        'NV': 'R', 'NJ': 'D', 'NM': 'D', 'NY': 'D', 'ND': 'D', 'OH': 'D', 'PA': 'D', 'RI': 'D',
        'TN': 'R', 'TX': 'R', 'UT': 'R', 'VT': 'I', 'VA': 'D', 'WA': 'D', 'WV': 'D', 'WI': 'D', 'WY': 'R'
    };

    function makeDraggable(element, handle = null) {
        const dragHandle = handle || element;

        dragHandle.style.cursor = 'move';

        if (!handle) {
            element.style.borderTop = '3px solid #007acc';
        } else {
            handle.style.background = 'linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%)';
            handle.style.borderBottom = '1px solid #ccc';
        }

        function startDrag(e) {
            e.preventDefault();
            e.stopPropagation();

            dragState.isDragging = true;
            dragState.currentElement = element;

            const rect = element.getBoundingClientRect();

            dragState.startX = e.clientX;
            dragState.startY = e.clientY;
            dragState.startLeft = rect.left;
            dragState.startTop = rect.top;

            element.style.position = 'absolute';
            element.style.left = rect.left + 'px';
            element.style.top = rect.top + 'px';
            element.style.right = 'auto';
            element.style.bottom = 'auto';
            element.style.zIndex = '10001';
            element.style.opacity = '0.9';

            document.addEventListener('mousemove', drag);
            document.addEventListener('mouseup', stopDrag);

            document.body.style.userSelect = 'none';
        }

        function drag(e) {
            if (!dragState.isDragging || dragState.currentElement !== element) return;

            e.preventDefault();

            const deltaX = e.clientX - dragState.startX;
            const deltaY = e.clientY - dragState.startY;

            const newLeft = dragState.startLeft + deltaX;
            const newTop = dragState.startTop + deltaY;

            const elementRect = element.getBoundingClientRect();
            const maxLeft = window.innerWidth - elementRect.width;
            const maxTop = window.innerHeight - elementRect.height;

            const constrainedLeft = Math.max(0, Math.min(newLeft, maxLeft));
            const constrainedTop = Math.max(0, Math.min(newTop, maxTop));

            element.style.left = constrainedLeft + 'px';
            element.style.top = constrainedTop + 'px';
        }

        function stopDrag(e) {
            if (!dragState.isDragging || dragState.currentElement !== element) return;

            dragState.isDragging = false;
            dragState.currentElement = null;

            element.style.zIndex = '1000';
            element.style.opacity = '1';

            document.removeEventListener('mousemove', drag);
            document.removeEventListener('mouseup', stopDrag);

            document.body.style.userSelect = '';

            if (element.id === 'map_legend' || element.id === 'map_controls') {
                const rect = element.getBoundingClientRect();
                const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
                if (element.id === 'map_legend') {
                    legendPosition = {
                        left: rect.left,
                        top: rect.top + scrollTop
                    };
                    legendMoved = true;
                }
            }
        }

        dragHandle.addEventListener('mousedown', startDrag);

        dragHandle.addEventListener('touchstart', function (e) {
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousedown', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            startDrag(mouseEvent);
        });

        document.addEventListener('touchmove', function (e) {
            if (dragState.isDragging && dragState.currentElement === element) {
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent('mousemove', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                drag(mouseEvent);
                e.preventDefault();
            }
        });

        document.addEventListener('touchend', function (e) {
            if (dragState.isDragging && dragState.currentElement === element) {
                const mouseEvent = new MouseEvent('mouseup', {});
                stopDrag(mouseEvent);
            }
        });
    }

    function hexToRgb(hex) {
        if (colorCache[hex] && colorCache[hex].rgb) {
            return colorCache[hex].rgb;
        }

        hex = hex.replace(/^#/, '');
        const num = parseInt(hex, 16);
        const rgb = [(num >> 16) & 0xff, (num >> 8) & 0xff, num & 0xff];

        if (!colorCache[hex]) colorCache[hex] = {};
        colorCache[hex].rgb = rgb;

        return rgb;
    }

    function rgbToHex(r, g, b) {

        r = Math.max(0, Math.min(255, Math.round(r)));
        g = Math.max(0, Math.min(255, Math.round(g)));
        b = Math.max(0, Math.min(255, Math.round(b)));

        const key = `${r},${g},${b}`;

        if (colorCache[key] && colorCache[key].hex) {
            return colorCache[key].hex;
        }

        const hex = `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;

        if (!colorCache[key]) colorCache[key] = {};
        colorCache[key].hex = hex;

        return hex;
    }

    function interpolateColor(c1, c2, factor = 0.5) {
        if (factor <= 0) return c1;
        if (factor >= 1) return c2;

        return c1.map((v, i) => Math.round(v + factor * (c2[i] - v)));
    }

    function varyHexColor(hex, variationFrac = 0.05) {
        const rgb = hexToRgb(hex);
        const newRgb = rgb.map(channel => {
            const delta = (Math.random() * 2 - 1) * variationFrac * 255;
            return Math.max(0, Math.min(255, Math.round(channel + delta)));
        });
        return rgbToHex(...newRgb);
    }

    function blendMarginColor(baseColor, margin) {
        const cacheKey = `margin_${baseColor}_${margin.toFixed(4)}`;
        if (colorCache[cacheKey]) return colorCache[cacheKey];

        const baseRGB = hexToRgb(baseColor);
        const whiteRGB = [255, 255, 255];

        let blendFactor;
        if (margin < 0.01) {

            blendFactor = 0.15;
        } else if (margin < 0.05) {

            blendFactor = 0.15 + (margin - 0.01) * 8;
        } else if (margin < 0.10) {

            blendFactor = 0.47 + (margin - 0.05) * 5;
        } else if (margin < 0.15) {

            blendFactor = 0.72 + (margin - 0.10) * 3;
        } else {

            blendFactor = 0.87 + Math.min((margin - 0.15) * 1.3, 0.13);
        }

        const blendedRGB = interpolateColor(whiteRGB, baseRGB, blendFactor);
        const result = rgbToHex(...blendedRGB);

        colorCache[cacheKey] = result;

        return result;
    }

    function blendPerformanceColor(baseColor, percent, candidateData) {
        const cacheKey = `perf_${baseColor}_${percent.toFixed(4)}_${candidateData.max.toFixed(4)}`;
        if (colorCache[cacheKey]) return colorCache[cacheKey];

        const baseRGB = hexToRgb(baseColor);
        const maxPct = candidateData.max;
        const avgPct = candidateData.avg;
        const p90 = candidateData.p90;
        const p10 = candidateData.p10;

        const candidatePk = Object.keys(candidateMaxPercentages).find(pk =>
            candidateMaxPercentages[pk] === candidateData
        );
        const hasElectoralVotes = campaignTrail_temp.final_overall_results
            .find(r => r.candidate == candidatePk)?.electoral_votes > 0;

        let targetRGB;
        let intensity;

        if (!hasElectoralVotes || maxPct <= 0.15) {

            const normalizedPct = percent / Math.max(maxPct, 0.001);

            if (normalizedPct > 0.85) {

                targetRGB = baseRGB;
                intensity = 0.9;
            } else if (normalizedPct > 0.70) {

                targetRGB = baseRGB.map(c => Math.min(255, c + 15));
                intensity = 0.75;
            } else if (normalizedPct > 0.55) {

                targetRGB = baseRGB.map(c => Math.min(255, c + 35));
                intensity = 0.60;
            } else if (normalizedPct > 0.40) {

                targetRGB = baseRGB.map(c => Math.min(255, c + 60));
                intensity = 0.45;
            } else if (normalizedPct > 0.25) {

                targetRGB = baseRGB.map(c => Math.min(255, c + 90));
                intensity = 0.35;
            } else if (normalizedPct > 0.10) {

                targetRGB = baseRGB.map(c => Math.min(255, c + 120));
                intensity = 0.25;
            } else {

                targetRGB = baseRGB.map(c => Math.min(255, c + 150));
                intensity = 0.18;
            }
        } else if (maxPct > 0.75 && maxPct - p90 > 0.15) {

            if (percent > p90) {
                targetRGB = baseRGB;
                intensity = 0.95;
            } else if (percent > avgPct) {
                const lightBaseRGB = baseRGB.map(c => Math.min(255, c + 30));
                targetRGB = lightBaseRGB;
                const positionInUpperRange = (p90 > avgPct) ? (percent - avgPct) / (p90 - avgPct) : 1;
                intensity = 0.6 + (positionInUpperRange * 0.3);
            } else if (percent > p10) {
                const veryLightRGB = baseRGB.map(c => Math.min(255, c + 80));
                targetRGB = veryLightRGB;
                const positionInLowerRange = (avgPct > p10) ? (percent - p10) / (avgPct - p10) : 1;
                intensity = 0.3 + (positionInLowerRange * 0.25);
            } else {
                const pastelRGB = baseRGB.map(c => Math.min(255, c + 120));
                targetRGB = pastelRGB;
                intensity = 0.2 + (p10 > 0 ? (percent / p10) * 0.15 : 0);
            }
        } else if (maxPct > 0.40) {

            const normalizedPct = percent / maxPct;

            if (normalizedPct > 0.8) {
                targetRGB = baseRGB;
                intensity = 0.85 + (normalizedPct - 0.8) * 0.75;
            } else if (normalizedPct > 0.6) {
                targetRGB = baseRGB.map(c => Math.min(255, c + 20));
                intensity = 0.7 + (normalizedPct - 0.6) * 0.75;
            } else if (normalizedPct > 0.4) {
                targetRGB = baseRGB.map(c => Math.min(255, c + 50));
                intensity = 0.5 + (normalizedPct - 0.4) * 1.0;
            } else if (normalizedPct > 0.2) {
                targetRGB = baseRGB.map(c => Math.min(255, c + 80));
                intensity = 0.3 + (normalizedPct - 0.2) * 1.0;
            } else {
                targetRGB = baseRGB.map(c => Math.min(255, c + 110));
                intensity = 0.2 + normalizedPct * 0.5;
            }
        } else if (maxPct > 0.15) {

            const normalizedPct = percent / maxPct;
            const exponentialScale = Math.pow(normalizedPct, 0.7);

            if (exponentialScale > 0.7) {
                targetRGB = baseRGB.map(c => Math.min(255, c + 10));
                intensity = 0.7 + (exponentialScale - 0.7) * 0.8;
            } else if (exponentialScale > 0.4) {
                targetRGB = baseRGB.map(c => Math.min(255, c + 40));
                intensity = 0.45 + (exponentialScale - 0.4) * 0.8;
            } else {
                targetRGB = baseRGB.map(c => Math.min(255, c + 80));
                intensity = 0.25 + exponentialScale * 0.5;
            }
        }

        const whiteRGB = [255, 255, 255];
        const blendedRGB = interpolateColor(whiteRGB, targetRGB, intensity);
        const result = rgbToHex(...blendedRGB);

        colorCache[cacheKey] = result;
        return result;
    }

    function blendRelativePerformanceColor(baseColor, relativePercent, nationalAverage) {
        const cacheKey = `rel_perf_${baseColor}_${relativePercent.toFixed(4)}_${nationalAverage.toFixed(4)}`;
        if (colorCache[cacheKey]) return colorCache[cacheKey];

        const baseRGB = hexToRgb(baseColor);
        let targetRGB;
        let intensity;

        let scalingFactor = 1.0;
        if (nationalAverage < 0.10) {
            scalingFactor = Math.max(0.1, nationalAverage * 10);
        }

        const performanceRatio = nationalAverage > 0 ? (relativePercent + nationalAverage) / nationalAverage : 1;

        if (nationalAverage < 0.10) {
            if (performanceRatio > 2.0) {

                targetRGB = baseRGB.map(c => Math.max(0, c - 30));
                intensity = 0.95;
            } else if (performanceRatio > 1.5) {

                targetRGB = baseRGB.map(c => Math.max(0, c - 20));
                intensity = 0.85;
            } else if (performanceRatio > 1.2) {

                targetRGB = baseRGB;
                intensity = 0.75;
            } else if (performanceRatio > 0.8) {

                targetRGB = baseRGB.map(c => Math.min(255, c + 30));
                intensity = 0.60;
            } else if (performanceRatio > 0.5) {

                targetRGB = baseRGB.map(c => Math.min(255, c + 60));
                intensity = 0.45;
            } else if (performanceRatio > 0.2) {

                targetRGB = baseRGB.map(c => Math.min(255, c + 90));
                intensity = 0.30;
            } else {

                targetRGB = baseRGB.map(c => Math.min(255, c + 120));
                intensity = 0.20;
            }
        } else {

            if (relativePercent > 0.15) {
                targetRGB = baseRGB.map(c => Math.max(0, c - 30));
                intensity = 0.95;
            } else if (relativePercent > 0.10) {
                targetRGB = baseRGB.map(c => Math.max(0, c - 20));
                intensity = 0.90;
            } else if (relativePercent > 0.05) {
                targetRGB = baseRGB.map(c => Math.max(0, c - 10));
                intensity = 0.85;
            } else if (relativePercent > 0.02) {
                targetRGB = baseRGB;
                intensity = 0.80;
            } else if (relativePercent > -0.02) {
                targetRGB = baseRGB.map(c => Math.min(255, c + 20));
                intensity = 0.65;
            } else if (relativePercent > -0.05) {
                targetRGB = baseRGB.map(c => Math.min(255, c + 40));
                intensity = 0.50;
            } else if (relativePercent > -0.10) {
                targetRGB = baseRGB.map(c => Math.min(255, c + 70));
                intensity = 0.35;
            } else if (relativePercent > -0.15) {
                targetRGB = baseRGB.map(c => Math.min(255, c + 100));
                intensity = 0.25;
            } else {
                targetRGB = baseRGB.map(c => Math.min(255, c + 130));
                intensity = 0.15;
            }
        }

        const whiteRGB = [255, 255, 255];
        const blendedRGB = interpolateColor(whiteRGB, targetRGB, intensity);
        const result = rgbToHex(...blendedRGB);

        colorCache[cacheKey] = result;
        return result;
    }

    function getCompetitivenessColor(margin) {
        const cacheKey = `comp_${margin.toFixed(4)}`;
        if (colorCache[cacheKey]) return colorCache[cacheKey];

        let result;
        if (margin < 0.01) {
            result = "#FF0000";
        } else if (margin < 0.025) {
            result = "#FF3300";
        } else if (margin < 0.05) {
            result = "#FF6600";
        } else if (margin < 0.075) {
            result = "#FF9900";
        } else if (margin < 0.10) {
            result = "#FFCC00";
        } else if (margin < 0.15) {
            result = "#FFFF00";
        } else if (margin < 0.20) {
            result = "#AADD00";
        } else if (margin < 0.30) {
            result = "#55BB00";
        } else {
            result = "#0000FF";
        }

        colorCache[cacheKey] = result;

        return result;
    }

    function getTurnoutChangeColor(changePercent) {
        const cacheKey = `turnout_change_${changePercent.toFixed(2)}`;
        if (colorCache[cacheKey]) return colorCache[cacheKey];

        let result;
        if (changePercent <= -10) {
            result = "#8B0000";
        } else if (changePercent <= -7.5) {
            result = "#B22222";
        } else if (changePercent <= -5) {
            result = "#FF0000";
        } else if (changePercent <= -2.5) {
            result = "#FF6347";
        } else if (changePercent <= -1) {
            result = "#FFA07A";
        } else if (changePercent < 1) {
            result = "#F5F5F5";
        } else if (changePercent < 2.5) {
            result = "#90EE90";
        } else if (changePercent < 5) {
            result = "#3CB371";
        } else if (changePercent < 7.5) {
            result = "#2E8B57";
        } else if (changePercent < 10) {
            result = "#228B22";
        } else {
            result = "#006400";
        }

        colorCache[cacheKey] = result;

        return result;
    }

    function getIssueStanceColor(stanceValue) {
        const cacheKey = `issue_stance_${stanceValue.toFixed(4)}`;
        if (colorCache[cacheKey]) return colorCache[cacheKey];

        let stanceNumber = 7;

        if (campaignTrail_temp.global_parameter_json && campaignTrail_temp.global_parameter_json[0]) {
            const globalParams = campaignTrail_temp.global_parameter_json[0].fields;

            if (stanceValue <= globalParams.issue_stance_1_max) {
                stanceNumber = 1;
            } else if (stanceValue <= globalParams.issue_stance_2_max) {
                stanceNumber = 2;
            } else if (stanceValue <= globalParams.issue_stance_3_max) {
                stanceNumber = 3;
            } else if (stanceValue <= globalParams.issue_stance_4_max) {
                stanceNumber = 4;
            } else if (stanceValue <= globalParams.issue_stance_5_max) {
                stanceNumber = 5;
            } else if (stanceValue <= globalParams.issue_stance_6_max) {
                stanceNumber = 6;
            }

        } else {

            if (stanceValue <= -0.71) {
                stanceNumber = 1;
            } else if (stanceValue <= -0.42) {
                stanceNumber = 2;
            } else if (stanceValue <= -0.13) {
                stanceNumber = 3;
            } else if (stanceValue <= 0.16) {
                stanceNumber = 4;
            } else if (stanceValue <= 0.45) {
                stanceNumber = 5;
            } else if (stanceValue <= 0.74) {
                stanceNumber = 6;
            }
        }

        const colors = [
            "#8B0000",
            "#FF0000",
            "#FF8D1C",
            "#FFD700",
            "#32CD32",
            "#0000FF",
            "#000080"
        ];

        const result = colors[stanceNumber - 1];
        colorCache[cacheKey] = result;
        return result;
    }

    function getStanceNumber(stanceValue) {
        if (campaignTrail_temp.global_parameter_json && campaignTrail_temp.global_parameter_json[0]) {
            const globalParams = campaignTrail_temp.global_parameter_json[0].fields;

            if (stanceValue <= globalParams.issue_stance_1_max) return 1;
            if (stanceValue <= globalParams.issue_stance_2_max) return 2;
            if (stanceValue <= globalParams.issue_stance_3_max) return 3;
            if (stanceValue <= globalParams.issue_stance_4_max) return 4;
            if (stanceValue <= globalParams.issue_stance_5_max) return 5;
            if (stanceValue <= globalParams.issue_stance_6_max) return 6;
            return 7;
        } else {

            if (stanceValue <= -0.71) return 1;
            if (stanceValue <= -0.42) return 2;
            if (stanceValue <= -0.13) return 3;
            if (stanceValue <= 0.16) return 4;
            if (stanceValue <= 0.45) return 5;
            if (stanceValue <= 0.74) return 6;
            return 7;
        }
    }

    function getIssueWeightColor(weight, issueIndex) {
        const cacheKey = `issue_weight_${weight.toFixed(4)}_${issueIndex}`;
        if (colorCache[cacheKey]) return colorCache[cacheKey];

        const weightRange = getIssueWeightRange(issueIndex);

        if (!weightRange || weightRange.min === weightRange.max || (weightRange.max - weightRange.min) <= 0.15) {

            return getStaticIssueWeightColor(weight);
        }

        const normalizedWeight = (weight - weightRange.min) / (weightRange.max - weightRange.min);

        const lightBlue = [248, 248, 255];
        const darkBlue = [0, 0, 205];

        const blendedRGB = interpolateColor(lightBlue, darkBlue, normalizedWeight);
        const result = rgbToHex(...blendedRGB);

        colorCache[cacheKey] = result;
        return result;
    }

    function getIssueWeightRange(issueIndex) {
        if (!campaignTrail_temp.issues_json || issueIndex >= campaignTrail_temp.issues_json.length) {
            return null;
        }

        const issue = campaignTrail_temp.issues_json[issueIndex];
        let minWeight = Infinity;
        let maxWeight = -Infinity;
        let hasData = false;

        campaignTrail_temp.final_state_results.forEach(stateResult => {
            const stateId = stateResult.state;

            const stateIssueData = campaignTrail_temp.state_issue_score_json?.find(
                sis => sis.fields.state === stateId && sis.fields.issue === issue.pk
            );

            if (stateIssueData) {
                const weight = stateIssueData.fields.weight;
                minWeight = Math.min(minWeight, weight);
                maxWeight = Math.max(maxWeight, weight);
                hasData = true;
            }
        });

        return hasData ? { min: minWeight, max: maxWeight } : null;
    }

    function getStaticIssueWeightColor(weight) {
        const normalizedWeight = Math.min(weight, 1.0);

        if (normalizedWeight < 0.1) {
            return "#F8F8FF";
        } else if (normalizedWeight < 0.25) {
            return "#E6E6FA";
        } else if (normalizedWeight < 0.4) {
            return "#B0C4DE";
        } else if (normalizedWeight < 0.55) {
            return "#87CEEB";
        } else if (normalizedWeight < 0.7) {
            return "#4682B4";
        } else if (normalizedWeight < 0.85) {
            return "#1E90FF";
        } else {
            return "#0000CD";
        }
    }

    function getAverageIssueStanceColor(averageStance) {
        const cacheKey = `avg_issue_stance_${averageStance.toFixed(4)}`;
        if (colorCache[cacheKey]) return colorCache[cacheKey];

        let stanceNumber = 7;

        if (campaignTrail_temp.global_parameter_json && campaignTrail_temp.global_parameter_json[0]) {
            const globalParams = campaignTrail_temp.global_parameter_json[0].fields;

            if (averageStance <= globalParams.issue_stance_1_max) {
                stanceNumber = 1;
            } else if (averageStance <= globalParams.issue_stance_2_max) {
                stanceNumber = 2;
            } else if (averageStance <= globalParams.issue_stance_3_max) {
                stanceNumber = 3;
            } else if (averageStance <= globalParams.issue_stance_4_max) {
                stanceNumber = 4;
            } else if (averageStance <= globalParams.issue_stance_5_max) {
                stanceNumber = 5;
            } else if (averageStance <= globalParams.issue_stance_6_max) {
                stanceNumber = 6;
            }
        } else {

            if (averageStance <= -0.71) {
                stanceNumber = 1;
            } else if (averageStance <= -0.42) {
                stanceNumber = 2;
            } else if (averageStance <= -0.13) {
                stanceNumber = 3;
            } else if (averageStance <= 0.16) {
                stanceNumber = 4;
            } else if (averageStance <= 0.45) {
                stanceNumber = 5;
            } else if (averageStance <= 0.74) {
                stanceNumber = 6;
            }
        }

        const colors = [
            "#8B0000",
            "#FF0000",
            "#FF8D1C",
            "#FFD700",
            "#32CD32",
            "#0000FF",
            "#000080"
        ];

        const result = colors[stanceNumber - 1];
        colorCache[cacheKey] = result;
        return result;
    }

    function getCandidateIssueAlignment(stateScore, candidateScore) {
        const cacheKey = `alignment_${stateScore.toFixed(4)}_${candidateScore.toFixed(4)}`;
        if (colorCache[cacheKey]) return colorCache[cacheKey];

        const alignment = Math.abs(stateScore - candidateScore);

        let result;
        if (alignment < 0.2) {
            result = "#006400";
        } else if (alignment < 0.4) {
            result = "#228B22";
        } else if (alignment < 0.6) {
            result = "#32CD32";
        } else if (alignment < 0.8) {
            result = "#FFD700";
        } else if (alignment < 1.0) {
            result = "#FF8C00";
        } else if (alignment < 1.2) {
            result = "#FF4500";
        } else {
            result = "#8B0000";
        }

        colorCache[cacheKey] = result;
        return result;
    }

    function getAverageCandidateIssueAlignment(stateAverageScore, candidateAverageScore) {
        const cacheKey = `avg_alignment_${stateAverageScore.toFixed(4)}_${candidateAverageScore.toFixed(4)}`;
        if (colorCache[cacheKey]) return colorCache[cacheKey];

        const alignment = Math.abs(stateAverageScore - candidateAverageScore);

        let result;
        if (alignment < 0.2) {
            result = "#006400";
        } else if (alignment < 0.4) {
            result = "#228B22";
        } else if (alignment < 0.6) {
            result = "#32CD32";
        } else if (alignment < 0.8) {
            result = "#FFD700";
        } else if (alignment < 1.0) {
            result = "#FF8C00";
        } else if (alignment < 1.2) {
            result = "#FF4500";
        } else {
            result = "#8B0000";
        }

        colorCache[cacheKey] = result;
        return result;
    }

    function blendVoteShareColor(baseColor, voteShare) {
        const cacheKey = `voteshare_${baseColor}_${voteShare.toFixed(4)}`;
        if (colorCache[cacheKey]) return colorCache[cacheKey];

        const baseRGB = hexToRgb(baseColor);

        const [r, g, b] = baseRGB.map(c => c / 255);
        const max = Math.max(r, g, b);
        const min = Math.min(r, g, b);
        const diff = max - min;

        let h, s, l;
        l = (max + min) / 2;

        if (diff === 0) {
            h = s = 0;
        } else {
            s = l > 0.5 ? diff / (2 - max - min) : diff / (max + min);
            switch (max) {
                case r:
                    h = (g - b) / diff + (g < b ? 6 : 0);
                    break;
                case g:
                    h = (b - r) / diff + 2;
                    break;
                case b:
                    h = (r - g) / diff + 4;
                    break;
            }
            h /= 6;
        }

        function hslToRgb(h, s, l) {
            let r, g, b;

            if (s === 0) {
                r = g = b = l;
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1 / 6) return p + (q - p) * 6 * t;
                    if (t < 1 / 2) return q;
                    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;
                    return p;
                };

                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1 / 3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1 / 3);
            }

            return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
        }

        let resultRGB;

        if (voteShare < 0.10) {
            const lightL = 0.97;
            const lightS = Math.min(s * 0.15, 0.1);
            resultRGB = hslToRgb(h, lightS, lightL);
        } else if (voteShare < 0.20) {
            const lightL = 0.95;
            const lightS = Math.min(s * 0.25, 0.2);
            resultRGB = hslToRgb(h, lightS, lightL);
        } else if (voteShare < 0.30) {
            const lightL = 0.92;
            const lightS = Math.min(s * 0.4, 0.35);
            resultRGB = hslToRgb(h, lightS, lightL);
        } else if (voteShare < 0.40) {
            const lightL = 0.88;
            const lightS = Math.min(s * 0.6, 0.5);
            resultRGB = hslToRgb(h, lightS, lightL);
        } else if (voteShare < 0.50) {
            const medL = 0.82;
            const medS = Math.min(s * 0.8, 0.7);
            resultRGB = hslToRgb(h, medS, medL);
        } else if (voteShare < 0.60) {
            const medL = 0.72;
            const medS = Math.min(s * 1.0, 0.85);
            resultRGB = hslToRgb(h, medS, medL);
        } else if (voteShare < 0.70) {
            const strongL = 0.60;
            const strongS = Math.min(s * 1.1, 0.95);
            resultRGB = hslToRgb(h, strongS, strongL);
        } else if (voteShare < 0.80) {
            const strongL = 0.48;
            const strongS = Math.min(s * 1.15, 1.0);
            resultRGB = hslToRgb(h, strongS, strongL);
        } else if (voteShare < 0.90) {
            const darkL = 0.35;
            const darkS = Math.min(s * 1.2, 1.0);
            resultRGB = hslToRgb(h, darkS, darkL);
        } else {
            const darkestL = 0.25;
            const darkestS = Math.min(s * 1.25, 1.0);
            resultRGB = hslToRgb(h, darkestS, darkestL);
        }

        resultRGB = resultRGB.map(c => Math.max(0, Math.min(255, Math.round(c))));

        const result = rgbToHex(...resultRGB);
        colorCache[cacheKey] = result;
        return result;
    }
	
    function getSenateHoldsGainsColor(stateAbbr, raceData) {
        const preElectionParty = SENATE_INCUMBENT_PARTIES[stateAbbr];
        if (!preElectionParty) return "#CCCCCC";

        let winnerParty = 'D';
        if (raceData.rep > raceData.dem && raceData.rep > (raceData.trd || 0)) {
            winnerParty = 'R';
        } else if ((raceData.trd || 0) > raceData.dem && (raceData.trd || 0) > raceData.rep) {
            winnerParty = 'I';
        }

        if (winnerParty === preElectionParty) {
            if (winnerParty === 'D') return '#92C5DE';
            if (winnerParty === 'R') return '#F48882';
            if (winnerParty === 'I') return '#999999';
        } else {
            if (winnerParty === 'D') return '#0671B0';
            if (winnerParty === 'R') return '#CA0120';
            if (winnerParty === 'I') return '#666666';
        }

        return "#CCCCCC";
    }

    function darkenColor(color, amount = 30) {
        const cacheKey = `dark_${color}_${amount}`;
        if (colorCache[cacheKey]) return colorCache[cacheKey];

        const rgb = hexToRgb(color);
        const darkerRgb = rgb.map(v => Math.max(0, v - amount));
        const result = rgbToHex(...darkerRgb);

        colorCache[cacheKey] = result;

        return result;
    }

    function calculatePercentile(values, percentile) {
        if (!values || values.length === 0) return 0;
        const sortedValues = [...values].sort((a, b) => a - b);
        const index = Math.floor(sortedValues.length * (percentile / 100));
        return sortedValues[index];
    }

    function getTurnoutChangeData() {
        const turnoutChangeData = {};

        campaignTrail_temp.states_json.forEach(state => {
            const stateId = state.pk;

            let actualVotes = 0;
            const stateResults = campaignTrail_temp.final_state_results.find(r => r.state === stateId);

            if (stateResults && stateResults.result) {
                stateResults.result.forEach(candidateResult => {
                    actualVotes += candidateResult.votes || 0;
                });
            } else {

                actualVotes = state.fields.popular_votes;
            }

            const originalTurnout = campaignTrail_temp.TurnoutSystem?.originalTurnouts?.[stateId] || state.fields.popular_votes;
            const changePercent = originalTurnout > 0 ? ((actualVotes - originalTurnout) / originalTurnout) * 100 : 0;
            turnoutChangeData[stateId] = changePercent;
        });

        return turnoutChangeData;
    }

    function analyzePerformanceData() {
        candidates = [];
        campaignTrail_temp.final_state_results[0].result.forEach(result => {
            const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
            if (candidate) candidates.push(candidate);
        });

        candidateMaxPercentages = {};
        candidates.forEach(candidate => {
            candidateMaxPercentages[candidate.pk] = {
                max: 0,
                min: 1,
                avg: 0,
                median: 0,
                counts: 0,
                percentiles: []
            };
        });

        campaignTrail_temp.final_state_results.forEach(stateResult => {
            stateResult.result.forEach(candidateResult => {
                if (stateResult.abbr === "DC") return;
                const candidateData = candidateMaxPercentages[candidateResult.candidate];
                if (candidateData) {
                    candidateData.max = Math.max(candidateData.max, candidateResult.percent);
                    candidateData.min = Math.min(candidateData.min, candidateResult.percent);
                    candidateData.avg += candidateResult.percent;
                    candidateData.counts++;
                    candidateData.percentiles.push(candidateResult.percent);
                }
            });
        });

        Object.values(candidateMaxPercentages).forEach(data => {
            if (data.counts > 0) {
                data.avg /= data.counts;
                data.percentiles.sort((a, b) => a - b);

                const midIndex = Math.floor(data.percentiles.length / 2);
                data.median = data.percentiles.length % 2 === 0 ?
                    (data.percentiles[midIndex - 1] + data.percentiles[midIndex]) / 2 :
                    data.percentiles[midIndex];

                data.p10 = calculatePercentile(data.percentiles, 10);
                data.p90 = calculatePercentile(data.percentiles, 90);
                data.p95 = calculatePercentile(data.percentiles, 95);
            }
        });
    }

    function getPerformanceThresholds(candidatePk) {
        const data = candidateMaxPercentages[candidatePk];
        if (!data || data.counts === 0) return [0.6, 0.5, 0.4, 0.3, 0.2, 0.1, 0.05];

        let maxPct = data.max;
        const p90 = data.p90;
        const avgPct = data.avg;
        const p10 = data.p10;
        const minPct = data.min;

        const hasElectoralVotes = campaignTrail_temp.final_overall_results
            .find(r => r.candidate == candidatePk)?.electoral_votes > 0;

        // lower the maxPct if DC is a big outlier
        const dcResult = campaignTrail_temp.final_state_results.find(r => r.abbr === "DC");
        if (dcResult) {
            const dcCandidate = dcResult.result.find(c => c.candidate === candidatePk);
            if (dcCandidate && dcCandidate.percent === maxPct) {
                if (dcCandidate.percent > p90 * 1.3 && p90 > 0.10) {
                    maxPct = p90 * 1.1;
                }
            }
        }

        let thresholds;

        if (!hasElectoralVotes || maxPct <= 0.15) {

            if (maxPct > 0.08) {

                thresholds = [
                    maxPct,
                    maxPct * 0.85,
                    maxPct * 0.70,
                    maxPct * 0.55,
                    maxPct * 0.40,
                    maxPct * 0.25,
                    maxPct * 0.12
                ];
            } else if (maxPct > 0.03) {

                thresholds = [
                    maxPct,
                    maxPct * 0.80,
                    maxPct * 0.60,
                    maxPct * 0.40,
                    maxPct * 0.25,
                    maxPct * 0.10
                ];
            } else {

                const increment = maxPct / 5;
                thresholds = [
                    maxPct,
                    maxPct - increment * 0.8,
                    maxPct - increment * 1.8,
                    maxPct - increment * 2.9,
                    maxPct - increment * 4.1
                ].filter(v => v > 0);
            }
        } else if (maxPct > 0.50) {

            if (maxPct - p90 > 0.20) {
                thresholds = [
                    maxPct,
                    Math.max(p90, maxPct * 0.88),
                    Math.max(avgPct + (p90 - avgPct) * 0.6, maxPct * 0.75),
                    Math.max(avgPct, maxPct * 0.62),
                    Math.max(avgPct * 0.7, maxPct * 0.45),
                    Math.max(p10, maxPct * 0.28),
                    Math.max(minPct, maxPct * 0.15)
                ];
            } else {
                thresholds = [
                    maxPct,
                    maxPct * 0.85,
                    maxPct * 0.70,
                    maxPct * 0.55,
                    maxPct * 0.40,
                    maxPct * 0.25,
                    maxPct * 0.12
                ];
            }
        } else if (maxPct > 0.25) {

            thresholds = [
                maxPct,
                maxPct * 0.82,
                maxPct * 0.65,
                maxPct * 0.48,
                maxPct * 0.32,
                maxPct * 0.18,
                maxPct * 0.08
            ];
        } else {

            const base = Math.pow(maxPct, 1 / 6);
            thresholds = [
                maxPct,
                Math.pow(base, 5),
                Math.pow(base, 4.2),
                Math.pow(base, 3.5),
                Math.pow(base, 2.8),
                Math.pow(base, 2.0),
                Math.pow(base, 1.2)
            ];
        }

        thresholds = thresholds
            .filter(v => v > 0)
            .filter((v, i, arr) => i === 0 || v < arr[i - 1] * 0.90);

        if (thresholds.length < 4) {
            const step = maxPct / 4;
            thresholds = [maxPct, maxPct - step, maxPct - step * 2, maxPct - step * 3].filter(v => v > 0);
        }

        return thresholds;
    }

    function getCoalitionPerformanceThresholds(coalitionData) {
        if (!coalitionData || coalitionData.max === coalitionData.min) {
            return [0.6, 0.5, 0.4, 0.3, 0.2, 0.1, 0.05];
        }

        const maxPct = Math.max(coalitionData.max, 0.01);
        const p90 = coalitionData.p90;
        const avgPct = coalitionData.avg;
        const p10 = coalitionData.p10;

        let thresholds;

        if (maxPct > 0.75 && maxPct - p90 > 0.15) {

            if (maxPct > p90) {
                thresholds = [
                    maxPct,
                    p90 + ((maxPct - p90) * 0.5),
                    p90,
                    avgPct + ((p90 - avgPct) * 0.5),
                    avgPct,
                    p10,
                    coalitionData.min
                ].filter((v, i, a) => i === 0 || v < a[i - 1] * 0.95);
            } else {
                thresholds = [maxPct, p90, avgPct, p10, coalitionData.min];
            }
        } else if (maxPct > 0.40) {

            const normalizedSteps = [1.0, 0.95, 0.90, 0.80, 0.65, 0.50, 0.30];
            thresholds = normalizedSteps.map(step =>
                Math.max(maxPct * step, maxPct - (0.04 * (1 - step) * 10))
            );
        } else if (maxPct > 0.10) {

            thresholds = [
                maxPct,
                maxPct * 0.8,
                maxPct * 0.6,
                maxPct * 0.4,
                maxPct * 0.25,
                maxPct * 0.15
            ];
        } else if (maxPct > 0.03) {

            thresholds = [
                maxPct,
                maxPct * 0.75,
                maxPct * 0.5,
                maxPct * 0.25,
                maxPct * 0.1
            ];
        } else {

            const step = maxPct / 4;
            thresholds = [
                maxPct,
                maxPct - step,
                maxPct - (step * 2),
                maxPct - (step * 3),
                0
            ].filter(v => v > 0);
        }

        return thresholds;
    }

    function formatThreshold(value) {
        if (value >= 0.01) {
            return Math.round(value * 100) + '%';
        } else {
            return (value * 100).toFixed(1) + '%';
        }
    }

    function applyColorVariations() {
        if (!window._colorVariationsApplied) {
            campaignTrail_temp.candidate_json.forEach(candidate => {
                const fields = candidate.fields;

                if (!fields._original_color_hex) {
                    fields._original_color_hex = fields.color_hex;
                    fields._original_secondary_color_hex = fields.secondary_color_hex || fields.color_hex;
                }

                fields.color_hex = varyHexColor(fields._original_color_hex, 0.05);

                if (fields.secondary_color_hex) {
                    fields.secondary_color_hex = varyHexColor(fields._original_secondary_color_hex, 0.05);
                } else {

                    const primaryRGB = hexToRgb(fields.color_hex);
                    const whiteRGB = [255, 255, 255];
                    const secondaryRGB = interpolateColor(primaryRGB, whiteRGB, 0.7);
                    fields.secondary_color_hex = rgbToHex(...secondaryRGB);
                }
            });

            if (window.HistHexcolour && Array.isArray(window.HistHexcolour)) {
                window.HistHexcolour = window.HistHexcolour.map(hex =>
                    varyHexColor(hex, 0.05)
                );
            }

            window._colorVariationsApplied = true;
        }
    }

    function getTopCandidates(limit = 5) {
        candidates = [];
        let totalPopularVotes = 0;

        campaignTrail_temp.final_overall_results.forEach(result => {
            const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
            if (candidate) {
                candidates.push({
                    pk: result.candidate,
                    candidate: candidate,
                    electoral_votes: result.electoral_votes,
                    popular_votes: result.popular_votes
                });
                totalPopularVotes += result.popular_votes;
            }
        });

        const stateWinners = candidates.filter(c => c.electoral_votes > 0);

        if (stateWinners.length > 0) {

            stateWinners.sort((a, b) => {
                if (b.electoral_votes !== a.electoral_votes) {
                    return b.electoral_votes - a.electoral_votes;
                }
                return b.popular_votes - a.popular_votes;
            });
            return stateWinners.slice(0, limit);
        } else {

            const significantCandidates = candidates.filter(c =>
                c.popular_votes / totalPopularVotes > 0.05
            );

            significantCandidates.sort((a, b) => b.popular_votes - a.popular_votes);

            return significantCandidates.slice(0, limit);
        }
    }
	
	function getSenateRaceData() {
        const congressData = window.campaignTrail_temp?.__congress2012;
        if (!congressData?.senateDetails?.byState) {
            return null;
        }

        const senateData = {};
        const stateDetails = congressData.senateDetails.byState;

        const nameToAbbr = new Map(
            (window.campaignTrail_temp.states_json || []).map(s => [s.fields.name, s.fields.abbr])
        );

        for (const stateName in stateDetails) {
            const stateAbbr = nameToAbbr.get(stateName);
            if (!stateAbbr) continue;

            const raceResults = stateDetails[stateName].results;
            let dem = 0;
            let rep = 0;
            let trd = 0;

            raceResults.forEach(candidate => {
                const party = candidate.party.toLowerCase();
                if (party.includes('democrat')) {
                    dem += candidate.pct;
                } else if (party.includes('republican')) {
                    rep += candidate.pct;
                } else {
                    trd += candidate.pct;
                }
            });

            senateData[stateAbbr] = { dem, rep, trd };
        }

        return senateData;
    }

    function getLivePercentsByAbbr() {
        const liveMap = new Map();

        if (!campaignTrail_temp || !Array.isArray(campaignTrail_temp.final_state_results)) {
            return liveMap;
        }

        campaignTrail_temp.final_state_results.forEach(stateResult => {
            if (stateResult.result_time <= 500 && Array.isArray(stateResult.result)) {
                const abbr = stateResult.abbr;
                let dem = 0,
                    rep = 0;

                stateResult.result.forEach(r => {
                    const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === r.candidate);
                    if (!candidate) return;

                    const party = candidate.fields?.party || '';
                    if (party.toLowerCase().includes('dem')) {
                        dem += r.percent || 0;
                    } else if (party.toLowerCase().includes('rep')) {
                        rep += r.percent || 0;
                    }
                });

                liveMap.set(abbr, {
                    dem,
                    rep
                });
            }
        });

        return liveMap;
    }

    function getHouseCompositionData() {
		const E = (window.campaignTrail_temp || window.e);
		const congressResults = E.__congress2012;
		
		if (!congressResults || !congressResults.house) {
			return { _totals: { dem: 0, rep: 0, ind: 0, total: 435 } };
		}

		const targetDemSeats = congressResults.house.dem;
		const states = E.states_json || [];
		
		let demId, repId;
		E.candidate_json.forEach(c => {
			const p = (c.fields.party || "").toLowerCase();
			if (p.includes("dem")) demId = c.pk;
			if (p.includes("rep")) repId = c.pk;
		});

		const pool = [];
		let currentDemTotal = 0;

		states.forEach(state => {
			const abbr = state.fields.abbr;
			const meta = HOUSE_2012_DATA[abbr] || { seats: 0, bias: 0 };
			if (meta.seats === 0) return;

			const res = E.final_state_results.find(r => r.state === state.pk);
			const dV = res?.result.find(r => r.candidate === demId)?.percent || 0.5;
			const rV = res?.result.find(r => r.candidate === repId)?.percent || 0.5;
			const p = dV / (dV + rV || 1);

			let indSeats = (abbr === "OH" && rV < 0.46) ? 1 : 0;
			let usableSeats = meta.seats - indSeats;

			let demShare = p + meta.bias;
			
			let demSeats = Math.round(usableSeats * Math.max(0, Math.min(1, demShare)));
			
			const entry = {
				abbr,
				totalSeats: meta.seats,
				indSeats: indSeats,
				demSeats: demSeats,
				p: p,
				bias: meta.bias,
				score: p + meta.bias 
			};
			
			pool.push(entry);
			currentDemTotal += demSeats;
		});

		let safety = 0;
		while (currentDemTotal !== targetDemSeats && safety < 1000) {
			safety++;
			const diff = targetDemSeats - currentDemTotal;
			const step = diff > 0 ? 1 : -1;

			pool.sort((a, b) => step === 1 ? b.score - a.score : a.score - b.score);

			for (let i = 0; i < pool.length; i++) {
				const s = pool[i];
				const maxDem = s.totalSeats - s.indSeats;
				if (step === 1 && s.demSeats < maxDem) {
					s.demSeats += 1;
					currentDemTotal += 1;
					break;
				} else if (step === -1 && s.demSeats > 0) {
					s.demSeats -= 1;
					currentDemTotal -= 1;
					break;
				}
			}
		}

		const houseData = {};
		pool.forEach(s => {
			const repSeats = s.totalSeats - s.indSeats - s.demSeats;
			const demPct = (s.demSeats / s.totalSeats) * 100;
			const repPct = (repSeats / s.totalSeats) * 100;

			let color = "#E6E6E6";
			
			if (s.indSeats > 0 && s.abbr === "OH") color = "#FFDE3A";
			else if (demPct > 50) {
				if (demPct >= 100) color = "#0000AA";      // 100% blue
				else if (demPct >= 80) color = "#2b6cb8"; // 80-99%
				else if (demPct >= 70) color = "#0487E6"; // 70-79%
				else if (demPct >= 60) color = "#3A9FE0"; // 60-69%
				else color = "#9DCDF3";                   // 51-59%
			} else if (repPct > 50) {
				if (repPct >= 100) color = "#880000";     // 100% red
				else if (repPct >= 80) color = "#c12525"; // 80-99%
				else if (repPct >= 70) color = "#DD2929"; // 70-79%
				else if (repPct >= 60) color = "#FF3333"; // 60-69%
				else color = "#FF9999";                   // 51-59%
			} else if (demPct === 50 && repPct === 50) {
				color = "#D896FF"; // 50/50
			}

			houseData[s.abbr] = {
				demSeats: s.demSeats,
				repSeats: repSeats,
				indSeats: s.indSeats,
				seats: s.totalSeats,
				color: color,
				demShare: s.p
			};
		});

		houseData._totals = {
			dem: targetDemSeats,
			rep: 435 - targetDemSeats - (congressResults.house.ind || 0),
			ind: congressResults.house.ind || 0,
			total: 435
		};

		return houseData;
	}

    function prepareStyles() {
        if (Object.keys(styleCache).length > 0) return;

        applyColorVariations();
        analyzePerformanceData();
        const turnoutChangeData = getTurnoutChangeData();

        styleCache = {
            solid: {},
            margins: {},
            candidate_strength: {},
            competitiveness: {},
            turnout_change: {},
            vote_share: {},
            issue_stance: {},
            issue_weight: {},
            candidate_issue_alignment: {},
            tipping_point: {},
            coalition_builder: {},
            candidate_combiner: {},
            senate_races: {},
            house_composition: {}
        };

        candidates = [];
        if (campaignTrail_temp.final_state_results.length > 0 && campaignTrail_temp.final_state_results[0].result) {
            campaignTrail_temp.final_state_results[0].result.forEach(result => {
                const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
                if (candidate) candidates.push(candidate);
            });
        }
        if (candidates.length === 0) return;

        const senateRaceData = getSenateRaceData();
        if (senateRaceData) {
            Object.keys(senateRaceData).forEach(stateAbbr => {
                const raceData = senateRaceData[stateAbbr];
                let winnerColor = "#C9C9C9";
                let margin = 0;

                if (raceData.dem > 0 || raceData.rep > 0 || raceData.trd > 0) {
                    if (raceData.dem > raceData.rep && raceData.dem > (raceData.trd || 0)) {
                        winnerColor = "#0487E6";
                        margin = raceData.dem - Math.max(raceData.rep, raceData.trd || 0);
                    } else if (raceData.rep > raceData.dem && raceData.rep > (raceData.trd || 0)) {
                        winnerColor = "#DD2929";
                        margin = raceData.rep - Math.max(raceData.dem, raceData.trd || 0);
                    } else if ((raceData.trd || 0) > 0) {
                        winnerColor = "#FFDE3A";
                        margin = raceData.trd - Math.max(raceData.dem, raceData.rep);
                    }
                }

                const marginColor = blendMarginColor(winnerColor, margin);
                const holdsGainsColor = getSenateHoldsGainsColor(stateAbbr, raceData);

                styleCache.senate_races[stateAbbr] = {
                    solidFill: winnerColor,
                    solidHoverFill: darkenColor(winnerColor),
                    marginFill: marginColor,
                    marginHoverFill: darkenColor(marginColor),
                    holdsGainsFill: holdsGainsColor,
                    holdsGainsHoverFill: darkenColor(holdsGainsColor),
                    margin: margin,
                    demPct: raceData.dem,
                    repPct: raceData.rep,
                    trdPct: raceData.trd || 0
                };
            });
        }

        const houseData = getHouseCompositionData();
		if (Object.keys(houseData).length > 1) {
			Object.keys(houseData).forEach(stateAbbr => {
				if (stateAbbr === '_totals') return;
				const data = houseData[stateAbbr];
				styleCache.house_composition[stateAbbr] = {
					fill: data.color,
					hoverFill: data.color,
					demSeats: data.demSeats,
					repSeats: data.repSeats,
					seats: data.seats
				};
			});
		}

        campaignTrail_temp.final_state_results.forEach(stateResult => {
            const stateAbbr = stateResult.abbr;
            const stateId = stateResult.state;

            stateDataCache[stateAbbr] = {
                id: stateId,
                results: stateResult.result,
                turnoutChange: turnoutChangeData[stateId] || 0
            };

            if (stateResult.result_time <= 500) {
                const winnerId = stateResult.result[0].candidate;
                const winner = campaignTrail_temp.candidate_json.find(c => c.pk === winnerId);

                if (winner) {
                    styleCache.solid[stateAbbr] = {
                        fill: winner.fields.color_hex,
                        hoverFill: darkenColor(winner.fields.color_hex)
                    };

                    if (stateResult.result.length >= 2) {
                        const margin = stateResult.result[0].percent - stateResult.result[1].percent;
                        const runnerId = stateResult.result[1].candidate;
                        const marginColor = blendMarginColor(winner.fields.color_hex, margin);

                        styleCache.margins[stateAbbr] = {
                            fill: marginColor,
                            hoverFill: darkenColor(marginColor),
                            originalMargin: margin,
                            primaryColor: winner.fields.color_hex,
                            winner: winnerId,
                            runner: runnerId,
                            winnerPct: stateResult.result[0].percent,
                            runnerPct: stateResult.result[1].percent
                        };

                        const competitivenessColor = getCompetitivenessColor(margin);
                        styleCache.competitiveness[stateAbbr] = {
                            fill: competitivenessColor,
                            hoverFill: darkenColor(competitivenessColor),
                            margin: margin
                        };
                    } else {
                        styleCache.margins[stateAbbr] = {
                            fill: winner.fields.color_hex,
                            hoverFill: darkenColor(winner.fields.color_hex),
                            originalMargin: 1,
                            primaryColor: winner.fields.color_hex,
                            winner: winnerId,
                            runner: null,
                            winnerPct: stateResult.result[0].percent,
                            runnerPct: 0
                        };

                        styleCache.competitiveness[stateAbbr] = {
                            fill: "#0000FF",
                            hoverFill: "#0000DD",
                            margin: 1
                        };
                    }

                    const turnoutChangeColor = getTurnoutChangeColor(turnoutChangeData[stateId] || 0);
                    styleCache.turnout_change[stateAbbr] = {
                        fill: turnoutChangeColor,
                        hoverFill: darkenColor(turnoutChangeColor),
                        turnoutChange: turnoutChangeData[stateId] || 0
                    };

                    const winnerVoteShare = stateResult.result[0].percent;
                    const voteShareColor = blendVoteShareColor(winner.fields.color_hex, winnerVoteShare);
                    styleCache.vote_share[stateAbbr] = {
                        fill: voteShareColor,
                        hoverFill: darkenColor(voteShareColor),
                        voteShare: winnerVoteShare,
                        primaryColor: winner.fields.color_hex,
                        winner: winnerId
                    };

                    if (campaignTrail_temp.issues_json && campaignTrail_temp.state_issue_score_json) {
                        styleCache.issue_stance[stateAbbr] = {};
                        styleCache.issue_weight[stateAbbr] = {};
                        styleCache.candidate_issue_alignment[stateAbbr] = {};

                        campaignTrail_temp.issues_json.forEach((issue, issueIdx) => {
                            const stateIssueData = campaignTrail_temp.state_issue_score_json.find(
                                sis => sis.fields.state === stateId && sis.fields.issue === issue.pk
                            );

                            if (stateIssueData) {
                                const stateScore = stateIssueData.fields.state_issue_score;
                                const weight = stateIssueData.fields.weight;

                                const stanceColor = getIssueStanceColor(stateScore);
                                const stanceNumber = getStanceNumber(stateScore);

                                styleCache.issue_stance[stateAbbr][issueIdx] = {
                                    fill: stanceColor,
                                    hoverFill: darkenColor(stanceColor),
                                    stanceValue: stateScore,
                                    stanceNumber: stanceNumber
                                };

                                if (!styleCache.issue_stance[stateAbbr].stanceValues) {
                                    styleCache.issue_stance[stateAbbr].stanceValues = [];
                                }
                                styleCache.issue_stance[stateAbbr].stanceValues.push(stateScore);

                                const weightColor = getIssueWeightColor(weight, issueIdx);
                                styleCache.issue_weight[stateAbbr][issueIdx] = {
                                    fill: weightColor,
                                    hoverFill: darkenColor(weightColor),
                                    weight: weight
                                };

                                styleCache.candidate_issue_alignment[stateAbbr][issueIdx] = {};
                                candidates.forEach((candidate, candIdx) => {
                                    const candidateIssueData = campaignTrail_temp.candidate_issue_score_json?.find(
                                        cis => cis.fields.candidate === candidate.pk && cis.fields.issue === issue.pk
                                    );

                                    if (candidateIssueData) {
                                        const candidateScore = candidateIssueData.fields.issue_score;
                                        const alignmentColor = getCandidateIssueAlignment(stateScore, candidateScore);

                                        styleCache.candidate_issue_alignment[stateAbbr][issueIdx][candIdx] = {
                                            fill: alignmentColor,
                                            hoverFill: darkenColor(alignmentColor),
                                            stateScore: stateScore,
                                            candidateScore: candidateScore,
                                            alignment: Math.abs(stateScore - candidateScore)
                                        };
                                    } else {
                                        styleCache.candidate_issue_alignment[stateAbbr][issueIdx][candIdx] = {
                                            fill: "#C9C9C9",
                                            hoverFill: "#AAAAAA",
                                            stateScore: stateScore,
                                            candidateScore: null,
                                            alignment: 999
                                        };
                                    }

                                });
                            } else {

                                styleCache.issue_stance[stateAbbr][issueIdx] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                                styleCache.issue_weight[stateAbbr][issueIdx] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                                styleCache.candidate_issue_alignment[stateAbbr][issueIdx] = {};
                                candidates.forEach((_, candIdx) => {
                                    styleCache.candidate_issue_alignment[stateAbbr][issueIdx][candIdx] = { fill: "#C9C9C9", hoverFill: "#AAAAAA", alignment: 999, candidateScore: null };
                                });
                            }
                        });
                    } else {
                        styleCache.issue_stance[stateAbbr] = {};
                        styleCache.issue_weight[stateAbbr] = {};
                        styleCache.candidate_issue_alignment[stateAbbr] = {};
                    }

                    if (styleCache.issue_stance[stateAbbr].stanceValues && styleCache.issue_stance[stateAbbr].stanceValues.length > 0) {
                        const averageStance = styleCache.issue_stance[stateAbbr].stanceValues.reduce((sum, val) => sum + val, 0) / styleCache.issue_stance[stateAbbr].stanceValues.length;
                        const averageStanceColor = getAverageIssueStanceColor(averageStance);
                        const averageStanceNumber = getStanceNumber(averageStance);

                        styleCache.issue_stance[stateAbbr].average = {
                            fill: averageStanceColor,
                            hoverFill: darkenColor(averageStanceColor),
                            stanceValue: averageStance,
                            stanceNumber: averageStanceNumber
                        };
                    }

                    if (styleCache.issue_stance[stateAbbr].average) {
                        const averageStateStance = styleCache.issue_stance[stateAbbr].average.stanceValue;

                        styleCache.candidate_issue_alignment[stateAbbr].average = {};

                        candidates.forEach((candidate, candIdx) => {
                            let candidateTotalScore = 0;
                            let candidateIssueCount = 0;

                            campaignTrail_temp.issues_json.forEach(issue => {
                                const candidateIssueData = campaignTrail_temp.candidate_issue_score_json?.find(
                                    cis => cis.fields.candidate === candidate.pk && cis.fields.issue === issue.pk
                                );
                                if (candidateIssueData) {
                                    candidateTotalScore += candidateIssueData.fields.issue_score;
                                    candidateIssueCount++;
                                }
                            });

                            if (candidateIssueCount > 0) {
                                const candidateAverageScore = candidateTotalScore / candidateIssueCount;
                                const alignmentColor = getAverageCandidateIssueAlignment(averageStateStance, candidateAverageScore);

                                styleCache.candidate_issue_alignment[stateAbbr].average[candIdx] = {
                                    fill: alignmentColor,
                                    hoverFill: darkenColor(alignmentColor),
                                    stateScore: averageStateStance,
                                    candidateScore: candidateAverageScore,
                                    alignment: Math.abs(averageStateStance - candidateAverageScore)
                                };
                            } else {
                                styleCache.candidate_issue_alignment[stateAbbr].average[candIdx] = {
                                    fill: "#C9C9C9",
                                    hoverFill: "#AAAAAA",
                                    alignment: 999,
                                    candidateScore: null
                                };
                            }
                        });
                    }

                    styleCache.tipping_point[stateAbbr] = {
                        fill: "#C9C9C9",
                        hoverFill: "#AAAAAA"
                    };

                    styleCache.coalition_builder[stateAbbr] = {
                        fill: "#C9C9C9",
                        hoverFill: "#AAAAAA"
                    };

                    styleCache.candidate_strength[stateAbbr] = {};
                    candidates.forEach((candidate, idx) => {
                        const candidateResult = stateResult.result.find(r => r.candidate === candidate.pk);
                        const candidateData = candidateMaxPercentages[candidate.pk];

                        const nationalResult = campaignTrail_temp.final_overall_results.find(r => r.candidate === candidate.pk);
                        const totalNationalVotes = campaignTrail_temp.final_overall_results.reduce((sum, r) => sum + r.popular_votes, 0);
                        const nationalAverage = nationalResult && totalNationalVotes > 0 ?
                            nationalResult.popular_votes / totalNationalVotes : 0;

                        if (candidateResult) {
                            const perfColor = blendPerformanceColor(
                                candidate.fields.color_hex,
                                candidateResult.percent,
                                candidateData
                            );

                            const relativePerformance = candidateResult.percent - nationalAverage;
                            const relPerfColor = blendRelativePerformanceColor(
                                candidate.fields.color_hex,
                                relativePerformance,
                                nationalAverage
                            );

                            styleCache.candidate_strength[stateAbbr][idx] = {
                                fill: perfColor,
                                hoverFill: darkenColor(perfColor),
                                relativeFill: relPerfColor,
                                relativeHoverFill: darkenColor(relPerfColor),
                                percent: candidateResult.percent,
                                relativePercent: relativePerformance,
                                nationalAverage: nationalAverage,
                                primaryColor: candidate.fields.color_hex,
                                thresholds: getPerformanceThresholds(candidate.pk),
                                maxPercent: candidateData.max
                            };
                        } else {
                            styleCache.candidate_strength[stateAbbr][idx] = {
                                fill: "#EEEEEE",
                                hoverFill: "#DDDDDD",
                                relativeFill: "#EEEEEE",
                                relativeHoverFill: "#DDDDDD",
                                percent: 0,
                                relativePercent: -nationalAverage,
                                nationalAverage: nationalAverage,
                                primaryColor: candidate.fields.color_hex,
                                thresholds: getPerformanceThresholds(candidate.pk),
                                maxPercent: candidateData.max
                            };
                        }
                    });
                } else {

                    styleCache.solid[stateAbbr] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                    styleCache.margins[stateAbbr] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                    styleCache.competitiveness[stateAbbr] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                    styleCache.turnout_change[stateAbbr] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                    styleCache.vote_share[stateAbbr] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                    styleCache.coalition_builder[stateAbbr] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                    styleCache.candidate_strength[stateAbbr] = {};
                    candidates.forEach((_, idx) => {
                        styleCache.candidate_strength[stateAbbr][idx] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                    });
                }
            } else {

                styleCache.solid[stateAbbr] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                styleCache.margins[stateAbbr] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                styleCache.competitiveness[stateAbbr] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                styleCache.turnout_change[stateAbbr] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                styleCache.vote_share[stateAbbr] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                styleCache.coalition_builder[stateAbbr] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                styleCache.candidate_strength[stateAbbr] = {};
                candidates.forEach((_, idx) => {
                    styleCache.candidate_strength[stateAbbr][idx] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                });
            }
            styleCache.candidate_combiner[stateAbbr] = {
                fill: "#C9C9C9",
                hoverFill: "#AAAAAA"
            };
        });
    }

    function processStateUpdateQueue() {
        if (!stateUpdateQueue.length || animationFrameRequested) return;

        animationFrameRequested = true;

        requestAnimationFrame(() => {
            stateUpdateQueue.forEach(update => {
                update.shape.attr('fill', update.fill);
                if (typeof update.shape.data === 'function') {
                    update.shape.data('originalFill', update.fill);
                }
            });

            stateUpdateQueue.length = 0;
            animationFrameRequested = false;
        });
    }

    function calculateTippingPointPath() {
        candidates = [];
        if (campaignTrail_temp.final_state_results.length > 0 && campaignTrail_temp.final_state_results[0].result) {
             campaignTrail_temp.final_state_results[0].result.forEach(result => {
                const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
                if (candidate) candidates.push(candidate);
            });
        }
       
        if (selectedCandidateIndex >= candidates.length) return null;

        const candidate = candidates[selectedCandidateIndex];
        const winningThreshold = campaignTrail_temp.election_json?.[0]?.fields?.winning_electoral_vote_number || 270;

        const candidateResult = campaignTrail_temp.final_overall_results.find(r => r.candidate === candidate.pk);
        const currentEVs = candidateResult ? candidateResult.electoral_votes : 0;

        if (currentEVs >= winningThreshold) {
            return null;
        }

        const neededEVs = winningThreshold - currentEVs;

        const availableStates = [];
        campaignTrail_temp.final_state_results.forEach(stateResult => {
            if (stateResult.result_time <= 500 && stateResult.result.length >= 2) {
                const winnerId = stateResult.result[0].candidate;
                if (winnerId !== candidate.pk) {
                    const state = campaignTrail_temp.states_json.find(s => s.pk === stateResult.state);
                    if (!state) return;

                    const targetResult = stateResult.result.find(r => r.candidate === candidate.pk);
                    const targetPercent = targetResult ? targetResult.percent : 0;
                    const winnerPercent = stateResult.result[0].percent;
                    const deficit = winnerPercent - targetPercent;

                    availableStates.push({
                        abbr: stateResult.abbr,
                        stateId: stateResult.state,
                        electoralVotes: state.fields.electoral_votes,
                        deficit,
                        pathPosition: null,
                        isRequired: false
                    });
                }
            }
        });

        availableStates.sort((a, b) => a.deficit - b.deficit);

        let runningEVs = 0;
        const requiredPath = [];
        let tippingPointState = null;

        for (const state of availableStates) {
            if (runningEVs >= neededEVs) break;

            state.pathPosition = requiredPath.length + 1;
            state.isRequired = true;
            requiredPath.push(state);
            runningEVs += state.electoralVotes;

            if (runningEVs >= neededEVs && !tippingPointState) {
                tippingPointState = state.abbr;
            }
        }

        const totalPathEVs = requiredPath.reduce((sum, state) => sum + state.electoralVotes, 0);

        return {
            candidate,
            path: requiredPath,
            currentEVs,
            neededEVs,
            totalPathEVs,
            tippingPointState
        };
    }

    function createTippingPointCandidateSelector() {
        const container = document.createElement('div');
        const fragment = document.createDocumentFragment();
        container.style.marginBottom = '10px';

        const label = document.createElement('label');
        label.textContent = 'Perspective: ';
        label.style.marginRight = '5px';
        fragment.appendChild(label);

        const select = document.createElement('select');
        campaignTrail_temp.candidate_json.forEach((candidate, idx) => {
            const option = document.createElement('option');
            option.value = candidate.pk;
            option.textContent = candidate.fields.last_name;
            if (candidate.pk === selectedCandidateIndex) option.selected = true;
            select.appendChild(option);
        });

        select.addEventListener('change', (e) => {
            selectedCandidateIndex = parseInt(e.target.value);
            updateMapStyles();
            updateLegend();
        });

        fragment.appendChild(select);		
        container.appendChild(fragment);
        return container;
    }

    function getTippingPointColor(pathPosition, isRequired, deficit, pathLength, candidateColor) {

        const baseRgb = hexToRgb(candidateColor);

        const [r, g, b] = baseRgb;
        const isReddish = r > Math.max(g, b) + 50;
        const isBluish = b > Math.max(r, g) + 50;
        const isGreenish = g > Math.max(r, b) + 50;

        let colorPalette;

        if (isReddish) {
            colorPalette = ["#8B0000", "#B22222", "#DC143C", "#FF4500", "#FF6347", "#FFA500", "#FFD700"];
        } else if (isBluish) {
            colorPalette = ["#000080", "#0000CD", "#4169E1", "#6A5ACD", "#8A2BE2", "#DA70D6", "#DDA0DD"];
        } else if (isGreenish) {
            colorPalette = ["#006400", "#228B22", "#32CD32", "#00CED1", "#40E0D0", "#48D1CC", "#AFEEEE"];
        } else {
            colorPalette = ["#4B0082", "#800080", "#9932CC", "#BA55D3", "#DA70D6", "#DDA0DD", "#E6E6FA"];
        }

        let colorIndex;
        if (pathLength <= 5) {
            colorIndex = Math.min(pathPosition - 1, 4);
        } else if (pathLength <= 10) {
            const scaleFactor = 6 / (pathLength - 1);
            colorIndex = Math.min(Math.floor((pathPosition - 1) * scaleFactor), 6);
        } else {
            if (pathPosition <= 3) {
                colorIndex = pathPosition - 1;
            } else if (pathPosition <= Math.ceil(pathLength * 0.3)) {
                colorIndex = 3;
            } else if (pathPosition <= Math.ceil(pathLength * 0.6)) {
                colorIndex = 4;
            } else if (pathPosition <= Math.ceil(pathLength * 0.8)) {
                colorIndex = 5;
            } else {
                colorIndex = 6;
            }
        }

        return colorPalette[colorIndex];
    }

    function updateMapStyles() {
        const map = $('#map_container').data('plugin-usmap');
        if (!map || !map.stateShapes) return;

        let styles;
        switch (currentMode) {
            case VISUALIZATION_MODES.MARGINS:
                styles = styleCache.margins;
                break;
            case VISUALIZATION_MODES.CANDIDATE_STRENGTH:
                styles = {};
                for (const stateAbbr in styleCache.candidate_strength) {
                    const stateData = styleCache.candidate_strength[stateAbbr][selectedCandidateIndex];
                    if (stateData) {
                        if (candidatePerformanceMode === 'relative') {
                            styles[stateAbbr] = {
                                fill: stateData.relativeFill,
                                hoverFill: stateData.relativeHoverFill
                            };
                        } else {
                            styles[stateAbbr] = {
                                fill: stateData.fill,
                                hoverFill: stateData.hoverFill
                            };
                        }
                    } else {
                        styles[stateAbbr] = { fill: "#EEEEEE", hoverFill: "#DDDDDD" };
                    }
                }
                break;
            case VISUALIZATION_MODES.COMPETITIVENESS:
                styles = styleCache.competitiveness;
                break;
            case VISUALIZATION_MODES.TURNOUT_CHANGE:
                styles = styleCache.turnout_change;
                break;
            case VISUALIZATION_MODES.VOTE_SHARE:
                styles = styleCache.vote_share;
                break;
            case VISUALIZATION_MODES.ISSUE_STANCE:
                styles = {};
                if (showAverageIssueStance) {
                    for (const stateAbbr in styleCache.issue_stance) {
                        if (styleCache.issue_stance[stateAbbr].average) {
                            styles[stateAbbr] = styleCache.issue_stance[stateAbbr].average;
                        } else {
                            styles[stateAbbr] = { fill: "#EEEEEE", hoverFill: "#DDDDDD" };
                        }
                    }
                } else {
                    for (const stateAbbr in styleCache.issue_stance) {
                        if (styleCache.issue_stance[stateAbbr][selectedIssueIndex]) {
                            styles[stateAbbr] = styleCache.issue_stance[stateAbbr][selectedIssueIndex];
                        } else {
                            styles[stateAbbr] = { fill: "#EEEEEE", hoverFill: "#DDDDDD" };
                        }
                    }
                }
                break;
            case VISUALIZATION_MODES.ISSUE_WEIGHT:
                styles = {};
                if (showAverageIssueStance) {
                    for (const stateAbbr in styleCache.issue_weight) {
                        styles[stateAbbr] = { fill: "#C9C9C9", hoverFill: "#AAAAAA" };
                    }
                } else {
                    for (const stateAbbr in styleCache.issue_weight) {
                        if (styleCache.issue_weight[stateAbbr][selectedIssueIndex]) {
                            styles[stateAbbr] = styleCache.issue_weight[stateAbbr][selectedIssueIndex];
                        } else {
                            styles[stateAbbr] = { fill: "#EEEEEE", hoverFill: "#DDDDDD" };
                        }
                    }
                }
                break;
            case VISUALIZATION_MODES.CANDIDATE_ISSUE_ALIGNMENT:
                styles = {};
                if (alignmentComparisonMode === 'comparison') {
                    for (const stateAbbr in styleCache.candidate_issue_alignment) {
                        let bestAlignment = 999;
                        let bestCandidateIdx = -1;
                        let bestCandidateColor = "#EEEEEE";

                        selectedComparisonCandidates.forEach(candIdx => {
                            if (candIdx >= candidates.length) return;
                            let alignmentData;
                            if (showAverageIssueStance) {
                                alignmentData = styleCache.candidate_issue_alignment[stateAbbr]?.average?.[candIdx];
                            } else {
                                alignmentData = styleCache.candidate_issue_alignment[stateAbbr]?.[selectedIssueIndex]?.[candIdx];
                            }

                            if (alignmentData && alignmentData.alignment < bestAlignment) {
                                bestAlignment = alignmentData.alignment;
                                bestCandidateIdx = candIdx;
                                bestCandidateColor = candidates[candIdx].fields.color_hex;
                            }
                        });

                        if (bestCandidateIdx !== -1) {
                            const maxAlignment = 2.0;
                            const normalizedAlignment = Math.min(bestAlignment / maxAlignment, 1.0);
                            const whiteBlendFactor = 0.1 + (normalizedAlignment * 0.8);
                            const baseRGB = hexToRgb(bestCandidateColor);
                            const whiteRGB = [255, 255, 255];
                            const blendedRGB = interpolateColor(baseRGB, whiteRGB, whiteBlendFactor);
                            const blendedColor = rgbToHex(...blendedRGB);
                            styles[stateAbbr] = { fill: blendedColor, hoverFill: darkenColor(blendedColor) };
                        } else {
                            styles[stateAbbr] = { fill: "#EEEEEE", hoverFill: "#DDDDDD" };
                        }
                    }
                } else {
                    if (showAverageIssueStance) {
                        for (const stateAbbr in styleCache.candidate_issue_alignment) {
                            const alignmentData = styleCache.candidate_issue_alignment[stateAbbr]?.average?.[selectedAlignmentCandidateIndex];
                            if (alignmentData && alignmentData.alignment < 999) {
                                styles[stateAbbr] = alignmentData;
                            } else {
                                styles[stateAbbr] = { fill: "#EEEEEE", hoverFill: "#DDDDDD" };
                            }
                        }
                    } else {
                        for (const stateAbbr in styleCache.candidate_issue_alignment) {
                            const alignmentData = styleCache.candidate_issue_alignment[stateAbbr]?.[selectedIssueIndex]?.[selectedAlignmentCandidateIndex];
                            if (alignmentData && alignmentData.alignment < 999) {
                                styles[stateAbbr] = alignmentData;
                            } else {
                                styles[stateAbbr] = { fill: "#EEEEEE", hoverFill: "#DDDDDD" };
                            }
                        }
                    }
                }
                break;
            case VISUALIZATION_MODES.TIPPING_POINT:
                const tippingPointData = calculateTippingPointPath();
                styles = {};

                if (tippingPointData) {
                    for (const stateAbbr in styleCache.tipping_point) {
                        styles[stateAbbr] = { fill: "#E0E0E0", hoverFill: "#D0D0D0" };
                    }
                    campaignTrail_temp.final_state_results.forEach(stateResult => {
                        if (stateResult.result_time <= 500 && stateResult.result.length > 0) {
                            const winnerId = stateResult.result[0].candidate;
                            if (winnerId === tippingPointData.candidate.pk) {
                                const color = tippingPointData.candidate.fields.color_hex;
                                styles[stateResult.abbr] = { fill: color, hoverFill: darkenColor(color) };
                            }
                        }
                    });
                    tippingPointData.path.forEach(state => {
                        const color = getTippingPointColor(state.pathPosition, state.isRequired, state.deficit, tippingPointData.path.length, tippingPointData.candidate.fields.color_hex);
                        if (color) {
                            styles[state.abbr] = { fill: color, hoverFill: darkenColor(color) };
                        }
                    });
                } else {
                    for (const stateAbbr in styleCache.solid) {
                        styles[stateAbbr] = styleCache.solid[stateAbbr];
                    }
                }
                break;
            case VISUALIZATION_MODES.COALITION_BUILDER:
                coalitionResults = calculateCoalitionResults(coalitionCandidateIndex, coalitionVoteShare);
                styles = {};
                candidates = [];
                campaignTrail_temp.final_state_results[0].result.forEach(result => {
                    const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
                    if (candidate) candidates.push(candidate);
                });
                for (const stateAbbr in coalitionResults.states) {
                    const stateData = coalitionResults.states[stateAbbr];
                    const newWinnerCandidate = candidates.find(c => c.pk === stateData.newWinner);
                    if (newWinnerCandidate) {
                        const newResults = stateData.newResults;
                        const margin = newResults.length >= 2 ? newResults[0].percent - newResults[1].percent : newResults[0].percent;
                        if (coalitionMode === 'solid') {
                            styles[stateAbbr] = { fill: newWinnerCandidate.fields.color_hex, hoverFill: darkenColor(newWinnerCandidate.fields.color_hex) };
                        } else if (coalitionMode === 'margins') {
                            const marginColor = blendMarginColor(newWinnerCandidate.fields.color_hex, margin);
                            styles[stateAbbr] = { fill: marginColor, hoverFill: darkenColor(marginColor) };
                        } else if (coalitionMode === 'performance') {
                            const targetCandidate = candidates[coalitionCandidateIndex];
                            const targetResult = newResults.find(r => r.candidate === targetCandidate.pk);
                            const targetPercent = targetResult ? targetResult.percent : 0;
                            const candidateData = candidateMaxPercentages[targetCandidate.pk];
                            const perfColor = blendPerformanceColor(targetCandidate.fields.color_hex, targetPercent, candidateData);
                            styles[stateAbbr] = { fill: perfColor, hoverFill: darkenColor(perfColor) };
                        }
                    } else {
                        styles[stateAbbr] = { fill: "#E0E0E0", hoverFill: "#D0D0D0" };
                    }
                }
                break;
            case VISUALIZATION_MODES.CANDIDATE_COMBINER:
                if (headToHeadMode) {
                    headToHeadResults = calculateHeadToHeadResults(
                        headToHeadTeam1Index1, headToHeadTeam1Index2,
                        headToHeadTeam2Index1, headToHeadTeam2Index2
                    );
                    styles = {};
                    candidates = [];
                    campaignTrail_temp.final_state_results[0].result.forEach(result => {
                        const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
                        if (candidate) candidates.push(candidate);
                    });
                    campaignTrail_temp.final_state_results.forEach(stateResult => {
                        const stateAbbr = stateResult.abbr;
                        const stateData = headToHeadResults.states[stateAbbr];
                        if (stateData) {
                            if (stateData.team1Wins) {
                                const team1Color = candidates[headToHeadTeam1Index1].fields.color_hex;
                                const marginColor = blendMarginColor(team1Color, stateData.margin);
                                styles[stateAbbr] = { fill: marginColor, hoverFill: darkenColor(marginColor) };
                            } else {
                                const team2Color = candidates[headToHeadTeam2Index1].fields.color_hex;
                                const marginColor = blendMarginColor(team2Color, stateData.margin);
                                styles[stateAbbr] = { fill: marginColor, hoverFill: darkenColor(marginColor) };
                            }
                        } else {
                            styles[stateAbbr] = { fill: "#E0E0E0", hoverFill: "#D0D0D0" };
                        }
                    });
                } else {
                    combinerResults = calculateCombinerResults(combinedCandidateIndex1, combinedCandidateIndex2, combinedCandidateIndex3);
                    styles = {};
                    candidates = [];
                    campaignTrail_temp.final_state_results[0].result.forEach(result => {
                        const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
                        if (candidate) candidates.push(candidate);
                    });
                    campaignTrail_temp.final_state_results.forEach(stateResult => {
                        const stateAbbr = stateResult.abbr;
                        const stateData = combinerResults.states[stateAbbr];
                        if (stateData && stateData.newWinner) {
                            const newWinnerCandidate = candidates.find(c => c.pk === stateData.newWinner);
                            if (newWinnerCandidate) {
                                const marginColor = blendMarginColor(newWinnerCandidate.fields.color_hex, stateData.projectedMargin);
                                styles[stateAbbr] = { fill: marginColor, hoverFill: darkenColor(marginColor) };
                            }
                        } else {
                            const winnerId = stateResult.result[0].candidate;
                            const winnerCandidate = candidates.find(c => c.pk === winnerId);
                            if (winnerCandidate) {
                                styles[stateAbbr] = { fill: winnerCandidate.fields.color_hex, hoverFill: darkenColor(winnerCandidate.fields.color_hex) };
                            }
                        }
                    });
                }
                break;
            case VISUALIZATION_MODES.SENATE_RACES:
                styles = {};
                const senateMode = window.currentSenateMode || 'solid';
                for (const stateAbbr in styleCache.senate_races) {
                    const senateStyle = styleCache.senate_races[stateAbbr];
                    if (senateMode === 'margins') {
                        styles[stateAbbr] = { fill: senateStyle.marginFill, hoverFill: senateStyle.marginHoverFill };
                    } else if (senateMode === 'holds_gains') {
                        styles[stateAbbr] = { fill: senateStyle.holdsGainsFill, hoverFill: senateStyle.holdsGainsHoverFill };
                    } else {
                        styles[stateAbbr] = { fill: senateStyle.solidFill, hoverFill: senateStyle.solidHoverFill };
                    }
                }
                for (const stateAbbr in styleCache.solid) {
                    if (!styles[stateAbbr]) {
                        styles[stateAbbr] = { fill: "#E0E0E0", hoverFill: "#D0D0D0" };
                    }
                }
                break;
            case VISUALIZATION_MODES.HOUSE_COMPOSITION:
                styles = styleCache.house_composition;
                break;
            default:
                styles = styleCache.solid;
        }

        stateUpdateQueue.length = 0;

        for (const stateAbbr in styles) {
            if (map.stateShapes[stateAbbr]) {
                stateUpdateQueue.push({
                    shape: map.stateShapes[stateAbbr],
                    fill: styles[stateAbbr]?.fill || "#C9C9C9"
                });
            }
        }

        processStateUpdateQueue();
    }

        function createMarginLegend() {
        const container = document.createElement('div');
        container.style.paddingRight = '5px';

        const frag = document.createDocumentFragment();

        const topCandidates = getTopCandidates();

        const title = document.createElement('div');
        title.textContent = 'Margin of victory';
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '5px';
        title.style.textAlign = 'center';
        frag.appendChild(title);

        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';

        topCandidates.forEach(({ candidate, pk }) => {
            const nameRow = table.insertRow();
            const nameCell = nameRow.insertCell();
            nameCell.colSpan = 2;
            nameCell.style.padding = '5px 3px';

            const colorSpan = document.createElement('span');
            colorSpan.style.display = 'inline-block';
            colorSpan.style.width = '12px';
            colorSpan.style.height = '12px';
            colorSpan.style.backgroundColor = candidate.fields.color_hex;
            colorSpan.style.marginRight = '4px';
            colorSpan.style.border = '1px solid #999';
            colorSpan.style.verticalAlign = 'bottom';

            nameCell.appendChild(colorSpan);
            nameCell.appendChild(document.createTextNode(candidate.fields.last_name));
            nameCell.style.fontWeight = 'bold';

            const marginRanges = [
                { range: ">15% (Safe)", margin: 0.20 },
                { range: "10-15% (Solid)", margin: 0.12 },
                { range: "5-10% (Likely)", margin: 0.07 },
                { range: "1-5% (Lean)", margin: 0.03 },
                { range: "<1% (Tossup)", margin: 0.005 }
            ];

            marginRanges.forEach(({ range, margin }) => {
                const row = table.insertRow();

                const colorCell = row.insertCell();
                colorCell.style.width = '16px';
                colorCell.style.height = '11px';
                colorCell.style.backgroundColor = blendMarginColor(candidate.fields.color_hex, margin);
                colorCell.style.border = '1px solid #ddd';

                const labelCell = row.insertCell();
                labelCell.textContent = range;
                labelCell.style.paddingLeft = '6px';
                labelCell.style.fontSize = '10px';
            });

            if (pk !== topCandidates[topCandidates.length - 1].pk) {
                const spacerRow = table.insertRow();
                const spacerCell = spacerRow.insertCell();
                spacerCell.colSpan = 2;
                spacerCell.style.height = '5px';
            }
        });

        frag.appendChild(table);
        container.appendChild(frag);
        return container;
    }

    function createPerformanceLegend(candidateIndex) {
        candidates = [];
        if (campaignTrail_temp.final_state_results.length > 0 && campaignTrail_temp.final_state_results[0].result) {
            campaignTrail_temp.final_state_results[0].result.forEach(result => {
                const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
                if (candidate) candidates.push(candidate);
            });
        }
        
        if (candidateIndex >= candidates.length) return null;
        const candidate = candidates[candidateIndex];

        const candidateData = candidateMaxPercentages[candidate.pk];
        if (!candidateData) return null;

        const thresholds = getPerformanceThresholds(candidate.pk);
        const maxPercent = candidateData.max;

        const container = document.createElement('div');
        const frag = document.createDocumentFragment();

        const title = document.createElement('div');
        title.textContent = candidate.fields.last_name + ' performance';
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '5px';
        title.style.textAlign = 'center';
        frag.appendChild(title);

        const statsDiv = document.createElement('div');
        statsDiv.style.fontSize = '9px';
        statsDiv.style.marginBottom = '5px';
        statsDiv.style.textAlign = 'center';
        statsDiv.style.color = '#555';
        statsDiv.textContent = `Best: ${formatThreshold(maxPercent)} | Avg: ${formatThreshold(candidateData.avg)}`;
        frag.appendChild(statsDiv);

        const tierDiv = document.createElement('div');
        tierDiv.style.fontSize = '9px';
        tierDiv.style.marginBottom = '5px';
        tierDiv.style.textAlign = 'center';
        tierDiv.style.color = '#777';
        tierDiv.style.fontStyle = 'italic';
        tierDiv.textContent = 'Darker = higher performance | Lighter = lower performance';
        frag.appendChild(tierDiv);

        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';

        const getPerformanceLabel = (threshold, index) => {
            if (index === 0) {
                return `${formatThreshold(threshold)}+`;
            } else if (index === thresholds.length - 1) {
                return `Up to ${formatThreshold(thresholds[index-1])}`;
            } else {
                return `${formatThreshold(threshold)} - ${formatThreshold(thresholds[index - 1])}`;
            }
        };

        for (let i = 0; i < thresholds.length; i++) {
            const row = table.insertRow();

            const colorCell = row.insertCell();
            colorCell.style.width = '16px';
            colorCell.style.height = '12px';

            let displayValue;
            if (i === 0) {
                displayValue = thresholds[i];
            } else if (i === thresholds.length - 1) {
                displayValue = thresholds[i] * 0.5;
            } else {
                displayValue = (thresholds[i] + thresholds[i - 1]) / 2;
            }

            colorCell.style.backgroundColor = blendPerformanceColor(
                candidate.fields.color_hex,
                displayValue,
                candidateData
            );
            colorCell.style.border = '1px solid #ddd';

            const labelCell = row.insertCell();
            labelCell.textContent = getPerformanceLabel(thresholds[i], i, thresholds[0]);
            labelCell.style.paddingLeft = '6px';
            labelCell.style.fontSize = '10px';
        }

        frag.appendChild(table);

        const dcResult = campaignTrail_temp.final_state_results.find(r => r.abbr === "DC");
        if (dcResult) {
            const dcCandidateResult = dcResult.result.find(c => c.candidate === candidate.pk);
            const dcPercent = dcCandidateResult?.percent ?? 0;
            const dcNote = document.createElement('div');
            dcNote.style.fontSize = '9px';
            dcNote.style.marginTop = '5px';
            dcNote.style.textAlign = 'center';
            dcNote.style.color = '#777';
            dcNote.style.fontStyle = 'italic';
            dcNote.textContent = `DC is ignored (${(dcPercent * 100).toFixed(1)}%)`;
            frag.appendChild(dcNote);
        }

        container.appendChild(frag);
        return container;
    }

    function createRelativePerformanceLegend(candidateIndex) {
        candidates = [];
        campaignTrail_temp.final_state_results[0].result.forEach(result => {
            const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
            if (candidate) candidates.push(candidate);
        });

        if (candidateIndex >= candidates.length) return null;
        const candidate = candidates[candidateIndex];

        const container = document.createElement('div');
        const frag = document.createDocumentFragment();

        const title = document.createElement('div');
        title.textContent = candidate.fields.last_name + ' vs National average';
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '5px';
        title.style.textAlign = 'center';
        frag.appendChild(title);

        const nationalResult = campaignTrail_temp.final_overall_results.find(r => r.candidate === candidate.pk);
        const totalNationalVotes = campaignTrail_temp.final_overall_results.reduce((sum, r) => sum + r.popular_votes, 0);
        const nationalAverage = nationalResult && totalNationalVotes > 0 ?
            nationalResult.popular_votes / totalNationalVotes : 0;

        const statsDiv = document.createElement('div');
        statsDiv.style.fontSize = '9px';
        statsDiv.style.marginBottom = '5px';
        statsDiv.style.textAlign = 'center';
        statsDiv.style.color = '#555';
        statsDiv.textContent = `National average: ${(nationalAverage * 100).toFixed(1)}%`;
        frag.appendChild(statsDiv);

        let bestRelative = -1;
        let worstRelative = 1;
        let bestState = '';
        let worstState = '';

        campaignTrail_temp.final_state_results.forEach(stateResult => {
            const candidateResult = stateResult.result.find(r => r.candidate === candidate.pk);
            if (candidateResult) {
                const relative = candidateResult.percent - nationalAverage;
                if (relative > bestRelative) {
                    bestRelative = relative;
                    bestState = stateResult.abbr;
                }
                if (relative < worstRelative) {
                    worstRelative = relative;
                    worstState = stateResult.abbr;
                }
            }
        });

        const rangeDiv = document.createElement('div');
        rangeDiv.style.fontSize = '9px';
        rangeDiv.style.marginBottom = '5px';
        rangeDiv.style.textAlign = 'center';
        rangeDiv.style.color = '#666';
        rangeDiv.textContent = `Best: ${bestState} (+${(bestRelative * 100).toFixed(1)}%) | Worst: ${worstState} (${(worstRelative * 100).toFixed(1)}%)`;
        frag.appendChild(rangeDiv);

        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';

        const isLowPerformer = nationalAverage < 0.10;

        const ranges = isLowPerformer ? [
            { label: "2x+ national avg", relativeExample: nationalAverage * 2.0 },
            { label: "1.5-2x national", relativeExample: nationalAverage * 0.75 },
            { label: "1.2-1.5x national", relativeExample: nationalAverage * 0.35 },
            { label: "0.8-1.2x national", relativeExample: 0 },
            { label: "0.5-0.8x national", relativeExample: -nationalAverage * 0.4 },
            { label: "0.2-0.5x national", relativeExample: -nationalAverage * 0.7 },
            { label: "<0.2x national", relativeExample: -nationalAverage * 0.9 }
        ] : [
            { label: "+15%+", relativeExample: 0.18 },
            { label: "+10 to +15%", relativeExample: 0.125 },
            { label: "+5 to +10% ", relativeExample: 0.075 },
            { label: "+2 to +5%", relativeExample: 0.035 },
            { label: "-2 to +2%", relativeExample: 0 },
            { label: "-2 to -5%", relativeExample: -0.035 },
            { label: "-5 to -10%", relativeExample: -0.075 },
            { label: "-10 to -15%", relativeExample: -0.125 },
            { label: "-15%+", relativeExample: -0.18 }
        ];

        ranges.forEach(({ label, relativeExample }) => {
            const row = table.insertRow();

            const colorCell = row.insertCell();
            colorCell.style.width = '16px';
            colorCell.style.height = '12px';

            colorCell.style.backgroundColor = blendRelativePerformanceColor(
                candidate.fields.color_hex,
                relativeExample,
                nationalAverage
            );
            colorCell.style.border = '1px solid #ddd';

            const labelCell = row.insertCell();
            labelCell.textContent = label;
            labelCell.style.paddingLeft = '6px';
            labelCell.style.fontSize = '10px';
        });

        frag.appendChild(table);
        container.appendChild(frag);
        return container;
    }

    function createCompetitivenessLegend() {
        const container = document.createElement('div');
        const frag = document.createDocumentFragment();

        const title = document.createElement('div');
        title.textContent = 'Race competitiveness';
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '5px';
        title.style.textAlign = 'center';
        frag.appendChild(title);

        let mostCompetitive = { state: '', margin: 1 };
        let leastCompetitive = { state: '', margin: 0 };

        campaignTrail_temp.final_state_results.forEach(stateResult => {
            if (stateResult.result_time <= 500 && stateResult.result.length >= 2) {
                const margin = stateResult.result[0].percent - stateResult.result[1].percent;

                if (margin < mostCompetitive.margin) {
                    mostCompetitive = { state: stateResult.abbr, margin: margin };
                }
                if (margin > leastCompetitive.margin) {
                    leastCompetitive = { state: stateResult.abbr, margin: margin };
                }
            }
        });

        const statsDiv = document.createElement('div');
        statsDiv.style.fontSize = '9px';
        statsDiv.style.marginBottom = '5px';
        statsDiv.style.textAlign = 'center';
        statsDiv.style.color = '#555';
        statsDiv.textContent = `Most competitive: ${mostCompetitive.state} | Least: ${leastCompetitive.state}`;
        frag.appendChild(statsDiv);

        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';

        const ranges = [
            { color: "#FF0000", label: "<1% (Tossup)" },
            { color: "#FF3300", label: "1-2.5% (Very Close)" },
            { color: "#FF6600", label: "2.5-5% (Close)" },
            { color: "#FF9900", label: "5-7.5% (Lean)" },
            { color: "#FFCC00", label: "7.5-10% (Likely)" },
            { color: "#FFFF00", label: "10-15% (Safe)" },
            { color: "#AADD00", label: "15-20% (Very Safe)" },
            { color: "#55BB00", label: "20-30% (Solid)" },
            { color: "#0000FF", label: ">30% (Landslide)" }
        ];

        ranges.forEach(({ color, label }) => {
            const row = table.insertRow();

            const colorCell = row.insertCell();
            colorCell.style.width = '16px';
            colorCell.style.height = '12px';
            colorCell.style.backgroundColor = color;
            colorCell.style.border = '1px solid #ddd';

            const labelCell = row.insertCell();
            labelCell.textContent = label;
            labelCell.style.paddingLeft = '6px';
            labelCell.style.fontSize = '10px';
        });

        frag.appendChild(table);
        container.appendChild(frag);
        return container;
    }

    function createTurnoutChangeLegend() {
        const container = document.createElement('div');
        const frag = document.createDocumentFragment();

        const title = document.createElement('div');
        title.textContent = 'Turnout change';
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '5px';
        title.style.textAlign = 'center';
        frag.appendChild(title);

        const noteDiv = document.createElement('div');
        noteDiv.style.fontSize = '9px';
        noteDiv.style.marginBottom = '5px';
        noteDiv.style.color = '#777';
        noteDiv.style.textAlign = 'center';

        if (campaignTrail_temp.TurnoutSystem) {
            noteDiv.textContent = '(% change from baseline turnout)';
        } else {
            noteDiv.textContent = '(estimated from results)';
        }
        frag.appendChild(noteDiv);

        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';

        const ranges = [
            { color: "#006400", label: ">10% (Major increase)" },
            { color: "#228B22", label: "7.5-10% (Large increase)" },
            { color: "#2E8B57", label: "5-7.5% (Significant)" },
            { color: "#3CB371", label: "2.5-5% (Moderate)" },
            { color: "#90EE90", label: "1-2.5% (Minor increase)" },
            { color: "#F5F5F5", label: "±1% (Minimal change)" },
            { color: "#FFA07A", label: "-1 to -2.5% (Minor drop)" },
            { color: "#FF6347", label: "-2.5 to -5% (Moderate)" },
            { color: "#FF0000", label: "-5 to -7.5% (Significant)" },
            { color: "#B22222", label: "-7.5 to -10% (Large drop)" },
            { color: "#8B0000", label: ">10% (Major decrease)" }
        ];

        ranges.forEach(({ color, label }) => {
            const row = table.insertRow();

            const colorCell = row.insertCell();
            colorCell.style.width = '16px';
            colorCell.style.height = '12px';
            colorCell.style.backgroundColor = color;
            colorCell.style.border = '1px solid #ddd';

            const labelCell = row.insertCell();
            labelCell.textContent = label;
            labelCell.style.paddingLeft = '6px';
            labelCell.style.fontSize = '10px';
        });

        frag.appendChild(table);
        container.appendChild(frag);
        return container;
    }

    function createCoalitionBuilderLegend() {
        if (!coalitionResults || !coalitionResults.states) return null;

        candidates = [];
        campaignTrail_temp.final_state_results[0].result.forEach(result => {
            const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
            if (candidate) candidates.push(candidate);
        });

        if (coalitionCandidateIndex >= candidates.length) return null;
        const candidate = candidates[coalitionCandidateIndex];

        const container = document.createElement('div');		
        const fragment = document.createDocumentFragment();

        const title = document.createElement('div');
        title.textContent = `${candidate.fields.last_name} coalition (${Math.round(coalitionVoteShare * 100)}%)`;
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '5px';
        title.style.textAlign = 'center';
        fragment.appendChild(title);

        const winningThreshold = campaignTrail_temp.election_json?.[0]?.fields?.winning_electoral_vote_number || 270;
        const totalEV = coalitionResults.totalElectoralVotes;
        const isWinning = totalEV >= winningThreshold;

        let statesFlipped = 0;
        let statesLost = 0;
        for (const stateAbbr in coalitionResults.states) {
            const stateData = coalitionResults.states[stateAbbr];
            const originalWinner = campaignTrail_temp.final_state_results
                .find(sr => sr.abbr === stateAbbr)?.result[0]?.candidate;

            if (stateData.wouldWin && originalWinner !== candidate.pk) {
                statesFlipped++;
            } else if (!stateData.wouldWin && originalWinner === candidate.pk) {
                statesLost++;
            }
        }

        const statsDiv = document.createElement('div');
        statsDiv.style.fontSize = '9px';
        statsDiv.style.marginBottom = '5px';
        statsDiv.style.textAlign = 'center';
        statsDiv.style.color = isWinning ? '#006400' : '#8B0000';
        statsDiv.style.fontWeight = 'bold';

        let statsText = `Electoral votes: ${totalEV}/${winningThreshold}`;
        if (statesFlipped > 0) statsText += ` | Flipped: ${statesFlipped}`;
        if (statesLost > 0) statsText += ` | Lost: ${statesLost}`;

        statsDiv.textContent = statsText;
        fragment.appendChild(statsDiv);

        const originalWins = campaignTrail_temp.final_state_results.filter(sr =>
            sr.result_time <= 500 && sr.result.length > 0 && sr.result[0].candidate === candidate.pk
        ).length;

        const projectedWins = Object.values(coalitionResults.states).filter(s => s.wouldWin).length;
        const netStateChange = projectedWins - originalWins;

        const swingDiv = document.createElement('div');
        swingDiv.style.fontSize = '9px';
        swingDiv.style.marginBottom = '5px';
        swingDiv.style.textAlign = 'center';
        swingDiv.style.color = '#555';

        if (netStateChange > 0) {
            swingDiv.textContent = `Flips ${netStateChange} states from current results`;
        } else if (netStateChange < 0) {
            swingDiv.textContent = `Loses ${Math.abs(netStateChange)} currently won states`;
        } else {
            swingDiv.textContent = 'Same states as current results';
        }

        fragment.appendChild(swingDiv);

        if (!isWinning && coalitionResults.mostCompetitiveLosses && coalitionResults.mostCompetitiveLosses.length > 0) {
            const targetsDiv = document.createElement('div');
            targetsDiv.style.fontSize = '9px';
            targetsDiv.style.marginBottom = '5px';
            targetsDiv.style.textAlign = 'center';
            targetsDiv.style.color = '#666';
            targetsDiv.style.fontStyle = 'italic';

            const topTargets = coalitionResults.mostCompetitiveLosses.slice(0, 3);
            const targetNames = topTargets.map(t => t.abbr).join(', ');
            targetsDiv.textContent = `Best targets: ${targetNames}`;

            fragment.appendChild(targetsDiv);
        }

        if (coalitionMode === 'performance') {

            const performanceValues = [];
            let minPerformance = 1;
            let maxPerformance = 0;
            let totalPerformance = 0;
            let count = 0;

            for (const stateAbbr in coalitionResults.states) {
                const stateData = coalitionResults.states[stateAbbr];
                const performance = stateData.newVoteShare;

                performanceValues.push(performance);
                minPerformance = Math.min(minPerformance, performance);
                maxPerformance = Math.max(maxPerformance, performance);
                totalPerformance += performance;
                count++;
            }

            const avgPerformance = count > 0 ? totalPerformance / count : 0;

            performanceValues.sort((a, b) => a - b);
            const p10 = calculatePercentile(performanceValues, 10);
            const p90 = calculatePercentile(performanceValues, 90);

            const coalitionCandidateData = {
                max: maxPerformance,
                min: minPerformance,
                avg: avgPerformance,
                p10: p10,
                p90: p90,
                percentiles: performanceValues
            };

            const coalitionThresholds = getCoalitionPerformanceThresholds(coalitionCandidateData);

            const perfStatsDiv = document.createElement('div');
            perfStatsDiv.style.fontSize = '9px';
            perfStatsDiv.style.marginBottom = '5px';
            perfStatsDiv.style.textAlign = 'center';
            perfStatsDiv.style.color = '#555';
            perfStatsDiv.textContent = `Coalition best: ${formatThreshold(maxPerformance)} | Avg: ${formatThreshold(avgPerformance)}`;
            fragment.appendChild(perfStatsDiv);

            const table = document.createElement('table');
            table.style.width = '100%';
            table.style.borderCollapse = 'collapse';

            for (let i = 0; i < coalitionThresholds.length; i++) {
                const row = table.insertRow();

                const colorCell = row.insertCell();
                colorCell.style.width = '16px';
                colorCell.style.height = '12px';
                colorCell.style.backgroundColor = blendPerformanceColor(
                    candidate.fields.color_hex,
                    coalitionThresholds[i],
                    coalitionCandidateData
                );
                colorCell.style.border = '1px solid #ddd';

                const labelCell = row.insertCell();

                let labelText;
                if (i === 0) {
                    labelText = formatThreshold(coalitionThresholds[i]) + '+';
                } else if (i === coalitionThresholds.length - 1) {
                    labelText = 'Up to ' + formatThreshold(coalitionThresholds[i]);
                } else {
                    labelText = formatThreshold(coalitionThresholds[i]) + ' - ' + formatThreshold(coalitionThresholds[i - 1]);
                }

                labelCell.textContent = labelText;
                labelCell.style.paddingLeft = '6px';
                labelCell.style.fontSize = '10px';
            }

            fragment.appendChild(table);

        } else if (coalitionMode === 'solid') {

            const table = document.createElement('table');
            table.style.width = '100%';
            table.style.borderCollapse = 'collapse';

            const legendItems = [
                { color: candidate.fields.color_hex, label: `${candidate.fields.last_name} wins` },
            ];

            legendItems.forEach(({ color, label }) => {
                const row = table.insertRow();

                const colorCell = row.insertCell();
                colorCell.style.width = '16px';
                colorCell.style.height = '12px';
                colorCell.style.backgroundColor = color;
                colorCell.style.border = '1px solid #ddd';

                const labelCell = row.insertCell();
                labelCell.textContent = label;
                labelCell.style.paddingLeft = '6px';
                labelCell.style.fontSize = '10px';
            });

            fragment.appendChild(table);
        } else {

            const table = document.createElement('table');
            table.style.width = '100%';
            table.style.borderCollapse = 'collapse';

            const marginRanges = [
                { range: ">15% (Safe)", margin: 0.20 },
                { range: "10-15% (Solid)", margin: 0.12 },
                { range: "5-10% (Likely)", margin: 0.07 },
                { range: "1-5% (Lean)", margin: 0.03 },
                { range: "<1% (Tossup)", margin: 0.005 }
            ];

            marginRanges.forEach(({ range, margin }) => {
                const row = table.insertRow();

                const colorCell = row.insertCell();
                colorCell.style.width = '16px';
                colorCell.style.height = '11px';
                colorCell.style.backgroundColor = blendMarginColor(candidate.fields.color_hex, margin);
                colorCell.style.border = '1px solid #ddd';

                const labelCell = row.insertCell();
                labelCell.textContent = range;
                labelCell.style.paddingLeft = '6px';
                labelCell.style.fontSize = '10px';
            });

            const noWinRow = table.insertRow();
            const noWinColorCell = noWinRow.insertCell();
            noWinColorCell.style.width = '16px';
            noWinColorCell.style.height = '11px';
            noWinColorCell.style.backgroundColor = "#E0E0E0";
            noWinColorCell.style.border = '1px solid #ddd';

            const noWinLabelCell = noWinRow.insertCell();
            noWinLabelCell.textContent = "Does not win";
            noWinLabelCell.style.paddingLeft = '6px';
            noWinLabelCell.style.fontSize = '10px';

            fragment.appendChild(table);
        }

        container.appendChild(fragment);
        return container;
    }

    function createVoteShareLegend() {
        const container = document.createElement('div');		
        const fragment = document.createDocumentFragment();
        container.style.paddingRight = '5px';

        const topCandidates = getTopCandidates();

        const title = document.createElement('div');
        title.textContent = 'Winner vote share';
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '5px';
        title.style.textAlign = 'center';
        fragment.appendChild(title);

        let totalVoteShare = 0;
        let voteShareCount = 0;
        let weakestWin = { share: 1.0, state: '', candidate: null };

        campaignTrail_temp.final_state_results.forEach(stateResult => {
            if (stateResult.result_time <= 500 && stateResult.result.length > 0) {
                const winnerVoteShare = stateResult.result[0].percent;
                const winnerId = stateResult.result[0].candidate;

                totalVoteShare += winnerVoteShare;
                voteShareCount++;

                if (winnerVoteShare < weakestWin.share) {
                    weakestWin.share = winnerVoteShare;
                    weakestWin.state = stateResult.abbr;
                    weakestWin.candidate = winnerId;
                }
            }
        });

        const avgVoteShare = voteShareCount > 0 ? totalVoteShare / voteShareCount : 0;

        const statsDiv = document.createElement('div');
        statsDiv.style.fontSize = '9px';
        statsDiv.style.marginBottom = '5px';
        statsDiv.style.textAlign = 'center';
        statsDiv.style.color = '#555';

        if (voteShareCount > 0) {
            const avgPercent = Math.round(avgVoteShare * 100);
            const weakestPercent = Math.round(weakestWin.share * 100);
            let statsText = `Average winner share: ${avgPercent}% | Weakest win: ${weakestWin.state} (${weakestPercent}%)`;
            statsDiv.textContent = statsText;
        } else {
            statsDiv.textContent = 'No results available';
        }

        fragment.appendChild(statsDiv);

        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';

        const candidateVoteShares = {};
        campaignTrail_temp.final_state_results.forEach(stateResult => {
            if (stateResult.result_time <= 500 && stateResult.result.length > 0) {
                const winnerId = stateResult.result[0].candidate;
                const voteShare = stateResult.result[0].percent;

                if (!candidateVoteShares[winnerId]) {
                    candidateVoteShares[winnerId] = [];
                }
                candidateVoteShares[winnerId].push(voteShare);
            }
        });

        topCandidates.forEach(({ candidate, pk }) => {
            if (!candidateVoteShares[pk] || candidateVoteShares[pk].length === 0) return;

            const nameRow = table.insertRow();
            const nameCell = nameRow.insertCell();
            nameCell.colSpan = 2;
            nameCell.style.paddingTop = '4px';
            nameCell.style.paddingBottom = '2px';

            const colorSpan = document.createElement('span');
            colorSpan.style.display = 'inline-block';
            colorSpan.style.width = '12px';
            colorSpan.style.height = '12px';
            colorSpan.style.backgroundColor = candidate.fields.color_hex;
            colorSpan.style.marginRight = '4px';
            colorSpan.style.border = '1px solid #999';
            colorSpan.style.verticalAlign = 'bottom';

            nameCell.appendChild(colorSpan);
            nameCell.appendChild(document.createTextNode(candidate.fields.last_name));
            nameCell.style.fontWeight = 'bold';

            const voteShareRanges = [
                { min: 0.90, max: 1.00, label: "90-100%", midpoint: 0.95 },
                { min: 0.80, max: 0.90, label: "80-90%", midpoint: 0.85 },
                { min: 0.70, max: 0.80, label: "70-80%", midpoint: 0.75 },
                { min: 0.60, max: 0.70, label: "60-70%", midpoint: 0.65 },
                { min: 0.50, max: 0.60, label: "50-60%", midpoint: 0.55 },
                { min: 0.40, max: 0.50, label: "40-50%", midpoint: 0.45 },
                { min: 0.30, max: 0.40, label: "30-40%", midpoint: 0.35 },
                { min: 0.20, max: 0.30, label: "20-30%", midpoint: 0.25 },
                { min: 0.10, max: 0.20, label: "10-20%", midpoint: 0.15 },
                { min: 0.00, max: 0.10, label: "0-10%", midpoint: 0.05 }
            ];

            const voteShares = candidateVoteShares[pk];

            const relevantRanges = voteShareRanges.filter(range => {
                return voteShares.some(share => {
                    if (range.max === 1.00) {
                        return share >= range.min;
                    } else {
                        return share >= range.min && share < range.max;
                    }
                });
            });

            relevantRanges.forEach(({ min, max, label, midpoint }) => {
                const row = table.insertRow();

                const colorCell = row.insertCell();
                colorCell.style.width = '16px';
                colorCell.style.height = '11px';

                colorCell.style.backgroundColor = blendVoteShareColor(candidate.fields.color_hex, midpoint);
                colorCell.style.border = '1px solid #ddd';

                const labelCell = row.insertCell();
                labelCell.textContent = label;
                labelCell.style.paddingLeft = '6px';
                labelCell.style.fontSize = '10px';
            });

            if (pk !== topCandidates[topCandidates.length - 1].pk) {
                const spacerRow = table.insertRow();
                const spacerCell = spacerRow.insertCell();
                spacerCell.colSpan = 2;
                spacerCell.style.height = '5px';
            }
        });

        fragment.appendChild(table);
        container.appendChild(fragment);
        return container;
    }

    function updateControls() {
        $('#map_controls').remove();

        const controls = document.createElement('div');
        controls.id = 'map_controls';
        controls.style.position = 'absolute';
        controls.style.background = 'rgba(255, 255, 255, 0.92)';
        controls.style.border = '1px solid #aaa';
        controls.style.padding = '8px';
        controls.style.borderRadius = '4px';
        controls.style.boxShadow = '0 1px 4px rgba(0,0,0,0.2)';
        controls.style.zIndex = '1000';
        controls.style.width = '180px';

        const container = document.querySelector('.container');
        const mapContainer = document.getElementById('map_container');

        if (container && mapContainer) {
            const containerRect = container.getBoundingClientRect();
            const mapRect = mapContainer.getBoundingClientRect();

            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            const mapAbsoluteTop = mapRect.top + scrollTop;

            controls.style.left = Math.max(20, containerRect.left - 200) + 'px';
            controls.style.top = mapAbsoluteTop + 'px';
        } else if (container) {
            const containerRect = container.getBoundingClientRect();
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;

            controls.style.left = Math.max(20, containerRect.left - 200) + 'px';
            controls.style.top = Math.max(20, containerRect.top + scrollTop + 200) + 'px';
        } else {
            controls.style.top = '200px';
            controls.style.left = '20px';
        }

        const controlsHandle = document.createElement('div');
        controlsHandle.style.height = '20px';
        controlsHandle.style.marginBottom = '8px';
        controlsHandle.style.display = 'flex';
        controlsHandle.style.alignItems = 'center';
        controlsHandle.style.justifyContent = 'center';
        controlsHandle.style.background = 'linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%)';
        controlsHandle.style.borderBottom = '1px solid #ccc';
        controlsHandle.style.cursor = 'move';
        controlsHandle.style.marginLeft = '-8px';
        controlsHandle.style.marginRight = '-8px';
        controlsHandle.style.marginTop = '-8px';
        controlsHandle.style.borderRadius = '4px 4px 0 0';

        const dragIndicator = document.createElement('span');
        dragIndicator.textContent = '⋮⋮';
        dragIndicator.style.color = '#999';
        dragIndicator.style.fontSize = '12px';
        dragIndicator.style.letterSpacing = '2px';
        controlsHandle.appendChild(dragIndicator);

        controls.appendChild(controlsHandle);

        const modeSelector = document.createElement('select');
        modeSelector.id = 'visualization_mode';
        modeSelector.style.marginBottom = '8px';
        modeSelector.style.width = '100%';
        modeSelector.style.padding = '4px';

        const modeOptions = [
            { value: VISUALIZATION_MODES.SOLID, text: 'Solid colors' },
            //{ value: VISUALIZATION_MODES.SENATE_RACES, text: 'Senate results' },
            //{ value: VISUALIZATION_MODES.HOUSE_COMPOSITION, text: 'House results' },
            { value: VISUALIZATION_MODES.MARGINS, text: 'Margin of victory' },
            { value: VISUALIZATION_MODES.VOTE_SHARE, text: 'Winner vote share' },
            { value: VISUALIZATION_MODES.CANDIDATE_STRENGTH, text: 'Candidate performance' },
            { value: VISUALIZATION_MODES.COMPETITIVENESS, text: 'Race competitiveness' },
            { value: VISUALIZATION_MODES.TURNOUT_CHANGE, text: 'Turnout change' },
            { value: VISUALIZATION_MODES.TIPPING_POINT, text: 'Tipping point path' },
            { value: VISUALIZATION_MODES.ISSUE_STANCE, text: 'Issue stance' },
            { value: VISUALIZATION_MODES.ISSUE_WEIGHT, text: 'Issue importance' },
            { value: VISUALIZATION_MODES.CANDIDATE_ISSUE_ALIGNMENT, text: 'Issue alignment' },
            { value: VISUALIZATION_MODES.COALITION_BUILDER, text: 'Coalition builder' },
            { value: VISUALIZATION_MODES.CANDIDATE_COMBINER, text: 'Candidate combiner' }
        ];

        modeOptions.forEach(option => {
            const optionEl = document.createElement('option');
            optionEl.value = option.value;
            optionEl.textContent = option.text;
            if (option.value === currentMode) {
                optionEl.selected = true;
            }
            modeSelector.appendChild(optionEl);
        });

        controls.appendChild(modeSelector);

        const senateControlsContainer = document.createElement('div');
        senateControlsContainer.id = 'senate_controls_container';
        senateControlsContainer.style.display = currentMode === VISUALIZATION_MODES.SENATE_RACES ? 'block' : 'none';
        senateControlsContainer.style.marginBottom = '8px';

        const senateModeToggle = document.createElement('select');
        senateModeToggle.id = 'senate_mode_selector';
        senateModeToggle.style.width = '100%';
        senateModeToggle.style.padding = '4px';

        const senateModeOptions = [
            { value: 'solid', text: 'Solid colors' },
            { value: 'margins', text: 'Show margins' },
            { value: 'holds_gains', text: 'Holds & gains' }
        ];

        senateModeOptions.forEach(option => {
            const optionElement = document.createElement('option');
            optionElement.value = option.value;
            optionElement.textContent = option.text;
            senateModeToggle.appendChild(optionElement);
        });

        senateModeToggle.value = window.currentSenateMode || 'solid';

        senateModeToggle.addEventListener('change', function () {
            window.currentSenateMode = this.value;
            updateMapStyles();
            updateLegend();
        });

        senateControlsContainer.appendChild(senateModeToggle);
        controls.appendChild(senateControlsContainer);

        const candidateContainer = document.createElement('div');
        candidateContainer.id = 'candidate_selector_container';
        candidateContainer.style.display = currentMode === VISUALIZATION_MODES.CANDIDATE_STRENGTH ? 'block' : 'none';

        const candidateSelector = document.createElement('select');
        candidateSelector.id = 'candidate_selector';
        candidateSelector.style.width = '100%';
        candidateSelector.style.padding = '4px';

        candidates = [];
        campaignTrail_temp.final_state_results[0].result.forEach(result => {
            const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
            if (candidate) candidates.push(candidate);
        });

        candidates.forEach((candidate, idx) => {
            const option = document.createElement('option');
            option.value = idx;
            option.textContent = candidate.fields.last_name;
            if (idx === selectedCandidateIndex) {
                option.selected = true;
            }
            candidateSelector.appendChild(option);
        });

        candidateContainer.appendChild(candidateSelector);
        
        const perfModeToggle = document.createElement('button');
        perfModeToggle.textContent = candidatePerformanceMode === 'absolute' ? 'Show relative to national' : 'Show absolute performance';
        perfModeToggle.style.fontSize = '10px';
        perfModeToggle.style.padding = '2px 8px';
        perfModeToggle.style.cursor = 'pointer';
        perfModeToggle.style.backgroundColor = '#f0f0f0';
        perfModeToggle.style.border = '1px solid #ccc';
        perfModeToggle.style.borderRadius = '3px';
        perfModeToggle.style.width = '100%';
        perfModeToggle.style.marginTop = '4px';

        perfModeToggle.addEventListener('click', function () {
            candidatePerformanceMode = candidatePerformanceMode === 'absolute' ? 'relative' : 'absolute';
            this.textContent = candidatePerformanceMode === 'absolute' ? 'Show relative to national' : 'Show absolute performance';
            updateMapStyles();
            updateLegend();
        });

        candidateContainer.appendChild(perfModeToggle);
        controls.appendChild(candidateContainer);

        const coalitionContainer = document.createElement('div');
        coalitionContainer.id = 'coalition_controls_container';
        coalitionContainer.style.display = currentMode === VISUALIZATION_MODES.COALITION_BUILDER ? 'block' : 'none';
        coalitionContainer.style.marginBottom = '8px';

        const coalitionCandidateSelector = document.createElement('select');
        coalitionCandidateSelector.id = 'coalition_candidate_selector';
        coalitionCandidateSelector.style.width = '100%';
        coalitionCandidateSelector.style.padding = '4px';
        coalitionCandidateSelector.style.marginBottom = '4px';

        candidates.forEach((candidate, idx) => {
            const option = document.createElement('option');
            option.value = idx;
            option.textContent = candidate.fields.last_name;
            if (idx === coalitionCandidateIndex) {
                option.selected = true;
            }
            coalitionCandidateSelector.appendChild(option);
        });

        coalitionContainer.appendChild(coalitionCandidateSelector);

        const currentCandidateResult = campaignTrail_temp.final_overall_results
            .find(r => r.candidate === candidates[coalitionCandidateIndex]?.pk);
        const totalNationalVotes = campaignTrail_temp.final_overall_results
            .reduce((sum, r) => sum + r.popular_votes, 0);
        const actualVoteShare = currentCandidateResult && totalNationalVotes > 0 ?
            currentCandidateResult.popular_votes / totalNationalVotes : 0.35;

        if (Math.abs(coalitionVoteShare - 0.5) < 0.01) {
            coalitionVoteShare = actualVoteShare;
        }

        const sliderContainer = document.createElement('div');
        sliderContainer.style.marginBottom = '4px';

        const sliderLabel = document.createElement('div');
        sliderLabel.style.fontSize = '11px';
        sliderLabel.style.marginBottom = '3px';
        sliderLabel.style.textAlign = 'center';

        const voteShareDisplay = document.createElement('span');
        voteShareDisplay.style.cursor = 'pointer';
        voteShareDisplay.style.textDecoration = 'underline';
        voteShareDisplay.style.color = '#0066cc';
        voteShareDisplay.textContent = `${(coalitionVoteShare * 100).toFixed(1)}%`;

        const currentDisplay = document.createElement('span');
        currentDisplay.textContent = ` (Current: ${(actualVoteShare * 100).toFixed(1)}%)`;

        sliderLabel.appendChild(document.createTextNode('Vote Share: '));
        sliderLabel.appendChild(voteShareDisplay);
        sliderLabel.appendChild(currentDisplay);

        const directInput = document.createElement('input');
        directInput.type = 'number';
        directInput.min = '0';
        directInput.max = '100';
        directInput.step = '0.1';
        directInput.style.width = '50px';
        directInput.style.fontSize = '11px';
        directInput.style.textAlign = 'center';
        directInput.style.display = 'none';
        directInput.style.position = 'absolute';
        directInput.style.zIndex = '1001';

        voteShareDisplay.addEventListener('click', function (e) {
            e.stopPropagation();

            const rect = voteShareDisplay.getBoundingClientRect();
            directInput.style.left = rect.left + 'px';
            directInput.style.top = rect.top + 'px';
            directInput.style.display = 'block';
            directInput.value = (coalitionVoteShare * 100).toFixed(1);

            voteShareDisplay.style.visibility = 'hidden';

            document.body.appendChild(directInput);
            directInput.focus();
            directInput.select();
        });

        function finishDirectEdit(updateValue = true) {
            if (updateValue) {
                let newPercent = parseFloat(directInput.value);
                if (!isNaN(newPercent)) {
                    newPercent = Math.max(0, Math.min(100, newPercent));
                    coalitionVoteShare = newPercent / 100;
                    voteShareSlider.value = coalitionVoteShare;

                    voteShareDisplay.textContent = `${newPercent.toFixed(1)}%`;

                    clearTimeout(updateTimeout);
                    updateTimeout = setTimeout(() => {
                        updateMapStyles();
                        updateLegend();
                    }, 50);
                }
            }

            voteShareDisplay.style.visibility = 'visible';
            if (directInput.parentNode) {
                directInput.parentNode.removeChild(directInput);
            }
            directInput.style.display = 'none';
        }

        directInput.addEventListener('blur', () => finishDirectEdit(true));
        directInput.addEventListener('keydown', function (e) {
            if (e.key === 'Enter') {
                finishDirectEdit(true);
            } else if (e.key === 'Escape') {
                finishDirectEdit(false);
            }
        });

        document.addEventListener('click', function (e) {
            if (directInput.style.display === 'block' && !directInput.contains(e.target)) {
                finishDirectEdit(false);
            }
        });

        sliderContainer.appendChild(sliderLabel);
        coalitionContainer.appendChild(sliderContainer);

        const voteShareSlider = document.createElement('input');
        voteShareSlider.type = 'range';
        voteShareSlider.id = 'coalition_vote_share_slider';
        voteShareSlider.min = '0';
        voteShareSlider.max = '1';
        voteShareSlider.step = '0.001';
        voteShareSlider.value = coalitionVoteShare;
        voteShareSlider.style.width = '100%';
        voteShareSlider.style.marginBottom = '4px';
        coalitionContainer.appendChild(voteShareSlider);

        const coalitionModeSelector = document.createElement('select');
        coalitionModeSelector.id = 'coalition_mode_selector';
        coalitionModeSelector.style.width = '100%';
        coalitionModeSelector.style.padding = '4px';

        const coalitionModeOptions = [
            { value: 'solid', text: 'Solid colors' },
            { value: 'margins', text: 'Projected margins' },
            { value: 'performance', text: 'Candidate performance' }
        ];

        coalitionModeOptions.forEach(option => {
            const optionEl = document.createElement('option');
            optionEl.value = option.value;
            optionEl.textContent = option.text;
            if (option.value === coalitionMode) {
                optionEl.selected = true;
            }
            coalitionModeSelector.appendChild(optionEl);
        });

        coalitionContainer.appendChild(coalitionModeSelector);
        controls.appendChild(coalitionContainer);

        const combinerContainer = document.createElement('div');
        combinerContainer.id = 'combiner_controls_container';
        combinerContainer.style.display = currentMode === VISUALIZATION_MODES.CANDIDATE_COMBINER ? 'block' : 'none';
        combinerContainer.style.marginBottom = '8px';

        if (candidates.length >= 4) {
            const headToHeadToggle = document.createElement('button');
            headToHeadToggle.textContent = headToHeadMode ? 'Switch to Single Team' : 'Head-to-Head Mode';
            headToHeadToggle.style.fontSize = '10px';
            headToHeadToggle.style.padding = '2px 8px';
            headToHeadToggle.style.cursor = 'pointer';
            headToHeadToggle.style.backgroundColor = headToHeadMode ? '#e6f3ff' : '#f0f0f0';
            headToHeadToggle.style.border = '1px solid #ccc';
            headToHeadToggle.style.borderRadius = '3px';
            headToHeadToggle.style.width = '100%';
            headToHeadToggle.style.marginBottom = '6px';

            headToHeadToggle.addEventListener('click', function () {
                headToHeadMode = !headToHeadMode;
                this.textContent = headToHeadMode ? 'Switch to Single Team' : 'Head-to-Head Mode';
                this.style.backgroundColor = headToHeadMode ? '#e6f3ff' : '#f0f0f0';
                document.getElementById('single_team_container').style.display = headToHeadMode ? 'none' : 'block';
                document.getElementById('head_to_head_container').style.display = headToHeadMode ? 'block' : 'none';
                updateMapStyles();
                updateLegend();
            });
            combinerContainer.appendChild(headToHeadToggle);
        }

        const singleTeamContainer = document.createElement('div');
        singleTeamContainer.id = 'single_team_container';
        singleTeamContainer.style.display = headToHeadMode ? 'none' : 'block';

        const combinerModeToggle = document.createElement('button');
        combinerModeToggle.textContent = combinerMode === 'two' ? 'Combine 3 candidates' : 'Combine 2 candidates';
        combinerModeToggle.style.fontSize = '10px';
        combinerModeToggle.style.padding = '2px 8px';
        combinerModeToggle.style.cursor = 'pointer';
        combinerModeToggle.style.backgroundColor = '#f0f0f0';
        combinerModeToggle.style.border = '1px solid #ccc';
        combinerModeToggle.style.borderRadius = '3px';
        combinerModeToggle.style.width = '100%';
        combinerModeToggle.style.marginBottom = '6px';

        combinerModeToggle.addEventListener('click', function () {
            combinerMode = combinerMode === 'two' ? 'three' : 'two';
            this.textContent = combinerMode === 'two' ? 'Combine 3 candidates' : 'Combine 2 candidates';
            document.getElementById('combiner_third_container').style.display = combinerMode === 'three' ? 'block' : 'none';
            if (combinerMode === 'two') {
                combinedCandidateIndex3 = -1;
            } else if (combinerMode === 'three' && combinedCandidateIndex3 === -1) {
                for (let i = 0; i < candidates.length; i++) {
                    if (i !== combinedCandidateIndex1 && i !== combinedCandidateIndex2) {
                        combinedCandidateIndex3 = i;
                        document.getElementById('combiner_candidate_selector3').value = i;
                        break;
                    }
                }
            }
            updateMapStyles();
            updateLegend();
        });

        singleTeamContainer.appendChild(combinerModeToggle);

        const combinerLabel1 = document.createElement('div');
        combinerLabel1.style.fontSize = '11px';
        combinerLabel1.style.marginBottom = '3px';
        combinerLabel1.textContent = 'Primary candidate:';
        singleTeamContainer.appendChild(combinerLabel1);

        const combinerCandidateSelector1 = document.createElement('select');
        combinerCandidateSelector1.id = 'combiner_candidate_selector1';
        combinerCandidateSelector1.style.width = '100%';
        combinerCandidateSelector1.style.padding = '4px';
        combinerCandidateSelector1.style.marginBottom = '4px';
        candidates.forEach((candidate, idx) => {
            const option = document.createElement('option');
            option.value = idx;
            option.textContent = candidate.fields.last_name;
            if (idx === combinedCandidateIndex1) option.selected = true;
            combinerCandidateSelector1.appendChild(option);
        });
        singleTeamContainer.appendChild(combinerCandidateSelector1);

        const combinerLabel2 = document.createElement('div');
        combinerLabel2.style.fontSize = '11px';
        combinerLabel2.style.marginBottom = '3px';
        combinerLabel2.textContent = 'Combine with:';
        singleTeamContainer.appendChild(combinerLabel2);

        const combinerCandidateSelector2 = document.createElement('select');
        combinerCandidateSelector2.id = 'combiner_candidate_selector2';
        combinerCandidateSelector2.style.width = '100%';
        combinerCandidateSelector2.style.padding = '4px';
        combinerCandidateSelector2.style.marginBottom = '4px';
        candidates.forEach((candidate, idx) => {
            const option = document.createElement('option');
            option.value = idx;
            option.textContent = candidate.fields.last_name;
            if (idx === combinedCandidateIndex2) option.selected = true;
            combinerCandidateSelector2.appendChild(option);
        });
        singleTeamContainer.appendChild(combinerCandidateSelector2);

        const thirdCandidateContainer = document.createElement('div');
        thirdCandidateContainer.id = 'combiner_third_container';
        thirdCandidateContainer.style.display = combinerMode === 'three' ? 'block' : 'none';
        const combinerLabel3 = document.createElement('div');
        combinerLabel3.style.fontSize = '11px';
        combinerLabel3.style.marginBottom = '3px';
        combinerLabel3.textContent = 'Also combine with:';
        thirdCandidateContainer.appendChild(combinerLabel3);
        const combinerCandidateSelector3 = document.createElement('select');
        combinerCandidateSelector3.id = 'combiner_candidate_selector3';
        combinerCandidateSelector3.style.width = '100%';
        combinerCandidateSelector3.style.padding = '4px';
        candidates.forEach((candidate, idx) => {
            const option = document.createElement('option');
            option.value = idx;
            option.textContent = candidate.fields.last_name;
            if (idx === combinedCandidateIndex3) option.selected = true;
            combinerCandidateSelector3.appendChild(option);
        });
        thirdCandidateContainer.appendChild(combinerCandidateSelector3);
        singleTeamContainer.appendChild(thirdCandidateContainer);
        combinerContainer.appendChild(singleTeamContainer);

        const headToHeadContainer = document.createElement('div');
        headToHeadContainer.id = 'head_to_head_container';
        headToHeadContainer.style.display = headToHeadMode ? 'block' : 'none';

        const team1Label = document.createElement('div');
        team1Label.style.fontSize = '11px';
        team1Label.style.marginBottom = '3px';
        team1Label.style.fontWeight = 'bold';
        team1Label.textContent = 'Team 1:';
        headToHeadContainer.appendChild(team1Label);

        const team1Candidate1 = document.createElement('select');
        team1Candidate1.id = 'head_to_head_team1_candidate1';
        team1Candidate1.style.width = '100%';
        team1Candidate1.style.padding = '4px';
        team1Candidate1.style.marginBottom = '2px';
        candidates.forEach((candidate, idx) => {
            const option = document.createElement('option');
            option.value = idx;
            option.textContent = candidate.fields.last_name;
            if (idx === headToHeadTeam1Index1) option.selected = true;
            team1Candidate1.appendChild(option);
        });
        headToHeadContainer.appendChild(team1Candidate1);

        const team1Candidate2 = document.createElement('select');
        team1Candidate2.id = 'head_to_head_team1_candidate2';
        team1Candidate2.style.width = '100%';
        team1Candidate2.style.padding = '4px';
        team1Candidate2.style.marginBottom = '6px';
        candidates.forEach((candidate, idx) => {
            const option = document.createElement('option');
            option.value = idx;
            option.textContent = candidate.fields.last_name;
            if (idx === headToHeadTeam1Index2) option.selected = true;
            team1Candidate2.appendChild(option);
        });
        headToHeadContainer.appendChild(team1Candidate2);

        const team2Label = document.createElement('div');
        team2Label.style.fontSize = '11px';
        team2Label.style.marginBottom = '3px';
        team2Label.style.fontWeight = 'bold';
        team2Label.textContent = 'Team 2:';
        headToHeadContainer.appendChild(team2Label);

        const team2Candidate1 = document.createElement('select');
        team2Candidate1.id = 'head_to_head_team2_candidate1';
        team2Candidate1.style.width = '100%';
        team2Candidate1.style.padding = '4px';
        team2Candidate1.style.marginBottom = '2px';
        candidates.forEach((candidate, idx) => {
            const option = document.createElement('option');
            option.value = idx;
            option.textContent = candidate.fields.last_name;
            if (idx === headToHeadTeam2Index1) option.selected = true;
            team2Candidate1.appendChild(option);
        });
        headToHeadContainer.appendChild(team2Candidate1);

        const team2Candidate2 = document.createElement('select');
        team2Candidate2.id = 'head_to_head_team2_candidate2';
        team2Candidate2.style.width = '100%';
        team2Candidate2.style.padding = '4px';
        candidates.forEach((candidate, idx) => {
            const option = document.createElement('option');
            option.value = idx;
            option.textContent = candidate.fields.last_name;
            if (idx === headToHeadTeam2Index2) option.selected = true;
            team2Candidate2.appendChild(option);
        });
        headToHeadContainer.appendChild(team2Candidate2);
        combinerContainer.appendChild(headToHeadContainer);
        controls.appendChild(combinerContainer);

        const tippingPointContainer = document.createElement('div');
        tippingPointContainer.id = 'tipping_point_controls_container';
        tippingPointContainer.style.display = currentMode === VISUALIZATION_MODES.TIPPING_POINT ? 'block' : 'none';
        tippingPointContainer.style.marginBottom = '8px';

        const tippingPointLabel = document.createElement('label');
        tippingPointLabel.textContent = 'Perspective: ';
        tippingPointLabel.style.marginRight = '5px';
        tippingPointLabel.style.fontSize = '11px';
        tippingPointContainer.appendChild(tippingPointLabel);

        const tippingPointCandidateSelector = document.createElement('select');
        tippingPointCandidateSelector.id = 'tipping_point_candidate_selector';
        tippingPointCandidateSelector.style.width = '100%';
        tippingPointCandidateSelector.style.padding = '4px';

        candidates.forEach((candidate, idx) => {
            const option = document.createElement('option');
            option.value = idx;
            option.textContent = candidate.fields.last_name;
            if (idx === selectedCandidateIndex) {
                option.selected = true;
            }
            tippingPointCandidateSelector.appendChild(option);
        });

        tippingPointContainer.appendChild(tippingPointCandidateSelector);
        controls.appendChild(tippingPointContainer);

        const issueContainer = document.createElement('div');
        issueContainer.id = 'issue_selector_container';
        issueContainer.style.display = ['issue_stance', 'issue_weight', 'candidate_issue_alignment'].includes(currentMode) ? 'block' : 'none';
        issueContainer.style.marginBottom = '8px';

        const issueSelector = document.createElement('select');
        issueSelector.id = 'issue_selector';
        issueSelector.style.width = '100%';
        issueSelector.style.padding = '4px';
        issueSelector.style.marginBottom = '4px';

        if (campaignTrail_temp.issues_json) {
            campaignTrail_temp.issues_json.forEach((issue, idx) => {
                const option = document.createElement('option');
                option.value = idx;
                option.textContent = issue.fields.name;
                if (idx === selectedIssueIndex && !showAverageIssueStance) {
                    option.selected = true;
                }
                issueSelector.appendChild(option);
            });

            const averageOption = document.createElement('option');
            averageOption.value = 'average';
            averageOption.textContent = 'Average of all issues';
            if (showAverageIssueStance) {
                averageOption.selected = true;
            }
            issueSelector.appendChild(averageOption);
        }

        issueContainer.appendChild(issueSelector);
        
        const alignmentCandidateContainer = document.createElement('div');
        alignmentCandidateContainer.id = 'alignment_candidate_container';
        alignmentCandidateContainer.style.display = currentMode === VISUALIZATION_MODES.CANDIDATE_ISSUE_ALIGNMENT ? 'block' : 'none';

        const modeToggleContainer = document.createElement('div');
        modeToggleContainer.style.marginBottom = '4px';
        modeToggleContainer.style.textAlign = 'center';

        const modeToggle = document.createElement('button');
        modeToggle.textContent = alignmentComparisonMode === 'single' ? 'Compare multiple' : 'Single view';
        modeToggle.style.fontSize = '10px';
        modeToggle.style.padding = '2px 8px';
        modeToggle.style.cursor = 'pointer';
        modeToggle.style.backgroundColor = '#f0f0f0';
        modeToggle.style.border = '1px solid #ccc';
        modeToggle.style.borderRadius = '3px';

        modeToggle.addEventListener('click', function () {
            alignmentComparisonMode = alignmentComparisonMode === 'single' ? 'comparison' : 'single';
            this.textContent = alignmentComparisonMode === 'single' ? 'Compare multiple' : 'Single view';

            document.getElementById('single_alignment_container').style.display =
                alignmentComparisonMode === 'single' ? 'block' : 'none';
            document.getElementById('comparison_alignment_container').style.display =
                alignmentComparisonMode === 'comparison' ? 'block' : 'none';

            updateMapStyles();
            updateLegend();
        });

        modeToggleContainer.appendChild(modeToggle);
        alignmentCandidateContainer.appendChild(modeToggleContainer);

        const singleAlignmentContainer = document.createElement('div');
        singleAlignmentContainer.id = 'single_alignment_container';
        singleAlignmentContainer.style.display = alignmentComparisonMode === 'single' ? 'block' : 'none';

        const alignmentCandidateSelector = document.createElement('select');
        alignmentCandidateSelector.id = 'alignment_candidate_selector';
        alignmentCandidateSelector.style.width = '100%';
        alignmentCandidateSelector.style.padding = '4px';

        candidates.forEach((candidate, idx) => {
            const option = document.createElement('option');
            option.value = idx;
            option.textContent = candidate.fields.last_name + ' Alignment';
            if (idx === selectedAlignmentCandidateIndex) {
                option.selected = true;
            }
            alignmentCandidateSelector.appendChild(option);
        });

        singleAlignmentContainer.appendChild(alignmentCandidateSelector);
        alignmentCandidateContainer.appendChild(singleAlignmentContainer);

        const comparisonContainer = document.createElement('div');
        comparisonContainer.id = 'comparison_alignment_container';
        comparisonContainer.style.display = alignmentComparisonMode === 'comparison' ? 'block' : 'none';
        comparisonContainer.style.fontSize = '10px';
        const maxCandidatesToCompare = Math.min(candidates.length, 8);
        const comparisonLabel = document.createElement('div');
        comparisonLabel.textContent = `Select candidates (max ${maxCandidatesToCompare}):`;
        comparisonLabel.style.marginBottom = '3px';
        comparisonLabel.style.fontWeight = 'bold';
        comparisonContainer.appendChild(comparisonLabel);

        selectedComparisonCandidates = selectedComparisonCandidates.filter(idx => idx < candidates.length);

        if (selectedComparisonCandidates.length === 0 && candidates.length > 0) {
            selectedComparisonCandidates = [0, 1].filter(idx => idx < candidates.length);
        }

        candidates.forEach((candidate, idx) => {
            const checkContainer = document.createElement('div');
            checkContainer.style.marginBottom = '2px';
            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.id = `cand_check_${idx}`;
            checkbox.value = idx;
            checkbox.checked = selectedComparisonCandidates.includes(idx);
            checkbox.style.marginRight = '4px';

            checkbox.addEventListener('change', function () {
                const isChecked = this.checked;
                const candIdx = parseInt(this.value);

                if (isChecked) {
                    if (selectedComparisonCandidates.length < maxCandidatesToCompare) {
                        selectedComparisonCandidates.push(candIdx);
                    } else {
                        this.checked = false;
                        alert(`Maximum ${maxCandidatesToCompare} candidates can be compared`);
                    }
                } else {
                    if (selectedComparisonCandidates.length > 1) {
                         selectedComparisonCandidates = selectedComparisonCandidates.filter(i => i !== candIdx);
                    } else {
                        this.checked = true; // Prevent unchecking the last one
                    }
                }
                updateMapStyles();
                updateLegend();
            });

            const label = document.createElement('label');
            label.htmlFor = `cand_check_${idx}`;
            label.textContent = candidate.fields.last_name;
            label.style.cursor = 'pointer';

            checkContainer.appendChild(checkbox);
            checkContainer.appendChild(label);
            comparisonContainer.appendChild(checkContainer);
        });
        
        alignmentCandidateContainer.appendChild(comparisonContainer);
        issueContainer.appendChild(alignmentCandidateContainer);

        controls.appendChild(issueContainer);

        let updateTimeout;
        modeSelector.addEventListener('change', function () {
            currentMode = this.value;
            candidateContainer.style.display = currentMode === VISUALIZATION_MODES.CANDIDATE_STRENGTH ? 'block' : 'none';
            coalitionContainer.style.display = currentMode === VISUALIZATION_MODES.COALITION_BUILDER ? 'block' : 'none';
            combinerContainer.style.display = currentMode === VISUALIZATION_MODES.CANDIDATE_COMBINER ? 'block' : 'none';
            tippingPointContainer.style.display = currentMode === VISUALIZATION_MODES.TIPPING_POINT ? 'block' : 'none';
            senateControlsContainer.style.display = currentMode === VISUALIZATION_MODES.SENATE_RACES ? 'block' : 'none';
            issueContainer.style.display = ['issue_stance', 'issue_weight', 'candidate_issue_alignment'].includes(currentMode) ? 'block' : 'none';
            alignmentCandidateContainer.style.display = currentMode === VISUALIZATION_MODES.CANDIDATE_ISSUE_ALIGNMENT ? 'block' : 'none';

            clearTimeout(updateTimeout);
            updateTimeout = setTimeout(() => {
                updateMapStyles();
                updateLegend();
            }, 10);
        });

        candidateSelector.addEventListener('change', function () {
            selectedCandidateIndex = parseInt(this.value);
            clearTimeout(updateTimeout);
            updateTimeout = setTimeout(() => { updateMapStyles(); updateLegend(); }, 10);
        });

        coalitionCandidateSelector.addEventListener('change', function () {
            coalitionCandidateIndex = parseInt(this.value);
            const newCandidateResult = campaignTrail_temp.final_overall_results.find(r => r.candidate === candidates[coalitionCandidateIndex]?.pk);
            const totalNationalVotes = campaignTrail_temp.final_overall_results.reduce((sum, r) => sum + r.popular_votes, 0);
            const newActualVoteShare = newCandidateResult && totalNationalVotes > 0 ? newCandidateResult.popular_votes / totalNationalVotes : 0.35;
            coalitionVoteShare = newActualVoteShare;
            voteShareSlider.value = coalitionVoteShare;
            updateVoteShareLabel();
            updateMapStyles();
            updateLegend();
        });

        function updateVoteShareLabel() {
            const currentCandidateResult = campaignTrail_temp.final_overall_results.find(r => r.candidate === candidates[coalitionCandidateIndex]?.pk);
            const totalNationalVotes = campaignTrail_temp.final_overall_results.reduce((sum, r) => sum + r.popular_votes, 0);
            const actualVoteShare = currentCandidateResult && totalNationalVotes > 0 ? currentCandidateResult.popular_votes / totalNationalVotes : 0.35;
            sliderLabel.innerHTML = `Vote share: <span id="vote-share-display" style="cursor: pointer; color: #007acc; text-decoration: underline;">${(coalitionVoteShare * 100).toFixed(1)}%</span> (Current: ${(actualVoteShare * 100).toFixed(1)}%)`;

            const voteShareDisplay = document.getElementById('vote-share-display');
            if (voteShareDisplay) {
                voteShareDisplay.addEventListener('click', function () {
                    const currentValue = (coalitionVoteShare * 100).toFixed(1);
                    const input = document.createElement('input');
                    input.type = 'number';
                    input.value = currentValue;
                    input.min = '0'; input.max = '100'; input.step = '0.1';
                    input.style.width = '50px'; input.style.fontSize = '11px';
                    this.replaceWith(input);
                    input.focus(); input.select();
                    function finishEdit() {
                        const newValue = parseFloat(input.value);
                        if (!isNaN(newValue) && newValue >= 0 && newValue <= 100) {
                            coalitionVoteShare = newValue / 100;
                            voteShareSlider.value = coalitionVoteShare;
                            updateMapStyles(); updateLegend();
                        }
                        updateVoteShareLabel();
                    }
                    input.addEventListener('blur', finishEdit);
                    input.addEventListener('keypress', (e) => { if (e.key === 'Enter') finishEdit(); });
                });
            }
        }

        voteShareSlider.addEventListener('input', function () {
            coalitionVoteShare = parseFloat(this.value);
            updateVoteShareLabel();
            clearTimeout(updateTimeout);
            updateTimeout = setTimeout(() => { updateMapStyles(); updateLegend(); }, 50);
        });

        coalitionModeSelector.addEventListener('change', function () {
            coalitionMode = this.value;
            updateMapStyles(); updateLegend();
        });

        issueSelector.addEventListener('change', function () {
            if (this.value === 'average') {
                showAverageIssueStance = true;
                selectedIssueIndex = 0;
            } else {
                showAverageIssueStance = false;
                selectedIssueIndex = parseInt(this.value);
            }
            clearTimeout(updateTimeout);
            updateTimeout = setTimeout(() => { updateMapStyles(); updateLegend(); }, 10);
        });

        alignmentCandidateSelector.addEventListener('change', function () {
            selectedAlignmentCandidateIndex = parseInt(this.value);
            clearTimeout(updateTimeout);
            updateTimeout = setTimeout(() => { updateMapStyles(); updateLegend(); }, 10);
        });

        combinerCandidateSelector1.addEventListener('change', () => { combinedCandidateIndex1 = parseInt(combinerCandidateSelector1.value); clearTimeout(updateTimeout); updateTimeout = setTimeout(() => { updateMapStyles(); updateLegend(); }, 10); });
        combinerCandidateSelector2.addEventListener('change', () => { combinedCandidateIndex2 = parseInt(combinerCandidateSelector2.value); clearTimeout(updateTimeout); updateTimeout = setTimeout(() => { updateMapStyles(); updateLegend(); }, 10); });
        combinerCandidateSelector3.addEventListener('change', () => { combinedCandidateIndex3 = parseInt(combinerCandidateSelector3.value); clearTimeout(updateTimeout); updateTimeout = setTimeout(() => { updateMapStyles(); updateLegend(); }, 10); });
        
        team1Candidate1.addEventListener('change', () => { headToHeadTeam1Index1 = parseInt(team1Candidate1.value); clearTimeout(updateTimeout); updateTimeout = setTimeout(() => { updateMapStyles(); updateLegend(); }, 10); });
        team1Candidate2.addEventListener('change', () => { headToHeadTeam1Index2 = parseInt(team1Candidate2.value); clearTimeout(updateTimeout); updateTimeout = setTimeout(() => { updateMapStyles(); updateLegend(); }, 10); });
        team2Candidate1.addEventListener('change', () => { headToHeadTeam2Index1 = parseInt(team2Candidate1.value); clearTimeout(updateTimeout); updateTimeout = setTimeout(() => { updateMapStyles(); updateLegend(); }, 10); });
        team2Candidate2.addEventListener('change', () => { headToHeadTeam2Index2 = parseInt(team2Candidate2.value); clearTimeout(updateTimeout); updateTimeout = setTimeout(() => { updateMapStyles(); updateLegend(); }, 10); });
        
        tippingPointCandidateSelector.addEventListener('change', function () {
            selectedCandidateIndex = parseInt(this.value);
            clearTimeout(updateTimeout);
            updateTimeout = setTimeout(() => { updateMapStyles(); updateLegend(); }, 10);
        });

        document.body.appendChild(controls);
        makeDraggable(controls, controlsHandle);
    }
    
    function createIssueStanceLegend(issueIndex) {
        const container = document.createElement('div');		
        const fragment = document.createDocumentFragment();

        if (showAverageIssueStance) {
            const title = document.createElement('div');
            title.textContent = 'Average issue stance';
            title.style.fontWeight = 'bold';
            title.style.marginBottom = '5px';
            title.style.textAlign = 'center';
            fragment.appendChild(title);

            const noteDiv = document.createElement('div');
            noteDiv.style.fontSize = '9px';
            noteDiv.style.marginBottom = '5px';
            noteDiv.style.textAlign = 'center';
            noteDiv.style.color = '#666';
            noteDiv.textContent = 'Assumes 1 is most conservative and 7 is most liberal. It might not be true for some mods!';
            fragment.appendChild(noteDiv);

        } else {
            if (!campaignTrail_temp.issues_json || issueIndex >= campaignTrail_temp.issues_json.length) {
                return null;
            }
            const issue = campaignTrail_temp.issues_json[issueIndex];
            const title = document.createElement('div');
            title.textContent = issue.fields.name + ' stance';
            title.style.fontWeight = 'bold';
            title.style.marginBottom = '5px';
            title.style.textAlign = 'center';
            fragment.appendChild(title);
        }

        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';

        const stanceColors = ["#8B0000", "#FF0000", "#FF8D1C", "#FFD700", "#32CD32", "#0000FF", "#000080"];
        const stanceLabels = showAverageIssueStance ?
            ["1: Very Conservative", "2: Conservative", "3: Somewhat Conservative", "4: Moderate", "5: Somewhat Liberal", "6: Liberal", "7: Very Liberal"] :
            null;

        for (let stance = 1; stance <= 7; stance++) {
            const row = table.insertRow();
            const colorCell = row.insertCell();
            colorCell.style.width = '16px';
            colorCell.style.height = '12px';
            colorCell.style.backgroundColor = stanceColors[stance - 1];
            colorCell.style.border = '1px solid #ddd';

            const labelCell = row.insertCell();
            if (showAverageIssueStance) {
                labelCell.textContent = stanceLabels[stance - 1];
            } else {
                const issue = campaignTrail_temp.issues_json[issueIndex];
                const stanceField = `stance_${stance}`;
                if (issue.fields[stanceField]) {
                    labelCell.textContent = `${stance}: ${issue.fields[stanceField]}`;
                } else {
                    continue;
                }
            }
            labelCell.style.paddingLeft = '6px';
            labelCell.style.fontSize = '10px';
        }

        fragment.appendChild(table);		
        container.appendChild(fragment);
        return container;
    }

    function createTippingPointLegend() {
        const tippingPointData = calculateTippingPointPath();
        if (!tippingPointData) {
            const container = document.createElement('div');
            const title = document.createElement('div');
            title.textContent = 'No path to victory';
            title.style.fontWeight = 'bold';
            title.style.textAlign = 'center';

            const note = document.createElement('div');
            note.textContent = 'This candidate has already won!';
            note.style.fontSize = '10px';
            note.style.color = '#666';
            note.style.textAlign = 'center';
            note.style.marginTop = '5px';

            fragment.appendChild(title);
            fragment.appendChild(note);
            return container;
        }

        const container = document.createElement('div');
		const fragment = document.createDocumentFragment();

        const title = document.createElement('div');
        title.textContent = `${tippingPointData.candidate.fields.last_name} path to victory`;
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '5px';
        title.style.textAlign = 'center';
        fragment.appendChild(title);

        const statsDiv = document.createElement('div');
        statsDiv.style.fontSize = '9px';
        statsDiv.style.marginBottom = '5px';
        statsDiv.style.textAlign = 'center';
        statsDiv.style.color = '#555';
        statsDiv.textContent = `Current: ${tippingPointData.currentEVs} EVs | Needs: ${tippingPointData.neededEVs} more | Path total: ${tippingPointData.totalPathEVs}`;
        fragment.appendChild(statsDiv);

        if (tippingPointData.tippingPointState) {
            const tippingDiv = document.createElement('div');
            tippingDiv.style.fontSize = '9px';
            tippingDiv.style.marginBottom = '5px';
            tippingDiv.style.textAlign = 'center';
            tippingDiv.style.color = '#d63384';
            tippingDiv.style.fontWeight = 'bold';
            tippingDiv.textContent = `Tipping point state: ${tippingPointData.tippingPointState}`;
            fragment.appendChild(tippingDiv);
        }

        const currentDiv = document.createElement('div');
        currentDiv.style.fontSize = '10px';
        currentDiv.style.marginBottom = '8px';
        currentDiv.style.padding = '3px';
        currentDiv.style.backgroundColor = '#f9f9f9';
        currentDiv.style.border = '1px solid #ddd';

        const currentHeader = document.createElement('div');
        currentHeader.style.fontWeight = 'bold';
        currentHeader.style.margin = '2px 0';
        currentHeader.innerHTML = `<span style="display:inline-block;width:12px;height:12px;background:${tippingPointData.candidate.fields.color_hex};border:1px solid #999;margin-right:4px;vertical-align:bottom;"></span>Currently won`;
        currentDiv.appendChild(currentHeader);

        fragment.appendChild(currentDiv);

        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';
        table.style.marginTop = '5px';

        const headerRow = table.insertRow();
        headerRow.style.backgroundColor = '#f0f0f0';
        const headerState = headerRow.insertCell();
        headerState.textContent = 'State';
        headerState.style.fontWeight = 'bold';
        headerState.style.fontSize = '9px';
        headerState.style.padding = '2px 4px';

        const headerEV = headerRow.insertCell();
        headerEV.textContent = 'EVs';
        headerEV.style.fontWeight = 'bold';
        headerEV.style.fontSize = '9px';
        headerEV.style.padding = '2px 4px';
        headerEV.style.textAlign = 'center';

        const headerDeficit = headerRow.insertCell();
        headerDeficit.textContent = 'Gap';
        headerDeficit.style.fontWeight = 'bold';
        headerDeficit.style.fontSize = '9px';
        headerDeficit.style.padding = '2px 4px';
        headerDeficit.style.textAlign = 'center';

        tippingPointData.path.forEach((state, index) => {
            const row = table.insertRow();

            const stateCell = row.insertCell();
            stateCell.style.fontSize = '9px';
            stateCell.style.padding = '2px 4px';

            const colorSpan = document.createElement('span');
            colorSpan.style.display = 'inline-block';
            colorSpan.style.width = '8px';
            colorSpan.style.height = '8px';
            colorSpan.style.backgroundColor = getTippingPointColor(
                state.pathPosition,
                state.isRequired,
                state.deficit,
                tippingPointData.path.length,
                tippingPointData.candidate.fields.color_hex
            );
            colorSpan.style.marginRight = '3px';
            colorSpan.style.border = '1px solid #999';
            colorSpan.style.verticalAlign = 'middle';

            stateCell.appendChild(colorSpan);

            const stateText = state.abbr === tippingPointData.tippingPointState ?
                `${state.pathPosition}. ${state.abbr} ★` :
                `${state.pathPosition}. ${state.abbr}`;
            stateCell.appendChild(document.createTextNode(stateText));

            if (state.abbr === tippingPointData.tippingPointState) {
                stateCell.style.fontWeight = 'bold';
                stateCell.style.color = '#d63384';
            }

            const evCell = row.insertCell();
            evCell.textContent = state.electoralVotes;
            evCell.style.fontSize = '9px';
            evCell.style.padding = '2px 4px';
            evCell.style.textAlign = 'center';

            const deficitCell = row.insertCell();
            deficitCell.textContent = `${(state.deficit * 100).toFixed(1)}%`;
            deficitCell.style.fontSize = '9px';
            deficitCell.style.padding = '2px 4px';
            deficitCell.style.textAlign = 'center';
        });

        const explanationDiv = document.createElement('div');
        explanationDiv.style.fontSize = '9px';
        explanationDiv.style.marginTop = '5px';
        explanationDiv.style.color = '#666';
        explanationDiv.style.textAlign = 'center';
        explanationDiv.textContent = '★ = Tipping point | Darker = Higher priority';
        fragment.appendChild(explanationDiv);

        fragment.appendChild(table);
		container.appendChild(fragment);
        return container;
    }
    
    function calculateCombinerResults(candidateIndex1, candidateIndex2, candidateIndex3 = -1) {
        candidates = [];
        campaignTrail_temp.final_state_results[0].result.forEach(result => {
            const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
            if (candidate) candidates.push(candidate);
        });

        const validIndices = [candidateIndex1, candidateIndex2];
        if (candidateIndex3 !== -1) validIndices.push(candidateIndex3);

        if (new Set(validIndices).size !== validIndices.length ||
            validIndices.some(idx => idx >= candidates.length || idx < 0)) {
            return {};
        }

        const candidate1 = candidates[candidateIndex1];
        const candidate2 = candidates[candidateIndex2];
        const candidate3 = candidateIndex3 !== -1 ? candidates[candidateIndex3] : null;

        const results = {};
        let totalElectoralVotes = 0;

        campaignTrail_temp.final_state_results.forEach(stateResult => {
            const stateAbbr = stateResult.abbr;
            const stateId = stateResult.state;
            const state = campaignTrail_temp.states_json.find(s => s.pk === stateId);
            const electoralVotes = state ? state.fields.electoral_votes : 0;

            const originalResults = [...stateResult.result];
            const candidate1Result = originalResults.find(r => r.candidate === candidate1.pk);
            const candidate2Result = originalResults.find(r => r.candidate === candidate2.pk);
            const candidate3Result = candidate3 ? originalResults.find(r => r.candidate === candidate3.pk) : null;

            const candidate1Votes = candidate1Result ? candidate1Result.percent : 0;
            const candidate2Votes = candidate2Result ? candidate2Result.percent : 0;
            const candidate3Votes = candidate3Result ? candidate3Result.percent : 0;
            const combinedVotes = candidate1Votes + candidate2Votes + candidate3Votes;

            const candidatesToRemove = [candidate1.pk, candidate2.pk];
            if (candidate3) candidatesToRemove.push(candidate3.pk);

            const newResults = originalResults
                .filter(r => !candidatesToRemove.includes(r.candidate))
                .map(r => ({ ...r }));

            newResults.push({
                candidate: candidate1.pk,
                percent: combinedVotes,
                votes: (candidate1Result?.votes || 0) + (candidate2Result?.votes || 0) + (candidate3Result?.votes || 0)
            });

            newResults.sort((a, b) => b.percent - a.percent);
            const newWinner = newResults[0];
            const newMargin = newResults.length >= 2 ? newResults[0].percent - newResults[1].percent : newResults[0].percent;

            const wouldWin = newWinner.candidate === candidate1.pk;

            results[stateAbbr] = {
                wouldWin: wouldWin,
                electoralVotes: electoralVotes,
                combinedVoteShare: combinedVotes,
                originalCandidate1Votes: candidate1Votes,
                originalCandidate2Votes: candidate2Votes,
                originalCandidate3Votes: candidate3Votes,
                projectedMargin: newMargin,
                newWinner: newWinner.candidate,
                newResults: newResults
            };

            if (wouldWin) {
                totalElectoralVotes += electoralVotes;
            }
        });

        return {
            states: results,
            totalElectoralVotes: totalElectoralVotes,
            candidate1Index: candidateIndex1,
            candidate2Index: candidateIndex2,
            candidate3Index: candidateIndex3,
            candidate1: candidate1,
            candidate2: candidate2,
            candidate3: candidate3
        };
    }
	
    function calculateHeadToHeadResults(team1Index1, team1Index2, team2Index1, team2Index2) {
        candidates = [];
        campaignTrail_temp.final_state_results[0].result.forEach(result => {
            const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
            if (candidate) candidates.push(candidate);
        });

        const team1Candidate1 = candidates[team1Index1];
        const team1Candidate2 = candidates[team1Index2];
        const team2Candidate1 = candidates[team2Index1];
        const team2Candidate2 = candidates[team2Index2];

        if (!team1Candidate1 || !team1Candidate2 || !team2Candidate1 || !team2Candidate2) {
            return {};
        }

        const results = {};
        let team1ElectoralVotes = 0;
        let team2ElectoralVotes = 0;

        campaignTrail_temp.final_state_results.forEach(stateResult => {
            const stateAbbr = stateResult.abbr;
            const stateId = stateResult.state;
            const state = campaignTrail_temp.states_json.find(s => s.pk === stateId);
            const electoralVotes = state ? state.fields.electoral_votes : 0;

            const originalResults = [...stateResult.result];

            const team1Cand1Result = originalResults.find(r => r.candidate === team1Candidate1.pk);
            const team1Cand2Result = originalResults.find(r => r.candidate === team1Candidate2.pk);
            const team2Cand1Result = originalResults.find(r => r.candidate === team2Candidate1.pk);
            const team2Cand2Result = originalResults.find(r => r.candidate === team2Candidate2.pk);

            const team1Votes = (team1Cand1Result ? team1Cand1Result.percent : 0) +
                (team1Cand2Result ? team1Cand2Result.percent : 0);
            const team2Votes = (team2Cand1Result ? team2Cand1Result.percent : 0) +
                (team2Cand2Result ? team2Cand2Result.percent : 0);

            const team1Wins = team1Votes > team2Votes;
            const margin = Math.abs(team1Votes - team2Votes);

            results[stateAbbr] = {
                team1Wins: team1Wins,
                team2Wins: !team1Wins,
                electoralVotes: electoralVotes,
                team1VoteShare: team1Votes,
                team2VoteShare: team2Votes,
                margin: margin,
                winner: team1Wins ? 'team1' : 'team2'
            };

            if (team1Wins) {
                team1ElectoralVotes += electoralVotes;
            } else {
                team2ElectoralVotes += electoralVotes;
            }
        });

        return {
            states: results,
            team1ElectoralVotes: team1ElectoralVotes,
            team2ElectoralVotes: team2ElectoralVotes,
            team1Candidate1: team1Candidate1,
            team1Candidate2: team1Candidate2,
            team2Candidate1: team2Candidate1,
            team2Candidate2: team2Candidate2
        };
    }

    function calculateCoalitionResults(candidateIndex, targetVoteShare) {
        candidates = [];
        campaignTrail_temp.final_state_results[0].result.forEach(result => {
            const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
            if (candidate) candidates.push(candidate);
        });

        if (candidateIndex >= candidates.length) return {};

        const targetCandidate = candidates[candidateIndex];
        const results = {};
        let totalElectoralVotes = 0;
        const statesByMargin = [];

        const currentNationalVoteShare = campaignTrail_temp.final_overall_results
            .find(r => r.candidate === targetCandidate.pk)?.popular_votes || 0;

        const totalNationalVotes = campaignTrail_temp.final_overall_results
            .reduce((sum, r) => sum + r.popular_votes, 0);

        const currentNationalPercent = totalNationalVotes > 0 ? currentNationalVoteShare / totalNationalVotes : 0;
        const nationalSwing = targetVoteShare - currentNationalPercent;

        campaignTrail_temp.final_state_results.forEach(stateResult => {
            const stateAbbr = stateResult.abbr;
            const stateId = stateResult.state;
            const state = campaignTrail_temp.states_json.find(s => s.pk === stateId);
            const electoralVotes = state ? state.fields.electoral_votes : 0;

            const originalResults = [...stateResult.result];
            const targetCandidateResult = originalResults.find(r => r.candidate === targetCandidate.pk);
            const currentStateVoteShare = targetCandidateResult ? targetCandidateResult.percent : 0;

            let swingModifier = 1.0;

            if (originalResults.length >= 2) {
                const currentMargin = originalResults[0].percent - originalResults[1].percent;

                if (currentMargin < 0.05) swingModifier = 1.4;
                else if (currentMargin < 0.10) swingModifier = 1.2;
                else if (currentMargin < 0.20) swingModifier = 1.0;
                else swingModifier = 0.7;
            }

            const stateSwing = nationalSwing * swingModifier;
            const newTargetVoteShare = Math.max(0, Math.min(1, currentStateVoteShare + stateSwing));

            const otherCandidatesTotal = originalResults
                .filter(r => r.candidate !== targetCandidate.pk)
                .reduce((sum, r) => sum + r.percent, 0);

            const remainingVoteShare = 1 - newTargetVoteShare;

            const newResults = originalResults.map(result => {
                if (result.candidate === targetCandidate.pk) {
                    return {
                        ...result,
                        percent: newTargetVoteShare
                    };
                } else {

                    const originalProportion = otherCandidatesTotal > 0 ? result.percent / otherCandidatesTotal : 0;
                    return {
                        ...result,
                        percent: remainingVoteShare * originalProportion
                    };
                }
            });

            newResults.sort((a, b) => b.percent - a.percent);
            const newWinner = newResults[0];
            const newMargin = newResults.length >= 2 ? newResults[0].percent - newResults[1].percent : newResults[0].percent;

            const wouldWin = newWinner.candidate === targetCandidate.pk;

            results[stateAbbr] = {
                wouldWin: wouldWin,
                electoralVotes: electoralVotes,
                currentVoteShare: currentStateVoteShare,
                newVoteShare: newTargetVoteShare,
                projectedMargin: wouldWin ? newMargin : 0,
                newWinner: newWinner.candidate,
                newResults: newResults,
                swing: stateSwing
            };

            if (wouldWin) {
                totalElectoralVotes += electoralVotes;
            }

            statesByMargin.push({
                abbr: stateAbbr,
                margin: wouldWin ? newMargin : -newMargin,
                electoralVotes: electoralVotes,
                wouldWin: wouldWin
            });
        });

        const winningStates = statesByMargin
            .filter(s => s.wouldWin)
            .sort((a, b) => a.margin - b.margin);

        let runningEV = 0;
        let tippingPointState = null;
        const winningThreshold = campaignTrail_temp.election_json?.[0]?.fields?.winning_electoral_vote_number || 270;

        for (const state of winningStates) {
            runningEV += state.electoralVotes;
            if (runningEV >= winningThreshold && !tippingPointState) {
                tippingPointState = state.abbr;
            }
        }

        return {
            states: results,
            totalElectoralVotes: totalElectoralVotes,
            tippingPointState: tippingPointState,
            candidateIndex: candidateIndex,
            targetVoteShare: targetVoteShare
        };
    }

    function getTippingPointState() {
        const winningThreshold = campaignTrail_temp.election_json?.[0]?.fields?.winning_electoral_vote_number || 270;

        candidates = [];
        campaignTrail_temp.final_state_results[0].result.forEach(result => {
            const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
            if (candidate) candidates.push(candidate);
        });

        if (candidates.length < 2) return null;

        const mainCandidate = candidates[0];

        const statePartisanLean = [];

        campaignTrail_temp.final_state_results.forEach(stateResult => {
            if (stateResult.result_time <= 500 && stateResult.result.length >= 2) {
                const state = campaignTrail_temp.states_json.find(s => s.pk === stateResult.state);
                if (!state) return;

                const mainCandidateResult = stateResult.result.find(r => r.candidate === mainCandidate.pk);
                const mainCandidatePercent = mainCandidateResult ? mainCandidateResult.percent : 0;

                const topTwo = stateResult.result.slice(0, 2);
                const twoPartyTotal = topTwo.reduce((sum, r) => sum + r.percent, 0);

                let partisanLean = mainCandidatePercent;
                if (twoPartyTotal > 0 && topTwo.some(r => r.candidate === mainCandidate.pk)) {
                    partisanLean = mainCandidatePercent / twoPartyTotal;
                }

                statePartisanLean.push({
                    abbr: stateResult.abbr,
                    electoralVotes: state.fields.electoral_votes,
                    partisanLean: partisanLean
                });
            }
        });

        statePartisanLean.sort((a, b) => b.partisanLean - a.partisanLean);

        let runningEV = 0;
        for (const state of statePartisanLean) {
            runningEV += state.electoralVotes;
            if (runningEV >= winningThreshold) {
                return state.abbr;
            }
        }

        return null;
    }
    
    function createIssueWeightLegend(issueIndex) {
        if (showAverageIssueStance) {
            const container = document.createElement('div');
            const title = document.createElement('div');
            title.textContent = 'No data';
            title.style.fontWeight = 'bold';
            title.style.textAlign = 'center';
            const message = document.createElement('p');
            message.textContent = 'The "Average of all issues" view is not applicable to Issue importance. Please select a specific issue from the dropdown.';
            message.style.fontSize = '10px';
            message.style.textAlign = 'center';
            message.style.margin = '5px 0 0 0';
            message.style.color = '#555';
            fragment.appendChild(title);
            fragment.appendChild(message);
            return container;
        }

        if (!campaignTrail_temp.issues_json || issueIndex >= campaignTrail_temp.issues_json.length) {
            return null;
        }

        const issue = campaignTrail_temp.issues_json[issueIndex];
        const container = document.createElement('div');
        const fragment = document.createDocumentFragment();

        const title = document.createElement('div');
        title.textContent = issue.fields.name + ' Importance';
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '5px';
        title.style.textAlign = 'center';
        fragment.appendChild(title);

        let highestWeight = -1;
        let lowestWeight = 999;
        let highestState = '';
        let lowestState = '';

        campaignTrail_temp.final_state_results.forEach(stateResult => {
            const stateId = stateResult.state;
            const stateAbbr = stateResult.abbr;
            const stateIssueData = campaignTrail_temp.state_issue_score_json?.find(
                sis => sis.fields.state === stateId && sis.fields.issue === issue.pk
            );
            if (stateIssueData) {
                const weight = stateIssueData.fields.weight;
                if (weight > highestWeight) {
                    highestWeight = weight;
                    highestState = stateAbbr;
                }
                if (weight < lowestWeight) {
                    lowestWeight = weight;
                    lowestState = stateAbbr;
                }
            }
        });

        const statsDiv = document.createElement('div');
        statsDiv.style.fontSize = '9px';
        statsDiv.style.marginBottom = '5px';
        statsDiv.style.textAlign = 'center';
        statsDiv.style.color = '#555';
        if (highestState && lowestState) {
            statsDiv.textContent = `Highest priority: ${highestState} (${highestWeight.toFixed(2)}) | Lowest: ${lowestState} (${lowestWeight.toFixed(2)})`;
        } else {
            statsDiv.textContent = 'No weight data available';
        }
        fragment.appendChild(statsDiv);

        const weightRange = getIssueWeightRange(issueIndex);
        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';

        if (weightRange && weightRange.min !== weightRange.max && (weightRange.max - weightRange.min) > 0.15) {
            const rangeSize = (weightRange.max - weightRange.min) / 5;
            for (let i = 4; i >= 0; i--) {
                const rangeMin = weightRange.min + (i * rangeSize);
                const rangeMax = i === 4 ? weightRange.max : weightRange.min + ((i + 1) * rangeSize);
                const midpoint = (rangeMin + rangeMax) / 2;
                const row = table.insertRow();
                const colorCell = row.insertCell();
                colorCell.style.width = '16px';
                colorCell.style.height = '12px';
                colorCell.style.backgroundColor = getIssueWeightColor(midpoint, issueIndex);
                colorCell.style.border = '1px solid #ddd';
                const labelCell = row.insertCell();
                if (i === 4) {
                    labelCell.textContent = `${rangeMin.toFixed(2)}+ (Highest)`;
                } else if (i === 0) {
                    labelCell.textContent = `${rangeMin.toFixed(2)}-${rangeMax.toFixed(2)} (Lowest)`;
                } else {
                    labelCell.textContent = `${rangeMin.toFixed(2)}-${rangeMax.toFixed(2)}`;
                }
                labelCell.style.paddingLeft = '6px';
                labelCell.style.fontSize = '10px';
            }
        } else {
            const weightRanges = [
                { color: "#0000CD", label: "0.85+ (Critical)" },
                { color: "#1E90FF", label: "0.70-0.85 (Very High)" },
                { color: "#4682B4", label: "0.55-0.70 (High)" },
                { color: "#87CEEB", label: "0.40-0.55 (Moderate)" },
                { color: "#B0C4DE", label: "0.25-0.40 (Low)" },
                { color: "#E6E6FA", label: "0.10-0.25 (Very Low)" },
                { color: "#F8F8FF", label: "<0.10 (Minimal)" }
            ];
            weightRanges.forEach(({ color, label }) => {
                const row = table.insertRow();
                const colorCell = row.insertCell();
                colorCell.style.width = '16px';
                colorCell.style.height = '12px';
                colorCell.style.backgroundColor = color;
                colorCell.style.border = '1px solid #ddd';
                const labelCell = row.insertCell();
                labelCell.textContent = label;
                labelCell.style.paddingLeft = '6px';
                labelCell.style.fontSize = '10px';
            });
        }

        fragment.appendChild(table);
        container.appendChild(fragment);
        return container;
    }

    function createCandidateCombinerLegend() {
        if (!combinerResults || !combinerResults.states) return null;

        const container = document.createElement('div');
		const fragment = document.createDocumentFragment();

        const title = document.createElement('div');
        let titleText = `${combinerResults.candidate1.fields.last_name} + ${combinerResults.candidate2.fields.last_name}`;
        if (combinerResults.candidate3) {
            titleText += ` + ${combinerResults.candidate3.fields.last_name}`;
        }
        title.textContent = titleText;
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '5px';
        title.style.textAlign = 'center';
        fragment.appendChild(title);

        const winningThreshold = campaignTrail_temp.election_json?.[0]?.fields?.winning_electoral_vote_number || 270;
        const totalEV = combinerResults.totalElectoralVotes;
        const isWinning = totalEV >= winningThreshold;

        const originalEV1 = campaignTrail_temp.final_overall_results.find(r => r.candidate === combinerResults.candidate1.pk)?.electoral_votes || 0;
        const originalEV2 = campaignTrail_temp.final_overall_results.find(r => r.candidate === combinerResults.candidate2.pk)?.electoral_votes || 0;
        const originalEV3 = combinerResults.candidate3 ?
            (campaignTrail_temp.final_overall_results.find(r => r.candidate === combinerResults.candidate3.pk)?.electoral_votes || 0) : 0;
        const originalCombined = originalEV1 + originalEV2 + originalEV3;

        const statsDiv = document.createElement('div');
        statsDiv.style.fontSize = '9px';
        statsDiv.style.marginBottom = '5px';
        statsDiv.style.textAlign = 'center';
        statsDiv.style.color = isWinning ? '#006400' : '#8B0000';
        statsDiv.style.fontWeight = 'bold';

        let statsText = `Combined EVs: ${totalEV}/${winningThreshold}`;
        if (originalCombined !== totalEV) {
            const change = totalEV - originalCombined;
            statsText += ` (${change > 0 ? '+' : ''}${change} vs separate)`;
        }

        statsDiv.textContent = statsText;
        fragment.appendChild(statsDiv);

        let totalCombinedVotes = 0;
        let totalOriginal1 = 0;
        let totalOriginal2 = 0;
        let totalOriginal3 = 0;
        let statesAnalyzed = 0;

        for (const stateAbbr in combinerResults.states) {
            const stateData = combinerResults.states[stateAbbr];
            totalCombinedVotes += stateData.combinedVoteShare;
            totalOriginal1 += stateData.originalCandidate1Votes;
            totalOriginal2 += stateData.originalCandidate2Votes;
            totalOriginal3 += stateData.originalCandidate3Votes || 0;
            statesAnalyzed++;
        }

        if (statesAnalyzed > 0) {
            const avgCombined = (totalCombinedVotes / statesAnalyzed * 100).toFixed(1);
            const avgOriginal1 = (totalOriginal1 / statesAnalyzed * 100).toFixed(1);
            const avgOriginal2 = (totalOriginal2 / statesAnalyzed * 100).toFixed(1);
            const avgOriginal3 = (totalOriginal3 / statesAnalyzed * 100).toFixed(1);

            const voteDiv = document.createElement('div');
            voteDiv.style.fontSize = '9px';
            voteDiv.style.marginBottom = '5px';
            voteDiv.style.textAlign = 'center';
            voteDiv.style.color = '#555';

            let voteText = `Avg vote share: ${avgCombined}% (${avgOriginal1}% + ${avgOriginal2}%`;
            if (combinerResults.candidate3) {
                voteText += ` + ${avgOriginal3}%`;
            }
            voteText += ')';
            voteDiv.textContent = voteText;
            fragment.appendChild(voteDiv);
        }

        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';

        const legendItems = [
            { color: blendMarginColor(combinerResults.candidate1.fields.color_hex, 0.20), label: ">15% margin (Safe)" },
            { color: blendMarginColor(combinerResults.candidate1.fields.color_hex, 0.12), label: "10-15% (Solid)" },
            { color: blendMarginColor(combinerResults.candidate1.fields.color_hex, 0.07), label: "5-10% (Likely)" },
            { color: blendMarginColor(combinerResults.candidate1.fields.color_hex, 0.03), label: "1-5% (Lean)" },
            { color: blendMarginColor(combinerResults.candidate1.fields.color_hex, 0.005), label: "<1% (Tossup)" },
            { color: "#E0E0E0", label: "Does not win" }
        ];

        legendItems.forEach(({ color, label }) => {
            const row = table.insertRow();

            const colorCell = row.insertCell();
            colorCell.style.width = '16px';
            colorCell.style.height = '12px';
            colorCell.style.backgroundColor = color;
            colorCell.style.border = '1px solid #ddd';

            const labelCell = row.insertCell();
            labelCell.textContent = label;
            labelCell.style.paddingLeft = '6px';
            labelCell.style.fontSize = '10px';
        });

        fragment.appendChild(table);

        const flippedStates = [];

        for (const stateAbbr in combinerResults.states) {
            const stateData = combinerResults.states[stateAbbr];

            const originalStateResult = campaignTrail_temp.final_state_results.find(sr => sr.abbr === stateAbbr);
            if (originalStateResult && originalStateResult.result.length > 0) {
                const originalWinner = originalStateResult.result[0].candidate;
                const newWinner = stateData.newWinner;

                if (originalWinner !== newWinner && newWinner === combinerResults.candidate1.pk) {
                    flippedStates.push({
                        abbr: stateAbbr,
                        electoralVotes: stateData.electoralVotes,
                        margin: stateData.projectedMargin
                    });
                }
            }
        }

        if (flippedStates.length > 0) {
            flippedStates.sort((a, b) => a.margin - b.margin);

            const flippedDiv = document.createElement('div');
            flippedDiv.style.marginTop = '8px';
            flippedDiv.style.padding = '4px';
            flippedDiv.style.backgroundColor = '#f9f9f9';
            flippedDiv.style.border = '1px solid #ddd';
            flippedDiv.style.borderRadius = '3px';

            const flippedHeader = document.createElement('div');
            flippedHeader.style.fontWeight = 'bold';
            flippedHeader.style.fontSize = '10px';
            flippedHeader.style.marginBottom = '3px';
            flippedHeader.style.textAlign = 'center';
            flippedHeader.textContent = `States flipped (${flippedStates.length})`;
            flippedDiv.appendChild(flippedHeader);

            const flippedList = document.createElement('div');
            flippedList.style.fontSize = '9px';
            flippedList.style.textAlign = 'center';
            flippedList.style.lineHeight = '1.2';

            const stateTexts = flippedStates.map(state =>
                `${state.abbr} (${state.electoralVotes} EVs, +${(state.margin * 100).toFixed(1)}%)`
            );

            if (stateTexts.length > 3) {
                const lines = [];
                for (let i = 0; i < stateTexts.length; i += 3) {
                    lines.push(stateTexts.slice(i, i + 3).join(', '));
                }
                flippedList.textContent = lines.join('\n');
                flippedList.style.whiteSpace = 'pre-line';
            } else {
                flippedList.textContent = stateTexts.join(', ');
            }

            flippedDiv.appendChild(flippedList);
            fragment.appendChild(flippedDiv);
        } else {
            const noFlipsDiv = document.createElement('div');
            noFlipsDiv.style.marginTop = '8px';
            noFlipsDiv.style.fontSize = '9px';
            noFlipsDiv.style.textAlign = 'center';
            noFlipsDiv.style.color = '#666';
            noFlipsDiv.style.fontStyle = 'italic';
            noFlipsDiv.textContent = 'No states flipped by combination';
            fragment.appendChild(noFlipsDiv);
        }
		
		container.appendChild(fragment);
        return container;
    }
    
    function createHeadToHeadLegend() {
        if (!headToHeadResults || !headToHeadResults.states) return null;

        const container = document.createElement('div');
        const fragment = document.createDocumentFragment();
        const title = document.createElement('div');
        title.textContent = 'Head-to-Head Results';
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '5px';
        title.style.textAlign = 'center';
        fragment.appendChild(title);

        const teamsDiv = document.createElement('div');
        teamsDiv.style.fontSize = '9px';
        teamsDiv.style.marginBottom = '8px';
        teamsDiv.style.textAlign = 'center';

        const team1Text = document.createElement('div');
        team1Text.innerHTML = `<span style="display:inline-block;width:12px;height:12px;background:${headToHeadResults.team1Candidate1.fields.color_hex};border:1px solid #999;margin-right:4px;vertical-align:middle;"></span>Team 1: ${headToHeadResults.team1Candidate1.fields.last_name} + ${headToHeadResults.team1Candidate2.fields.last_name}`;
        team1Text.style.marginBottom = '2px';
        teamsDiv.appendChild(team1Text);

        const team2Text = document.createElement('div');
        team2Text.innerHTML = `<span style="display:inline-block;width:12px;height:12px;background:${headToHeadResults.team2Candidate1.fields.color_hex};border:1px solid #999;margin-right:4px;vertical-align:middle;"></span>Team 2: ${headToHeadResults.team2Candidate1.fields.last_name} + ${headToHeadResults.team2Candidate2.fields.last_name}`;
        teamsDiv.appendChild(team2Text);
        fragment.appendChild(teamsDiv);

        const winningThreshold = campaignTrail_temp.election_json?.[0]?.fields?.winning_electoral_vote_number || 270;
        const team1EVs = headToHeadResults.team1ElectoralVotes;
        const team2EVs = headToHeadResults.team2ElectoralVotes;
        const team1Wins = team1EVs >= winningThreshold;
        const team2Wins = team2EVs >= winningThreshold;

        const resultsDiv = document.createElement('div');
        resultsDiv.style.fontSize = '10px';
        resultsDiv.style.marginBottom = '8px';
        resultsDiv.style.textAlign = 'center';
        resultsDiv.style.fontWeight = 'bold';

        if (team1Wins) {
            resultsDiv.style.color = '#006400';
            resultsDiv.textContent = `Team 1 wins! ${team1EVs}-${team2EVs}`;
        } else if (team2Wins) {
            resultsDiv.style.color = '#8B0000';
            resultsDiv.textContent = `Team 2 wins! ${team2EVs}-${team1EVs}`;
        } else {
            resultsDiv.style.color = '#666';
            resultsDiv.textContent = `No majority: ${team1EVs}-${team2EVs}`;
        }
        fragment.appendChild(resultsDiv);

        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';

        const legendItems = [
            { color: blendMarginColor(headToHeadResults.team1Candidate1.fields.color_hex, 0.20), label: "Team 1 >15%" },
            { color: blendMarginColor(headToHeadResults.team1Candidate1.fields.color_hex, 0.07), label: "Team 1 5-15%" },
            { color: blendMarginColor(headToHeadResults.team1Candidate1.fields.color_hex, 0.005), label: "Team 1 <5%" },
            { color: blendMarginColor(headToHeadResults.team2Candidate1.fields.color_hex, 0.005), label: "Team 2 <5%" },
            { color: blendMarginColor(headToHeadResults.team2Candidate1.fields.color_hex, 0.07), label: "Team 2 5-15%" },
            { color: blendMarginColor(headToHeadResults.team2Candidate1.fields.color_hex, 0.20), label: "Team 2 >15%" }
        ];

        legendItems.forEach(({ color, label }) => {
            const row = table.insertRow();
            const colorCell = row.insertCell();
            colorCell.style.width = '16px';
            colorCell.style.height = '12px';
            colorCell.style.backgroundColor = color;
            colorCell.style.border = '1px solid #ddd';
            const labelCell = row.insertCell();
            labelCell.textContent = label;
            labelCell.style.paddingLeft = '6px';
            labelCell.style.fontSize = '9px';
            labelCell.style.lineHeight = '1.1';
        });

        fragment.appendChild(table);
        container.appendChild(fragment);
        return container;
    }

    function createSenateRacesLegend() {
        const container = document.createElement('div');
		const fragment = document.createDocumentFragment();
        container.style.width = '100%';
        container.style.fontSize = '11px';

        const title = document.createElement('div');
        title.textContent = 'U.S. Senate';
        title.style.fontWeight = 'bold';
        title.style.fontSize = '14px';
        title.style.marginBottom = '8px';
        title.style.textAlign = 'center';
        fragment.appendChild(title);

        let demSeats = 0, repSeats = 0, indSeats = 0;
        const senateData = getSenateRaceData();
        if (senateData && Object.keys(senateData).length > 0) {
             const seatsNotUp = 100 - Object.keys(senateData).length;
             demSeats = Math.round(seatsNotUp * 0.45); // Approximate split
             repSeats = seatsNotUp - demSeats;
             
             Object.values(senateData).forEach(raceData => {
                if (raceData.dem > raceData.rep && raceData.dem > (raceData.trd || 0)) demSeats++;
                else if (raceData.rep > raceData.dem && raceData.rep > (raceData.trd || 0)) repSeats++;
                else if ((raceData.trd || 0) > 0) indSeats++;
             });
        } else {
             demSeats = 51; repSeats = 49; indSeats = 0;
        }

        const totalSeats = demSeats + repSeats + indSeats;
        const totalDemCaucus = demSeats + indSeats;
        const majorityThreshold = Math.floor(totalSeats / 2) + 1;
        let control = 'NONE';
        if (totalDemCaucus >= majorityThreshold) control = 'DEM';
        else if (repSeats >= majorityThreshold) control = 'REP';

        const seatsDiv = document.createElement('div');
        seatsDiv.style.display = 'flex';
        seatsDiv.style.justifyContent = 'space-between';
        seatsDiv.style.marginBottom = '8px';
        seatsDiv.style.padding = '6px';
        seatsDiv.style.backgroundColor = '#f8f8f8';
        seatsDiv.style.border = '1px solid #ddd';
        seatsDiv.style.borderRadius = '3px';
        seatsDiv.innerHTML = `
            <span style="color: #0487E6; font-weight: bold;">DEM: ${demSeats}</span>
            <span style="color: #FFDE3A; font-weight: bold;">IND: ${indSeats}</span>
            <span style="color: #DD2929; font-weight: bold;">REP: ${repSeats}</span>`;
        fragment.appendChild(seatsDiv);
        
        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';
        table.style.fontSize = '10px';

        const senateMode = window.currentSenateMode || 'solid';
        if (senateMode === 'holds_gains') {
             const items = [ { color: '#92C5DE', label: 'Democratic hold' }, { color: '#0671B0', label: 'Democratic gain' }, { color: '#F48882', label: 'Republican hold' }, { color: '#CA0120', label: 'Republican gain' }];
             items.forEach(item => { /* ... populate table ... */ });
        } else if (senateMode === 'margins') {
             const parties = [ { name: 'Democratic wins', color: '#0487E6' }, { name: 'Republican wins', color: '#DD2929' }];
             parties.forEach(party => { /* ... populate table ... */ });
        } else {
            const items = [{ color: '#0487E6', label: 'Democratic win' }, { color: '#DD2929', label: 'Republican win' }, { color: '#FFDE3A', label: 'Independent win' }, { color: '#E0E0E0', label: 'No election' }];
            items.forEach(item => {
                 const row = table.insertRow();
                 const colorCell = row.insertCell();
                 colorCell.style.width = '18px'; colorCell.style.height = '14px';
                 colorCell.style.backgroundColor = item.color;
                 colorCell.style.border = '1px solid #999';
                 const labelCell = row.insertCell();
                 labelCell.style.padding = '3px 6px';
                 labelCell.textContent = item.label;
            });
        }
        fragment.appendChild(table);		
        container.appendChild(fragment);
        return container;
    }

    function createHouseCompositionLegend() {
		const container = document.createElement('div');
		const fragment = document.createDocumentFragment();
		container.style.width = '100%';
		container.style.fontSize = '11px';

		const title = document.createElement('div');
		title.textContent = 'U.S. House';
		title.style.fontWeight = 'bold';
		title.style.fontSize = '14px';
		title.style.marginBottom = '8px';
		title.style.textAlign = 'center';
		fragment.appendChild(title);

		const houseData = getHouseCompositionData();
		const totals = houseData._totals || { dem: 0, rep: 0, ind: 0, total: 435 };
		
		// Seat Summary Box
		const seatsDiv = document.createElement('div');
		seatsDiv.style.display = 'flex';
		seatsDiv.style.justifyContent = 'space-around';
		seatsDiv.style.marginBottom = '8px';
		seatsDiv.style.padding = '6px';
		seatsDiv.style.backgroundColor = '#f8f8f8';
		seatsDiv.style.border = '1px solid #ddd';
		seatsDiv.style.borderRadius = '3px';
		
		let seatsText = `<span style="color: #0487E6; font-weight: bold;">DEM: ${totals.dem}</span>`;
		if (totals.ind > 0) seatsText += ` <span style="color: #D4AF37; font-weight: bold;">IND: ${totals.ind}</span>`;
		seatsText += ` <span style="color: #DD2929; font-weight: bold;">REP: ${totals.rep}</span>`;
		seatsDiv.innerHTML = seatsText;
		fragment.appendChild(seatsDiv);
		
		const table = document.createElement('table');
		table.style.width = '100%';
		table.style.borderCollapse = 'collapse';
		table.style.fontSize = '10px';

		const legendItems = [
			{ color: '#0000AA', label: 'All Democratic (100%)' },
			{ color: '#2b6cb8', label: 'Strong Dem (80-99%)' },
			{ color: '#0487E6', label: 'Likely Dem (70-79%)' },
			{ color: '#3A9FE0', label: 'Lean Dem (60-69%)' },
			{ color: '#9DCDF3', label: 'Slight Dem (51-59%)' },
			{ color: '#D896FF', label: 'Split Delegation (50%)' },
			{ color: '#FF9999', label: 'Slight Rep (51-59%)' },
			{ color: '#FF3333', label: 'Lean Rep (60-69%)' },
			{ color: '#DD2929', label: 'Likely Rep (70-79%)' },
			{ color: '#c12525', label: 'Strong Rep (80-99%)' },
			{ color: '#880000', label: 'All Republican (100%)' },
			{ color: '#FFDE3A', label: 'Independent Member' }
		];

		const usedColors = new Set();
		Object.keys(houseData).forEach(stateAbbr => {
			if (stateAbbr !== '_totals' && houseData[stateAbbr].color) {
				usedColors.add(houseData[stateAbbr].color.toUpperCase());
			}
		});

		const relevantItems = legendItems.filter(item => usedColors.has(item.color.toUpperCase()));

		relevantItems.forEach(item => {
			const row = table.insertRow();
			const colorCell = row.insertCell();
			colorCell.style.width = '18px'; 
			colorCell.style.height = '14px';
			colorCell.style.backgroundColor = item.color;
			colorCell.style.border = '1px solid #999';
			
			const labelCell = row.insertCell();
			labelCell.style.padding = '2px 6px';
			labelCell.textContent = item.label;
		});
		
		fragment.appendChild(table);
		
		const noteDiv = document.createElement('div');
		noteDiv.style.fontSize = '9px';
		noteDiv.style.marginTop = '8px';
		noteDiv.style.color = '#666';
		noteDiv.style.textAlign = 'center';
		noteDiv.style.fontStyle = 'italic';
		noteDiv.textContent = 'Colors represent seat share within state delegation';
		fragment.appendChild(noteDiv);
		
		container.appendChild(fragment);
		return container;
	}

    function createCandidateIssueAlignmentLegend(issueIndex, candidateIndex) {
        if (!campaignTrail_temp.issues_json || (issueIndex >= campaignTrail_temp.issues_json.length && !showAverageIssueStance)) {
            return null;
        }

        const isAverage = showAverageIssueStance;
        const issue = isAverage ? { fields: { name: "Average of all issues" } } : campaignTrail_temp.issues_json[issueIndex];

        candidates = [];
        campaignTrail_temp.final_state_results[0].result.forEach(result => {
            const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
            if (candidate) candidates.push(candidate);
        });

        if (candidateIndex >= candidates.length) return null;
        const candidate = candidates[candidateIndex];

        let candidateScore, candidateStanceNumber;

        if (isAverage) {

            let totalScore = 0;
            let issueCount = 0;

            campaignTrail_temp.issues_json.forEach(issue => {
                const candidateIssueData = campaignTrail_temp.candidate_issue_score_json?.find(
                    cis => cis.fields.candidate === candidate.pk && cis.fields.issue === issue.pk
                );
                if (candidateIssueData) {
                    totalScore += candidateIssueData.fields.issue_score;
                    issueCount++;
                }
            });

            candidateScore = issueCount > 0 ? totalScore / issueCount : 0;
            candidateStanceNumber = getStanceNumber(candidateScore);
        } else {
            const candidateIssueData = campaignTrail_temp.candidate_issue_score_json?.find(
                cis => cis.fields.candidate === candidate.pk && cis.fields.issue === issue.pk
            );
            if (!candidateIssueData) return null;
            candidateScore = candidateIssueData.fields.issue_score;
            candidateStanceNumber = getStanceNumber(candidateScore);
        }

        let bestAlignment = 2;
        let worstAlignment = 0;
        let bestState = '';
        let worstState = '';

        campaignTrail_temp.final_state_results.forEach(stateResult => {
            const stateId = stateResult.state;
            const stateAbbr = stateResult.abbr;
            let alignment;
            if (isAverage) {
                const alignmentData = styleCache.candidate_issue_alignment[stateAbbr]?.average?.[candidateIndex];
                alignment = alignmentData?.alignment || 999;
            } else {
                const stateIssueData = campaignTrail_temp.state_issue_score_json?.find(
                    sis => sis.fields.state === stateId && sis.fields.issue === issue.pk
                );
                if (stateIssueData) {
                    const stateScore = stateIssueData.fields.state_issue_score;
                    alignment = Math.abs(stateScore - candidateScore);
                } else {
                    alignment = 999;
                }
            }
            if (alignment < 999) {
                if (alignment < bestAlignment) {
                    bestAlignment = alignment;
                    bestState = stateAbbr;
                }
                if (alignment > worstAlignment) {
                    worstAlignment = alignment;
                    worstState = stateAbbr;
                }
            }
        });

        const container = document.createElement('div');		
        const fragment = document.createDocumentFragment();
        const title = document.createElement('div');
        title.textContent = candidate.fields.last_name + ' - ' + issue.fields.name;
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '5px';
        title.style.textAlign = 'center';
        fragment.appendChild(title);

        const candidateStanceDiv = document.createElement('div');
        candidateStanceDiv.style.fontSize = '9px';
        candidateStanceDiv.style.marginBottom = '3px';
        candidateStanceDiv.style.textAlign = 'center';
        candidateStanceDiv.style.color = '#333';
        candidateStanceDiv.style.fontWeight = 'bold';
        let stanceText;
        if (isAverage) {
            const stanceLabels = ["Very Conservative", "Conservative", "Somewhat Conservative", "Moderate", "Somewhat Liberal", "Liberal", "Very Liberal"];
            stanceText = `${candidateStanceNumber}: ${stanceLabels[candidateStanceNumber - 1]}`;
        } else {
            const stanceField = `stance_${candidateStanceNumber}`;
            stanceText = issue.fields[stanceField] || `Stance ${candidateStanceNumber}`;
        }
        candidateStanceDiv.textContent = `Candidate stance: ${stanceText} (${candidateScore.toFixed(2)})`;
        fragment.appendChild(candidateStanceDiv);

        const statsDiv = document.createElement('div');
        statsDiv.style.fontSize = '9px';
        statsDiv.style.marginBottom = '5px';
        statsDiv.style.textAlign = 'center';
        statsDiv.style.color = '#555';
        statsDiv.textContent = `Best: ${bestState} (${bestAlignment.toFixed(2)}) | Worst: ${worstState} (${worstAlignment.toFixed(2)})`;
        fragment.appendChild(statsDiv);

        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';
        const alignmentRanges = [
            { color: "#006400", label: "Perfect Sync (0-0.2)" }, { color: "#228B22", label: "Well Aligned (0.2-0.4)" }, { color: "#32CD32", label: "Generally Aligned (0.4-0.6)" }, { color: "#FFD700", label: "Somewhat Off (0.6-0.8)" }, { color: "#FF8C00", label: "Misaligned (0.8-1.0)" }, { color: "#FF4500", label: "Very Misaligned (1.0-1.2)" }, { color: "#8B0000", label: "Completely Opposed (1.2+)" }
        ];
        alignmentRanges.forEach(({ color, label }) => {
            const row = table.insertRow();
            const colorCell = row.insertCell();
            colorCell.style.width = '16px'; colorCell.style.height = '12px';
            colorCell.style.backgroundColor = color; colorCell.style.border = '1px solid #ddd';
            const labelCell = row.insertCell();
            labelCell.textContent = label; labelCell.style.paddingLeft = '6px';
            labelCell.style.fontSize = '10px';
        });
        fragment.appendChild(table);
        container.appendChild(fragment);
        return container;
    }
    
    function createComparisonAlignmentLegend(issueIndex) {
        const container = document.createElement('div');		
        const fragment = document.createDocumentFragment();

        if (!campaignTrail_temp.issues_json || (issueIndex >= campaignTrail_temp.issues_json.length && !showAverageIssueStance)) {
            return null;
        }

        const isAverage = showAverageIssueStance;
        const issue = isAverage ? { fields: { name: "Average of all issues" } } : campaignTrail_temp.issues_json[issueIndex];

        const title = document.createElement('div');
        title.textContent = 'Alignment comparison - ' + issue.fields.name;
        title.style.fontWeight = 'bold';
        title.style.marginBottom = '5px';
        title.style.textAlign = 'center';
		fragment.appendChild(title);

        candidates = [];
        campaignTrail_temp.final_state_results[0].result.forEach(result => {
            const candidate = campaignTrail_temp.candidate_json.find(c => c.pk === result.candidate);
            if (candidate) candidates.push(candidate);
        });

        const table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';
        table.style.marginBottom = '8px';

        const headerRow = table.insertRow();
        headerRow.style.backgroundColor = '#f0f0f0';
        const headerCell = headerRow.insertCell();
        headerCell.textContent = 'Candidate';
        headerCell.style.fontWeight = 'bold';
        headerCell.style.fontSize = '9px';
        headerCell.style.padding = '3px';
        const bestCell = headerRow.insertCell();
        bestCell.textContent = 'Best match';
        bestCell.style.fontWeight = 'bold';
        bestCell.style.fontSize = '9px';
        bestCell.style.padding = '3px';
        bestCell.style.textAlign = 'center';

        selectedComparisonCandidates.forEach(candIdx => {
            if (candIdx >= candidates.length) return;
            const candidate = candidates[candIdx];
            const row = table.insertRow();
            let candidateScore;
            if (isAverage) {
                let totalScore = 0, issueCount = 0;
                campaignTrail_temp.issues_json.forEach(issue => {
                    const d = campaignTrail_temp.candidate_issue_score_json?.find(c => c.fields.candidate === candidate.pk && c.fields.issue === issue.pk);
                    if(d) { totalScore += d.fields.issue_score; issueCount++; }
                });
                candidateScore = issueCount > 0 ? totalScore / issueCount : 0;
            } else {
                const d = campaignTrail_temp.candidate_issue_score_json?.find(c => c.fields.candidate === candidate.pk && c.fields.issue === issue.pk);
                candidateScore = d ? d.fields.issue_score : 0;
            }
            const nameCell = row.insertCell();
            nameCell.style.fontSize = '9px';
            nameCell.style.padding = '3px';
            const colorSpan = document.createElement('span');
            colorSpan.style.display = 'inline-block';
            colorSpan.style.width = '10px';
            colorSpan.style.height = '10px';
            colorSpan.style.backgroundColor = candidate.fields.color_hex;
            colorSpan.style.marginRight = '4px';
            colorSpan.style.border = '1px solid #999';
            nameCell.appendChild(colorSpan);
            nameCell.appendChild(document.createTextNode(`${candidate.fields.last_name} (${candidateScore.toFixed(2)})`));

            let bestAlignment = 999;
            let bestState = '';
            campaignTrail_temp.final_state_results.forEach(stateResult => {
                const stateAbbr = stateResult.abbr;
                let alignment;
                if (isAverage) {
                    const alignmentData = styleCache.candidate_issue_alignment[stateAbbr]?.average?.[candIdx];
                    alignment = alignmentData?.alignment || 999;
                } else {
                    const alignmentData = styleCache.candidate_issue_alignment[stateAbbr]?.[issueIndex]?.[candIdx];
                    alignment = alignmentData?.alignment || 999;
                }
                if (alignment < bestAlignment) {
                    bestAlignment = alignment;
                    bestState = stateAbbr;
                }
            });
            const bestStateCell = row.insertCell();
            bestStateCell.textContent = bestState ? `${bestState} (${bestAlignment.toFixed(2)})` : 'N/A';
            bestStateCell.style.fontSize = '9px';
            bestStateCell.style.padding = '3px';
            bestStateCell.style.textAlign = 'center';
        });

        fragment.appendChild(table);

        const legendDiv = document.createElement('div');
        legendDiv.style.fontSize = '9px';
        legendDiv.style.marginTop = '5px';

        const legendTitle = document.createElement('div');
        legendTitle.textContent = 'Map shows best-aligned candidate per state';
        legendTitle.style.fontWeight = 'bold';
        legendTitle.style.marginBottom = '3px';
        legendTitle.style.textAlign = 'center';
        legendDiv.appendChild(legendTitle);

        fragment.appendChild(legendDiv);
		
        container.appendChild(fragment);
        return container;
    }

    function updateLegend() {

        $('#map_legend').remove();

        if (currentMode === VISUALIZATION_MODES.SOLID) return;

        const legend = document.createElement('div');
        legend.id = 'map_legend';
        legend.style.position = 'absolute';
        legend.style.background = 'rgba(252, 252, 252, 0.92)';
        legend.style.border = '1px solid #aaa';
        legend.style.padding = '8px';
        legend.style.borderRadius = '4px';
        legend.style.boxShadow = '0 1px 4px rgba(0,0,0,0.2)';
        legend.style.zIndex = '1000';
        legend.style.fontSize = '11px';

        if (currentMode === VISUALIZATION_MODES.CANDIDATE_COMBINER && headToHeadMode) {
             legend.style.width = '200px';
        } else {
            legend.style.width = '180px';
        }

        const legendHandle = document.createElement('div');
        legendHandle.style.height = '20px';
        legendHandle.style.marginBottom = '5px';
        legendHandle.style.display = 'flex';
        legendHandle.style.alignItems = 'center';
        legendHandle.style.justifyContent = 'center';
        legendHandle.style.background = 'linear-gradient(135deg, #f0f0f0 0%, #e0e0e0 100%)';
        legendHandle.style.borderBottom = '1px solid #ccc';
        legendHandle.style.cursor = 'move';
        legendHandle.style.marginLeft = '-8px';
        legendHandle.style.marginRight = '-8px';
        legendHandle.style.marginTop = '-8px';
        legendHandle.style.borderRadius = '4px 4px 0 0';

        const dragIndicator = document.createElement('span');
        dragIndicator.textContent = '⋮⋮';
        dragIndicator.style.color = '#999';
        dragIndicator.style.fontSize = '12px';
        dragIndicator.style.letterSpacing = '2px';
        legendHandle.appendChild(dragIndicator);

        legend.appendChild(legendHandle);

        if (currentMode === VISUALIZATION_MODES.MARGINS) {
            legend.appendChild(createMarginLegend());
        } else if (currentMode === VISUALIZATION_MODES.CANDIDATE_STRENGTH) {
            if (candidatePerformanceMode === 'relative') {
                const relativePerformanceLegend = createRelativePerformanceLegend(selectedCandidateIndex);
                if (relativePerformanceLegend) legend.appendChild(relativePerformanceLegend);
            } else {
                const performanceLegend = createPerformanceLegend(selectedCandidateIndex);
                if (performanceLegend) legend.appendChild(performanceLegend);
            }
        } else if (currentMode === VISUALIZATION_MODES.COMPETITIVENESS) {
            legend.appendChild(createCompetitivenessLegend());
        } else if (currentMode === VISUALIZATION_MODES.TURNOUT_CHANGE) {
            legend.appendChild(createTurnoutChangeLegend());
        } else if (currentMode === VISUALIZATION_MODES.VOTE_SHARE) {
            legend.appendChild(createVoteShareLegend());
        } else if (currentMode === VISUALIZATION_MODES.ISSUE_STANCE) {
            const issueStanceLegend = createIssueStanceLegend(selectedIssueIndex);
            if (issueStanceLegend) legend.appendChild(issueStanceLegend);
        } else if (currentMode === VISUALIZATION_MODES.ISSUE_WEIGHT) {
            const issueWeightLegend = createIssueWeightLegend(selectedIssueIndex);
            if (issueWeightLegend) legend.appendChild(issueWeightLegend);
        } else if (currentMode === VISUALIZATION_MODES.CANDIDATE_ISSUE_ALIGNMENT) {
            if (alignmentComparisonMode === 'comparison') {
                const comparisonLegend = createComparisonAlignmentLegend(selectedIssueIndex);
                if (comparisonLegend) legend.appendChild(comparisonLegend);
            } else {
                const alignmentLegend = createCandidateIssueAlignmentLegend(selectedIssueIndex, selectedAlignmentCandidateIndex);
                if (alignmentLegend) legend.appendChild(alignmentLegend);
            }
        } else if (currentMode === VISUALIZATION_MODES.COALITION_BUILDER) {
            const coalitionLegend = createCoalitionBuilderLegend();
            if (coalitionLegend) legend.appendChild(coalitionLegend);
        } else if (currentMode === VISUALIZATION_MODES.CANDIDATE_COMBINER) {
            if (headToHeadMode) {
                const headToHeadLegend = createHeadToHeadLegend();
                if (headToHeadLegend) legend.appendChild(headToHeadLegend);
            } else {
                const combinerLegend = createCandidateCombinerLegend();
                if (combinerLegend) legend.appendChild(combinerLegend);
            }
        } else if (currentMode === VISUALIZATION_MODES.TIPPING_POINT) {
            legend.appendChild(createTippingPointLegend());
        } else if (currentMode === VISUALIZATION_MODES.SENATE_RACES) {
            legend.appendChild(createSenateRacesLegend());
        } else if (currentMode === VISUALIZATION_MODES.HOUSE_COMPOSITION) {
            legend.appendChild(createHouseCompositionLegend());
        }
        
        if (legendMoved && legendPosition) {
            legend.style.left = legendPosition.left + 'px';
            legend.style.top = legendPosition.top + 'px';
        } else {
            const controlsBox = document.getElementById('map_controls');
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            const LEGEND_GAP = 15;
            
            if (controlsBox) {
                 legend.style.visibility = 'hidden';
                 document.body.appendChild(legend); // Temporarily add to measure
                 const legendHeight = legend.offsetHeight;
                 const legendWidth = legend.offsetWidth;
                 document.body.removeChild(legend); // Remove before re-positioning

                const controlsRect = controlsBox.getBoundingClientRect();
                const fitsBelow = (controlsRect.bottom + LEGEND_GAP + legendHeight) < window.innerHeight;
                const fitsBeside = (controlsRect.right + LEGEND_GAP + legendWidth) < window.innerWidth;

                if (fitsBelow) {
                    legend.style.top = (controlsRect.bottom + scrollTop + LEGEND_GAP) + 'px';
                    legend.style.left = controlsRect.left + 'px';
                } else if (fitsBeside) {
                    legend.style.top = (controlsRect.top + scrollTop) + 'px';
                    legend.style.left = (controlsRect.right + LEGEND_GAP) + 'px';
                } else {
                    const flippedTop = controlsRect.top + scrollTop - legendHeight - LEGEND_GAP;
                    legend.style.top = Math.max(scrollTop + 10, flippedTop) + 'px';
                    legend.style.left = controlsRect.left + 'px';
                }
                 legend.style.visibility = 'visible';
            } else {
                legend.style.top = '350px';
                legend.style.left = '20px';
            }
        }

        document.body.appendChild(legend);
        makeDraggable(legend, legendHandle);
    }

    function isInElectionMapView() {
        return document.getElementById('map_container') &&
            document.getElementById('final_election_map_button') &&
            document.getElementById('final_election_map_button').disabled === true;
    }

    function initVisualization() {
        if (!isInElectionMapView()) return;

        if (isInitialized) {
            if (!document.getElementById('map_controls')) {
                updateControls();
                updateLegend();
            }
            return;
        }

        prepareStyles();
        updateControls();
        currentMode = VISUALIZATION_MODES.SOLID;
        updateMapStyles();
        updateLegend();

        const map = $('#map_container').data('plugin-usmap');
        if (map && !map._customHoverAttached) {

            map.options.mouseover = function (event, data) {
                const stateAbbr = data.name;
                let hoverFill = "#AAAAAA";

                try {
                    let stateStyle = styleCache[currentMode]?.[stateAbbr];

                    if (currentMode === VISUALIZATION_MODES.CANDIDATE_STRENGTH) {
                        const perfStyle = stateStyle[selectedCandidateIndex];
                        hoverFill = (candidatePerformanceMode === 'relative') ? perfStyle.relativeHoverFill : perfStyle.hoverFill;
                    } else if (currentMode === VISUALIZATION_MODES.ISSUE_STANCE) {
                        const issueStyle = showAverageIssueStance ? stateStyle.average : stateStyle[selectedIssueIndex];
                        hoverFill = issueStyle.hoverFill;
                    } else if (currentMode === VISUALIZATION_MODES.ISSUE_WEIGHT) {
                         if (stateStyle && stateStyle[selectedIssueIndex]) {
                            hoverFill = stateStyle[selectedIssueIndex].hoverFill;
                        }
                    } else if (currentMode === VISUALIZATION_MODES.CANDIDATE_ISSUE_ALIGNMENT) {
                        if (alignmentComparisonMode === 'comparison') {
                            hoverFill = darkenColor(data.shape.attr('fill'));
                        } else {
                            const alignStyle = showAverageIssueStance ? stateStyle.average[selectedAlignmentCandidateIndex] : stateStyle[selectedIssueIndex][selectedAlignmentCandidateIndex];
                            hoverFill = alignStyle.hoverFill;
                        }
                    } else if (currentMode === VISUALIZATION_MODES.SENATE_RACES) {
                        const senateMode = window.currentSenateMode || 'solid';
                        if (senateMode === 'margins') hoverFill = stateStyle.marginHoverFill;
                        else if (senateMode === 'holds_gains') hoverFill = stateStyle.holdsGainsHoverFill;
                        else hoverFill = stateStyle.solidHoverFill;
                    } else if ([VISUALIZATION_MODES.TIPPING_POINT, VISUALIZATION_MODES.COALITION_BUILDER, VISUALIZATION_MODES.CANDIDATE_COMBINER, VISUALIZATION_MODES.HOUSE_COMPOSITION].includes(currentMode)) {
                        hoverFill = darkenColor(data.shape.attr('fill'));
                    } else if (stateStyle) {
                        hoverFill = stateStyle.hoverFill;
                    }
                } catch (e) {
                    console.error("Error getting hover color for:", stateAbbr, e);
                    hoverFill = darkenColor(data.shape.attr('fill'));
                }

                data.shape.attr({ fill: hoverFill });
                if (map.options.click && typeof map.options.click === 'function') {
                    map.options.click(event, data);
                }
                return false;
            };

            map.options.mouseout = function (event, data) {
                const stateAbbr = data.name;
                let originalFill = data.shape.data('originalFill') || "#C9C9C9";
                data.shape.attr({ fill: originalFill });
                return false;
            };

            map._customHoverAttached = true;
            for (const stateAbbr in map.stateShapes) {
                if (map.stateShapes[stateAbbr] && typeof map.stateShapes[stateAbbr].data === 'function') {
                    map.stateShapes[stateAbbr].data('originalFill', map.stateShapes[stateAbbr].attr('fill'));
                }
            }
        }
        isInitialized = true;
    }

    function hookMapButton() {
        const mapButton = document.getElementById('final_election_map_button');
        if (mapButton && !mapButton._marginHooked) {
            const originalOnClick = mapButton.onclick;
            mapButton.onclick = function (e) {
                if (originalOnClick) {
                    originalOnClick.call(this, e);
                }
                isInitialized = false;
                styleCache = {}; // Clear cache on re-run
                setTimeout(initVisualization, 200);
            };
            mapButton._marginHooked = true;
        }
    }

    function initialize() {
        hookMapButton();
        if (isInElectionMapView()) {
            initVisualization();
        }
    }

    const observer = new MutationObserver(() => {
        hookMapButton();

        if (isInElectionMapView() && !isInitialized) {
            initVisualization();
        }
    });

    observer.observe(document.body, {
        childList: true,
        subtree: true,
        attributes: true,
        attributeFilter: ['disabled'],
        characterData: false
    });

    initialize();
})();

// Everyone's favorite tooltips. This was rewritten from a similar tooltip mechanism
// that was in W. I'm not sure who were the original authors. For the styling, apparently
// it was taken from the 2021DE scenario, albeit I'm not sure. I should elaborate more in
// the further reading section instead of rambling here.
// Rewritten in 2012LBM and reused here

function createTooltipProcessor(tooltipList) {
    function escapeRegex(s) {
        return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
    }

    // pre-process data
    // we use lower-case keys for case-insensitive matching logic
    const tooltipMap = new Map();
    const sortedKeys = [];

    // deduplicate and prep sorting
    // we filter unique keys to prevent redundant regex processing
    const seenKeys = new Set();
    
    // sort by length (descending) so, e.g. "Joe Biden" is matched before "Biden"
    // we do this sort BEFORE creating the regex string
    const sortedList = [...tooltipList].sort((a, b) => b.searchString.length - a.searchString.length);

    for (const item of sortedList) {
        if (!item.searchString || seenKeys.has(item.searchString)) continue;
        
        seenKeys.add(item.searchString);
        sortedKeys.push(escapeRegex(item.searchString));
        
        // store mapping - since regex is case insensitive ('i'), 
        // we map the lowercase match to the object
        tooltipMap.set(item.searchString.toLowerCase(), item);
    }

    // create one regex with no capturing groups for individual items.
    // \b ensures we don't match, e.g., "Barack" inside "BarackObama"
    const pattern = sortedKeys.join('|');
    
    // don't create empty regex
    const TOOLTIP_REGEX = pattern.length > 0 ? 
        new RegExp(`(?<=\\b|\\s|^|“|")(${pattern})(?=[.,;!?]?\\b|\\s|”|"|$)`, 'gi') 
        : null;

    // cache
    const cache = new Map();

    function _applyTooltipsToString(str) {
        if (!TOOLTIP_REGEX || !str || typeof str !== 'string') return str;
        
        // return cached result if exists
        if (cache.has(str)) return cache.get(str);

        const processed = str.replace(TOOLTIP_REGEX, (match) => {
            const data = tooltipMap.get(match.toLowerCase());
            if (data) {
                return `<span class='mytooltip'>${match}<span class='mytooltiptext'>${data.explanationText}</span></span>`;
            }
            return match;
        });

        cache.set(str, processed);
        return processed;
    }

    return {
        applyToObject(obj) {
            function recurse(currentObj) {
                for (let key in currentObj) {
                    if (!Object.prototype.hasOwnProperty.call(currentObj, key)) continue;

                    const value = currentObj[key];
                    if (typeof value === 'string') {
                        currentObj[key] = _applyTooltipsToString(value);
                    } else if (value !== null && typeof value === 'object') {
                        recurse(value);
                    }
                }
            }
            recurse(obj);
        }
    };
}

const tooltipProcessor = createTooltipProcessor(tooltipList);

tooltipProcessor.applyToObject(campaignTrail_temp.questions_json);
tooltipProcessor.applyToObject(campaignTrail_temp.answers_json);
tooltipProcessor.applyToObject(campaignTrail_temp.answer_feedback_json);

// The music player!
// This was initially developed using the one from W. as a basis, which is also why the
// album covers are not particularly huge. This might change. Still, it's a *lot* different
// than the one there, but I must give out some attribution here.

(function () {
    'use strict';

    // The songs.
    const SONGS_DATA = [
        { title: "Soldier of Love", artist: "Sade", coverLink: "https://lh3.googleusercontent.com/1Zb3jhBGUQHrDU6mZHOk-FGPC1mVg-AMls-bJOQBf9Wx3lG31KTbmbdUtlnkAYbsdao-b1cmXvs1tJET=w544-h544-l90-rj", videoIds: ["zI8YIzWltHM"] },
        { title: "Nothing Compares 2 U", artist: "Prince", coverLink: "https://i.discogs.com/DQEHxJMMCoAozW-09RSF-12sMKCgHB5aGco8kax0sBg/rs:fit/g:sm/q:90/h:595/w:600/czM6Ly9kaXNjb2dz/LWRhdGFiYXNlLWlt/YWdlcy9SLTI1MDQz/Nzk3LTE2Njc2OTc0/OTktMTY2NC5qcGVn.jpeg", videoIds: ["wyo74f6NWwY"] },
        { title: "Everything Is Wrong", artist: "Interpol", coverLink: "https://i.discogs.com/fajuUIPd6pzjV9sS_CLJz4f0okmvlmKvHVKGzS_--Nw/rs:fit/g:sm/q:90/h:600/w:598/czM6Ly9kaXNjb2dz/LWRhdGFiYXNlLWlt/YWdlcy9SLTY5MTMx/NzctMTQyOTQ1Nzcx/MS0yMTU4LmpwZWc.jpeg", videoIds: ["4llZXppdjCU", "NiraiT0a4Rs"] },
        { title: "Blank Generation", artist: "Richard Hell", coverLink: "https://lh3.googleusercontent.com/hDrqJI4nOVwtWGnqd2OEPmUivA50Gp19YuJPly6DUau8VTExM5MtiFezXmTiKkcGJMEQxDMrBzkz6W4=w544-h544-l90-rj", videoIds: ["v9FkQLjOSZ8"] },
        { title: "Girl Gone Wild", artist: "Madonna", coverLink: "https://lh3.googleusercontent.com/aCpQ5ecu6iU88aQrTkg_gk9vhhGO4sgr79Rwg55s2NQNnhuiR1X1FcBp8PZnQoe2kxtayZghDuZgFPrO=w544-h544-l90-rj", videoIds: ["9Hyzn5XQ-ro"] },
        { title: "Feels Just Like it Should", artist: "Jamiroquai", coverLink: "https://lh3.googleusercontent.com/Syc0T0hpUCioc8Ky5irJxhnSLOavM4gnWjVkVCeW8IUlB2v8i-xJEkyUcmumDoojHjIV_e0vtjmdnQY=w544-h544-l90-rj", videoIds: ["tBZqSRqFQz0"] },
		{ title: "You Bring On The Sun", artist: "Londonbeat", coverLink: "https://i.discogs.com/Do-mEAKVHtQa8RsjOI1sX2cMf4Kadbmbjj9TG9GlT94/rs:fit/g:sm/q:90/h:595/w:600/czM6Ly9kaXNjb2dz/LWRhdGFiYXNlLWlt/YWdlcy9SLTI2Njgy/NjktMTM4NjA4NDIx/OS00NzEyLmpwZWc.jpeg", videoIds: ["WEBS80vNEWY", "1dsdVlkkuzk"] },
        { title: "I Wanna Be Adored", artist: "The Stone Roses", coverLink: "https://lh3.googleusercontent.com/gsnCII7GsI0y6dG9-dvrtIgwFVqP1UTKgE4aX0cHaQ4JKyO83D8d8xGr15fWn3WtiC4e5xQdGe6vnkdxww=w544-h544-l90-rj", videoIds: ["aa10yl8mirk"] },
        { title: "John the Revelator", artist: "Depeche Mode", coverLink: "https://lh3.googleusercontent.com/xf-alOlvnf8xpIHXwd7HiYCbMeSKiqOVbNqN__o7gAtZ7RtyoHO67G-0tKozXtLZMtGc-GctM2PF24Tv=w544-h544-l90-rj", videoIds: ["ZHI2tInxT0A"] },
		{ title: "Cult of Personality", artist: "Living Color", coverLink: "https://lh3.googleusercontent.com/1xH4wgpS-Xp2-KM6fqu3R1qE6yd0Sl83SOT5VqdMrOf0RiLk2HDFJaGBgCNKcEPZ9fb6JOBsYlmI0Wp7=w544-h544-l90-rj", videoIds: ["8mssfWohiig"] },
		{ title: "Youth Of The Nation", artist: "P.O.D.", coverLink: "https://i.discogs.com/FKbXiFnp0Cuz3BUdSumcuerXH3yhDsmowUGS-FB95jM/rs:fit/g:sm/q:90/h:600/w:591/czM6Ly9kaXNjb2dz/LWRhdGFiYXNlLWlt/YWdlcy9SLTU4OTE0/Ny0xMjExMTI4NzA4/LmpwZWc.jpeg", videoIds: ["Pb7Kg1hT-1A"] },
        { title: "Too Much Love", artist: "LCD Soundsystem", coverLink: "https://lh3.googleusercontent.com/OT3SutN5ptlnj-fQGc2LSuikM1tbKv2RsRf6jRLh9xqYLn62DiSSZyjQ4SdQVgrCmE2JCX4Si5f4XyIr=w544-h544-l90-rj", videoIds: ["CcEC5r0xzt8"] },
        { title: "Natural One", artist: "The Folk Implosion", coverLink: "https://i.discogs.com/TZXSFqXeiXbmoeH31CKTeIB5C-Eo2UeCBTQ86bC_cvI/rs:fit/g:sm/q:90/h:527/w:600/czM6Ly9kaXNjb2dz/LWRhdGFiYXNlLWlt/YWdlcy9SLTQ5ODk5/LTEzMzUzMDExMDku/anBlZw.jpeg", videoIds: ["V4w6GcCoTPQ"] },
        { title: "Haunt You Every Day (Demo)", artist: "Weezer", coverLink: "https://i.ytimg.com/vi/VNoRB57yLak/maxresdefault.jpg", videoIds: ["VNoRB57yLak", "JMYJ-gxlKwc"] },
		{ title: "Gardenhead / Leave Me Alone", artist: "Neutral Milk Hotel", coverLink: "https://lh3.googleusercontent.com/Cy-w6XXRmh7yLUKglZ05FpdEAu_ySP98JS85JFCuRbMOp2SbJn73CMZ-ngGY5WxeSOGMLx3-CLAL_uPg=w544-h544-l90-rj", videoIds: ["svxUvcwFYBs", "_s41RrvH1lQ"] },
		{ title: "Always", artist: "Tom Verlaine", coverLink: "https://i.discogs.com/eYXKSCUz7FhVLBuyhUc_-sG8yrEVtbeBtMoA4Gv7ffw/rs:fit/g:sm/q:90/h:597/w:600/czM6Ly9kaXNjb2dz/LWRhdGFiYXNlLWlt/YWdlcy9SLTI4NzIx/OTUtMTMwNDk4NDYw/OS5qcGVn.jpeg", videoIds: ["9X8SEnCGCKE"] },
        { title: "Well I Wonder", artist: "The Smiths", coverLink: "https://lh3.googleusercontent.com/3MqgtN5ZbbMB48TGTkHnlHTRlHNh1SVy_8MN-LByI4iAT-cza4eGiuFvPT243IyyEz0vSaItp432DgU=w544-h544-l90-rj", videoIds: ["zUbCkPdBNHg"] },
        { title: "The Killing Moon", artist: "Echo & The Bunnymen", coverLink: "https://lh3.googleusercontent.com/mbomD0JAl6L_sVTLgSesBNqD0A_roeGlh9ciz_Tq0qaL-ojnaFmx_MY5aWfVQwYx6LD01451ex6XhIE=w544-h544-l90-rj", videoIds: ["aVD1HRV8NqA"] },
        { title: "You Have Been Loved", artist: "George Michael", coverLink: "https://i.discogs.com/XDh2r_xwLYty258j7oROTAqxqCLtj65gwRLGY_v6dV8/rs:fit/g:sm/q:90/h:538/w:600/czM6Ly9kaXNjb2dz/LWRhdGFiYXNlLWlt/YWdlcy9SLTQzMzE3/OS0xNDcxMzkwMTIw/LTU5MjAuanBlZw.jpeg", videoIds: ["SXRz-ZT0MIE"] }
    ];
    const PLAYLIST_TWO_DATA = [
        { title: "Stronger Than Me", artist: "Amy Winehouse", coverLink: "https://lh3.googleusercontent.com/ERQwzDcTEBrcy8aUU0s-NcYnbcgJOu_-BwBB-A4Z_nRrtbfS2BhMqTovWvLSIfjAtJD_RERUokB2ze_-=w544-h544-l90-rj", videoIds: ["eQpINcpE-Wo", "6N6IjW-2fb4"] },
		{ title: "We Don’t Have That Much Time Together", artist: "Sananda Maitreya", coverLink: "https://lh3.googleusercontent.com/vhd98YlgS1Sh4FCmoJ3e2zi4eyAnOtKjp-aiNpcxJ94eYA-VAzAUMPwuQ1aI_MctD18JXtdPP8Rky0tj_g=w544-h544-l90-rj", videoIds: ["Et6Grrm1OLk"] },
		{ title: "Sappy (1990 Studio Demo)", artist: "Nirvana", coverLink: "https://lh3.googleusercontent.com/aUSTL4p5gGFiKesMYQnYLqqQ8534TVY9A0A-4IbrZgGBVDKAmLbHsO2VFBYAhXDyDHa0hh2Ozs9FgyPF9A=w544-h544-s-l90-rj", videoIds: ["1MjAZSEprQU"] },
		{ title: "Millennium", artist: "Robbie Williams", coverLink: "https://lh3.googleusercontent.com/eXVDuIRMQKHl6uyR-nWf3yLDfSD5rWNPh0bUMu0OdCn6ZlyOdLen3HyrmJGtCTWnY04WUvivct4YVNI=w544-h544-l90-rj", videoIds: ["sGDzkz3rKV4"] },
		{ title: "Heaven Can Wait", artist: "Michael Jackson", coverLink: "https://i.discogs.com/2RH0GWmw-gLbNTQ-GTImSYuLLZvJOFA2AkJu8A7mylc/rs:fit/g:sm/q:90/h:592/w:600/czM6Ly9kaXNjb2dz/LWRhdGFiYXNlLWlt/YWdlcy9SLTM0NTM2/MTEtMTQ0MDYwODM5/My02MDA5LmpwZWc.jpeg", videoIds: ["8Gl9h5FZdxk"] },
		{ title: "Kid Who Stays in the Picture", artist: "Hot Hot Heat", coverLink: "https://lh3.googleusercontent.com/0mSHh8MlTKSq1LfjThZa4DRqGtLXCNetxH_lFlbPPOUlcoKRysPW_kb1YicROxpes3uNTu0ZYegCMMut=w544-h544-l90-rj", videoIds: ["xyBCenRonTc", "fOn3WjSIcMY"] },
		{ title: "Traveling at the Speed of Light", artist: "Joywave", coverLink: "https://lh3.googleusercontent.com/1Yqi0xIJndmpKyyQfkhswNMuFaVjENQr_yMj0uR6oi-LA-iQX-DrS5sPBJ02b6qUUHhESfmjaExLLF4k=w544-h544-l90-rj", videoIds: ["yZAj7LZh8fs"] },
		{ title: "Numb", artist: "Linkin Park", coverLink: "https://lh3.googleusercontent.com/Rqh2HDAD-Fj1-oHYqVklPGklMHIV3r6SMPMZmFE3FlLiWeBBnP3SCESfgeNdzQ-DmpCIvOGE4J0hzVxa=w544-h544-s-l90-rj", videoIds: ["dxp9w9Ggehc"] },
        { title: "I Might Be Wrong", artist: "Radiohead", coverLink: "https://lh3.googleusercontent.com/IztVMgq0rRLUhtQa6IxD4Vx145SQYQjnUQtuSHUl12b4B6Oyf-e-M0S1lrtIBnXCQFSeNABeanlxcdk=w544-h544-l90-rj", videoIds: ["_Qvlh_dvmkk"] },
		{ title: "Sin", artist: "Nine Inch Nails", coverLink: "https://lh3.googleusercontent.com/lgi0zaHlbZC6stXi73LlAKkN-sdNTYSGJ0h4TNrG35TGTCOc7i47C4BDaXH7KboZWvKfGaLLPJ2tv50Y=w544-h544-l90-rj", videoIds: ["lIvzTlAdcUE"] },
        { title: "Looking For Strange", artist: "KMFDM", coverLink: "https://lh3.googleusercontent.com/JaQfxrFps-mW0HeyZRuzNE2sTJopn9jpEvrL-72swg2_n59ecYNwKH_tU-tIg3jEVYhmAFsDdHoVz57-iA=w544-h544-l90-rj", videoIds: ["Y1dGwI8uiwc"] },
		{ title: "Red Flags And Long Nights", artist: "She Wants Revenge", coverLink: "https://lh3.googleusercontent.com/N-J6DkwVQ_5QP4f4eyeC-2RXVwB1DvO3FUkLVFGioq46LVGFRuzgQBijjp8TKtfIG-a_q-8sTftUt-s=w544-h544-s-l90-rj", videoIds: ["ENZy7f_v6Fs"] },
        { title: "Sub-culture", artist: "New Order", coverLink: "https://lh3.googleusercontent.com/D9wKilSquMzsqc9qdyw4Gu1rtJPvZ82WqvlJHu1dkOb0R2ncLduK2SLOCuGCH4qjJohVAvogj2-G9Zw=w544-h544-l90-rj", videoIds: ["Exoyet7OoWA"] },
		{ title: "Where the Streets Have No Name (I Can’t Take My Eyes off You)", artist: "Pet Shop Boys", coverLink: "https://i.discogs.com/LFHv3FkAHQlhLo--6e5kUcHJMFpSAUnlYPh_6PXrxGs/rs:fit/g:sm/q:90/h:600/w:595/czM6Ly9kaXNjb2dz/LWRhdGFiYXNlLWlt/YWdlcy9SLTIyODQ3/MTktMTM4NzU4OTY0/MS0zNDUwLmpwZWc.jpeg", videoIds: ["sm36_lWAviQ"] },
		{ title: "I Ran (So Far Away)", artist: "A Flock Of Seagulls", coverLink: "https://lh3.googleusercontent.com/1T7FD-g00b1ioKn7-L12x9o8cracdGJ5s2mWhlTqbXQMwF0v-9E9BucDCY6Vnr4g0aQA2wdUOuKFsXan=w544-h544-l90-rj", videoIds: ["8UqlM0ki0Cc"] },
		{ title: "Blessed State", artist: "The Wire", coverLink: "https://lh3.googleusercontent.com/Neurxtu-LF58Br8vc2I-VHFnPLKW8JqhZpW9Hdq11diLALnwTTMJ1-qQ03-kRcAtxa_31Ymu5JJG5ps=w544-h544-l90-rj", videoIds: ["LeCI9kww3Dk"] },
		{ title: "Sleep Apnea", artist: "Beach Fossils", coverLink: "https://a2.cdn.hhv.de/items/images/generated/475x475/01054/1054978/1-beach-fossils-clash-the-truth-demos-colored-vinyl-edition.webp", videoIds: ["nuvJSl24wAw"] },
		{ title: "Dream a Little Dream of Me", artist: "Michael Bublé", coverLink: "https://lh3.googleusercontent.com/57IJIYVLm6YTr9a1Wly4WGffKj3kn3s-5JFxCJ7LkRPWT5hLVrV21LDaT0I-7l6-djgF7-71zWvQZcc=w544-h544-l90-rj", videoIds: ["0QgM7lNgFnA"] },
        { title: "Humiliation", artist: "Yoñlu", coverLink: "https://lh3.googleusercontent.com/fecmzZxLj4SvYNp-6e5TrbLoWFqkIsmnJz0Z41CmHFClnoCHCBE3Wpn4Obg0aubsCzomD01OWASsPK-inw=w544-h544-l90-rj", videoIds: ["uQH85xHXnYQ", "6o1iNoUZdwI", "kQJSehvmen0"] },
    ];
    const PLAYLIST_THREE_DATA = [
        { title: "Someday Is Tonight", artist: "Janet Jackson", coverLink: "https://lh3.googleusercontent.com/LjZePM9GvoVF88nE4UKJvpH71-yXHGKsGnmt77imOV6bth_6E3pAlnQizYYDgX1Fl9j7k6vzHw0OPTkP=w544-h544-l90-rj", videoIds: ["jHoP9UACqaQ", "PEFLGA6zFaQ"] },
		{ title: "Absolutely Nothing’s Changed", artist: "Tina Turner", coverLink: "https://lh3.googleusercontent.com/dWc6ruKtj-SAHS6qm_pa10SqLkjjZ_sRhzXjyS2SwFtooy2wdIf4nQ0XkclbU5XgIlf6qV58R13maUA=w544-h544-l90-rj", videoIds: ["lq1jdjxObrk"] },
		{ title: "Low", artist: "Lenny Kravitz", coverLink: "https://lh3.googleusercontent.com/-QE8g4sUkiTgVXV8LYJ4VqwlcDL49GUyrzOu63cf5sRmIhq0mdAweVQ7EmMCGPGmi4CszL08UvIgrzKZ=w544-h544-l90-rj", videoIds: ["_zghpPDQ2y8"] },
		{ title: "Marilyn Monroe", artist: "Pharrell Williams", coverLink: "https://lh3.googleusercontent.com/n1BU7liMVsgA5dZnk020PEoWyjjZECDqYR26DbV8osH6wJB2OPbw_8H13O-x7AwEK-4i_LJeHHQM6BFi=w544-h544-s-l90-rj", videoIds: ["xUPiYEhs3lw"] },
        { title: "Valentine’s Day", artist: "David Bowie", coverLink: "https://lh3.googleusercontent.com/dpM4jPTAa84rJ0hkkp3nPdn2lNdPmWXa1isLJu2A8HQXOBfMLmb3lJXH0c0UYj_c0DPBxen6TmOpH_U=w544-h544-l90-rj", videoIds: ["nbSdOIZhD5Y"] },
        { title: "Marquee Moon", artist: "Television", coverLink: "https://lh3.googleusercontent.com/lRzsgg9OZ8asdYhy47O0xix5umxrJJh6g3cbqGKmeWdz1jzZiUoH0fC0SDNzcBrIKNZqdr6SC3v1xz9K=w544-h544-s-l90-rj", videoIds: ["g4myghLPLZc"] },
		{ title: "Me, I Disconnect from You", artist: "Tubeway Army", coverLink: "https://lh3.googleusercontent.com/0XD-Nt5289-YT_mp6YzVWUOH1kZ-BW9d-utBv4VCxjoyEgYZ2TVZIloROXYHH7Q4THNmddM9Of77MLoTTQ=w544-h544-l90-rj", videoIds: ["6SCrfZPMeWg"] },
        { title: "Darkness", artist: "The Human League", coverLink: "https://lh3.googleusercontent.com/5UgvTLEebZkbRH9fiGuJajPDSur-nJXHpHKCJUDkQd3LR-hJBAsqeKevMhPKQnyNX7MbBRnQWWabh0u0=w544-h544-l90-rj", videoIds: ["vPfk7ktdqo4"] },
		{ title: "Fall Into Place", artist: "Apartment", coverLink: "https://lh3.googleusercontent.com/G5iK-2BALHx_hHwB1LBmzHthvtt3BF8NB428Ub4sTkTYUv3bT6bI6lN9N1SZyIlzKTps58GudSFHWPXo=w544-h544-l90-rj", videoIds: ["IQaEg6GguLk"] },
        { title: "Fight Song", artist: "Rachel Platten", coverLink: "https://lh3.googleusercontent.com/AxQrFKHbt5jU_DiZihMhlJ3bxGLBy3rN6yfLlb0SJ68ay4FpnciNHNkD9WTXPBfbX1gCCZI5pFs2bJzU=w544-h544-l90-rj", videoIds: ["y5h_dukaB1I"] },
		{ title: "The Ballad of Harambe", artist: "c a n d i d !", coverLink: "https://lh3.googleusercontent.com/F3ub3Ot4uC_HiLYe9RW-nxvMI__N7S5OkyGf_4bgU1MSIW4wp05es_6DF2GBAueUM-LVzIqxz8YuI1rY=w544-h544-l90-rj", videoIds: ["VX8omFoNHdQ"] },
		{ title: "Set Adrift on Memory Bliss", artist: "P.M. Dawn", coverLink: "https://lh3.googleusercontent.com/51qmaba8irr1qqXAcVc5CGV6bTiNNlevjEgh4cCDCntbqZP4dc1gcVlcf_lxA42D8CkZxDTW3L3SnPa4=w544-h544-l90-rj", videoIds: ["MurZoAE40VA"] },
		{ title: "Woke Up This Morning (Chosen One Mix)", artist: "Alabama 3", coverLink: "https://lh3.googleusercontent.com/EHKdWSYR9Kenl61Gu87krAIFBJCRmrHdTGISW46gHmiAjuElSW18fCpkvVTlGYnKn3lzmartBT_7K3t6mQ=w544-h544-l90-rj", videoIds: ["slpCmg53qkU", "EvCdCKyLo_I", "6_0nDHcrrtE"] },
		{ title: "What’s on Your Mind (Pure Energy)", artist: "Information Society", coverLink: "https://lh3.googleusercontent.com/ZWMW9K6oQVxTOOfPAy-7NLsta-kxbLXWEWgG7o4ZuO8c25KMs07dkGc-lHY0Udg9J9jdsSVsYJTgjq8=w544-h544-l90-rj", videoIds: ["lCrD81j6OD0"] },
		{ title: "Dirty Dreamer (XXX)", artist: "Hot Flash Heat Wave", coverLink: "https://lh3.googleusercontent.com/1hBYdeKS2xmwKgfhmRTqN18V0fMgu4PBc_Rg2UkcQY2W8KnFe5Csu2cQE4h8LAgNn21XGERhJXvnVH97=w544-h544-l90-rj", videoIds: ["Xyo5SKE5mpU"] },
		{ title: "Bad Habit", artist: "The Kooks", coverLink: "https://i.scdn.co/image/ab67616d0000b273c8fcda98c93a02df95dec4ae", videoIds: ["VYfv5qcX5vo", "3tUh-x-fp8Q"] },
		{ title: "Good Clean Fun", artist: "Kaiser Chiefs", coverLink: "https://lh3.googleusercontent.com/1WYR7vOnMx8sbUbBHEI-3Q8YFfQOqvtTovFZnsUvcLnVGR2nmLegDLguykg8kgKiQi6OL6ZLNhag1_NY=w544-h544-l90-rj", videoIds: ["zcMX8fQ7buU"] },
		{ title: "Stop The World I Wanna Get Off With You", artist: "Arctic Monkeys", coverLink: "https://lh3.googleusercontent.com/D2kk6n8VH8YTwZoY9Vczdmrm74WvvkWgiCgIVVLcMv-NXyzZFgL-J64Mwls0p9P7x1aqM1xovqry5JM=w544-h544-l90-rj", videoIds: ["H8oiojAmKCI"] },
		{ title: "Saving All My Love For You", artist: "Whitney Houston", coverLink: "https://lh3.googleusercontent.com/qRoa7SdWC7qa13JLpgK5wrqJc7HsJAGfDlRzyJPBpiF8zY8sgQ4YSocEqlwRZpM8_JtJcWxaKAb2d_kerQ=w544-h544-l90-rj", videoIds: ["GpQbMAIZVn8"] },
    ];
    let PLAYLISTS_DATA = [];

    // constants
    const PLAYER_ELEMENT_ID = "nice-music-player";
    const PLAYER_MAIN_CONTENT_WRAPPER_ID = "player-main-content-wrapper";
	const PLAYER_RIGHT_PANEL_ID = "player-right-panel";
    const PLAYLIST_SELECTOR_CONTAINER_ID = "player-playlist-selector-container";
    const PLAYLIST_SELECTOR_ID = "player-playlist-selector";
    const YOUTUBE_PLAYER_DIV_ID = "youtube-player-container";
    const DISPLAY_BOX_ID = "player-display-box";
    const COVER_ID = "player-cover";
    const INFO_CONTAINER_ID = "player-info-container";
    const SONG_INFO_ID = "player-song-info";
    const TITLE_LINE_WRAPPER_CLASS = "player-title-line-wrapper";
    const TITLE_ID = "player-title";
    const ARTIST_ID = "player-artist";
    const YOUTUBE_LINK_ID = "player-youtube-link";
    const CONTROLS_CONTAINER_ID = "player-controls-container";
    const CONTROLS_ID = "player-controls";
    const PREV_BUTTON_ID = "player-prev-button";
    const PLAY_PAUSE_BUTTON_ID = "player-play-pause-button";
    const NEXT_BUTTON_ID = "player-next-button";
    const PROGRESS_BAR_CONTAINER_ID = "player-progress-bar-container";
    const CURRENT_TIME_ID = "player-current-time";
    const PROGRESS_BAR_ID = "player-progress-bar";
    const DURATION_ID = "player-duration";
    const VOLUME_CONTAINER_ID = "player-volume-container";
    const VOLUME_ICON_ID = "player-volume-icon";
    const VOLUME_PERCENTAGE_ID = "player-volume-percentage";
    const VOLUME_SLIDER_ID = "player-volume-slider";
    const REPEAT_BUTTON_ID = "player-repeat-button";
    const SHUFFLE_BUTTON_ID = "player-shuffle-button";
    const PLAYER_CONTROL_BUTTON_CLASS = 'player-control-button';
    const QUEUE_CONTAINER_ID = "player-queue-container";
    const QUEUE_TITLE_ID = "player-queue-title";
    const QUEUE_LIST_ID = "player-queue-list";
    const PLAYER_QUEUE_ITEM_CLASS = "player-queue-item";
    const QUEUE_TOGGLE_ICON_ID = "player-queue-toggle-icon";

    // icons
    const ICON_PLAY = "https://upload.wikimedia.org/wikipedia/commons/9/96/Crystal_Project_Player_play.png";
    const ICON_PAUSE = "https://upload.wikimedia.org/wikipedia/commons/d/dd/Crystal_Project_Player_pause.png";
    const ICON_PREV = "https://upload.wikimedia.org/wikipedia/commons/e/ef/Crystal_Project_Player_rew.png";
    const ICON_NEXT = "https://upload.wikimedia.org/wikipedia/commons/6/66/Crystal_Project_Player-end.png";
    const ICON_VOLUME = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' fill='%23424242'%3E%3Cpath d='M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z'/%3E%3C/svg%3E";
    const ICON_MUTED = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' fill='%23424242'%3E%3Cpath d='M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z'/%3E%3C/svg%3E";
    const ICON_YOUTUBE = "https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_play_button_icon_%282013%E2%80%932017%29.svg";
    const ICON_REPEAT_NONE = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' fill='%23424242'%3E%3Cpath d='M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z'/%3E%3C/svg%3E";
    const ICON_REPEAT_ALL = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' fill='%233F51B5'%3E%3Cpath d='M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z'/%3E%3C/svg%3E";
    const ICON_REPEAT_ONE = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' fill='%233F51B5'%3E%3Cpath d='M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z'/%3E%3Cpath d='M13 15V9h-1l-2 1v1h1.5v4z'/%3E%3C/svg%3E";
	const ICON_SHUFFLE_OFF = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24' viewBox='0 0 24 24' fill='%23424242'%3E%3Cpath d='M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm0.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z'/%3E%3C/svg%3E";
	const ICON_SHUFFLE_ON = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24' width='24' viewBox='0 0 24 24' fill='%233F51B5'%3E%3Cpath d='M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.46 20 9.5V4h-5.5zm0.33 9.41l-1.41 1.41 3.13 3.13L14.5 20H20v-5.5l-2.04 2.04-3.13-3.13z'/%3E%3C/svg%3E";

    class Song {
        constructor(title, artist, coverLink, videoIds) {
            this.title = title;
            this.artist = artist;
            this.coverLink = coverLink;
            this.videoIds = Array.isArray(videoIds) ? videoIds : [videoIds];
            this.currentVideoIndex = 0; // to track which video to try
        }
        getTitle() { return this.title; }
        getArtist() { return this.artist; }
        getCoverLink() { return this.coverLink; }
        
        // gets the video ID for the current attempt
        getCurrentVideoId() {
            return this.videoIds && this.videoIds.length > 0 ? this.videoIds[this.currentVideoIndex] : null;
        }

        // gets the YouTube link for the video that is currently being attempted
        getYoutubeLink() {
            const videoId = this.getCurrentVideoId();
            return videoId ? `https://www.youtube.com/watch?v=${videoId}` : '#';
        }

        // tries to switch to the next available video ID
        // returns true if there is a next video, false otherwise
        tryNextVideo() {
            if (this.currentVideoIndex < this.videoIds.length - 1) {
                this.currentVideoIndex++;
                return true;
            }
            return false;
        }

        // resets the video index to the primary one (the first in the array)
        resetVideoIndex() {
            this.currentVideoIndex = 0;
        }
    }
    class Playlist {
        constructor(songs = []) { this.songs = songs; this.currentSongIndex = 0; }
        addSong(song) { this.songs.push(song); }
        getCurrentSong() { return this.songs.length > 0 ? this.songs[this.currentSongIndex] : null; }
        playNext() { if (this.songs.length > 0) this.currentSongIndex = (this.currentSongIndex + 1) % this.songs.length; }
        playPrevious() { if (this.songs.length > 0) this.currentSongIndex = (this.currentSongIndex - 1 + this.songs.length) % this.songs.length; }
        setCurrentSongIndex(index) { if (index >= 0 && index < this.songs.length) this.currentSongIndex = index; else console.warn(`Invalid song index: ${index}`); }
        isEmpty() { return this.songs.length === 0; }
        getSongs() { return this.songs; }
        setSongs(newSongs) { this.songs = newSongs; }
    }

    let playlist;
    let activePlaylistIndex = 0;
    let originalSongOrderForCurrentPlaylist = [];
    let isShuffleActive = false;
    let ytPlayer;
    let playerReady = false;
    let isSeeking = false;
    let rafId = null;
    let isUpdaterRunning = false;
    let volumeBeforeMute = 0.5;
    let repeatMode = 'none';

    let hasUserInitiatedPlayback = true; // prevents initial autoplay
    let isQueueSectionExpanded = true; // for collapsible queue

    const TARGET_FPS = 30;
    const FRAME_INTERVAL = 1000 / TARGET_FPS;
    let lastRafUpdateTime = 0;
    let playerShouldBeUpdatingWhenVisible = false;
    const MAX_QUEUE_ITEMS_DISPLAYED = 5;

    let playerContainer, mainContentWrapper, playlistSelectorContainer, playlistSelectorElement;
    let coverElement, titleElement, artistElement, youtubeLinkElement;
    let playPauseButton, prevButtonElement, nextButtonElement, progressBar, currentTimeElement, durationElement;
    let volumeContainer, volumeIconElement, volumePercentageElement, volumeSlider;
    let repeatButtonElement, shuffleButtonElement;
    let queueContainerElement, queueTitleElement, queueListElement;

    function formatTime(totalSeconds) {
        if (isNaN(totalSeconds) || totalSeconds < 0) { return "--:--"; }
        const minutes = Math.floor(totalSeconds / 60);
        const seconds = Math.floor(totalSeconds % 60);
        return `${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    }
    function shuffleArray(array) {
        let currentIndex = array.length, randomIndex;
        const newArray = [...array];
        while (currentIndex !== 0) {
            randomIndex = Math.floor(Math.random() * currentIndex);
            currentIndex--;
            [newArray[currentIndex], newArray[randomIndex]] = [newArray[randomIndex], newArray[currentIndex]];
        }
        return newArray;
    }

    function updateUI() {
        const currentSong = playlist?.getCurrentSong();
        if (!coverElement || !titleElement || !artistElement || !youtubeLinkElement) {
            return;
        }

        if (!currentSong) {
            coverElement.src = ""; coverElement.alt = "No cover art";
            titleElement.textContent = "No song loaded"; titleElement.title = "";
            artistElement.textContent = ""; artistElement.title = "";
            youtubeLinkElement.href = "#"; youtubeLinkElement.classList.add('hidden');
            if (playPauseButton) updatePlayPauseButton(true);
            if (progressBar) { progressBar.value = 0; progressBar.style.setProperty('--progress-percent', '0%'); }
            if (currentTimeElement) currentTimeElement.textContent = "0:00";
            if (durationElement) durationElement.textContent = "--:--";
        } else {
            coverElement.src = currentSong.getCoverLink(); coverElement.alt = `Cover art for ${currentSong.getTitle()}`;
            const songTitle = currentSong.getTitle();
            titleElement.textContent = songTitle; titleElement.title = songTitle;
            const songArtist = currentSong.getArtist();
            artistElement.textContent = songArtist; artistElement.title = songArtist;
            youtubeLinkElement.href = currentSong.getYoutubeLink(); youtubeLinkElement.classList.remove('hidden');
        }

        if (playerReady && ytPlayer && typeof ytPlayer.getPlayerState === 'function' && hasUserInitiatedPlayback) {
            const state = ytPlayer.getPlayerState();
            if (playPauseButton) updatePlayPauseButton(state !== YT.PlayerState.PLAYING && state !== YT.PlayerState.BUFFERING);
            updateDurationDisplay();
        } else {
            if (playPauseButton) updatePlayPauseButton(true);
            if (durationElement) durationElement.textContent = "--:--";
        }
        updateVolumeIcon();
        if (repeatButtonElement) updateRepeatButtonUI();
        if (shuffleButtonElement) updateShuffleButtonUI();
        if (playlistSelectorElement) playlistSelectorElement.value = activePlaylistIndex.toString();
        updateQueueDisplay();
    }

    function updateDurationDisplay() { 
        if (!durationElement) return;
        if (!playerReady || !ytPlayer || typeof ytPlayer.getDuration !== 'function' || !hasUserInitiatedPlayback) {
            durationElement.textContent = "--:--";
            return;
        }
        const duration = ytPlayer.getDuration();
        durationElement.textContent = formatTime(duration);
    }

    function loadCurrentSong(autoplay = false, isRetry = false) {
        console.debug(`loadCurrentSong called, autoplay=${autoplay}, isRetry=${isRetry}`);
        const currentSong = playlist?.getCurrentSong();

        // if this is a fresh attempt to play a song (not a retry from an error),
        // reset its video index to the primary one
        if (currentSong && !isRetry) {
            currentSong.resetVideoIndex();
        }

        updateUI();
        stopRafUpdater();
        if (progressBar) { progressBar.value = 0; progressBar.style.setProperty('--progress-percent', '0%'); }
        if (currentTimeElement) currentTimeElement.textContent = "0:00";
        if (durationElement) durationElement.textContent = "--:--";

        if (!playerReady || !ytPlayer || typeof ytPlayer.loadVideoById !== 'function') {
             console.warn("Player not ready or loadVideoById unavailable. Cannot load song.");
             if (playPauseButton) updatePlayPauseButton(true);
             return;
        }

        if (!currentSong) {
            console.warn("No current song to load.");
            if (typeof ytPlayer.stopVideo === 'function') ytPlayer.stopVideo();
             if (playPauseButton) updatePlayPauseButton(true);
            return;
        }

        const videoIdToLoad = currentSong.getCurrentVideoId();
        if (!videoIdToLoad) {
            console.error(`No video ID found for "${currentSong.getTitle()}". Skipping.`);
            onPlayerError({ data: 100 }); // simulate a "not found" error
            return;
        }
        
        console.log(`Loading video: ${videoIdToLoad} - ${currentSong.getTitle()}`);
        ytPlayer.loadVideoById({
            videoId: videoIdToLoad,
            startSeconds: 0,
            suggestedQuality: 'small'
        });
        window._musicPlayerAutoplayIntent = autoplay;
    }

    function loadNewPlaylistByIndex(newPlaylistIndex, autoplayOverride = null) {
        if (newPlaylistIndex < 0 || newPlaylistIndex >= PLAYLISTS_DATA.length) {
            console.warn(`Invalid playlist index: ${newPlaylistIndex}`);
            return;
        }
        activePlaylistIndex = newPlaylistIndex;
        const selectedPlaylistData = PLAYLISTS_DATA[activePlaylistIndex];

        if (playerReady && ytPlayer && typeof ytPlayer.stopVideo === 'function' && hasUserInitiatedPlayback) {
            ytPlayer.stopVideo();
        }
        stopRafUpdater();

        const newSongs = selectedPlaylistData.songs.map(d => new Song(d.title, d.artist, d.coverLink, d.videoIds || d.videoId));
        originalSongOrderForCurrentPlaylist = [...newSongs];
        
        if (isShuffleActive) {
            const currentSongVideoId = playlist?.getCurrentSong()?.getCurrentVideoId();
            const shuffledNewSongs = shuffleArray(newSongs);
            playlist = new Playlist(shuffledNewSongs);
            if (currentSongVideoId) {
                const newIdx = playlist.getSongs().findIndex(s => s.videoIds.includes(currentSongVideoId));
                if (newIdx !== -1) playlist.setCurrentSongIndex(newIdx);
                else playlist.setCurrentSongIndex(0);
            } else {
                playlist.setCurrentSongIndex(0);
            }
        } else {
            playlist = new Playlist(newSongs);
            playlist.setCurrentSongIndex(0);
        }
        
        if (!hasUserInitiatedPlayback) {
            updateUI();
             loadCurrentSong(false);
        } else {
            let shouldAutoplayThisLoad = autoplayOverride === null ? true : autoplayOverride;
            loadCurrentSong(shouldAutoplayThisLoad);
        }
    }

    function togglePlayPause() {
        if (!playerReady || !ytPlayer || typeof ytPlayer.getPlayerState !== 'function') {
             console.warn("Player not ready, cannot toggle play/pause.");
             return;
        }

        if (!hasUserInitiatedPlayback) {
            if (playlist.isEmpty()) {
                console.warn("Cannot play: Playlist is empty.");
                return;
            }
            hasUserInitiatedPlayback = true;
            loadCurrentSong(true); // load the current (first) song and play it
        } else {
            const state = ytPlayer.getPlayerState();
            if (state === YT.PlayerState.PLAYING) {
                console.debug("Pausing video.");
                ytPlayer.pauseVideo();
            } else { // PAUSED, ENDED, CUED, UNSTARTED
                console.debug("Playing video.");
                if (playlist.isEmpty() && PLAYLISTS_DATA.length > 0 && PLAYLISTS_DATA[activePlaylistIndex].songs.length > 0) {
                    loadCurrentSong(true);
                } else if (!playlist.isEmpty()) {
                    if (state === YT.PlayerState.ENDED && repeatMode !== 'one') {
                        playlist.playNext();
                        loadCurrentSong(true);
                    } else {
                       ytPlayer.playVideo();
                    }
                } else {
                    console.warn("Cannot play: No songs in current playlist or no playlists available.");
                }
            }
        }
    }

    function updatePlayPauseButton(isPaused) { 
        if (!playPauseButton) return;
        const img = playPauseButton.querySelector('img');
        const label = isPaused ? "Play" : "Pause";
        if (img) {
            img.src = isPaused ? ICON_PLAY : ICON_PAUSE;
            img.alt = "";
        }
        playPauseButton.setAttribute('aria-label', label);
        playPauseButton.title = label;
    }
    function rafUpdateProgress(timestamp) { 
        if (!isUpdaterRunning) return;
        if (!playerReady || !ytPlayer || typeof ytPlayer.getCurrentTime !== 'function' || typeof ytPlayer.getDuration !== 'function' || !hasUserInitiatedPlayback) {
            stopRafUpdater(); return;
        }
        if (isSeeking) { rafId = requestAnimationFrame(rafUpdateProgress); return; }

        if (timestamp - lastRafUpdateTime >= FRAME_INTERVAL) {
            lastRafUpdateTime = timestamp;
            const currentTime = ytPlayer.getCurrentTime();
            const duration = ytPlayer.getDuration();
            if (duration && isFinite(duration) && duration > 0) {
                const progress = (currentTime / duration) * 100;
                if (progressBar) { progressBar.value = progress; progressBar.style.setProperty('--progress-percent', `${progress}%`); }
                if (currentTimeElement) currentTimeElement.textContent = formatTime(currentTime);
                if (durationElement && durationElement.textContent === "--:--") updateDurationDisplay();
            } else {
                if (progressBar) { progressBar.value = 0; progressBar.style.setProperty('--progress-percent', '0%'); }
                if (currentTimeElement) currentTimeElement.textContent = "0:00";
                if (durationElement) updateDurationDisplay();
            }
        }
        if (isUpdaterRunning) rafId = requestAnimationFrame(rafUpdateProgress);
        else { if (rafId) { cancelAnimationFrame(rafId); rafId = null; } }
    }
    function startRafUpdater() { 
        if (isUpdaterRunning) return;
        if (!playerReady || !ytPlayer || typeof ytPlayer.getPlayerState !== 'function' || ytPlayer.getPlayerState() !== YT.PlayerState.PLAYING || !hasUserInitiatedPlayback) {
            return;
        }
        if (document.visibilityState === 'hidden') {
            playerShouldBeUpdatingWhenVisible = true; return;
        }
        isUpdaterRunning = true; lastRafUpdateTime = 0;
        if (rafId) cancelAnimationFrame(rafId);
        rafId = requestAnimationFrame(rafUpdateProgress);
    }
    function stopRafUpdater() { 
        if (!isUpdaterRunning && !rafId) return;
        isUpdaterRunning = false;
        if (rafId) { cancelAnimationFrame(rafId); rafId = null; }
    }
    function handleVisibilityChange() { 
        if (!playerReady || !ytPlayer || typeof ytPlayer.getPlayerState !== 'function' || !hasUserInitiatedPlayback) return;
        if (document.visibilityState === 'hidden') {
            if (isUpdaterRunning) { stopRafUpdater(); playerShouldBeUpdatingWhenVisible = true; }
            else if (ytPlayer.getPlayerState() === YT.PlayerState.PLAYING) { playerShouldBeUpdatingWhenVisible = true; }
        } else if (document.visibilityState === 'visible') {
            if (playerShouldBeUpdatingWhenVisible) {
                playerShouldBeUpdatingWhenVisible = false;
                if (ytPlayer.getPlayerState() === YT.PlayerState.PLAYING) startRafUpdater();
            } else if (!isUpdaterRunning && ytPlayer.getPlayerState() === YT.PlayerState.PLAYING) {
                startRafUpdater();
            }
        }
    }

    function onPlayerReady(event) {
        console.log("YouTube player ready!");
        playerReady = true;
        setVolumeFromSlider(false);
        
        updateUI();
		updateVolumeIcon();
		
		if (hasUserInitiatedPlayback && playlist && !playlist.isEmpty()) {
            console.log("Attempting to autoplay first song...");
            loadCurrentSong(true);
        }

        if (document.visibilityState === 'visible' && ytPlayer.getPlayerState() === YT.PlayerState.PLAYING && hasUserInitiatedPlayback) {
            startRafUpdater();
        } else if (document.visibilityState === 'hidden' && ytPlayer.getPlayerState() === YT.PlayerState.PLAYING && hasUserInitiatedPlayback) {
            playerShouldBeUpdatingWhenVisible = true;
        }
    }

    function onPlayerStateChange(event) {
        const state = event.data;
        const stateName = Object.keys(YT.PlayerState).find(key => YT.PlayerState[key] === state) || 'UNKNOWN';
        //console.log(`Player state changed: ${state} (${stateName})`);

        if (state !== YT.PlayerState.UNSTARTED && state !== -1) {
        }

        updateDurationDisplay();

        switch (state) {
            case YT.PlayerState.PLAYING:
                if (playPauseButton) updatePlayPauseButton(false);
                startRafUpdater();
                updateUI();
                break;
            case YT.PlayerState.PAUSED:
                if (playPauseButton) updatePlayPauseButton(true);
                stopRafUpdater();
                break;
            case YT.PlayerState.ENDED:
                stopRafUpdater();
                if (playPauseButton) updatePlayPauseButton(true);
                if (progressBar) { progressBar.value = 100; progressBar.style.setProperty('--progress-percent', '100%'); }
                if (currentTimeElement && ytPlayer && typeof ytPlayer.getDuration === 'function') {
                    currentTimeElement.textContent = formatTime(ytPlayer.getDuration());
                }

                if (!hasUserInitiatedPlayback) {
                    updateUI();
                    return;
                }

                if (repeatMode === 'one') {
                    ytPlayer.seekTo(0, true);
                    ytPlayer.playVideo();
                } else {
                    const previousSongIndex = playlist.currentSongIndex;
                    playlist.playNext();
                    
                    const isLastSongAndNotRepeatingAll = playlist.currentSongIndex === 0 && 
                                                        previousSongIndex === playlist.getSongs().length -1 && 
                                                        repeatMode !== 'all';
                    
                    let shouldAutoplay;
                    if (isLastSongAndNotRepeatingAll) {
                        shouldAutoplay = false;
                    } else {
                        shouldAutoplay = true;
                    }
                    loadCurrentSong(shouldAutoplay);
                }
                break;
            case YT.PlayerState.BUFFERING:
                if (playPauseButton) updatePlayPauseButton(false);
                break;
            case YT.PlayerState.CUED:
                if (playPauseButton) updatePlayPauseButton(true);
                stopRafUpdater();
                if (progressBar) { progressBar.value = 0; progressBar.style.setProperty('--progress-percent', '0%'); }
                if (currentTimeElement) currentTimeElement.textContent = "0:00";
                updateUI(); 
                updateDurationDisplay(); 

                if (window._musicPlayerAutoplayIntent === true) {
                    ytPlayer.playVideo();
                }
                break;
            case YT.PlayerState.UNSTARTED:
                if (playPauseButton) updatePlayPauseButton(true);
                stopRafUpdater();
                if (currentTimeElement) currentTimeElement.textContent = "0:00";
                if (durationElement) durationElement.textContent = "--:--";
                updateUI();
                break;
            default: break;
        }
    }
    function onPlayerError(event) { 
        const recoverableErrorCodes = [2, 5, 100, 101, 150];
        const errorCodes = { 2: 'Invalid parameter.', 5: 'HTML5 error.', 100: 'Not found/private.', 101: 'Embedding disallowed.', 150: 'Embedding disallowed.' };
        const errorMsg = errorCodes[event.data] || `Unknown error (${event.data})`;
        console.error(`YouTube Player Error: ${errorMsg}`);

        const currentSong = playlist?.getCurrentSong();

        // if the error is recoverable (e.g., video blocked), try the next available video ID
        if (currentSong && recoverableErrorCodes.includes(event.data)) {
            console.log(`Video failed for "${currentSong.getTitle()}". Checking for alternatives...`);
            if (currentSong.tryNextVideo()) {
                console.log(`Found an alternative. Attempting to play video ID: ${currentSong.getCurrentVideoId()}`);
                // reload the song with the next video ID. isRetry=true prevents resetting the video index
                loadCurrentSong(window._musicPlayerAutoplayIntent, true);
                return; // stop further error processing for this event
            } else {
                console.warn(`No more alternative videos for "${currentSong.getTitle()}".`);
            }
        }

        // handle final/unrecoverable errors
        if (playPauseButton) updatePlayPauseButton(true);
        stopRafUpdater();
        if (titleElement) titleElement.textContent = "Error";
        if (artistElement) artistElement.textContent = errorMsg;
    }
    function setVolumeFromSlider(shouldUnmute = true) {
		if (!volumeSlider || !volumePercentageElement) return;
		const volumeValue = parseFloat(volumeSlider.value);
		const newVolumePercent = Math.round(volumeValue * 100);

		if (playerReady && ytPlayer && typeof ytPlayer.setVolume === 'function') {
			ytPlayer.setVolume(newVolumePercent);
			if (shouldUnmute && newVolumePercent > 0 && typeof ytPlayer.isMuted === 'function' && ytPlayer.isMuted()) {
				ytPlayer.unMute();
			}
			if (newVolumePercent === 0 && typeof ytPlayer.mute === 'function' && !ytPlayer.isMuted()) {
				ytPlayer.mute();
			}
		}
		
		volumePercentageElement.textContent = `${newVolumePercent}%`;
	}
	function toggleMute() {
		if (!playerReady || !ytPlayer || !volumeSlider || !volumeIconElement) return;

		const isCurrentlyMuted = ytPlayer.isMuted();

		if (isCurrentlyMuted) {
			ytPlayer.unMute();
			const restoreVolume = (volumeBeforeMute > 0) ? volumeBeforeMute : 0.5;
			ytPlayer.setVolume(restoreVolume * 100);
			volumeSlider.value = restoreVolume;
			if (volumePercentageElement) {
				volumePercentageElement.textContent = `${Math.round(restoreVolume * 100)}%`;
			}
			volumeIconElement.src = ICON_VOLUME;
			volumeIconElement.alt = "Mute";
			volumeIconElement.title = "Mute";

		} else {
			const currentSliderValue = parseFloat(volumeSlider.value);
			if (currentSliderValue > 0) {
				volumeBeforeMute = currentSliderValue;
			}
			
			ytPlayer.mute();
			volumeSlider.value = 0;
			if (volumePercentageElement) {
				volumePercentageElement.textContent = `0%`;
			}
			
			volumeIconElement.src = ICON_MUTED;
			volumeIconElement.alt = "Unmute";
			volumeIconElement.title = "Unmute";
		}
	}
    function updateVolumeIcon() {
		if (!volumeIconElement || !volumeSlider) return;

		const sliderValue = parseFloat(volumeSlider.value);
		const isMutedBySlider = sliderValue === 0;

		let isMutedByPlayer = false;
		if (playerReady && ytPlayer && typeof ytPlayer.isMuted === 'function') {
			isMutedByPlayer = ytPlayer.isMuted();
		}
		
		const isEffectivelyMuted = isMutedBySlider || isMutedByPlayer;

		volumeIconElement.src = isEffectivelyMuted ? ICON_MUTED : ICON_VOLUME;
		volumeIconElement.alt = isEffectivelyMuted ? "Unmute" : "Mute";
		volumeIconElement.title = isEffectivelyMuted ? "Unmute" : "Mute";
	}
    function toggleRepeatMode() { 
        switch (repeatMode) {
            case 'none': repeatMode = 'all'; break;
            case 'all': repeatMode = 'one'; break;
            case 'one': repeatMode = 'none'; break;
            default: repeatMode = 'none';
        }
        updateRepeatButtonUI();
        updateQueueDisplay();
    }
    function updateRepeatButtonUI() { 
        if (!repeatButtonElement) return;
        const img = repeatButtonElement.querySelector('img');
        let iconSrc = ICON_REPEAT_NONE; let label = "Repeat Off";
        repeatButtonElement.classList.remove('repeat-active', 'repeat-one');
        if (repeatMode === 'all') { iconSrc = ICON_REPEAT_ALL; label = "Repeat All"; repeatButtonElement.classList.add('repeat-active'); }
        else if (repeatMode === 'one') { iconSrc = ICON_REPEAT_ONE; label = "Repeat One"; repeatButtonElement.classList.add('repeat-active', 'repeat-one'); }
        if (img) { img.src = iconSrc; img.alt = ""; }
        repeatButtonElement.setAttribute('aria-label', label); repeatButtonElement.title = label;
    }
    function toggleShuffleMode() { 
        if (!playlist || playlist.isEmpty()) return;

        isShuffleActive = !isShuffleActive;
        const currentSongBeforeToggle = playlist.getCurrentSong();

        if (isShuffleActive) {
            const shuffledSongs = shuffleArray(originalSongOrderForCurrentPlaylist);
            playlist.setSongs(shuffledSongs);
        } else {
            playlist.setSongs([...originalSongOrderForCurrentPlaylist]);
        }

        if (currentSongBeforeToggle) {
            const newIndex = playlist.getSongs().findIndex(song => song.getCurrentVideoId() === currentSongBeforeToggle.getCurrentVideoId());
            playlist.setCurrentSongIndex(newIndex !== -1 ? newIndex : 0);
        } else {
            playlist.setCurrentSongIndex(0);
        }

        updateShuffleButtonUI();
        updateQueueDisplay();
        updateUI();
    }
    function updateShuffleButtonUI() { 
        if (!shuffleButtonElement) return;
        const img = shuffleButtonElement.querySelector('img');
        let iconSrc = isShuffleActive ? ICON_SHUFFLE_ON : ICON_SHUFFLE_OFF;
        let label = isShuffleActive ? "Shuffle On" : "Shuffle Off";
        shuffleButtonElement.classList.toggle('shuffle-active', isShuffleActive);
        if (img) { img.src = iconSrc; img.alt = ""; }
        shuffleButtonElement.setAttribute('aria-label', label); shuffleButtonElement.title = label;
    }

    function updateQueueDisplay() {
        if (!queueListElement || !playlist) {
            if (queueListElement) queueListElement.innerHTML = `<li class="${PLAYER_QUEUE_ITEM_CLASS} player-queue-empty">Queue is empty</li>`;
            if (queueTitleElement) queueTitleElement.style.display = (playlist && !playlist.isEmpty() && PLAYLISTS_DATA.length > 0) ? 'flex' : 'none'
            return;
        }
        if (queueTitleElement) queueTitleElement.style.display = 'flex';

        if (playlist.isEmpty()){
            queueListElement.innerHTML = `<li class="${PLAYER_QUEUE_ITEM_CLASS} player-queue-empty">Queue is empty</li>`;
            return;
        }


        queueListElement.innerHTML = '';
        const songs = playlist.getSongs();
        const currentIndex = playlist.currentSongIndex;
        const numSongs = songs.length;

        if (numSongs <= 1) {
            queueListElement.innerHTML = `<li class="${PLAYER_QUEUE_ITEM_CLASS} player-queue-empty">No upcoming songs</li>`;
            return;
        }

        let songsShownCount = 0;
        for (let i = 1; i < numSongs && songsShownCount < MAX_QUEUE_ITEMS_DISPLAYED; i++) {
            let nextIndex = (currentIndex + i) % numSongs;
            if (repeatMode !== 'all' && !isShuffleActive && nextIndex < (currentIndex + i) && nextIndex < currentIndex) {
                break; 
            }
            
            const song = songs[nextIndex];
            const li = document.createElement("li");
            li.className = PLAYER_QUEUE_ITEM_CLASS;
            li.dataset.songIndex = nextIndex;

            const titleSpan = document.createElement("span");
            titleSpan.className = "player-queue-item-title";
            titleSpan.textContent = song.getTitle();
            titleSpan.title = song.getTitle();

            const artistSpan = document.createElement("span");
            artistSpan.className = "player-queue-item-artist";
            artistSpan.textContent = ` - ${song.getArtist()}`;
            artistSpan.title = song.getArtist();

            li.appendChild(titleSpan);
            li.appendChild(artistSpan);

            li.addEventListener('click', () => {
                if (!hasUserInitiatedPlayback) {
                    hasUserInitiatedPlayback = true;
                }
                const songIndexToPlay = parseInt(li.dataset.songIndex, 10);
                playlist.setCurrentSongIndex(songIndexToPlay);
                loadCurrentSong(true);
            });
            queueListElement.appendChild(li);
            songsShownCount++;
        }

        if (songsShownCount === 0 && queueListElement.innerHTML === '') {
             queueListElement.innerHTML = `<li class="${PLAYER_QUEUE_ITEM_CLASS} player-queue-empty">End of playlist</li>`;
        }
    }

    function toggleQueueExpansion() {
        isQueueSectionExpanded = !isQueueSectionExpanded;
        const queueContainer = document.getElementById(QUEUE_CONTAINER_ID);
        const toggleIcon = document.getElementById(QUEUE_TOGGLE_ICON_ID);

        if (!queueContainer || !toggleIcon) return;

        if (isQueueSectionExpanded) {
            queueContainer.classList.remove('queue-collapsed');
            toggleIcon.innerHTML = "▼"; // down arrow ▼
        } else {
            queueContainer.classList.add('queue-collapsed');
            toggleIcon.innerHTML = "▶"; // right arrow ►
        }
    }
	
	function createPlayerElements() {
        const fragment = document.createDocumentFragment();
        playerContainer = document.createElement("div"); playerContainer.id = PLAYER_ELEMENT_ID; fragment.appendChild(playerContainer);
        
        const mainPlayerArea = document.createElement("div");
        mainPlayerArea.id = "player-main-area";
        playerContainer.appendChild(mainPlayerArea);

        mainContentWrapper = document.createElement("div"); mainContentWrapper.id = PLAYER_MAIN_CONTENT_WRAPPER_ID; mainPlayerArea.appendChild(mainContentWrapper);

        const displayBox = document.createElement("div"); displayBox.id = DISPLAY_BOX_ID;
        coverElement = document.createElement("img"); coverElement.id = COVER_ID; coverElement.alt = "Album cover"; coverElement.src = ""; displayBox.appendChild(coverElement);
        mainContentWrapper.appendChild(displayBox);

        const rightPanel = document.createElement("div");
        rightPanel.id = PLAYER_RIGHT_PANEL_ID;
        mainContentWrapper.appendChild(rightPanel);

        playlistSelectorContainer = document.createElement("div");
        playlistSelectorContainer.id = PLAYLIST_SELECTOR_CONTAINER_ID;
        const playlistLabel = document.createElement("label"); playlistLabel.htmlFor = PLAYLIST_SELECTOR_ID; playlistLabel.textContent = "Select playlist:"; playlistSelectorContainer.appendChild(playlistLabel);
        playlistSelectorElement = document.createElement("select"); playlistSelectorElement.id = PLAYLIST_SELECTOR_ID; playlistSelectorElement.title = "Select playlist"; playlistSelectorContainer.appendChild(playlistSelectorElement);
        rightPanel.appendChild(playlistSelectorContainer);

        const infoContainer = document.createElement("div"); infoContainer.id = INFO_CONTAINER_ID;
        const songInfo = document.createElement("div"); songInfo.id = SONG_INFO_ID;
        const titleLineWrapper = document.createElement("div"); titleLineWrapper.className = TITLE_LINE_WRAPPER_CLASS;
        titleElement = document.createElement("h3"); titleElement.id = TITLE_ID; titleElement.textContent = "Loading..."; titleLineWrapper.appendChild(titleElement);
        youtubeLinkElement = document.createElement("a"); youtubeLinkElement.id = YOUTUBE_LINK_ID; youtubeLinkElement.target = "_blank"; youtubeLinkElement.rel = "noopener noreferrer"; youtubeLinkElement.title = "Watch on YouTube"; youtubeLinkElement.classList.add('hidden');
        const ytIcon = document.createElement("img"); ytIcon.src = ICON_YOUTUBE; ytIcon.alt = "YouTube"; youtubeLinkElement.appendChild(ytIcon); titleLineWrapper.appendChild(youtubeLinkElement);
        songInfo.appendChild(titleLineWrapper);
        artistElement = document.createElement("p"); artistElement.id = ARTIST_ID; artistElement.textContent = ""; songInfo.appendChild(artistElement);
        infoContainer.appendChild(songInfo);
        rightPanel.appendChild(infoContainer);

        const progressBarContainer = document.createElement("div"); progressBarContainer.id = PROGRESS_BAR_CONTAINER_ID;
        currentTimeElement = document.createElement("span"); currentTimeElement.id = CURRENT_TIME_ID; currentTimeElement.textContent = "0:00"; progressBarContainer.appendChild(currentTimeElement);
        progressBar = document.createElement("input"); progressBar.type = "range"; progressBar.id = PROGRESS_BAR_ID; progressBar.value = "0"; progressBar.min = "0"; progressBar.max = "100"; progressBar.step = "0.1"; progressBar.title="Seek"; progressBar.style.setProperty('--progress-percent', '0%'); progressBarContainer.appendChild(progressBar);
        durationElement = document.createElement("span"); durationElement.id = DURATION_ID; durationElement.textContent = "--:--"; progressBarContainer.appendChild(durationElement);
        rightPanel.appendChild(progressBarContainer);
        
        const controlsContainer = document.createElement("div"); controlsContainer.id = CONTROLS_CONTAINER_ID;
        const controls = document.createElement("div"); controls.id = CONTROLS_ID;
        
        shuffleButtonElement = document.createElement("button"); shuffleButtonElement.id = SHUFFLE_BUTTON_ID; shuffleButtonElement.classList.add(PLAYER_CONTROL_BUTTON_CLASS, 'player-shuffle-button');
        const shuffleIcon = document.createElement("img"); shuffleIcon.alt = ""; shuffleIcon.src = ICON_SHUFFLE_OFF; shuffleButtonElement.appendChild(shuffleIcon); controls.appendChild(shuffleButtonElement);
        
        prevButtonElement = document.createElement("button"); prevButtonElement.id = PREV_BUTTON_ID; prevButtonElement.classList.add(PLAYER_CONTROL_BUTTON_CLASS); prevButtonElement.setAttribute('aria-label', 'Previous song'); prevButtonElement.title = 'Previous song';
        const prevIcon = document.createElement("img"); prevIcon.src = ICON_PREV; prevIcon.alt = ""; prevButtonElement.appendChild(prevIcon); controls.appendChild(prevButtonElement);
        
        playPauseButton = document.createElement("button"); playPauseButton.id = PLAY_PAUSE_BUTTON_ID; playPauseButton.classList.add(PLAYER_CONTROL_BUTTON_CLASS);
        const playPauseIcon = document.createElement("img"); playPauseIcon.alt = ""; playPauseIcon.src = ICON_PLAY; playPauseButton.appendChild(playPauseIcon); controls.appendChild(playPauseButton);
        
        nextButtonElement = document.createElement("button"); nextButtonElement.id = NEXT_BUTTON_ID; nextButtonElement.classList.add(PLAYER_CONTROL_BUTTON_CLASS); nextButtonElement.setAttribute('aria-label', 'Next song'); nextButtonElement.title = 'Next song';
        const nextIcon = document.createElement("img"); nextIcon.src = ICON_NEXT; nextIcon.alt = ""; nextButtonElement.appendChild(nextIcon); controls.appendChild(nextButtonElement);

        repeatButtonElement = document.createElement("button"); repeatButtonElement.id = REPEAT_BUTTON_ID; repeatButtonElement.classList.add(PLAYER_CONTROL_BUTTON_CLASS, 'player-repeat-button');
        const repeatIcon = document.createElement("img"); repeatIcon.alt = ""; repeatIcon.src = ICON_REPEAT_NONE; repeatButtonElement.appendChild(repeatIcon); controls.appendChild(repeatButtonElement);
        
        controlsContainer.appendChild(controls);

        volumeContainer = document.createElement("div"); volumeContainer.id = VOLUME_CONTAINER_ID;
        volumeIconElement = document.createElement("img"); volumeIconElement.id = VOLUME_ICON_ID; volumeIconElement.alt = "Mute"; volumeIconElement.title = "Mute/Unmute"; volumeIconElement.style.cursor = 'pointer'; volumeIconElement.src = ICON_VOLUME; volumeContainer.appendChild(volumeIconElement);
        volumePercentageElement = document.createElement("span"); volumePercentageElement.id = VOLUME_PERCENTAGE_ID; volumePercentageElement.textContent = "50%"; volumeContainer.appendChild(volumePercentageElement);
        volumeSlider = document.createElement("input"); volumeSlider.type = "range"; volumeSlider.id = VOLUME_SLIDER_ID; volumeSlider.min = 0; volumeSlider.max = 1; volumeSlider.step = 0.01; volumeSlider.value = 0.5; volumeSlider.title = "Adjust volume"; volumeContainer.appendChild(volumeSlider);
        controlsContainer.appendChild(volumeContainer);

        rightPanel.appendChild(controlsContainer);

        queueContainerElement = document.createElement("div"); queueContainerElement.id = QUEUE_CONTAINER_ID;
        queueTitleElement = document.createElement("h4"); queueTitleElement.id = QUEUE_TITLE_ID;
        queueTitleElement.innerHTML = `Up next <span id="${QUEUE_TOGGLE_ICON_ID}">${isQueueSectionExpanded ? "▼" : "▸"}</span>`;
        queueContainerElement.appendChild(queueTitleElement);
        queueListElement = document.createElement("ul"); queueListElement.id = QUEUE_LIST_ID; queueContainerElement.appendChild(queueListElement);
        mainPlayerArea.appendChild(queueContainerElement);

        const youtubePlayerDiv = document.createElement("div"); youtubePlayerDiv.id = YOUTUBE_PLAYER_DIV_ID; fragment.appendChild(youtubePlayerDiv);
        return fragment;
    }

    function loadYouTubeAPI() {
        return new Promise((resolve, reject) => {
            if (typeof YT !== 'undefined' && typeof YT.Player !== 'undefined') { resolve(); return; }
            window.onYouTubeIframeAPIReady = () => { resolve(); };
            const existingScript = document.querySelector('script[src="https://www.youtube.com/iframe_api"]');
            if (existingScript) return;
            const tag = document.createElement('script'); tag.src = "https://www.youtube.com/iframe_api";
            tag.onerror = (err) => { console.error("Failed to load YouTube API script:", err); delete window.onYouTubeIframeAPIReady; reject(err); };
            const firstScriptTag = document.getElementsByTagName('script')[0];
            if (firstScriptTag && firstScriptTag.parentNode) firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
            else document.head.appendChild(tag);
        });
    }

    function bindUIEventListeners() {
        if (!playPauseButton || !nextButtonElement || !prevButtonElement || !repeatButtonElement || !shuffleButtonElement ||
            !progressBar || !volumeIconElement || !volumeSlider || !playlistSelectorElement || !queueTitleElement) {
            console.error("Failed to bind listeners: Core UI elements missing.");
            return;
        }

        playPauseButton.addEventListener("click", togglePlayPause);
        nextButtonElement.addEventListener("click", () => {
            if (!hasUserInitiatedPlayback) {
                if (playlist.isEmpty()) return;
                hasUserInitiatedPlayback = true;
                playlist?.playNext();
                loadCurrentSong(true);
            } else {
                const wasPlaying = playerReady && ytPlayer?.getPlayerState() === YT.PlayerState.PLAYING;
                const shouldAutoplay = wasPlaying || repeatMode === 'all' || (playlist.currentSongIndex !== playlist.getSongs().length - 1);
                playlist?.playNext();
                loadCurrentSong(shouldAutoplay);
            }
        });
        prevButtonElement.addEventListener("click", () => {
            if (!hasUserInitiatedPlayback) {
                 if (playlist.isEmpty()) return;
                hasUserInitiatedPlayback = true;
                playlist?.playPrevious();
                loadCurrentSong(true);
            } else {
                const wasPlaying = playerReady && ytPlayer?.getPlayerState() === YT.PlayerState.PLAYING;
                const shouldAutoplay = wasPlaying || repeatMode === 'all';
                playlist?.playPrevious();
                loadCurrentSong(shouldAutoplay);
            }
        });
        repeatButtonElement.addEventListener("click", toggleRepeatMode);
        shuffleButtonElement.addEventListener("click", toggleShuffleMode);
        volumeIconElement.addEventListener("click", toggleMute);
        queueTitleElement.addEventListener('click', toggleQueueExpansion);

        progressBar.addEventListener("mousedown", () => { isSeeking = true; stopRafUpdater(); });
        progressBar.addEventListener("touchstart", () => { isSeeking = true; stopRafUpdater(); }, { passive: true });
        progressBar.addEventListener("input", () => {
            if (!isSeeking || !hasUserInitiatedPlayback) return;
            const percentage = progressBar.value;
            progressBar.style.setProperty('--progress-percent', `${percentage}%`);
            if (playerReady && ytPlayer && typeof ytPlayer.getDuration === 'function' && currentTimeElement) {
                const duration = ytPlayer.getDuration();
                if (duration && isFinite(duration)) {
                    currentTimeElement.textContent = formatTime((percentage / 100) * duration);
                }
            }
        });
        progressBar.addEventListener("change", () => {
            if (!hasUserInitiatedPlayback) {
                 isSeeking = false; return;
            }
            if (!playerReady || !ytPlayer || typeof ytPlayer.getDuration !== 'function' || typeof ytPlayer.seekTo !== 'function') {
                 isSeeking = false; return;
            }
            const duration = ytPlayer.getDuration();
            if (!duration || !isFinite(duration) || duration <= 0) { isSeeking = false; return; }
            const seekTime = (progressBar.value / 100) * duration;
            ytPlayer.seekTo(seekTime, true);
            if (currentTimeElement) currentTimeElement.textContent = formatTime(seekTime);
            isSeeking = false;
            const state = ytPlayer.getPlayerState();
            if (state === YT.PlayerState.PLAYING) startRafUpdater();
            else stopRafUpdater();
        });
        const handleSeekEnd = () => { if (isSeeking) progressBar.dispatchEvent(new Event('change')); };
        progressBar.addEventListener("mouseup", handleSeekEnd);
        progressBar.addEventListener("touchend", handleSeekEnd);
		
		volumeSlider.addEventListener("input", () => {
			setVolumeFromSlider(true);
			updateVolumeIcon();
		});
        
        playlistSelectorElement.addEventListener("change", (event) => {
            const newIndex = parseInt(event.target.value, 10);
            if (!isNaN(newIndex)) {
                if (!hasUserInitiatedPlayback) {
                    loadNewPlaylistByIndex(newIndex, false);
                } else {
                    const wasPlaying = playerReady && ytPlayer && typeof ytPlayer.getPlayerState === 'function' && ytPlayer.getPlayerState() === YT.PlayerState.PLAYING;
                    loadNewPlaylistByIndex(newIndex, wasPlaying);
                }
            }
        });

        document.addEventListener('visibilitychange', handleVisibilityChange);
    }

    function injectPlayerStyles() {
        const styleId = "nice-music-player-styles";
        if (document.getElementById(styleId)) document.getElementById(styleId).remove();
        const style = document.createElement("style"); style.id = styleId;
        style.textContent = `
            :root {
              --player-bg: #ffffff; --player-border: rgba(0, 0, 0, 0.12);
              --text-primary: #212121; --text-secondary: #757575;
              --accent-color: #3F51B5; --accent-color-hover: #303F9F;
              --border-color: #EEEEEE; --cover-border-color: rgba(0, 0, 0, 0.08);
              --slider-track-bg: #E0E0E0; --slider-thumb-bg: #3F51B5;
              --slider-thumb-hover-bg: #303F9F; --progress-fill-bg: #3F51B5;
              --cover-art-size: 10rem;
              --base-font-size: 14px; --border-radius: 4px; --button-size: 36px;
              --small-button-size: 24px; --spacing-xs: 4px; --spacing-sm: 8px;
              --spacing-md: 16px; --spacing-lg: 24px;
              --font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
              --title-font-size: 16px; --artist-font-size: 14px; --time-font-size: 12px;
              --transition-speed: 0.2s; --transition-func: cubic-bezier(0.4, 0, 0.2, 1);
              --queue-item-hover-bg: #f0f0f0;
            }
            #${PLAYER_ELEMENT_ID} { 
                background-color: var(--player-bg); border-radius: var(--border-radius); 
                font-family: var(--font-family); font-size: var(--base-font-size); 
                color: var(--text-primary); padding: var(--spacing-md); 
                box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24); 
                margin: var(--spacing-md) auto; overflow: hidden; position: relative; 
                box-sizing: border-box; max-width: clamp(50rem, 70vw, 60rem);
            }
            #player-main-area { display: flex; flex-direction: column; }
            #${PLAYER_MAIN_CONTENT_WRAPPER_ID} {
                display: flex; align-items: flex-start;
                gap: var(--spacing-lg); width: 100%;
            }
            #${PLAYER_RIGHT_PANEL_ID} {
                display: flex; flex-direction: column;
                flex-grow: 1; min-width: 0;
            }
            #${PLAYLIST_SELECTOR_CONTAINER_ID} {
                display: flex; align-items: center; gap: var(--spacing-sm);
                margin-bottom: var(--spacing-sm);
            }
            #${PLAYLIST_SELECTOR_CONTAINER_ID} label { font-size: var(--artist-font-size); color: var(--text-secondary); flex-shrink: 0; }
            #${PLAYLIST_SELECTOR_ID} { 
                font-family: var(--font-family); font-size: 13px; padding: 4px 8px; 
                border: 1px solid var(--border-color); border-radius: var(--border-radius); 
                background-color: var(--player-bg); color: var(--text-primary); 
                flex-grow: 1; min-width: 150px; height: auto; box-sizing: border-box; 
                -webkit-appearance: none; -moz-appearance: none; appearance: none; 
                background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%204%205%22%3E%3Cpath%20fill%3D%22%23555%22%20d%3D%22M2%200L0%202h4zm0%205L0%203h4z%22/%3E%3C/svg%3E'); 
                background-repeat: no-repeat; background-position: right 8px center; 
                background-size: 8px 10px; padding-right: 25px; cursor:pointer; 
            }
            #${PLAYLIST_SELECTOR_ID}:focus { outline: 1px solid var(--accent-color); border-color: var(--accent-color); }
            .hidden { display: none !important; }
            #${DISPLAY_BOX_ID} { display: block; flex-shrink: 0; }
            #${COVER_ID} { width: var(--cover-art-size); height: var(--cover-art-size); object-fit: cover; border-radius: var(--border-radius); box-shadow: 0 1px 3px var(--cover-border-color); flex-shrink: 0; background-color: var(--border-color); transition: transform var(--transition-speed) var(--transition-func); }
            #${COVER_ID}:hover { transform: scale(1.03); }
            #${INFO_CONTAINER_ID} { display: flex; flex-direction: column; justify-content: center; overflow: hidden; flex-grow: 1; min-width: 0; padding: var(--spacing-xs) 0; }
            #${SONG_INFO_ID} { display: flex; flex-direction: column; overflow: hidden; justify-content: center; }
            .${TITLE_LINE_WRAPPER_CLASS} { display: flex; align-items: baseline; margin-bottom: var(--spacing-xs); gap: var(--spacing-xs); }
            #${TITLE_ID} { font-size: var(--title-font-size); font-weight: 600; margin: 0; white-space: normal; overflow-wrap: break-word; line-height: 1.3; color: var(--text-primary); flex-grow: 1; cursor: default; }
            #${YOUTUBE_LINK_ID} { flex-shrink: 0; line-height: 1; opacity: 0.7; transition: opacity var(--transition-speed) var(--transition-func); margin-left: 2px; }
            #${YOUTUBE_LINK_ID}:hover, #${YOUTUBE_LINK_ID}:focus { opacity: 1; }
            #${YOUTUBE_LINK_ID} img { width: 18px; height: auto; display: block; }
            #${ARTIST_ID} { font-size: var(--artist-font-size); margin: 0; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; color: var(--text-secondary); line-height: 1.3; cursor: default; }
            #${PROGRESS_BAR_CONTAINER_ID} { width: 100%; display: flex; align-items: center; gap: var(--spacing-sm); margin: var(--spacing-sm) 0; }
            #${CONTROLS_CONTAINER_ID} { width: 100%; display: flex; justify-content: space-between; align-items: center; gap: var(--spacing-md); margin-top: auto; }
            #${CONTROLS_ID} { display: flex; justify-content: center; align-items: center; gap: var(--spacing-sm); }
            .${PLAYER_CONTROL_BUTTON_CLASS} { background: none; border: none; cursor: pointer; border-radius: 50%; display: inline-flex; justify-content: center; align-items: center; width: var(--button-size); height: var(--button-size); opacity: 0.85; transition: all var(--transition-speed) var(--transition-func); padding: 0; margin: 0; flex-shrink: 0; outline: none; }
            .${PLAYER_CONTROL_BUTTON_CLASS}:hover { opacity: 1; transform: scale(1.08); background-color: rgba(0,0,0,0.05); }
            .${PLAYER_CONTROL_BUTTON_CLASS}:active { transform: scale(0.95); opacity: 0.9; }
            .${PLAYER_CONTROL_BUTTON_CLASS}:focus-visible { opacity: 1; outline: 2px solid var(--accent-color); outline-offset: 2px; }
            .${PLAYER_CONTROL_BUTTON_CLASS} img { display: block; width: 60%; height: 60%; user-select: none; -webkit-user-drag: none; -webkit-user-select: none; }
            #${PLAY_PAUSE_BUTTON_ID} { width: calc(var(--button-size) * 1.25); height: calc(var(--button-size) * 1.25); background-color: rgba(63, 81, 181, 0.08); }
            #${PLAY_PAUSE_BUTTON_ID}:hover { background-color: rgba(63, 81, 181, 0.12); }
            .player-repeat-button, .player-shuffle-button { width: var(--small-button-size); height: var(--small-button-size); opacity: 0.6; }
            .player-repeat-button.repeat-active, .player-shuffle-button.shuffle-active { opacity: 1; background-color: rgba(63, 81, 181, 0.1); }
            #${CURRENT_TIME_ID}, #${DURATION_ID} { font-size: var(--time-font-size); color: var(--text-secondary); flex-shrink: 0; min-width: 3.2em; text-align: center; font-variant-numeric: tabular-nums; }
            #${VOLUME_CONTAINER_ID} { display: flex; align-items: center; gap: var(--spacing-sm); flex-shrink: 0; }
            #${VOLUME_ICON_ID} { width: 20px; height: 20px; opacity: 0.7; cursor: pointer; transition: opacity var(--transition-speed) var(--transition-func); filter: brightness(0.2); padding: 2px; border-radius: 50%; user-select: none; -webkit-user-select: none; }
            #${VOLUME_ICON_ID}:hover { opacity: 1; background-color: rgba(0,0,0,0.05); }
            #${VOLUME_PERCENTAGE_ID} { font-size: 12px; color: var(--text-secondary); min-width: 2.5em; text-align: right; flex-shrink: 0; font-variant-numeric: tabular-nums; }
            #${VOLUME_SLIDER_ID} { width: 80px; flex-grow: 0; flex-shrink: 0; }
            input[type="range"] { -webkit-appearance: none; appearance: none; background: transparent; cursor: pointer; width: 100%; outline: none; transition: opacity var(--transition-speed) var(--transition-func); flex-grow: 1; height: 16px; vertical-align: middle; padding: 0; margin: 0; }
            input[type="range"]::-webkit-slider-runnable-track { height: 4px; background: var(--slider-track-bg); border-radius: 2px; }
            input[type="range"]::-moz-range-track { height: 4px; background: var(--slider-track-bg); border-radius: 2px; }
            #${PROGRESS_BAR_ID}::-webkit-slider-runnable-track { background: linear-gradient( to right, var(--progress-fill-bg), var(--progress-fill-bg) var(--progress-percent, 0%), var(--slider-track-bg) var(--progress-percent, 0%) ); }
            #${PROGRESS_BAR_ID}::-moz-range-track { background: linear-gradient( to right, var(--progress-fill-bg), var(--progress-fill-bg) var(--progress-percent, 0%), var(--slider-track-bg) var(--progress-percent, 0%) ); }
            input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; margin-top: -6px; height: 16px; width: 16px; background-color: var(--slider-thumb-bg); border-radius: 50%; border: none; box-shadow: 0 1px 2px rgba(0,0,0,0.2); transition: all var(--transition-speed) var(--transition-func); }
            input[type="range"]::-moz-range-thumb { height: 16px; width: 16px; background-color: var(--slider-thumb-bg); border-radius: 50%; border: none; box-shadow: 0 1px 2px rgba(0,0,0,0.2); transition: all var(--transition-speed) var(--transition-func); }
            input[type="range"]:hover::-webkit-slider-thumb { background-color: var(--slider-thumb-hover-bg); transform: scale(1.15); }
            input[type="range"]:hover::-moz-range-thumb { background-color: var(--slider-thumb-hover-bg); transform: scale(1.15); }
            input[type="range"]:focus-visible::-webkit-slider-thumb { box-shadow: 0 0 0 3px rgba(63, 81, 181, 0.3); transform: scale(1.15); background-color: var(--slider-thumb-hover-bg); }
            input[type="range"]:focus-visible::-moz-range-thumb { box-shadow: 0 0 0 3px rgba(63, 81, 181, 0.3); transform: scale(1.15); background-color: var(--slider-thumb-hover-bg); }
            input[type="range"]:active::-webkit-slider-thumb { transform: scale(1.2); background-color: var(--slider-thumb-hover-bg); }
            input[type="range"]:active::-moz-range-thumb { transform: scale(1.2); background-color: var(--slider-thumb-hover-bg); }
            #${VOLUME_SLIDER_ID}::-webkit-slider-runnable-track { height: 3px; }
            #${VOLUME_SLIDER_ID}::-moz-range-track { height: 3px; }
            #${VOLUME_SLIDER_ID}::-webkit-slider-thumb { margin-top: -5.5px; height: 14px; width: 14px; }
            #${VOLUME_SLIDER_ID}::-moz-range-thumb { height: 14px; width: 14px; }
			#${YOUTUBE_PLAYER_DIV_ID} { position: absolute !important; top: 0 !important; left: 0 !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important; }
            
            #${QUEUE_CONTAINER_ID} { 
                margin-top: var(--spacing-md); 
                padding-top: var(--spacing-sm); 
                border-top: 1px solid var(--border-color);
                overflow: hidden;
                transition: max-height 0.3s ease-in-out;
            }
            #${QUEUE_CONTAINER_ID}:not(.queue-collapsed) {
                max-height: 150px;
            }
             #${QUEUE_CONTAINER_ID}:not(.queue-collapsed) #${QUEUE_LIST_ID} {
                 overflow-y: auto;
                 max-height: calc(150px - 2em - var(--spacing-sm));
             }
            #${QUEUE_TITLE_ID} { 
                font-size: var(--artist-font-size); 
                color: var(--text-secondary); 
                margin: 0 0 var(--spacing-sm) 0; 
                font-weight: 500;
                cursor: pointer;
                user-select: none;
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            #${QUEUE_TOGGLE_ICON_ID} {
                font-size: 0.9em;
                margin-left: var(--spacing-xs);
                transition: transform 0.2s ease-in-out;
                display: inline-block;
            }
            #${QUEUE_LIST_ID} { list-style: none; margin: 0; padding: 0; }
            .${PLAYER_QUEUE_ITEM_CLASS} { 
                padding: var(--spacing-xs) var(--spacing-sm); 
                font-size: 13px; 
                border-radius: var(--border-radius); 
                cursor: pointer; 
                transition: background-color var(--transition-speed) var(--transition-func);
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            .${PLAYER_QUEUE_ITEM_CLASS}:hover { background-color: var(--queue-item-hover-bg); }
            .player-queue-item-title { font-weight: 600; color: var(--text-primary); }
            .player-queue-item-artist { color: var(--text-secondary); font-size: 12px; }
            .player-queue-empty { color: var(--text-secondary); font-style: italic; cursor: default; padding: var(--spacing-xs) var(--spacing-sm); }
            #${QUEUE_CONTAINER_ID}.queue-collapsed {
                max-height: calc(var(--artist-font-size) + var(--spacing-sm) + 2px);
            }
            #${QUEUE_CONTAINER_ID}.queue-collapsed #${QUEUE_LIST_ID} {
                display: none;
            }
            #${QUEUE_CONTAINER_ID}.queue-collapsed #${QUEUE_TOGGLE_ICON_ID} {
                transform: rotate(-90deg);
            }
            @media (max-width: 600px) { 
                :root { 
                    --cover-art-size: 100%;
                    --button-size: 32px; 
                    --title-font-size: 15px; 
                    --artist-font-size: 13px; 
                } 
                #${PLAYER_ELEMENT_ID} { padding: var(--spacing-sm); margin-inline: auto }
                #${PLAYER_MAIN_CONTENT_WRAPPER_ID} { flex-direction: column; gap: var(--spacing-md); }
                #${DISPLAY_BOX_ID} { width: 100%; } 
                #${COVER_ID} { max-width: 250px; margin: 0 auto; display: block; }
                #${PLAYER_RIGHT_PANEL_ID} { width: 100%; }
                #${INFO_CONTAINER_ID} { text-align: center; }
                .${TITLE_LINE_WRAPPER_CLASS} { justify-content: center; }
                #${ARTIST_ID} { text-align: center; }
                #${CONTROLS_ID} { justify-content: center; } 
                #${CONTROLS_CONTAINER_ID} { flex-direction: column; gap: var(--spacing-sm); }
                #${VOLUME_CONTAINER_ID} { justify-content: center; } 
                #${VOLUME_PERCENTAGE_ID} { display: none; } 
                #${VOLUME_SLIDER_ID} { width: 120px; } 
            }
        `;
        document.head.appendChild(style);
    }

    async function initializeMusicPlayer() {
        console.log("Setting up music player...");
        try {
            PLAYLISTS_DATA = [
                { name: "Default Mix", songs: SONGS_DATA },
                { name: "Alternate Mix", songs: PLAYLIST_TWO_DATA },
                { name: "Alternate Mix #2", songs: PLAYLIST_THREE_DATA }
            ];

            if (!PLAYLISTS_DATA || PLAYLISTS_DATA.length === 0 || PLAYLISTS_DATA[0].songs.length === 0) {
                console.warn("No default playlist or songs defined. Music player will be empty.");
                playlist = new Playlist([]);
                originalSongOrderForCurrentPlaylist = [];
            } else {
                activePlaylistIndex = 0;
                const initialPlaylistSongsData = PLAYLISTS_DATA[activePlaylistIndex].songs;
                const initialSongs = initialPlaylistSongsData.map(d => new Song(d.title, d.artist, d.coverLink, d.videoIds || d.videoId));
                originalSongOrderForCurrentPlaylist = [...initialSongs];
                playlist = new Playlist(initialSongs);
            }

            const playerFragment = createPlayerElements(); 

            if (playlistSelectorElement && PLAYLISTS_DATA && PLAYLISTS_DATA.length > 0) {
                PLAYLISTS_DATA.forEach((pl, index) => {
                    const option = document.createElement("option");
                    option.value = index.toString();
                    option.textContent = pl.name;
                    playlistSelectorElement.appendChild(option);
                });
                playlistSelectorElement.value = activePlaylistIndex.toString();
            }

            const anchorElement = document.getElementById("game_window");
            const targetContainer = (anchorElement && anchorElement.parentNode) ? anchorElement.parentNode : document.body;
            const insertBeforeElement = (anchorElement && anchorElement.parentNode) ? anchorElement.nextSibling : null;
            targetContainer.insertBefore(playerFragment, insertBeforeElement);

            injectPlayerStyles();
            bindUIEventListeners();
            updateUI();

            await loadYouTubeAPI();

            const playerDiv = document.getElementById(YOUTUBE_PLAYER_DIV_ID);
            if (!playerDiv) throw new Error(`Cannot initialize player: Element '${YOUTUBE_PLAYER_DIV_ID}' not found.`);

            ytPlayer = new YT.Player(YOUTUBE_PLAYER_DIV_ID, {
                height: '1', width: '1',
                playerVars: { 'playsinline': 1, 'autoplay': 0, 'controls': 0, 'disablekb': 1, 'modestbranding': 1, 'origin': window.location.origin },
                events: { 'onReady': onPlayerReady, 'onStateChange': onPlayerStateChange, 'onError': onPlayerError }
            });

        } catch (error) {
            console.error("Failed during music player initialization:", error);
            if (titleElement) titleElement.textContent = "Error";
            if (artistElement) artistElement.textContent = "Could not load player.";
        }
    }

    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initializeMusicPlayer);
    } else {
        initializeMusicPlayer();
    }

})();

// Things That Never Were includes a particularly useful "File" section with Information
// on your opponents, among other stuff. This was inspired by that one, albeit it works
// somewhat differently.

(function() {
    const STYLES = {
        dossierBg: 'linear-gradient(135deg, #f4f1e8 0%, #e8e0d0 50%, #ddd4c0 100%)',
        headerBg: 'linear-gradient(90deg, #8b0000 0%, #a52a2a 50%, #8b0000 100%)',
        sectionBg: 'rgba(255, 255, 255, 0.95)',
        activeItemBg: 'linear-gradient(135deg, #fff8f0 0%, #f5f5dc 100%)',
        getActiveHoverBg: () => 'linear-gradient(135deg, #ffffff 0%, #f0efeb 100%)',
        inactiveItemBg: 'rgba(230, 230, 230, 0.5)',
        sabotageRed: '#b71c1c',
        successGreen: '#2e7d32',
        warningAmber: '#f57f17',
        operationBlue: '#1565c0',
        mainFont: '"Georgia", sans-serif',
        badgeFont: '"Times New Roman", serif',
        classifiedRed: '#8b0000',
        textPrimary: '#2c2c2c',
        textSecondary: '#555555',
        textMuted: '#777777',
        borderColor: '#c4a484',
        modalBg: 'rgba(0, 0, 0, 0.75)',
        modalContentBg: '#fdfdfd'
    };

    const CANDIDATE_DATA = [
        { photo: 'https://media.gettyimages.com/id/469812798/pt/foto/washington-dc-republican-presidential-candidate-sen-marco-rubio-speaks-at-the-heritage.jpg?s=612x612&w=0&k=20&c=09hpYaHGfZB3ADaYbZPWVSc3LkWdESpBiYgljF5nxvA=', name: 'Marco Rubio', desc: "Little Marco! A fresh face for the GOP, you think he's more normal than the rest. You'd rather not see him in the general, though.", id: 'RUBIO_2016' },
        { photo: 'https://media.gettyimages.com/id/1372757446/pt/foto/032415-amherst-nh-ohio-governor-john-kasich-a-potential-2016-republican-presidential-candidate.jpg?s=612x612&w=0&k=20&c=WxG7_442nyrjd202vDOqJjUz02tRBpH1DN9lv25Q0o0=', name: 'John Kasich', desc: "Governor of Ohio. His pragmatic approach will get him nowhere in the primaries; you hope he won't mind being Ambassador to Chile.", id: 'KASICH_2016' },
        { photo: 'https://media.gettyimages.com/id/462751638/pt/foto/detroit-mi-former-florida-governor-jeb-bush-speaks-at-the-detroit-economic-club-february-4-2015.jpg?s=612x612&w=0&k=20&c=efg3OktRbAFkvTJQgGXUgCAVl-feagbmXWuQnBPop8Q=', name: 'Jeb Bush', desc: "The former Florida Governor and early favorite. You want him so bad (as the nominee), to end the Bush dynasty for good.", id: 'JEB_2016' },
        { photo: 'https://media.gettyimages.com/id/470246456/pt/foto/nashua-nh-u-s-sen-ted-cruz-speaks-at-the-first-in-the-nation-republican-leadership-summit-april.jpg?s=612x612&w=0&k=20&c=GX3ag9pDmuFdVX2WYKFaY06cmVG2atD0R7WJtfOzkTM=', name: 'Ted Cruz', desc: "Texas Senator and key conservative. You think he wouldn't last 5 minutes in a fight with you.", id: 'CRUZ_2016' },
        { photo: 'https://media.gettyimages.com/id/464539098/pt/foto/chris-christie-governor-of-new-jersey-smiles-during-an-interview-at-the-conservative-political.jpg?s=612x612&w=0&k=20&c=ZkThFfrc683qooRmu2zUS4flGht-G5YLvPXFaEPnX2M=', name: 'Chris Christie', desc: "Governor of New Jersey. In an alternate timeline, he'd have been a credible candiate against your 2012 re-election. Nowadays, though…", id: 'CHRISTIE_2016' },
        { photo: 'https://media.gettyimages.com/id/472770842/pt/foto/ben-carson-republican-2016-u-s-presidential-candidate-gestures-while-speaking-during-the-south.jpg?s=612x612&w=0&k=20&c=r-dX7uX4_wqYNHP0wGUmr5AV007p9TPpBk09dhPr9LY=', name: 'Ben Carson', desc: "The retired neurosurgeon. If he wins the nomination, you don't think you'll have a hard time winning it.", id: 'CARSON_2016' },
        { photo: 'https://media.gettyimages.com/id/467701398/pt/foto/new-york-ny-donald-trump-attends-the-2015-new-york-spring-spectacular-opening-night-at-radio.jpg?s=612x612&w=0&k=20&c=Wtr27WexHwWl2rqWERFtInrE9TeCKRsnxsklBxjTtk0=', name: 'Donald Trump', desc: "The unconventional businessman and reality TV star. You don't expect him to last for long. His campaign is just another publicity stunt, right?", id: 'TRUMP_2016' }
    ];

    // The candidates!
    const VP_CANDIDATE_DETAILS = {
        "Mike Pence": {
            photo: 'https://media.gettyimages.com/id/612697898/pt/foto/republican-vice-presidential-candidate-mike-pence-speaks-on-his-cell-phone-following-the-us.jpg?s=612x612&w=0&k=20&c=eCBNi6SDEhsnD8lAKF_lTpGkyR2UUGODJ42FkNeLFJ0=',
            desc: "Governor of Indiana."
        },
        "Chris Christie": {
            photo: 'https://media.gettyimages.com/id/512495990/pt/foto/fort-worth-tx-new-jersey-governor-chris-christie-announces-his-support-for-republican.jpg?s=612x612&w=0&k=20&c=RM0g1DJxnYA2Gxe-Eq6R43QNHdHsQc3T4eOOYlBWMc8=',
            desc: "Governor of New Jersey."
        },
        "Newt Gingrich": {
            photo: 'https://media.gettyimages.com/id/134862562/pt/foto/washington-dc-newt-gingrich-arrives-at-the-34th-kennedy-center-honors-held-at-the-kennedy.jpg?s=612x612&w=0&k=20&c=-B6qTz0vJc44PTR2ybet1_S7OeZVY0ZgkkNXOi7vX7Q=',
            desc: "Former Speaker of the House."
        },
        "Mike Flynn": {
            photo: 'https://media.gettyimages.com/id/640033060/pt/foto/retired-american-lieutenant-general-michael-t-flynn-addresses-the-republican-national.jpg?s=612x612&w=0&k=20&c=D4HkoKDdpwFGOoB7DaKJpqSCjUESh7u5J5cFVVIMTl8=',
            desc: "Retired Lieutenant General."
        },
        "Sarah Palin": {
            photo: 'https://media.gettyimages.com/id/1457713775/pt/foto/sarah-palin.jpg?s=612x612&w=0&k=20&c=iQkh5a4gQEjs03VG1KdLb_USDLmNAvZ034HFTYBJZ08=',
            desc: "Former Governor of Alaska."
        },
        "Ted Cruz": {
            photo: 'https://media.gettyimages.com/id/467435140/pt/foto/u-s-senator-ted-cruz-a-republican-from-texas-speaks-during-a-bloomberg-television-interview-in.jpg?s=612x612&w=0&k=20&c=xIjC6fLc34cpxS3GGAyur2Ep1TOq_lSIHCCmAgVESNA=',
            desc: "Senator from Texas."
        },
        "Tom Cotton": {
            photo: 'https://media.gettyimages.com/id/466725928/pt/foto/washington-dc-sen-tom-cotton-attends-a-senate-armed-services-committee-hearing-on-capitol-hill.jpg?s=612x612&w=0&k=20&c=hH-UEhj2nJ1q8lT9MVXkOZqOCE_ZG7D3iv9eDbXR3a4=',
            desc: "Senator from Arkansas."
        },
        "Jeff Sessions": {
            photo: 'https://media.gettyimages.com/id/539188274/pt/foto/sen-jeff-sessions-delivers-remarks-during-the-faith-and-freedom-coalition-conference-june-10-in.jpg?s=612x612&w=0&k=20&c=xodnBLIxKyyQ6owuuA0ANdEmv-B3sYFPXJQS_BBb7CU=',
            desc: "Senator from Alabama."
        },
        "Scott Brown": {
            photo: 'https://media.gettyimages.com/id/97756111/pt/foto/new-us-senator-scott-brown-talks-with-the-press-in-the-old-senate-chamber-after-being-sworn-in.jpg?s=612x612&w=0&k=20&c=NWbBkOyfkM3a4BJKnTVFb-4ogFbQ0XlJS0lKO46teTo=',
            desc: "Former Senator from Massachusetts."
        },
        "Bob Corker": {
            photo: 'https://media.gettyimages.com/id/465795280/pt/foto/washington-dc-chairman-bob-corker-participates-in-a-senate-foreign-relations-committee-hearing.jpg?s=612x612&w=0&k=20&c=10N3krIXNNm7fa64_ANhJY958Waw1hNEymEvbX74yOY=',
            desc: "Senator from Tennessee."
        },
        "Mary Fallin": {
            photo: 'https://media.gettyimages.com/id/107236871/pt/foto/washington-dc-oklahoma-governor-elect-mary-fallin-talks-to-reporters-after-meeting-with.jpg?s=612x612&w=0&k=20&c=ZLVbNfPUlqgO_lsdBpUcsrQ7v-6ehEQgIdrCUMje7go=',
            desc: "Governor of Oklahoma."
        }
    };
    
    const VP_RATIONALES = {
        "Mike Pence": "Governor Mike Pence is the consensus choice to unite the party. He is a disciplined messenger who brings deep connections to social conservatives and the party establishment. With your campaign striking a relatively moderate tone so far, Trump’s team has likely opted for a VP who can reassure wavering Republicans and provide a steady, traditional counterpart to Trump’s volatile style.",
        "Chris Christie": "Governor Chris Christie’s selection is likely a nod to his reputation as a political brawler. Given your campaign’s aggressive posture so far, Trump has chosen a running mate who won’t hesitate to go on the attack. Christie was an early endorser of his, and this pick rewards that loyalty while adding a seasoned, if rather controversial, political fighter to the ticket.",
        "Newt Gingrich": "Newt Gingrich. This signals Trump intends to meet your aggressive campaign style with a scorched-earth strategy. Gingrich is a veteran political combatant who knows how to weaponize the media and attack relentlessly; he was Speaker of the House, after all. Just ask Bill how that went for him.",
        "Mike Flynn": "Michael Flynn is a pure base play. With your campaign running on an aggressive, populist platform, Trump is attempting to reinforce his own ’strongman’ image. Flynn, who’s a retired general, adds national security credentials — or, well, at least the appearance of them —, and helps energize his anti-establishment base that believes the system is rigged.",
        "Sarah Palin": "The selection of Sarah Palin seems to be a direct response to your campaign’s powerful populist appeal. Trump’s team is betting that the original anti-establishment icon can supercharge his base and counter your inroads with working-class voters. It’s a high-risk, high-reward move; you know how well it turned out for McCain. Thing is, you’re no Obama, for good or worse.",
        "Ted Cruz": "Senator Ted Cruz. A bit of an astonishing choice, given their primary battles. Your outreach to the Sanders wing of the party has likely spooked them; this move is probably an attempt to lock down the ideological conservative base, maybe fearing you might peel off working-class voters with a more populist message. We’ll see how that goes for them.",
        "Tom Cotton": "Senator Tom Cotton brings a hawkish, yet disciplined, voice to the ticket. Your populist messaging is clearly a concern for the Trump campaign, it seems. Cotton helps them shore up the conservative base on both economic and national security fronts, perhaps presenting a younger, more articulate version of Trump’s ’America First’ ideology.",
        "Jeff Sessions": "Senator Jeff Sessions was one of Trump’s earliest and most influential supporters in Washington. This pick is a reward for that loyalty, and a clear signal that Trump is doubling down on his hardline immigration and nationalist platform. With your campaign making populist appeals, Sessions’ goal is to keep the base energized around Trump’s core issues.",
        "Scott Brown": "Scott Brown, the former Massachusetts Senator, is a curious pick. Our analysis suggests that with your non-confrontational style, Trump’s campaign felt a need to moderate their ticket, although not necessarily their core issues. Brown is their attempt to appeal to swing voters and disillusioned independents who see Trump as too extreme. Keep an eye out for him.",
        "Bob Corker": "Senator Bob Corker is an establishment choice, plain and simple. Your less aggressive campaign style has given Trump an opening to appear more presidential, whatever that means. Corker is the Chairman of the Senate Foreign Relations Committee, and with his pick, Trump may hope to quell fears among Republicans and independents about his temperament and lack of foreign policy experience.",
        "Mary Fallin": "Governor Mary Fallin is a relatively safe, conventional pick. With your campaign running a more traditional race, Trump’s team clearly feels his populist base is secure. Fallin, a female governor, is a strategic choice aimed at softening Trump’s image and making a play for suburban women without alienating his core supporters."
    };
    let selectedTrumpVP = null;

    // sabotage operations, et al.
    const SABOTAGE_OPERATIONS = {
        documentTheft: {
            name: "INTELLIGENCE GATHERING",
            classification: "COVERT ACTION",
            description: "Acquire sensitive information from various sources through multiple operational vectors.",
            baseSuccessRate: 0.65,
            cooldown: 1,
            riskLevel: "MEDIUM",
            operations: [
                {
                    id: "acquire_local_intel",
                    name: "Acquire Local Intel",
                    cost: 5,
                    target: "Selected State Campaign Operations",
                    description: "Deploy field operatives to gather on-the-ground intelligence within a target state.",
                    requiresStateSelection: true,
                    successEffect: (targetStateName) => {
                        const ct_temp = campaignTrail_temp;
                        const stateEntry = ct_temp.states_json.find(s => s.fields.name === targetStateName);
                        if (!stateEntry) return `State ${targetStateName} not found.`;
                        const stateMult = ct_temp.candidate_state_multiplier_json.find(f =>
                            f.fields.state === stateEntry.pk && f.fields.candidate === ct_temp.candidate_id
                        );
                        if (stateMult) {
                            stateMult.fields.state_multiplier = (stateMult.fields.state_multiplier || 1) * 1.015;
                            return `Intel acquired. Our field team in ${targetStateName} indicates the opponent’s ground game is underperforming in the suburban counties. Robby Mook’s analytics team is already folding this into our voter models to reallocate resources.`;
                        }
                        return `Player multiplier for ${targetStateName} not found.`;
                    },
                    failureEffect: (targetStateName) => {
                        politicalCapital = Math.max(0, politicalCapital - 2);
                        return `Operation failed. Our asset couldn’t get close enough to their state-level strategy sessions. No critical intel was gathered, and we’ve wasted some operational funds. (-2 PC)`;
                    }
            },
                {
                    id: "deep_state_reconnaissance",
                    name: "Deep State Reconnaissance",
                    cost: 12,
                    target: "Selected State Campaign Operations",
                    description: "Task a specialized unit to conduct extensive surveillance on your opponent’s core campaign infrastructure within a single state.",
                    requiresStateSelection: true,
                    successEffect: (targetStateName) => {
                        const ct_temp = campaignTrail_temp;
                        const stateEntry = ct_temp.states_json.find(s => s.fields.name === targetStateName);
                        if (!stateEntry) return `State ${targetStateName} not found.`;

                        const stateMult = ct_temp.candidate_state_multiplier_json.find(f =>
                            f.fields.state === stateEntry.pk && f.fields.candidate === ct_temp.candidate_id
                        );
                        if (stateMult) {
                            stateMult.fields.state_multiplier = (stateMult.fields.state_multiplier || 1) * 1.025;

                            const opponentMults = ct_temp.candidate_state_multiplier_json.filter(f =>
                                f.fields.state === stateEntry.pk && f.fields.candidate !== ct_temp.candidate_id
                            );
                            opponentMults.forEach(mult => {
                                mult.fields.state_multiplier = (mult.fields.state_multiplier || 1) * 0.995;
                            });

                            return `Mission accomplished. We’ve mapped their entire command structure in ${targetStateName}, from their field directors down to their key volunteer coordinators. We know their budget, their targets, and their timeline. Mook says we can use this to effectively misdirect their resources for the rest of the campaign.`;
                        }
                        return `Player multiplier for ${targetStateName} not found.`;
                    },
                    failureEffect: (targetStateName) => {
                        politicalCapital = Math.max(0, politicalCapital - 4);
						const ct_temp = campaignTrail_temp;
                        const stateEntry = ct_temp.states_json.find(s => s.fields.name === targetStateName);
                        if(stateEntry) {
                            const opponentMults = ct_temp.candidate_state_multiplier_json.filter(f => f.fields.state === stateEntry.pk && f.fields.candidate !== ct_temp.candidate_id);
                            opponentMults.forEach(mult => { mult.fields.state_multiplier = (mult.fields.state_multiplier || 1) * 1.005; });
                        }
                        return `Close call. Our operatives were nearly compromised while surveilling the opponent’s state headquarters. They were forced to burn their cover and exfiltrate immediately. We lost the asset and wasted significant resources. (-4 PC).`;
                    }
            },
                {
                    id: "opposition_research_infiltration",
                    name: "Opposition Research Infiltration",
                    cost: 15,
                    target: "Opponent Campaign Infrastructure",
                    description: "Place a covert asset inside the opponent’s national opposition research division. Lots of goodies down there.",
                    requiresStateSelection: false,
                    successEffect: () => {
                        const ct_temp = campaignTrail_temp;
                        const swingStates = ['Florida', 'Pennsylvania', 'Iowa', 'Ohio', 'Michigan', 'Wisconsin', 'North Carolina', 'Georgia', 'Arizona', 'New Hampshire'];
                        let affectedStates = [];

                        swingStates.forEach(stateName => {
                            const stateEntry = ct_temp.states_json.find(s => s.fields.name === stateName);
                            if (stateEntry) {
                                const stateMult = ct_temp.candidate_state_multiplier_json.find(f =>
                                    f.fields.state === stateEntry.pk && f.fields.candidate === ct_temp.candidate_id
                                );
                                if (stateMult) {
                                    stateMult.fields.state_multiplier = (stateMult.fields.state_multiplier || 1) * 1.02;
                                    affectedStates.push(stateName);
                                }
                            }
                        });

                        return `Paydirt. Our asset successfully exfiltrated a partial copy of their opposition research book on us. We now have advance knowledge of the attack lines they’re planning for the final weeks. Jake Sullivan’s team is already taking a look at this. We've gained strategic advantages in key swing states: ${affectedStates.join(', ')}.`;
                    },
                    failureEffect: () => {
                        politicalCapital = Math.max(0, politicalCapital - 5);
                        return `Negative. The opponent’s research division is like a fortress. Our asset hit a digital firewall and a surprisingly robust internal security protocol. They pulled back before tripping any alarms. We learned one thing: they’re not amateurs. (-5 PC)`;
                    }
            },
                {
                    id: "media_intelligence_network",
                    name: "Media Intelligence Network",
                    cost: 10,
                    target: "Press and Media Operations",
                    description: "Establish intelligence assets within media organizations to gather advance information on coverage and stories.",
                    requiresStateSelection: false,
                    successEffect: () => {
                        const ct_temp = campaignTrail_temp;
                        if (ct_temp.issue_score_json) {
                            ct_temp.issue_score_json.forEach(issue => {
                                if (issue.fields.candidate === ct_temp.candidate_id) {
                                    issue.fields.issue_score = Math.min(1.0, (issue.fields.issue_score || 0) + 0.015);
                                }
                            });
                        }
                        return `Network is live. Our source at a major cable network just gave us a heads-up on a negative story they were developing about the Clinton Foundation. Jennifer Palmieri’s communications team was able to get ahead of it and kill the story before it got legs. Fuck yeah. This asset has already paid for itself.`;
                    },
                    failureEffect: () => {
                        politicalCapital = Math.max(0, politicalCapital - 3);
						const ct_temp = campaignTrail_temp;
                        if (ct_temp.issue_score_json) {
                            ct_temp.issue_score_json.forEach(issue => {
                                if (issue.fields.candidate === ct_temp.candidate_id) {
                                    issue.fields.issue_score = Math.max(0.0, (issue.fields.issue_score || 0) - 0.005);
                                }
                            });
                        }
                        return `Contact lost. It seems our primary media asset got cold feet, citing internal pressure. In other words, they’ve gone dark. The channel is dead for now, and we’ll have to rely on public-facing information like everyone else. Worse; the botched approach has made them suspicious of our motives, resulting in slightly more critical coverage of our campaign. A frustrating setback and a waste of funds. (-3 PC)`
                    }
            },
                {
                    id: "digital_surveillance_operation",
                    name: "Digital Surveillance Operation",
                    cost: 12,
                    target: "Opponent Digital Infrastructure",
                    description: "Conduct cyber-reconnaissance on opponent digital operations, social media strategies, and online fundraising.",
                    requiresStateSelection: false,
                    successEffect: () => {
                        const ct_temp = campaignTrail_temp;
                        const nationalMult = ct_temp.candidate_state_multiplier_json.find(f =>
                            f.fields.candidate === ct_temp.candidate_id && f.fields.state === 1 // national
                        );
                        if (nationalMult) {
                            nationalMult.fields.state_multiplier = (nationalMult.fields.state_multiplier || 1) * 1.025;
                        }

                        return `Breach successful. Our digital team has gained access to the opponent’s back-end ad-targeting analytics. We have their voter models, their social media engagement metrics, and their A/B testing results. Mook is so ecstatic you think he’s having an aneurysm.`;
                    },
                    failureEffect: () => {
                        politicalCapital = Math.max(0, politicalCapital - 4);
                        return `Access denied. The opponent’s cyber-defenses are more robust than our initial assessment suggested, unfortunately. Our team was firewalled out before they could access anything of value. Critically, they left no trace of the attempt, but our attempt still cost us. (-4 PC).`;
                    }
            },
                {
                    id: "polling_data_acquisition",
                    name: "Polling Data Acquisition",
                    cost: 10,
                    target: "Private Polling Organizations",
                    description: "Task operatives with acquiring proprietary, internal polling data from private firms contracted by campaigns and Super PACs.",
                    requiresStateSelection: false,
                    successEffect: () => {
                        const ct_temp = campaignTrail_temp;
                        const randomStates = ['Pennsylvania', 'Wisconsin', 'Florida', 'Michigan', 'Colorado', 'Arizona', 'Nevada', 'North Carolina', 'Ohio', 'Iowa'];
                        let affectedStates = [];

                        // select 2-3 random states to benefit
                        const numStates = Math.floor(Math.random() * 2) + 2;
                        const selectedStates = randomStates.sort(() => 0.5 - Math.random()).slice(0, numStates);

                        selectedStates.forEach(stateName => {
                            const stateEntry = ct_temp.states_json.find(s => s.fields.name === stateName);
                            if (stateEntry) {
                                const stateMult = ct_temp.candidate_state_multiplier_json.find(f =>
                                    f.fields.state === stateEntry.pk && f.fields.candidate === ct_temp.candidate_id
                                );
                                if (stateMult) {
                                    stateMult.fields.state_multiplier = (stateMult.fields.state_multiplier || 1) * 1.022;
                                    affectedStates.push(stateName);
                                }
                            }
                        });

                        return `Data acquired. We’ve obtained a full set of raw polling data from a private firm contracted by a major GOP Super PAC. And not the numbers you’d see on TV; this is the real deal! Mook’s team is running simulations and believes this gives us a two-point visibility advantage in voter targeting in: ${affectedStates.join(', ')}.`;
                    },
                    failureEffect: () => {
                        politicalCapital = Math.max(0, politicalCapital - 3);
                        return `Mission scrubbed. The targeted polling firm keeps their data on an air-gapped server. Our operative couldn’t get physical or remote access without an unacceptable risk of exposure. (-3 PC)`;
                    }
            },
                {
                    id: "donor_intelligence_gathering",
                    name: "Donor Intelligence Gathering",
                    cost: 14,
                    target: "Major Donor Networks",
                    description: "Infiltrate high-society fundraising circles to gather intelligence on the opponent’s major donors.",
                    requiresStateSelection: false,
                    successEffect: () => {
                        const ct_temp = campaignTrail_temp;
                        const nationalMult = ct_temp.candidate_state_multiplier_json.find(f =>
                            f.fields.candidate === ct_temp.candidate_id && f.fields.state === 1
                        );
                        if (nationalMult) {
                            nationalMult.fields.state_multiplier = (nationalMult.fields.state_multiplier || 1) * 1.02;
                        }

                        const expensiveStates = ['California', 'New York', 'Florida', 'Texas'];
                        expensiveStates.forEach(stateName => {
                            const stateEntry = ct_temp.states_json.find(s => s.fields.name === stateName);
                            if (stateEntry) {
                                const opponentMults = ct_temp.candidate_state_multiplier_json.filter(f =>
                                    f.fields.state === stateEntry.pk && f.fields.candidate !== ct_temp.candidate_id
                                );
                                opponentMults.forEach(mult => {
                                    mult.fields.state_multiplier = (mult.fields.state_multiplier || 1) * 0.992;
                                });
                            }
                        });

                        return `Intel secured. We’ve confirmed through a source that a key bloc of their Wall Street donors is wavering. They’re concerned about Trump’s temperament and are quietly hedging their bets. We can use this information to subtly peel them away or, at a minimum, ensure their checks don’t get any bigger.`;
                    },
                    failureEffect: () => {
                        politicalCapital = Math.max(0, politicalCapital - 5);
						const ct_temp = campaignTrail_temp;
                        const opponentNationalMult = ct_temp.candidate_state_multiplier_json.find(f => f.fields.candidate !== ct_temp.candidate_id && f.fields.state === 1);
                        if (opponentNationalMult) { opponentNationalMult.fields.state_multiplier = (opponentNationalMult.fields.state_multiplier || 1) * 1.008; }
                        return `Our clumsy attempts to probe the opponent’s donor network were detected and leaked. The opponent is now using it to rally their big donors against your 'dirty tricks,' boosting their fundraising. (-5 PC)`;
                    }
            },
                {
                    id: "grassroots_infiltration",
                    name: "Grassroots Infiltration",
                    cost: 12,
                    target: "Opponent Ground Operations",
                    description: "Place undercover operatives inside the opponent’s volunteer and field operations in a key state.",
                    requiresStateSelection: true,
                    successEffect: (targetStateName) => {
                        const ct_temp = campaignTrail_temp;
                        const stateEntry = ct_temp.states_json.find(s => s.fields.name === targetStateName);
                        if (!stateEntry) return `State ${targetStateName} not found.`;

                        const stateMult = ct_temp.candidate_state_multiplier_json.find(f =>
                            f.fields.state === stateEntry.pk && f.fields.candidate === ct_temp.candidate_id
                        );
                        if (stateMult) {
                            stateMult.fields.state_multiplier = (stateMult.fields.state_multiplier || 1) * 1.035;

                            const opponentMults = ct_temp.candidate_state_multiplier_json.filter(f =>
                                f.fields.state === stateEntry.pk && f.fields.candidate !== ct_temp.candidate_id
                            );
                            opponentMults.forEach(mult => {
                                mult.fields.state_multiplier = (mult.fields.state_multiplier || 1) * 0.985;
                            });

                            return `Asset in place! Our operative has successfully embedded within the opponent’s volunteer network in ${targetStateName}. We now have their canvassing lists, phone banking scripts, and Get-Out-the-Vote staging locations. We can counter their ground game with surgical precision.`;
                        }
                        return `Player multiplier for ${targetStateName} not found.`;
                    },
                    failureEffect: (targetStateName) => {
                        politicalCapital = Math.max(0, politicalCapital - 4);
						const ct_temp = campaignTrail_temp;
                        const stateEntry = ct_temp.states_json.find(s => s.fields.name === targetStateName);
                        if(stateEntry) {
                            const opponentMults = ct_temp.candidate_state_multiplier_json.filter(f => f.fields.state === stateEntry.pk && f.fields.candidate !== ct_temp.candidate_id);
                            opponentMults.forEach(mult => { mult.fields.state_multiplier = (mult.fields.state_multiplier || 1) * 1.01; });
                        }
                        return `Yikes. A sharp-eyed field director flagged our operative for asking too many probing questions. They were politely asked to leave and their access was revoked. They know we’re watching their ground game in ${targetStateName} now, and might use this to rally their volunteers. (-4 PC)`;
                    }
				}
			]
        },
        candidateDeals: {
            name: "POLITICAL ARRANGEMENTS",
            classification: "BACKROOM DEALS",
            description: "Negotiate strategic alliances or disruptions.",
            baseSuccessRate: 0.60,
            cooldown: 2,
            riskLevel: "MEDIUM",
            operations: [
                {
                    id: "mcmullin_utah_deal",
                    name: "McMullin Utah Deal",
                    cost: 6,
                    target: "Evan McMullin Campaign",
                    description: "Provide covert funding to boost McMullin in Utah, in an attempt to boost him and split the conservative vote.",
                    successEffect: () => {
                        const ct_temp = campaignTrail_temp;
                        const state = ct_temp.states_json.find(f => f.fields.name === "Utah");
                        if (!state) return "Utah state data not found.";
                        const trumpMult = ct_temp.candidate_state_multiplier_json.find(f => f.fields.state === state.pk && f.fields.candidate === 200);
                        if (trumpMult) trumpMult.fields.state_multiplier = (trumpMult.fields.state_multiplier || 1) * 0.68;
                        const playerMult = ct_temp.candidate_state_multiplier_json.find(f => f.fields.state === state.pk && f.fields.candidate === ct_temp.candidate_id);
                        if (playerMult) playerMult.fields.state_multiplier = (playerMult.fields.state_multiplier || 1) * 0.5;
                        return "The deal is done! Our 'independent' expenditure group has made contact and is now covertly funding a new wave of pro-McMullin ads in the Salt Lake City media market. He’s about to become a major thorn in Trump’s side, exactly as planned. Of course, this comes at a cost of your own vote share there, but it’s not like you were gonna win it, right?";
                    },
                    failureEffect: () => {
                        const ct_temp = campaignTrail_temp;
                        const state = ct_temp.states_json.find(f => f.fields.name === "Utah");
                        if (!state) return "Utah state data not found (for failure effect).";
                        const playerMult = ct_temp.candidate_state_multiplier_json.find(f => f.fields.state === state.pk && f.fields.candidate === ct_temp.candidate_id);
                        if (playerMult) playerMult.fields.state_multiplier = (playerMult.fields.state_multiplier || 1) * 0.95;
                        politicalCapital = Math.max(0, politicalCapital - 2);
                        return "Although flattered, McMullin ultimately rejects the deal, preferring to run a 'clean campaign' instead of whatever you’re trying to do. Oh well. The backchannel talks cost us a little political goodwill. (-2 PC)";
                    }
                },
                {
                    id: "johnson_western_push",
                    name: "Boost Gary Johnson (West)",
					cost: 10,
                    target: "Gary Johnson Campaign",
                    description: "Discreetly funnel resources and organizational support to Gary Johnson’s Libertarian campaign in key Western states.",
                    successEffect: () => {
                        const ct_temp = campaignTrail_temp;
                        const westernStates = ["Colorado", "Nevada", "New Mexico", "Arizona", "Montana", "Texas", "Wyoming", "Idaho", "North Dakota", "South Dakota",  "Nebraska", "Kansas", "Oklahoma"];
                        let changesMade = false;
                        westernStates.forEach(stateName => {
                            const state = ct_temp.states_json.find(f => f.fields.name === stateName);
                            if (state) {
                                const trumpMult = ct_temp.candidate_state_multiplier_json.find(f => f.fields.state === state.pk && f.fields.candidate === 200);
                                if (trumpMult) {
                                    trumpMult.fields.state_multiplier = (trumpMult.fields.state_multiplier || 1) * 0.97;
                                    changesMade = true;
                                }
                                const johnsonMult = ct_temp.candidate_state_multiplier_json.find(f => f.fields.state === state.pk && f.fields.candidate === 202);
                                if (johnsonMult) {
                                    johnsonMult.fields.state_multiplier = (johnsonMult.fields.state_multiplier || 1) * 1.15;
                                    changesMade = true;
                                } else {
                                    ct_temp.candidate_state_multiplier_json.push({ pk: Math.floor(Math.random() * 1000000), fields: { candidate: 202, state: state.pk, state_multiplier: 1.15, running_mate: false } });
                                    changesMade = true;
                                }
                            }
                        });
                        return changesMade ? "Arrangement successful! Johnson’s campaign was more than happy to accept the 'anonymous' donation to their Super PAC. They’re already using the funds to run ads in Denver and Las Vegas, hitting Trump on his authoritarian rhetoric. It’s a perfect split of the vote." : "Could not apply Johnson boost (Western state data issue).";
                    },
                    failureEffect: () => {
                        const ct_temp = campaignTrail_temp;
                        const westernStates = ["Colorado", "Nevada", "New Mexico", "Arizona", "Montana", "Texas", "Wyoming", "Idaho", "North Dakota", "South Dakota",  "Nebraska", "Kansas", "Oklahoma"];
                        let changesMade = false;
                        westernStates.forEach(stateName => {
                            const state = ct_temp.states_json.find(f => f.fields.name === stateName);
                            if (state) {
                                const trumpMult = ct_temp.candidate_state_multiplier_json.find(f => f.fields.state === state.pk && f.fields.candidate === 200);
                                if (trumpMult) {
                                    trumpMult.fields.state_multiplier = (trumpMult.fields.state_multiplier || 1) * 1.01;
                                    changesMade = true;
                                }
                            }
                        });
                        politicalCapital = Math.max(0, politicalCapital - 3);
                        return changesMade ? "The deal fell through. Johnson got wind of the backchannel offer and personally vetoed it. He was worried that any hint of coordination would make them look like our puppets and destroy their credibility with libertarians. The bad thing is that it was leaked by a Johnson staffer, and now Trump is hammering you for trying to 'rig the election with dirty tricks'. (-3 PC)" : "Johnson deal failure had no discernible impact (Western state data issue).";
                    }
                }
            ]
        },
        influenceOps: {
            name: "INFLUENCE OPERATIONS",
            classification: "SOFT POWER",
            description: "Secure strategic endorsements or sway public opinion.",
            baseSuccessRate: 0.70,
            cooldown: 1,
            riskLevel: "LOW",
            operations: [
                {
                    id: "launch_media_blitz",
                    name: "Launch Regional Media Blitz",
                    cost: 4,
                    target: "Selected State Media Outlets",
                    description: "Saturate a target state’s local media market—including local TV, radio, and newspapers with a highly focused advertising and PR campaign.",
                    requiresStateSelection: true,
                    successEffect: (targetStateName) => {
                        const ct_temp = campaignTrail_temp;
                        const stateEntry = ct_temp.states_json.find(s => s.fields.name === targetStateName);
                        if (!stateEntry) return `State ${targetStateName} not found.`;
                        const stateMult = ct_temp.candidate_state_multiplier_json.find(f => f.fields.state === stateEntry.pk && f.fields.candidate === ct_temp.candidate_id);
                        if (stateMult) { stateMult.fields.state_multiplier = (stateMult.fields.state_multiplier || 1) * 1.01; return `Your media blitz in ${targetStateName} successful. God bless the local media markets. Local news coverage has been noticeably more positive in the last 48 hours, and our internal tracking polls show a slight uptick in your favorability.`; }
                        return `Player multiplier for ${targetStateName} not found.`;
                    },
                    failureEffect: (targetStateName) => `Your media blitz in ${targetStateName} was ineffective; our ads were completely drowned out by the national coverage of Trump’s latest Twitter meltdown. It feels like we threw a million dollars into a black hole with nothing to show for it. What the hell.`
                },
                {
                    id: "secure_union_support",
                    name: "Secure Union Support",
                    cost: 5,
                    target: "Selected State Union Leaders",
                    description: "Engage in backchannel negotiations with influential union leaders in a target state.",
                    requiresStateSelection: true,
                    successEffect: (targetStateName) => {
                        const ct_temp = campaignTrail_temp;
                        let message = "";
                        const stateEntry = ct_temp.states_json.find(s => s.fields.name === targetStateName);
                        if (stateEntry) {
                            const stateMult = ct_temp.candidate_state_multiplier_json.find(f => f.fields.state === stateEntry.pk && f.fields.candidate === ct_temp.candidate_id);
                            if (stateMult) {
                                stateMult.fields.state_multiplier = (stateMult.fields.state_multiplier || 1) * 1.012;
                                message += `After some tense negotiations, the leadership of the local Steelworkers union in  ${targetStateName} has agreed to back us. They’re activating their phone banks and putting boots on the ground for us this weekend. This is a huge boost to our ground game. `;
                            } else { message += `Could not apply union boost in ${targetStateName} (player multiplier not found). `; }
                        } else { message += `Could not apply union boost (state ${targetStateName} not found). `; }
                        return message || "Union negotiations concluded.";
                    },
                    failureEffect: (targetStateName) => {
                        const ct_temp = campaignTrail_temp;
                        let message = `Union negotiations in ${targetStateName} stalled. `;
                        const stateEntry = ct_temp.states_json.find(s => s.fields.name === targetStateName);
                        if (stateEntry) {
                            const stateMult = ct_temp.candidate_state_multiplier_json.find(f => f.fields.state === stateEntry.pk && f.fields.candidate === ct_temp.candidate_id);
                            politicalCapital = Math.max(0, politicalCapital - 2);
                            if (stateMult) {
                                stateMult.fields.state_multiplier = (stateMult.fields.state_multiplier || 1) * 0.995;
                                message += `Negotiations stalled. The local union’s rank-and-file is more pro-Trump than the leadership is willing to admit, believe it or not. They couldn’t guarantee their members would follow their lead, so they backed away from a formal endorsement to avoid internal division. We get nothing.`;
                            } else { message += `No direct impact on local support (player multiplier not found).`; }
                        } else { message += `No direct impact on local support (state ${targetStateName} not found).`; }
                        return message;
                    }
                }
            ]
        }
    };

    let operationHistory = { completed: [], cooldowns: {}, lastQuestionNumber: 1 };
    let dossierSavedX = null,
        dossierSavedY = null;
    let politicalCapital = 25; // default value
    const PC_BOOST_COST = 5;
    const PC_BOOST_EFFECT = 0.15; // +15% success chance

    let lastKnownQuestionNumber = 0;

    // --- utility functions ---
    function getCurrentQuestionNumber() { if (typeof campaignTrail_temp !== 'undefined' && campaignTrail_temp !== null && typeof campaignTrail_temp.question_number !== 'undefined' && campaignTrail_temp.question_number !== null) { const qn = parseInt(campaignTrail_temp.question_number, 10); return !isNaN(qn) && qn >= 1 ? qn : 1; } return 1; }

    function updateCooldowns() {
        const calculatePcGain = () => Math.floor(Math.random() * 6) + 3;
        const currentQ = getCurrentQuestionNumber();
        const questionsAdvanced = currentQ - operationHistory.lastQuestionNumber;

        if (questionsAdvanced > 0) {
            let totalPcGained = 0;
            for (let i = 0; i < questionsAdvanced; i++) {
                totalPcGained += calculatePcGain();
            }

            politicalCapital += totalPcGained;

            for (const [key, cooldown] of Object.entries(operationHistory.cooldowns)) {
                if (cooldown > 0) {
                    operationHistory.cooldowns[key] = Math.max(0, cooldown - questionsAdvanced);
                }
            }
            operationHistory.lastQuestionNumber = currentQ;
        }
    }

    function getAvailableOperations() {
        if (typeof campaignTrail_temp === 'undefined' || campaignTrail_temp === null) return [];
        const available = [];
        for (const [categoryKey, categoryData] of Object.entries(SABOTAGE_OPERATIONS)) { if (!operationHistory.cooldowns[categoryKey] || operationHistory.cooldowns[categoryKey] <= 0) { for (const operation of categoryData.operations) { if (!operationHistory.completed.includes(operation.id)) { available.push({ ...operation, category: categoryKey, categoryData }); } } } }
        return available;
    }

    // --- state selection modal ---
    function showStateSelectionModal(operation) {
        const ct_temp = campaignTrail_temp;
        if (!ct_temp || !ct_temp.states_json) { alert("Error: State data is not available for selection."); return; }
        const existingModal = document.getElementById('dossierStateSelectionModal');
        if (existingModal) existingModal.remove();
        const modalOverlay = document.createElement('div');
        modalOverlay.id = 'dossierStateSelectionModal';
        Object.assign(modalOverlay.style, { position: 'fixed', top: 0, left: 0, width: '100%', height: '100%', backgroundColor: STYLES.modalBg, zIndex: '2001', display: 'flex', alignItems: 'center', justifyContent: 'center' });
        const modalContent = document.createElement('div');
        Object.assign(modalContent.style, { background: STYLES.modalContentBg, padding: '2em 1em', border: '5px double #0c0255', borderRadius: '8px', fontFamily: STYLES.mainFont, boxShadow: '0 5px 15px rgba(0,0,0,0.3)', minWidth: '300px', textAlign: 'center' });
        const title = document.createElement('h3');
        title.textContent = `Select target state for: ${operation.name}`;
        title.style.fontFamily = STYLES.mainFont;
        title.style.color = STYLES.operationBlue;
        title.style.margin = '0 0 1.5em 0';
        const selectLabel = document.createElement('label');
        selectLabel.textContent = 'Target state: ';
        selectLabel.style.fontSize = '12px';
        selectLabel.style.marginRight = '10px';
        const stateSelect = document.createElement('select');
        stateSelect.id = 'dossierStatePicker';
        Object.assign(stateSelect.style, { padding: '8px', fontFamily: STYLES.mainFont, fontSize: '14px', border: `1px solid ${STYLES.borderColor}`, borderRadius: '4px' });
        ct_temp.states_json.forEach(state => {
            const option = document.createElement('option');
            option.value = state.fields.name;
            option.textContent = state.fields.name;
            stateSelect.appendChild(option);
        });
        const buttonContainer = document.createElement('div');
        buttonContainer.style.marginTop = '20px';
        const confirmButton = document.createElement('button');
        confirmButton.textContent = 'Confirm operation';
        Object.assign(confirmButton.style, { padding: '10px 15px', background: STYLES.successGreen, color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer', fontFamily: STYLES.mainFont, marginRight: '10px', transition: 'background-color 0.2s' });
        confirmButton.onmouseover = () => confirmButton.style.background = '#388e3c';
        confirmButton.onmouseout = () => confirmButton.style.background = STYLES.successGreen;
        const cancelButton = document.createElement('button');
        cancelButton.textContent = 'Cancel';
        Object.assign(cancelButton.style, { padding: '10px 15px', background: STYLES.sabotageRed, color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer', fontFamily: STYLES.mainFont, transition: 'background-color 0.2s' });
        cancelButton.onmouseover = () => cancelButton.style.background = '#c62828';
        cancelButton.onmouseout = () => cancelButton.style.background = STYLES.sabotageRed;
        confirmButton.onclick = () => {
            const selectedState = stateSelect.value;
            modalOverlay.remove(); // close the state selection modal first
            showExecutionModal(operation, selectedState); // then open the execution modal
        };
        cancelButton.onclick = () => modalOverlay.remove();
        modalOverlay.onclick = (e) => { if (e.target === modalOverlay) modalOverlay.remove(); };
        modalContent.appendChild(title);
        modalContent.appendChild(selectLabel);
        modalContent.appendChild(stateSelect);
        buttonContainer.appendChild(confirmButton);
        buttonContainer.appendChild(cancelButton);
        modalContent.appendChild(buttonContainer);
        modalOverlay.appendChild(modalContent);
        document.body.appendChild(modalOverlay);
    }
    
    function showExecutionModal(operation, targetStateName = null) {
        const existingModal = document.getElementById('dossierExecutionModal');
        if (existingModal) existingModal.remove();

        const baseCost = operation.cost;
        const boostedCost = baseCost + PC_BOOST_COST;
        const canAffordBase = politicalCapital >= baseCost;
        const canAffordBoost = politicalCapital >= boostedCost;

        const baseSuccessRate = operation.categoryData.baseSuccessRate;
        const boostedSuccessRate = Math.min(0.98, baseSuccessRate + PC_BOOST_EFFECT);

        const modalOverlay = document.createElement('div');
        modalOverlay.id = 'dossierExecutionModal';
        Object.assign(modalOverlay.style, { position: 'fixed', top: 0, left: 0, width: '100%', height: '100%', backgroundColor: STYLES.modalBg, zIndex: '2002', display: 'flex', alignItems: 'center', justifyContent: 'center' });

        const modalContent = document.createElement('div');
        Object.assign(modalContent.style, { background: STYLES.modalContentBg, padding: '2em', border: '5px double #0c0255', borderRadius: '8px', fontFamily: STYLES.mainFont, boxShadow: '0 5px 15px rgba(0,0,0,0.3)', width: '450px', textAlign: 'center' });

        const title = document.createElement('h3');
        title.textContent = `Operation: ${operation.name}`;
        title.style.fontFamily = STYLES.mainFont;
        title.style.color = STYLES.operationBlue;
        title.style.margin = '0 0 1em 0';

        const targetInfo = document.createElement('p');
        if (targetStateName) {
            targetInfo.innerHTML = `<strong>Target:</strong> ${operation.target} <em>(in ${targetStateName})</em>`;
        } else {
            targetInfo.innerHTML = `<strong>Target:</strong> ${operation.target}`;
        }
        targetInfo.style.fontSize = '12px';
        targetInfo.style.color = STYLES.textSecondary;
        targetInfo.style.margin = '0 0 1.5em 0';

        modalContent.appendChild(title);
        modalContent.appendChild(targetInfo);

        // Standard Execution option
        const standardOption = document.createElement('button');
        standardOption.innerHTML = `
			<div style="font-weight: bold; font-size: 14px;">Standard Execution</div>
			<div style="font-size: 11px;">Cost: ${baseCost} PC | Chance: ${Math.round(baseSuccessRate * 100)}%</div>
		`;
        Object.assign(standardOption.style, { width: '100%', padding: '12px', border: `2px solid ${STYLES.operationBlue}`, borderRadius: '4px', cursor: 'pointer', background: 'white', fontFamily: STYLES.mainFont, marginBottom: '10px', transition: 'all 0.2s ease' });
        standardOption.onmouseover = () => {
            if (canAffordBase) standardOption.style.borderColor = '#1976d2';
            standardOption.style.background = '#f0f8ff';
        };
        standardOption.onmouseout = () => {
            standardOption.style.borderColor = STYLES.operationBlue;
            standardOption.style.background = 'white';
        };
        standardOption.onclick = () => executeOperation(operation, baseCost, baseSuccessRate, targetStateName);

        // Boosted Execution option
        const boostedOption = document.createElement('button');
        boostedOption.innerHTML = `
			<div style="font-weight: bold; font-size: 14px; color: ${STYLES.successGreen};">Boost Funding</div>
			<div style="font-size: 11px;">Cost: ${boostedCost} PC | Chance: ${Math.round(boostedSuccessRate * 100)}%</div>
		`;
        Object.assign(boostedOption.style, { width: '100%', padding: '12px', border: `2px solid ${STYLES.successGreen}`, borderRadius: '4px', cursor: 'pointer', background: 'white', fontFamily: STYLES.mainFont, transition: 'all 0.2s ease' });
        boostedOption.onmouseover = () => {
            if (canAffordBoost) boostedOption.style.borderColor = '#388e3c';
            boostedOption.style.background = '#f1f8e9';
        };
        boostedOption.onmouseout = () => {
            boostedOption.style.borderColor = STYLES.successGreen;
            boostedOption.style.background = 'white';
        };
        boostedOption.onclick = () => executeOperation(operation, boostedCost, boostedSuccessRate, targetStateName);

        if (!canAffordBase) {
            standardOption.disabled = true;
            Object.assign(standardOption.style, { opacity: 0.5, cursor: 'not-allowed', borderColor: '#ccc' });
            standardOption.innerHTML += `<div style="color: ${STYLES.sabotageRed}; font-size: 10px; margin-top: 4px;">INSUFFICIENT CAPITAL</div>`;
        }
        if (!canAffordBoost) {
            boostedOption.disabled = true;
            Object.assign(boostedOption.style, { opacity: 0.5, cursor: 'not-allowed', borderColor: '#ccc' });
            boostedOption.innerHTML += `<div style="color: ${STYLES.sabotageRed}; font-size: 10px; margin-top: 4px;">INSUFFICIENT CAPITAL</div>`;
        }

        modalContent.appendChild(standardOption);
        modalContent.appendChild(boostedOption);

        // cancel Button
        const cancelButton = document.createElement('button');
        cancelButton.textContent = 'Cancel Operation';
        Object.assign(cancelButton.style, { marginTop: '20px', padding: '8px 15px', background: STYLES.textMuted, color: 'white', border: 'none', borderRadius: '4px', cursor: 'pointer', fontFamily: STYLES.mainFont });
        cancelButton.onclick = () => modalOverlay.remove();
        modalContent.appendChild(cancelButton);

        modalOverlay.appendChild(modalContent);
        document.body.appendChild(modalOverlay);
    }
    
    // --- operation, excecution & result ---
    function executeOperation(operation, cost, successChance, targetStateName = null) {
        const ct_temp = campaignTrail_temp;
        if (!ct_temp || politicalCapital < cost) {
            alert("Error: Cannot execute operation. (Insufficient PC or game data missing)");
            return;
        }
		floor13 = true;

        // close any open modals
        const dossierModal = document.getElementById('popOutMenu');
        if (dossierModal) closeDossier();
        const execModal = document.getElementById('dossierExecutionModal');
        if (execModal) execModal.remove();

        politicalCapital -= cost; // deduct the cost immediately

        const isSuccess = Math.random() < successChance;
        let resultMessage;

        try {
            if (isSuccess) {
                resultMessage = operation.successEffect(targetStateName);
            } else {
                resultMessage = operation.failureEffect(targetStateName);
            }
        } catch (e) {
            console.error("Error executing operation effect:", operation.id, e);
            resultMessage = "A critical error occurred during the operation. Check the console for details.";
        }

        showOperationResult(operation, isSuccess, resultMessage);

        operationHistory.completed.push(operation.id);
        operationHistory.cooldowns[operation.category] = operation.categoryData.cooldown;

        // Update the dossier button indicator after a short delay
        setTimeout(() => {
            const button = document.getElementById('dossier_button');
            if (button) {
                const availableOps = getAvailableOperations();
                button.innerHTML = availableOps.length > 0 ? 'Dossier (+)' : 'Dossier';
                button.style.boxShadow = availableOps.length > 0 ? '0 0 4px rgba(255, 215, 0, 0.6)' : '';
            }
        }, 100);
    }

    function showOperationResult(operation, success, message) {
        const overlay = document.createElement('div');
        Object.assign(overlay.style, { position: 'fixed', top: '0', left: '0', width: '100%', height: '100%', background: 'rgba(0, 0, 0, 0.8)', zIndex: '2000', display: 'flex', alignItems: 'center', justifyContent: 'center' });
        const popup = document.createElement('div');
        Object.assign(popup.style, { background: STYLES.dossierBg, padding: '25px', borderRadius: '8px', border: `3px solid ${success ? STYLES.successGreen : STYLES.sabotageRed}`, maxWidth: '500px', textAlign: 'center', fontFamily: STYLES.mainFont, boxShadow: '0 8px 32px rgba(0,0,0,0.5)' });
        const statusHeader = document.createElement('h2');
        statusHeader.innerHTML = success ? 'OPERATION SUCCESS' : 'OPERATION COMPROMISED';
        Object.assign(statusHeader.style, { color: success ? STYLES.successGreen : STYLES.sabotageRed, fontFamily: STYLES.mainFont, fontSize: '18px', margin: '0 0 15px 0', letterSpacing: '2px' });
        const operationNameEl = document.createElement('div');
        operationNameEl.textContent = operation.name.toUpperCase();
        Object.assign(operationNameEl.style, { fontFamily: STYLES.mainFont, fontSize: '14px', fontWeight: 'bold', color: STYLES.textPrimary, marginBottom: '10px' });
        const resultMessageEl = document.createElement('div');
        resultMessageEl.textContent = message;
        Object.assign(resultMessageEl.style, { fontSize: '13px', lineHeight: '1.5', color: STYLES.textSecondary, marginBottom: '20px' });
        const closeBtn = document.createElement('button');
        closeBtn.textContent = 'ACKNOWLEDGED';
        Object.assign(closeBtn.style, { padding: '8px 16px', background: success ? STYLES.successGreen : STYLES.sabotageRed, color: 'white', border: 'none', borderRadius: '3px', fontFamily: STYLES.mainFont, fontSize: '11px', cursor: 'pointer', letterSpacing: '1px' });
        closeBtn.onclick = () => overlay.remove();
        overlay.onclick = (e) => { if (e.target === overlay) overlay.remove(); };
        popup.appendChild(statusHeader);
        popup.appendChild(operationNameEl);
        popup.appendChild(resultMessageEl);
        popup.appendChild(closeBtn);
        overlay.appendChild(popup);
        document.body.appendChild(overlay);
    }

    // --- select VP ---
    function selectAndPrepareTrumpVP() {
        if (typeof getTrumpVP !== 'function') {
            console.error("Dossier Error: Global 'getTrumpVP' function not found.");
            return { name: "Mike Pence", ...VP_CANDIDATE_DETAILS["Mike Pence"] };
        }
        const pScore = typeof populistScore !== 'undefined' ? populistScore : 0;
        const aScore = typeof aggressiveScore !== 'undefined' ? aggressiveScore : 0;
        const chosenVPName = getTrumpVP(pScore, aScore, window.embracedSanders, window.tookResponsibilityForEmails);
        if (VP_CANDIDATE_DETAILS[chosenVPName]) {
            return { name: chosenVPName, ...VP_CANDIDATE_DETAILS[chosenVPName] };
        } else {
            console.error(`Dossier Error: VP "${chosenVPName}" has no details. Defaulting.`);
            return { name: "Mike Pence", ...VP_CANDIDATE_DETAILS["Mike Pence"] };
        }
    }

    // refresh the dossier content on the fly
    function refreshDossierContent() {
        const popOutMenu = document.getElementById('popOutMenu');
        // Do nothing if the dossier isn't open
        if (!popOutMenu) {
            return;
        }

        // run the update logic
        updateCooldowns();
        
        // update the Political Capital in the header
        const pcDisplay = document.getElementById('dossier_pc_display');
        if (pcDisplay) {
            pcDisplay.textContent = `POLITICAL CAPITAL: ${politicalCapital}`;
        }

        // find the content area and the active tab
        const tabContentArea = document.getElementById('dossier_tab_content_area');
        const activeTab = popOutMenu.querySelector('.dossier-tab.active');

        if (!tabContentArea || !activeTab) {
            console.warn("Dossier refresh failed: could not find content area or active tab.");
            return;
        }

        // re-render the content of the currently active tab
        if (activeTab.textContent.includes('CANDIDATES')) {
            showCandidatesSection(tabContentArea);
        } else if (activeTab.textContent.includes('OPERATIONS')) {
            showOperationsSection(tabContentArea);
        }
    }

    // --- dossier ui creation ---
    function openDossier(event) {
        let popOutMenu = document.getElementById('popOutMenu');
        if (popOutMenu) popOutMenu.remove();
        updateCooldowns();

        if (typeof campaignTrail_temp === 'undefined' || campaignTrail_temp === null) { alert("Dossier cannot be opened: Critical game data (campaignTrail_temp) is not available."); return; }
        // reset VP and PC if game restarted
        if (campaignTrail_temp.question_number === 1 && operationHistory.lastQuestionNumber !== 1) {
            operationHistory = { completed: [], cooldowns: {}, lastQuestionNumber: 1 };
            selectedTrumpVP = null;
            politicalCapital = 25;
        }

        const fragment = document.createDocumentFragment();
        popOutMenu = document.createElement('div');
        popOutMenu.id = 'popOutMenu';
        Object.assign(popOutMenu.style, {
            position: 'absolute',
            width: '480px',
            background: STYLES.dossierBg,
            boxShadow: '0 8px 32px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.8)',
            border: `3px solid ${STYLES.borderColor}`,
            borderRadius: '8px',
            zIndex: '1000',
            fontFamily: STYLES.mainFont,
            overflow: 'hidden',
            display: 'flex',
            flexDirection: 'column',
            transition: 'opacity 0.3s ease-in-out',
            touchAction: 'manipulation'
        });

        const docHeader = document.createElement('div');
        docHeader.className = 'dossier-drag-header';
        Object.assign(docHeader.style, {
            background: STYLES.headerBg,
            color: '#ffffff',
            padding: '10px 15px',
            borderBottom: `2px solid ${STYLES.borderColor}`,
            position: 'relative',
            boxShadow: '0 2px 4px rgba(0,0,0,0.2)',
            textAlign: 'center'
        });
        const menuTitle = document.createElement('h1');
        menuTitle.textContent = 'THE DOSSIER';
        Object.assign(menuTitle.style, {
            fontFamily: STYLES.mainFont,
            color: '#ffffff',
            textShadow: '1px 1px 2px rgba(0,0,0,0.5)',
            margin: '0',
            fontSize: '22px',
            lineHeight: '1.2',
            letterSpacing: '1px'
        });
        const pcDisplay = document.createElement('span');
        pcDisplay.id = 'dossier_pc_display';
        pcDisplay.textContent = `POLITICAL CAPITAL: ${politicalCapital}`;
        Object.assign(pcDisplay.style, {
            fontSize: '11px',
            fontWeight: 'normal',
            letterSpacing: '0.5px',
            display: 'block',
            marginTop: '4px',
            opacity: '0.8'
        });
        docHeader.appendChild(menuTitle);
        docHeader.appendChild(pcDisplay);
        fragment.appendChild(docHeader);

        const contentOuterContainer = document.createElement('div');
        Object.assign(contentOuterContainer.style, { padding: '15px', flexGrow: '1', overflow: 'hidden', display: 'flex', flexDirection: 'column' });
        const tabContainer = document.createElement('div');
        Object.assign(tabContainer.style, { display: 'flex', marginBottom: '15px', borderBottom: `1px solid ${STYLES.borderColor}` });
        const candidatesTab = createTab('CANDIDATES', true);
        const operationsTab = createTab('OPERATIONS', false);
        const tabContentArea = document.createElement('div');
        tabContentArea.id = 'dossier_tab_content_area';
        Object.assign(tabContentArea.style, { flexGrow: '1', overflowY: 'auto', paddingRight: '10px', marginRight: '-10px' });
        candidatesTab.onclick = () => {
            switchTab(candidatesTab, [operationsTab]);
            showCandidatesSection(tabContentArea);
        };
        operationsTab.onclick = () => {
            switchTab(operationsTab, [candidatesTab]);
            showOperationsSection(tabContentArea);
        };
        tabContainer.appendChild(candidatesTab);
        tabContainer.appendChild(operationsTab);
        contentOuterContainer.appendChild(tabContainer);
        contentOuterContainer.appendChild(tabContentArea);
        fragment.appendChild(contentOuterContainer);

        const docFooter = document.createElement('div');
        Object.assign(docFooter.style, { padding: '10px 15px', borderTop: `1px solid ${STYLES.borderColor}`, background: 'rgba(0,0,0,0.05)', textAlign: 'right' });
        const closeButton = document.createElement('button');
        closeButton.innerHTML = '✕ CLOSE';
        Object.assign(closeButton.style, {
            padding: '8px 15px',
            cursor: 'pointer',
            background: STYLES.textSecondary,
            color: 'white',
            border: 'none',
            borderRadius: '3px',
            fontFamily: STYLES.mainFont,
            fontSize: '11px',
            fontWeight: 'bold',
            letterSpacing: '0.5px',
            transition: 'all 0.2s ease'
        });
        closeButton.onmouseover = () => { closeButton.style.backgroundColor = STYLES.textPrimary; };
        closeButton.onmouseout = () => { closeButton.style.backgroundColor = STYLES.textSecondary; };
        closeButton.onclick = closeDossier;
        docFooter.appendChild(closeButton);
        fragment.appendChild(docFooter);
        popOutMenu.appendChild(fragment);
        document.body.appendChild(popOutMenu);
        showCandidatesSection(tabContentArea);
        const escHandler = (e) => { if (e.key === 'Escape' && document.getElementById('popOutMenu')) closeDossier(); };
        document.addEventListener('keydown', escHandler);
        popOutMenu._escHandler = escHandler;
        const recoverButton = document.createElement('button');
        recoverButton.textContent = '⌂';
        recoverButton.title = 'Center document';
        Object.assign(recoverButton.style, { position: 'absolute', top: '8px', right: '8px', width: '24px', height: '24px', padding: '0', fontSize: '12px', lineHeight: '1', background: 'rgba(255,255,255,0.9)', border: `1px solid ${STYLES.borderColor}`, borderRadius: '3px', cursor: 'pointer', zIndex: '5', fontFamily: STYLES.mainFont });
        recoverButton.onclick = (e) => {
            e.stopPropagation();
            centerMenuOnScreen(popOutMenu);
        };
        popOutMenu.appendChild(recoverButton);
        makeDraggable(popOutMenu);
        positionDossierWindow(popOutMenu, event);
        requestAnimationFrame(() => {
            const headerH = docHeader.offsetHeight;
            const footerH = docFooter.offsetHeight;
            const tabsH = tabContainer.offsetHeight;
            const paddingAndMargins = 15 + 15 + 15;
            const availableHeightForContent = popOutMenu.offsetHeight - headerH - footerH - tabsH - paddingAndMargins;
            tabContentArea.style.maxHeight = Math.max(200, availableHeightForContent) + 'px';
        });
    }

    function createTab(text, active) {
        const tab = document.createElement('button');
        tab.className = 'dossier-tab';
        tab.textContent = text;
        Object.assign(tab.style, {
            flex: '1',
            padding: '8px 16px',
            border: 'none',
            background: active ? STYLES.sectionBg : 'rgba(255,255,255,0.3)',
            color: active ? STYLES.classifiedRed : STYLES.textSecondary,
            fontFamily: STYLES.mainFont,
            fontSize: '11px',
            fontWeight: 'bold',
            cursor: 'pointer',
            borderBottom: active ? `2px solid ${STYLES.classifiedRed}` : 'none',
            transition: 'all 0.2s ease',
            marginRight: '5px'
        });
        tab.style.borderTopLeftRadius = '3px';
        tab.style.borderTopRightRadius = '3px';
        tab.onmouseover = () => { if (!tab.classList.contains('active')) tab.style.background = 'rgba(255,255,255,0.5)'; };
        tab.onmouseout = () => { if (!tab.classList.contains('active')) tab.style.background = 'rgba(255,255,255,0.3)'; };
        if (active) tab.classList.add('active');
        return tab;
    }

    function switchTab(activeTab, inactiveTabs) {
        inactiveTabs.forEach(tab => {
            tab.classList.remove('active');
            tab.style.background = 'rgba(255,255,255,0.3)';
            tab.style.color = STYLES.textSecondary;
            tab.style.borderBottom = 'none';
        });
        activeTab.classList.add('active');
        activeTab.style.background = STYLES.sectionBg;
        activeTab.style.color = STYLES.classifiedRed;
        activeTab.style.borderBottom = `2px solid ${STYLES.classifiedRed}`;
    }

    function showCandidatesSection(container) {
        container.innerHTML = '';
        const sectionHeader = document.createElement('div');
        Object.assign(sectionHeader.style, { background: STYLES.sectionBg, padding: '10px 15px', marginBottom: '15px', border: `1px solid ${STYLES.borderColor}`, borderRadius: '4px', boxShadow: 'inset 0 1px 3px rgba(0,0,0,0.1)' });
        const opponentsTitle = document.createElement('h2');
        opponentsTitle.innerHTML = '◆ SUBJECT PROFILES';
        Object.assign(opponentsTitle.style, { fontFamily: STYLES.mainFont, color: STYLES.classifiedRed, margin: '0 0 5px 0', fontSize: '14px', fontWeight: 'bold', letterSpacing: '1px' });
        sectionHeader.appendChild(opponentsTitle);
        const subtitle = document.createElement('p');
        subtitle.innerHTML = '<em>Intelligence Assessment:</em> One of these individuals will likely be the Republican nominee. The others… well, they tried.';
        Object.assign(subtitle.style, { margin: '0', fontSize: '12px', color: STYLES.textSecondary, lineHeight: '1.4', fontStyle: 'normal' });
        sectionHeader.appendChild(subtitle);
        container.appendChild(sectionHeader);
        const candidatesListContainer = buildCandidatesList();
        container.appendChild(candidatesListContainer);
    }

    function showOperationsSection(container) {
        container.innerHTML = '';
        const sectionHeader = document.createElement('div');
        Object.assign(sectionHeader.style, { background: STYLES.sectionBg, padding: '10px 15px', marginBottom: '15px', border: `1px solid ${STYLES.borderColor}`, borderRadius: '4px', boxShadow: 'inset 0 1px 3px rgba(0,0,0,0.1)' });
        const operationsTitle = document.createElement('h2');
        operationsTitle.innerHTML = '◆ COVERT OPERATIONS';
        Object.assign(operationsTitle.style, { fontFamily: STYLES.mainFont, color: STYLES.sabotageRed, margin: '0 0 5px 0', fontSize: '14px', fontWeight: 'bold', letterSpacing: '1px' });
        sectionHeader.appendChild(operationsTitle);
        const operationsSubtitle = document.createElement('p');
        operationsSubtitle.innerHTML = '<em>Strategic Actions:</em> Undertake missions to gain an edge. Consider risks and rewards carefully.';
        Object.assign(operationsSubtitle.style, { margin: '0', fontSize: '12px', color: STYLES.textSecondary, lineHeight: '1.4', fontStyle: 'normal' });
        sectionHeader.appendChild(operationsSubtitle);
        container.appendChild(sectionHeader);
        const availableOps = getAvailableOperations();
        const operationsListContainer = buildOperationsList(availableOps);
        container.appendChild(operationsListContainer);
    }

    function buildCandidatesList() {
        const container = document.createElement('div');
        const statusLegend = document.createElement('div');
        Object.assign(statusLegend.style, { display: 'flex', justifyContent: 'space-around', marginBottom: '15px', padding: '8px', background: 'rgba(255,255,255,0.7)', border: `1px dashed ${STYLES.borderColor}`, borderRadius: '3px', fontSize: '10px', fontFamily: STYLES.badgeFont });
        const activeStatus = document.createElement('span');
        activeStatus.innerHTML = '● ACTIVE CAMPAIGN';
        activeStatus.style.color = STYLES.classifiedRed;
        activeStatus.style.fontWeight = 'bold';
        const inactiveStatus = document.createElement('span');
        inactiveStatus.innerHTML = '○ SUSPENDED/WITHDRAWN';
        inactiveStatus.style.color = STYLES.textMuted;
        statusLegend.appendChild(activeStatus);
        statusLegend.appendChild(inactiveStatus);
        container.appendChild(statusLegend);

        const menuList = document.createElement('div');
        Object.assign(menuList.style, { border: `2px solid ${STYLES.borderColor}`, background: STYLES.sectionBg, borderRadius: '6px', padding: '10px' });

        // --- candidate dropout logic ---
        let currentQ = getCurrentQuestionNumber();
        const totalOriginalCandidates = CANDIDATE_DATA.length;
        const numActiveOverall = Math.max(1, totalOriginalCandidates - (currentQ - 1));
        const candidatesForDisplay = CANDIDATE_DATA.map((cand, index) => ({ ...cand, originalIndex: index, isActive: false }));
        const trumpData = candidatesForDisplay.find(c => c.id === 'TRUMP_2016');
        let activeSlotsToFill = numActiveOverall;
        if (numActiveOverall === 1 && trumpData) { trumpData.isActive = true; } else {
            if (trumpData && activeSlotsToFill > 0) {
                trumpData.isActive = true;
                activeSlotsToFill--;
            }
            for (const cand of candidatesForDisplay) {
                if (activeSlotsToFill <= 0) break;
                if (cand.id !== (trumpData ? trumpData.id : null) && !cand.isActive) {
                    cand.isActive = true;
                    activeSlotsToFill--;
                }
            }
        }
        const sortedPrimaryCandidates = candidatesForDisplay.filter(c => c.id !== 'TRUMP_2016').sort((a, b) => { if (a.isActive && !b.isActive) return -1; if (!a.isActive && b.isActive) return 1; return a.originalIndex - b.originalIndex; });

        // --- integration point ---
        const isTrumpNominee = numActiveOverall === 1 && trumpData && trumpData.isActive;

        if (isTrumpNominee) {
            // -- build the ticket --
            if (!selectedTrumpVP) {
                selectedTrumpVP = selectAndPrepareTrumpVP();
            }
            if (trumpData) {
                trumpData.desc = "Businessman from New York.";
            }

            const ticketContainer = document.createElement('div');
            Object.assign(ticketContainer.style, { background: STYLES.activeItemBg, border: `2px solid ${STYLES.classifiedRed}`, borderRadius: '6px', padding: '15px', marginBottom: '15px' });

            const ticketHeader = document.createElement('h2');
            ticketHeader.textContent = 'THE REPUBLICAN TICKET';
            Object.assign(ticketHeader.style, { textAlign: 'center', color: STYLES.classifiedRed, fontFamily: STYLES.mainFont, margin: '0 0 15px 0', fontSize: '18px', letterSpacing: '1px', borderBottom: `1px solid ${STYLES.borderColor}`, paddingBottom: '10px' });

            const ticketColumnsWrapper = document.createElement('div');
            Object.assign(ticketColumnsWrapper.style, { display: 'flex', justifyContent: 'space-around', alignItems: 'flex-start', paddingTop: '10px' });

            const createTicketColumn = (data, role) => {
                const column = document.createElement('div');
                Object.assign(column.style, { display: 'flex', flexDirection: 'column', alignItems: 'center', textAlign: 'center', width: '45%' });

                const photo = document.createElement('img');
                photo.src = data.photo;
                photo.alt = data.name;
                Object.assign(photo.style, { width: '120px', height: '120px', objectFit: 'cover', border: `3px solid ${STYLES.borderColor}`, borderRadius: '25%', marginBottom: '10px', boxShadow: '0 3px 6px rgba(0,0,0,0.2)' });

                const nameEl = document.createElement('div');
                nameEl.textContent = data.name;
                Object.assign(nameEl.style, { fontFamily: STYLES.mainFont, fontWeight: 'bold', fontSize: '16px', color: STYLES.textPrimary });

                const roleEl = document.createElement('div');
                roleEl.textContent = role;
                Object.assign(roleEl.style, { fontSize: '12px', fontStyle: 'italic', color: STYLES.textSecondary });
                
                const descEl = document.createElement('div');
                descEl.textContent = data.desc;
                Object.assign(descEl.style, {
                    fontSize: '11px',
                    fontStyle: 'italic',
                    color: STYLES.textSecondary,
                    marginTop: '4px',
                    maxWidth: '180px'
                });

                column.appendChild(photo);
                column.appendChild(nameEl);
                column.appendChild(roleEl);
                column.appendChild(descEl);
                return column;
            };

            const trumpColumn = createTicketColumn(trumpData, "for President");
            const vpColumn = createTicketColumn(selectedTrumpVP, "for Vice President");

            ticketColumnsWrapper.appendChild(trumpColumn);
            ticketColumnsWrapper.appendChild(vpColumn);
            ticketContainer.appendChild(ticketHeader);
            ticketContainer.appendChild(ticketColumnsWrapper);

            // strategic rationale section
            const rationaleContainer = document.createElement('div');
            Object.assign(rationaleContainer.style, {
                marginTop: '20px',
                padding: '12px',
                background: 'rgba(255, 255, 255, 0.7)',
                border: `1px dashed ${STYLES.borderColor}`,
                borderRadius: '4px'
            });

            const rationaleContent = document.createElement('p');
            Object.assign(rationaleContent.style, {
                fontSize: '12px',
                lineHeight: '1.5',
                color: STYLES.textPrimary,
                margin: '0'
            });

            const rationaleTitle = document.createElement('strong');
            rationaleTitle.textContent = 'Our analysis: ';
            rationaleTitle.style.color = STYLES.classifiedRed;

            const rationaleText = VP_RATIONALES[selectedTrumpVP.name] || "No strategic analysis available for this selection.";
            rationaleContent.appendChild(rationaleTitle);
            rationaleContent.appendChild(document.createTextNode(rationaleText));

            rationaleContainer.appendChild(rationaleContent);
            ticketContainer.appendChild(rationaleContainer);
            
            menuList.appendChild(ticketContainer);

        } else {
            if (trumpData) {
                menuList.appendChild(buildCandidateEntry(trumpData, CANDIDATE_DATA.findIndex(c => c.id === trumpData.id), 'Candidate'));
            }
        }

        // display other (non-Trump) primary candidates
        sortedPrimaryCandidates.forEach(itemData => {
            menuList.appendChild(buildCandidateEntry(itemData, CANDIDATE_DATA.findIndex(c => c.id === itemData.id), 'Candidate'));
        });

        container.appendChild(menuList);
        return container;
    }

    function buildCandidateEntry(itemData, index, type = 'Candidate') {
        const candidateEntry = document.createElement('div');
        Object.assign(candidateEntry.style, { display: 'flex', alignItems: 'flex-start', marginBottom: '12px', padding: '12px', borderRadius: '4px', border: `1px solid ${STYLES.borderColor}`, position: 'relative', transition: 'all 0.2s ease' });

        const entryNumber = document.createElement('div');
        if (type === 'Candidate') {
            entryNumber.textContent = String(index + 1).padStart(2, '0');
            Object.assign(entryNumber.style, { fontFamily: STYLES.mainFont, fontSize: '11px', fontWeight: 'bold', color: STYLES.textMuted, marginRight: '10px', marginTop: '2px', minWidth: '20px' });
        } else {
            entryNumber.style.display = 'none'; // no number for VP
        }

        const photo = document.createElement('img');
        photo.src = itemData.photo;
        photo.alt = `${itemData.name} portrait`;
        photo.loading = 'lazy';
        Object.assign(photo.style, { width: '72px', height: '72px', objectFit: 'cover', marginRight: '15px', border: `2px solid ${STYLES.borderColor}`, borderRadius: '2px', boxShadow: '0 2px 4px rgba(0,0,0,0.2)', transition: 'all 0.2s ease' });
        const info = document.createElement('div');
        info.style.flex = '1';
        const nameContainer = document.createElement('div');
        Object.assign(nameContainer.style, { display: 'flex', alignItems: 'center', marginBottom: '6px' });
        const name = document.createElement('div');
        name.textContent = itemData.name;
        Object.assign(name.style, { fontFamily: STYLES.mainFont, fontWeight: 'bold', fontSize: '15px', marginRight: '10px', transition: 'color 0.2s ease' });
        const statusBadge = document.createElement('span');
        Object.assign(statusBadge.style, { fontSize: '9px', fontFamily: STYLES.badgeFont, padding: '2px 6px', borderRadius: '2px', fontWeight: 'bold', letterSpacing: '0.5px' });

        const descPrefix = type === 'Running Mate' ? 'Profile: ' : 'Assessment: ';
        const desc = document.createElement('div');
        desc.innerHTML = `<strong>${descPrefix}</strong> ${itemData.desc}`;
        Object.assign(desc.style, { fontSize: '12px', lineHeight: '1.4', color: STYLES.textSecondary, transition: 'color 0.2s ease' });

        nameContainer.appendChild(name);
        nameContainer.appendChild(statusBadge);
        info.appendChild(nameContainer);
        info.appendChild(desc);
        if (type === 'Candidate') candidateEntry.appendChild(entryNumber);
        candidateEntry.appendChild(photo);
        candidateEntry.appendChild(info);

        if (type === 'Running Mate') {
            candidateEntry.style.background = STYLES.activeItemBg;
            candidateEntry.style.borderColor = STYLES.successGreen;
            candidateEntry.style.borderWidth = '2px';
            name.style.color = STYLES.successGreen;
            statusBadge.textContent = 'RUNNING MATE';
            statusBadge.style.background = STYLES.successGreen;
            statusBadge.style.color = '#ffffff';
            candidateEntry.onmouseover = () => {
                candidateEntry.style.background = STYLES.getActiveHoverBg();
                candidateEntry.style.transform = 'translateY(-2px)';
                candidateEntry.style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';
            };
            candidateEntry.onmouseout = () => {
                candidateEntry.style.background = STYLES.activeItemBg;
                candidateEntry.style.transform = '';
                candidateEntry.style.boxShadow = '';
            };
        } else if (itemData.isActive) {
            candidateEntry.style.background = STYLES.activeItemBg;
            candidateEntry.style.borderColor = STYLES.classifiedRed;
            candidateEntry.style.borderWidth = '2px';
            name.style.color = STYLES.classifiedRed;
            statusBadge.textContent = 'ACTIVE';
            statusBadge.style.background = STYLES.classifiedRed;
            statusBadge.style.color = '#ffffff';
            candidateEntry.onmouseover = () => {
                candidateEntry.style.background = STYLES.getActiveHoverBg();
                candidateEntry.style.transform = 'translateY(-2px)';
                candidateEntry.style.boxShadow = '0 4px 8px rgba(0,0,0,0.15)';
            };
            candidateEntry.onmouseout = () => {
                candidateEntry.style.background = STYLES.activeItemBg;
                candidateEntry.style.transform = '';
                candidateEntry.style.boxShadow = '';
            };
        } else {
            candidateEntry.style.background = STYLES.inactiveItemBg;
            candidateEntry.style.opacity = '0.7';
            photo.style.filter = 'grayscale(80%) opacity(60%)';
            photo.style.borderColor = '#bbb';
            name.style.color = STYLES.textMuted;
            desc.style.color = STYLES.textMuted;
            if (entryNumber) entryNumber.style.color = '#ccc';
            statusBadge.textContent = 'WITHDRAWN';
            statusBadge.style.background = STYLES.textMuted;
            statusBadge.style.color = '#ffffff';
        }
        return candidateEntry;
    }

    function buildOperationsList(availableOps) {
        const operationsContainer = document.createElement('div');
        if (availableOps.length === 0) {
            const noOpsMessage = document.createElement('div');
            Object.assign(noOpsMessage.style, { textAlign: 'center', padding: '30px', background: 'rgba(255,255,255,0.7)', border: `1px dashed ${STYLES.borderColor}`, borderRadius: '4px', fontSize: '13px', fontStyle: 'italic', color: STYLES.textMuted });
            noOpsMessage.innerHTML = 'NO OPERATIONS CURRENTLY AVAILABLE<br><small>Operations on cooldown or all objectives completed</small>';
            operationsContainer.appendChild(noOpsMessage);
            return operationsContainer;
        }
        const categorizedOps = {};
        availableOps.forEach(op => {
            if (!categorizedOps[op.category]) categorizedOps[op.category] = { data: op.categoryData, operations: [] };
            categorizedOps[op.category].operations.push(op);
        });
        for (const [, categoryInfo] of Object.entries(categorizedOps)) {
            const categorySection = document.createElement('div');
            Object.assign(categorySection.style, { marginBottom: '20px', border: `2px solid ${STYLES.borderColor}`, borderRadius: '6px', background: STYLES.sectionBg, overflow: 'hidden' });
            const categoryHeader = document.createElement('div');
            Object.assign(categoryHeader.style, { background: STYLES.headerBg, color: 'white', padding: '10px 15px', fontFamily: STYLES.mainFont, fontSize: '12px', fontWeight: 'bold', letterSpacing: '1px' });
            const riskColors = { 'LOW': STYLES.successGreen, 'MEDIUM': STYLES.warningAmber, 'HIGH': STYLES.sabotageRed };
            categoryHeader.innerHTML = `◆ ${categoryInfo.data.name} - ${categoryInfo.data.classification} <span style="float: right; background: ${riskColors[categoryInfo.data.riskLevel] || STYLES.textMuted}; padding: 2px 6px; border-radius: 2px; font-size: 9px;"> RISK: ${categoryInfo.data.riskLevel} </span>`;
            categorySection.appendChild(categoryHeader);
            const categoryDesc = document.createElement('div');
            Object.assign(categoryDesc.style, { padding: '10px 15px', fontSize: '11px', fontStyle: 'italic', color: STYLES.textSecondary, borderBottom: `1px solid ${STYLES.borderColor}` });
            categoryDesc.textContent = categoryInfo.data.description;
            categorySection.appendChild(categoryDesc);
            categoryInfo.operations.forEach(operation => categorySection.appendChild(buildOperationElement(operation)));
            operationsContainer.appendChild(categorySection);
        }
        return operationsContainer;
    }

    function buildOperationElement(operation) {
        const operationDiv = document.createElement('div');
        Object.assign(operationDiv.style, { padding: '15px', borderBottom: `1px solid ${STYLES.borderColor}`, transition: 'background 0.2s ease' });
        operationDiv.onmouseover = () => { operationDiv.style.background = 'rgba(255,255,255,0.3)'; };
        operationDiv.onmouseout = () => { operationDiv.style.background = ''; };
        const operationHeader = document.createElement('div');
        Object.assign(operationHeader.style, { display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '8px' });
        const operationInfo = document.createElement('div');
        operationInfo.style.flex = '1';
        const operationName = document.createElement('div');
        operationName.textContent = operation.name;
        Object.assign(operationName.style, { fontFamily: STYLES.mainFont, fontSize: '13px', fontWeight: 'bold', color: STYLES.operationBlue, marginBottom: '3px' });
        const operationTarget = document.createElement('div');
        operationTarget.innerHTML = `<em>Target:</em> ${operation.target}`;
        Object.assign(operationTarget.style, { fontSize: '11px', color: STYLES.textSecondary, marginBottom: '5px' });
        const operationDesc = document.createElement('div');
        operationDesc.textContent = operation.description;
        Object.assign(operationDesc.style, { fontSize: '11px', lineHeight: '1.4', color: STYLES.textPrimary });
        operationInfo.appendChild(operationName);
        operationInfo.appendChild(operationTarget);
        operationInfo.appendChild(operationDesc);
        const operationControls = document.createElement('div');
        Object.assign(operationControls.style, { display: 'flex', flexDirection: 'column', alignItems: 'flex-end', minWidth: '100px', marginLeft: '10px' });
        const successRateEl = document.createElement('div');
        successRateEl.innerHTML = `Success: ${Math.round(operation.categoryData.baseSuccessRate * 100)}%`;
        Object.assign(successRateEl.style, { fontSize: '10px', fontFamily: STYLES.mainFont, color: STYLES.successGreen, marginBottom: '8px' });
        const executeButton = document.createElement('button');
        executeButton.textContent = 'INITIATE';
        Object.assign(executeButton.style, { padding: '6px 12px', background: STYLES.operationBlue, color: 'white', border: 'none', borderRadius: '3px', fontSize: '10px', fontFamily: STYLES.mainFont, fontWeight: 'bold', cursor: 'pointer', letterSpacing: '0.5px', transition: 'all 0.2s ease' });
        executeButton.onmouseover = () => {
            executeButton.style.background = '#1976d2';
            executeButton.style.transform = 'translateY(-1px)';
        };
        executeButton.onmouseout = () => {
            executeButton.style.background = STYLES.operationBlue;
            executeButton.style.transform = '';
        };
        executeButton.onclick = () => {
            if (operation.requiresStateSelection) {
                showStateSelectionModal(operation);
            } else {
                showExecutionModal(operation);
            }
        };
        operationControls.appendChild(successRateEl);
        operationControls.appendChild(executeButton);
        operationHeader.appendChild(operationInfo);
        operationHeader.appendChild(operationControls);
        operationDiv.appendChild(operationHeader);
        if (operationDiv.parentNode && operationDiv.parentNode.lastChild === operationDiv) operationDiv.style.borderBottom = 'none';
        return operationDiv;
    }

    function addDossierButton() {
        if (document.getElementById('dossier_button')) return;
        const refButton = document.getElementById('view_electoral_map');
        if (!refButton) return;
        const newButton = document.createElement('button');
        newButton.id = 'dossier_button';
        Object.assign(newButton.style, { marginLeft: '1.5em', cursor: 'pointer' });
        const availableOps = getAvailableOperations();
        newButton.innerHTML = availableOps.length > 0 ? 'Dossier (+)' : 'Dossier';
        if (availableOps.length > 0) newButton.style.boxShadow = '0 0 8px rgba(255, 215, 0, 0.6)';
        newButton.addEventListener('click', openDossier);
        refButton.insertAdjacentElement('afterend', newButton);
    }

    function positionDossierWindow(popOutMenu, event) {
        let leftPos, topPos;
        const menuWidth = popOutMenu.offsetWidth || 480;
        let menuHeight = popOutMenu.offsetHeight || 600;
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        popOutMenu.style.maxHeight = (viewportHeight * 0.9) + 'px';
        menuHeight = popOutMenu.offsetHeight;
        if (dossierSavedX !== null && dossierSavedY !== null) {
            if (isPositionVisible(dossierSavedX, dossierSavedY, menuWidth, menuHeight)) {
                leftPos = dossierSavedX;
                topPos = dossierSavedY;
            } else {
                const btnRect = (event?.target || document.getElementById('dossier_button'))?.getBoundingClientRect();
                if (btnRect) {
                    leftPos = btnRect.right + 25;
                    topPos = Math.max(btnRect.top - 42, 10);
                } else {
                    leftPos = (viewportWidth - menuWidth) / 2;
                    topPos = (viewportHeight - menuHeight) / 2;
                }
            }
        } else {
            const btnRect = (event?.target || document.getElementById('dossier_button'))?.getBoundingClientRect();
            if (btnRect) {
                leftPos = btnRect.right + 25;
                topPos = Math.max(btnRect.top - 42, 10);
            } else {
                leftPos = (viewportWidth - menuWidth) / 2;
                topPos = (viewportHeight - menuHeight) / 2;
            }
        }
        if (leftPos + menuWidth > viewportWidth) leftPos = Math.max(viewportWidth - menuWidth - 20, 10);
        if (leftPos < 10) leftPos = 10;
        if (topPos + menuHeight > viewportHeight) topPos = Math.max(viewportHeight - menuHeight - 20, 10);
        if (topPos < 10) topPos = 10;
        popOutMenu.style.opacity = '0';
        popOutMenu.style.left = leftPos + 'px';
        popOutMenu.style.top = topPos + 'px';
        requestAnimationFrame(() => { popOutMenu.style.opacity = '1'; });
    }

    function isPositionVisible(x, y, width, height) { const vpW = window.innerWidth; const vpH = window.innerHeight; return (x >= 0 && y >= 0 && x + width <= vpW && y + height <= vpH); }

    function centerMenuOnScreen(menu) {
        const vpW = window.innerWidth;
        const vpH = window.innerHeight;
        const mW = menu.offsetWidth;
        const mH = menu.offsetHeight;
        const lP = Math.max((vpW - mW) / 2, 10);
        const tP = Math.max((vpH - mH) / 2, 10);
        menu.style.left = lP + 'px';
        menu.style.top = tP + 'px';
        dossierSavedX = lP;
        dossierSavedY = tP;
    }

    function closeDossier() {
        const menu = document.getElementById('popOutMenu');
        if (!menu) return;
        dossierSavedX = parseInt(menu.style.left);
        dossierSavedY = parseInt(menu.style.top);
        if (menu._escHandler) document.removeEventListener('keydown', menu._escHandler);
        menu.style.opacity = '0';
        setTimeout(() => menu.remove(), 300);
    }

    function makeDraggable(element) {
        let isDragging = false,
            startX, startY, startLeft, startTop;
        const header = element.querySelector('.dossier-drag-header');
        if (!header) { console.warn("Draggable header .dossier-drag-header not found."); return; } header.style.cursor = 'grab';
        header.style.userSelect = 'none';
        const getCoords = (e) => e.touches ? e.touches[0] : e;
        const startDrag = (e) => {
            const coords = getCoords(e);
            if (e.touches && (e.target === header || header.contains(e.target))) e.preventDefault();
            isDragging = true;
            startX = coords.clientX;
            startY = coords.clientY;
            startLeft = parseInt(element.style.left) || 0;
            startTop = parseInt(element.style.top) || 0;
            header.style.cursor = 'grabbing';
            document.addEventListener('mousemove', drag);
            document.addEventListener('touchmove', drag, { passive: false });
            document.addEventListener('mouseup', stopDrag);
            document.addEventListener('touchend', stopDrag);
        };
        const drag = (e) => {
            if (!isDragging) return;
            if (e.touches) e.preventDefault();
            const coords = getCoords(e);
            const dX = coords.clientX - startX;
            const dY = coords.clientY - startY;
            let nL = startLeft + dX;
            let nT = startTop + dY;
            const vpW = window.innerWidth;
            const vpH = window.innerHeight;
            const mW = element.offsetWidth;
            const mH = element.offsetHeight;
            const minVis = 30;
            nL = Math.min(Math.max(minVis - mW, nL), vpW - minVis);
            nT = Math.min(Math.max(minVis - mH, nT), vpH - minVis);
            element.style.left = nL + 'px';
            element.style.top = nT + 'px';
            dossierSavedX = nL;
            dossierSavedY = nT;
        };
        const stopDrag = () => {
            if (!isDragging) return;
            isDragging = false;
            header.style.cursor = 'grab';
            document.removeEventListener('mousemove', drag);
            document.removeEventListener('touchmove', drag);
            document.removeEventListener('mouseup', stopDrag);
            document.removeEventListener('touchend', stopDrag);
        };
        header.addEventListener('mousedown', startDrag);
        header.addEventListener('touchstart', startDrag, { passive: false });
    }

    function setupButtonObserver() {
        const obs = new MutationObserver(() => { if (!document.getElementById('dossier_button') && document.getElementById('view_electoral_map')) addDossierButton(); });
        obs.observe(document.body, { childList: true, subtree: true });
    }

    // game state monitor
    function startGameStateMonitor() {
        setInterval(() => {
            const currentQ = getCurrentQuestionNumber();

            // if the question number has changed since our last check...
            if (currentQ !== lastKnownQuestionNumber) {
                // update our tracker
                lastKnownQuestionNumber = currentQ;

                // refresh the dossier content if it's open
                refreshDossierContent();

                // also update the button indicator, as operations might be available now
                const button = document.getElementById('dossier_button');
                if (button) {
                    const availableOps = getAvailableOperations(); // check current state
                    button.innerHTML = availableOps.length > 0 ? 'Dossier (+)' : 'Dossier';
                    button.style.boxShadow = availableOps.length > 0 ? '0 0 8px rgba(255, 215, 0, 0.6)' : '';
                }
            }
        }, 1000); // check every second or so
    }

    function initialize() {
        if (document.getElementById('view_electoral_map')) addDossierButton();
        setupButtonObserver();
        
        startGameStateMonitor();

        function tryAddBtn(r = 0, mR = 7) {
            if (document.getElementById('dossier_button')) return;
            if (document.getElementById('view_electoral_map')) addDossierButton();
            else if (r < mR) setTimeout(() => tryAddBtn(r + 1, mR), 50 * Math.pow(1.5, r));
        }
        tryAddBtn();
    }

    initialize();
})();

// This is for the recommended reading box. Specifically, it sets up
// the styling for the tab system we have here.
// Taken from 2004Sundance, rewritten for this mod and rewritten
// again for 2012LBM 
(function() {
    'use strict';

    const CSS_STYLES = `
            #recommended_reading_box { border-style: double none; margin-inline: auto; width: 95%; background: linear-gradient(rgb(247, 247, 247), rgb(241, 241, 241)); height: 30em; color: #000; }
			#recommended_reading_box #tab-select {width:100%;height:32px;display:flex;justify-content:center;margin-bottom:1em;border-bottom:5px solid #1b146c;border-image:linear-gradient(#3c3ff6,#9f0c0c) 40}
            #recommended_reading_box .ftab, #recommended_reading_box .ftab-active {font-family: Trebuchet MS, sans-serif;width: 98px;height: 32px;margin-top: 0px;padding-top: 7px;box-sizing: border-box; cursor: pointer; user-select:none; -webkit-user-select: none; background: linear-gradient(to bottom, #f7f7f7, #e0e0e0); border: 1px solid #ccc; border-radius: 10px 10px 0 0; }
			#recommended_reading_box .ftab:hover { background: linear-gradient(to bottom, #fff, #ddd);}
            #recommended_reading_box .ftab-active { background: #ffeded; border-color: #aa2525; cursor: default; }
            #recommended_reading_box #start.ftab {width: 100px;}
            #recommended_reading_box #start.ftab-active {width: 100px;}
        `;

    let stylesAdded = false;

    function addStyles() {
        if (stylesAdded || document.getElementById('recommended_reading_styles')) return;
        const styleElement = document.createElement('style');
        styleElement.id = 'recommended_reading_styles';
        styleElement.textContent = CSS_STYLES;
        document.head.appendChild(styleElement);
        stylesAdded = true;
    }

    function initializeTabs(box) {
        // if already initialized, skip
        if (box._tabsInitialized) return;

        const tabContainer = box.querySelector('#tab-select');
        if (!tabContainer) return;

        const contentContainer = tabContainer.nextElementSibling;
        if (!contentContainer) return;

        // cache tabs and panes
        const tabs = Array.from(tabContainer.children).filter(child => child.tagName === 'P');
        const contentPanes = tabs.map((_, index) => contentContainer.querySelector(`#rpage${index}`));

        // event handler
        function onTabClick(event) {
            const clickedTab = event.target.closest('p.ftab, p.ftab-active');
            if (!clickedTab || !tabContainer.contains(clickedTab)) return;

            const index = tabs.indexOf(clickedTab);
            if (index === -1) return;

            updateState(index);
        }

        // state updater
        function updateState(activeIndex) {
            tabs.forEach((tab, idx) => {
                const isActive = (idx === activeIndex);
                tab.className = isActive ? 'ftab-active' : 'ftab';
                if (tab.id === 'start') tab.id = 'start'; 
            });

            contentPanes.forEach((pane, idx) => {
                if (pane) pane.style.display = (idx === activeIndex) ? 'inline-block' : 'none';
            });
        }

        // cleanup old listeners if re-initializing on same node
        if (tabContainer._clickHandler) {
            tabContainer.removeEventListener('click', tabContainer._clickHandler);
        }
        tabContainer._clickHandler = onTabClick;
        tabContainer.addEventListener('click', onTabClick);

        // remove inline onclicks
        tabs.forEach(t => t.removeAttribute('onclick'));

        // initial state
        let initialIndex = tabs.findIndex(t => t.classList.contains('ftab-active'));
        if (initialIndex === -1 && tabs.length > 0) initialIndex = 0;
        updateState(initialIndex);

        box._tabsInitialized = true;
        console.log('Recommended reading tabs initialized.');
    }
	
	function ensureInitialized() {
		const box = document.getElementById('recommended_reading_box');
		if (!box) return;

		if (!stylesAdded) addStyles();
		if (!box._tabsInitialized) initializeTabs(box);
	}
	
	window.recommendedReading = { addStyles, initializeTabs, ensureInitialized };
})();

// CYOA function to get everything going
// in particular this is for the final results table + the dossier,
// hence why this is a global function and not within an IIFE like
// most codes here.
campaignTrail_temp.cyoa = true;

window.populistScore = 0;
window.aggressiveScore = 0;
window.tookResponsibilityForEmails = false;
window.embracedSanders = false;
let feelthebern = 0;
let yeshillaryyes = 0;
let hipnfly = 0;
let hawkhill = 0;
let goodtimes = 0;
let floor13 = false;

// pk -> index lookup for questions
let _questionIdxByPk = null;
let _questionIdxSize = 0;

function _rebuildQuestionIdxMap() {
  const arr = campaignTrail_temp.questions_json;
  const map = new Map();
  for (let i = 0; i < arr.length; i++) {
    map.set(Number(arr[i].pk), i);
  }
  _questionIdxByPk = map;
  _questionIdxSize = arr.length;
}

function _ensureQuestionIdxMap() {
  if (!_questionIdxByPk || _questionIdxSize !== campaignTrail_temp.questions_json.length) {
    _rebuildQuestionIdxMap();
  }
}

// returns the true array index (>= 0) or -1 if not found
function getQuestionIndexFromPk(pk) {
  const n = Number(pk);
  if (!Number.isFinite(n)) return -1;

  _ensureQuestionIdxMap();

  let idx = _questionIdxByPk.get(n);
  if (idx == null) return -1;

  // verify against possible stale slot; rebuild only if mismatch
  const arr = campaignTrail_temp.questions_json;
  if (arr[idx]?.pk !== n) {
    _rebuildQuestionIdxMap();
    idx = _questionIdxByPk.get(n);
  }
  return idx ?? -1;
}

// index to assign into question_number before nextQuestion()
function getJumpIndexFromPk(pk) {
  const idx = getQuestionIndexFromPk(pk);
  return idx >= 0 ? idx - 1 : -1;
}

function questionSwapper(pk1, pk2) {
  const activeList = campaignTrail_temp.questions_json;
  const reserveList = campaignTrail_temp.questions_reserve || [];
  
  const n1 = Number(pk1);
  const n2 = Number(pk2);

  function findQuestionLocation(pk) {
    let index = activeList.findIndex(q => q.pk == pk);
    if (index !== -1) return { list: activeList, index: index, type: 'active' };
    
    index = reserveList.findIndex(q => q.pk == pk);
    if (index !== -1) return { list: reserveList, index: index, type: 'reserve' };
    
    return null;
  }

  const loc1 = findQuestionLocation(n1);
  const loc2 = findQuestionLocation(n2);

  if (!loc1 || !loc2) {
    console.warn(`questionSwapper: Could not find question(s) with pk ${pk1} and/or ${pk2}`);
    return false;
  }

  const temp = loc1.list[loc1.index];
  loc1.list[loc1.index] = loc2.list[loc2.index];
  loc2.list[loc2.index] = temp;

  if (loc1.type === 'active' || loc2.type === 'active') {
      _rebuildQuestionIdxMap();
  }

  return true;
}

cyoAdventure = function (a) {
    let ans = campaignTrail_temp.player_answers[campaignTrail_temp.player_answers.length - 1];
	//console.log("ans is: " + ans); // @todo: remove this for release

    if (ans == 5146) {
        window.aggressiveScore -= 2;
        window.tookResponsibilityForEmails = true;
    }
    else if (ans == 5170) {
        window.populistScore += 2;
        window.embracedSanders = true;
    }

    else if (ans == 5141 || ans == 20798 || ans == 5151) {
        window.populistScore += 2;
    }
    else if (ans == 20803 || ans == 5143 || ans == 5144 || ans == 5147 || ans == 5153) {
        window.aggressiveScore += 2;
    }
    else if (ans == 5142 || ans == 5148 || ans == 5152 || ans == 5157) {
        window.populistScore += 1;
    }
    else if (ans == 5139) {
        window.aggressiveScore += 1;
    }

    else if (ans == 5140 || ans == 5155 || ans == 5156 || ans == 5171) {
        window.populistScore -= 1;
    }
    else if (ans == 5145 || ans == 5149) {
        window.aggressiveScore -= 1;
    }
    else if (ans == 5172) {
        window.populistScore -= 2;
    }
    else if (ans == 5154) {
        window.populistScore -= 1;
        window.aggressiveScore -= 1;
    }
	
	if (ans == 5170 || ans == 5151 || ans == 5189 || ans == 20798 || ans == 20938 || ans == 5200 || ans == 5201 || ans == 5202 || ans == 21115) {
		feelthebern++;
	}
	
	if (ans == 20988 || ans == 5251 || ans == 5172 || ans == 20988 || ans == 5198) {
        yeshillaryyes++;
    }
	
	if (ans == 20893 || ans == 5179 || ans == 20893 || ans == 5261 || ans == 21156) { 
		hipnfly++;
	}
	
	if (ans == 5215 || ans == 21013 || ans == 21108 || ans == 21001 || ans == 5231) {
		hawkhill++;
	}
	
	if (ans == 5175 || ans == 5220 || ans == 5142 || ans == 5184 || ans == 5223) {
		goodtimes++;
	}
	if (ans == 5215) {
        goodtimes--;
    }
	
	// no Goldman Sachs
	if (ans == 5139 || ans == 5141 || ans == 5142) {
        questionSwapper(1073, 21327);
    }
	
};

// There are a couple of veep possibilities here for Trump, Johnson, and Stein.
// this function will adjust the issue scores and boost them - or not - depending
// on who has been selected.
// This is a wonky function though, and very likely to break. In fact, I'm kinda
// surprised it does work. I think.
(function() {
    'use strict';

    let vpEffectsApplied = false;

    const vpEffectProfiles = {
		// psst: base scores are: Ideology (-0.4), Trade (0.5), Foreign Policy (0.1), Social Issues (-0.5) and Immigration (-0.6)
		// the closer to 0, the better Trump does
		"Mike Pence": {
			nationalMultiplier: 1.0, homeState: "Indiana",
			issue_scores: { "1000": 0.05, "1001": -0.1, "1002": 0.0, "1003": 0.15, "1004": 0.1 }
		},
		"Chris Christie": {
			nationalMultiplier: 0.99, homeState: "New Jersey",
			issue_scores: { "1000": -0.1, "1001": -0.2, "1002": -0.1, "1003": 0.0, "1004": 0.1 }
		},
		"Newt Gingrich": {
			nationalMultiplier: 0.985, homeState: "Georgia",
			issue_scores: { "1000": 0.12, "1001": -0.08, "1002": -0.1, "1003": 0.2, "1004": 0.16 }
		},
		"Mike Flynn": {
			nationalMultiplier: 1.005, homeState: "Rhode Island",
			issue_scores: { "1000": 0.1, "1001": 0.0, "1002": -0.1, "1003": 0.07, "1004": 0.05 }
		},
		"Sarah Palin": {
			nationalMultiplier: 1.01, homeState: "Alaska",
			issue_scores: { "1000": 0.12, "1001": -0.05, "1002": 0.0, "1003": 0.3, "1004": 0.05 }
		},
		"Ted Cruz": {
			nationalMultiplier: 0.992, homeState: "Texas",
			issue_scores: { "1000": 0.12, "1001": -0.1, "1002": -0.05, "1003": 0.12, "1004": 0.1 }
		},
		"Tom Cotton": {
			nationalMultiplier: 1.0, homeState: "Arkansas",
			issue_scores: { "1000": 0.12, "1001": -0.1, "1002": -0.2, "1003": 0.15, "1004": 0.18 }
		},
		"Jeff Sessions": {
			nationalMultiplier: 1.008, homeState: "Alabama",
			issue_scores: { "1000": 0.11, "1001": 0.0, "1002": 0.0, "1003": 0.05, "1004": 0.15 }
		},
		"Scott Brown": {
			nationalMultiplier: 0.99, homeState: "New Hampshire",
			issue_scores: { "1000": 0.0, "1001": -0.2, "1002": -0.1, "1003": -0.1, "1004": 0.0 }
		},
		"Bob Corker": {
			nationalMultiplier: 0.995, homeState: "Tennessee",
			issue_scores: { "1000": 0.1, "1001": -0.2, "1002": -0.1, "1003": 0.1, "1004": 0.05 }
		},
		"Mary Fallin": {
			nationalMultiplier: 1.0, homeState: "Oklahoma",
			issue_scores: { "1000": 0.1, "1001": 0.0, "1002": 0.0, "1003": 0.1, "1004": 0.1 }
		}
	};
	
	 function applyIssueShift(candidateId, shifts) {
        const arr = campaignTrail_temp.candidate_issue_score_json;
        for (const [key, delta] of Object.entries(shifts)) {
            if (delta === 0) continue; // don't process zero-value shifts

            // first try matching on issue
            let entry = arr.find(s => s.fields.candidate === candidateId && s.fields.issue == key);
            
            // if not found, try matching against the entry's PK
            if (!entry) {
                entry = arr.find(s => s.fields.candidate === candidateId && s.pk == key);
            }
            
            if (!entry) {
                console.warn(`No issue-score row for candidate ${candidateId}, key ${key}`);
                continue;
            }
            
            const oldScore = entry.fields.issue_score;
            entry.fields.issue_score += delta;
            //console.log(
            //    `Candidate ${candidateId} · issue ${entry.fields.issue} (entry PK ${entry.pk}): ` +
            //    `score changed from ${oldScore.toFixed(3)} to ${entry.fields.issue_score.toFixed(3)} (mod: ${delta})`
            //);
        }
    }

    function applyVpEffects() {
        const vpName = getTrumpVP(
            window.populistScore,
            window.aggressiveScore,
            window.embracedSanders,
            window.tookResponsibilityForEmails
        );
        const profile = vpEffectProfiles[vpName] || vpEffectProfiles["Mike Pence"]; // fallback to Pence
		const TRUMP_CANDIDATE_ID = 200;
        const CLINTON_CANDIDATE_ID = 201;

        //console.log(`Applying effects for VP: ${vpName}`);

        // home state bonus
        if (profile.homeState) {
            const stateData = campaignTrail_temp.states_json.find(s => s.fields.name === profile.homeState);
            if (stateData) {
                const homeStateMultiplier = campaignTrail_temp.candidate_state_multiplier_json.find(
                    m => m.fields.candidate === TRUMP_CANDIDATE_ID && m.fields.state === stateData.pk
                );
                if (homeStateMultiplier) {
                    homeStateMultiplier.fields.state_multiplier *= 1.006;
                }
            }
        }

        // apply issue shifts
        //console.log("Applying issue score shifts...");
        applyIssueShift(TRUMP_CANDIDATE_ID, profile.issue_scores);
		
        //console.log(`Effects applied!`);
    }

    function handleGameUpdate(mutationsList, observer) {
        if (vpEffectsApplied) return;
        const questionHead = document.getElementById("progress_bar");
        if (questionHead && questionHead.innerText.includes("Question 8")) {
            applyVpEffects();
            vpEffectsApplied = true;
            observer.disconnect();
        }
    }

    const gameWindow = document.getElementById("game_window");
    if (gameWindow) {
        const observer = new MutationObserver(handleGameUpdate);
        observer.observe(gameWindow, { childList: true, subtree: true });
    } else {
        console.error("Could not find #game_window to attach observer.");
    }

})();

// This function replaces the advisor image for specific answers,
// sometimes based on additional game state conditions.
(function() {
    'use strict';

    const SPECIAL_CASES = {
        5176: {
            imageUrl: "https://file.garden/aNtAfG887DiA_7lO/2016ALOT/lunar_bears.png",
            condition: () => true
        },
        5179: {
            imageUrl: "https://file.garden/aNtAfG887DiA_7lO/2016ALOT/2016b_ram.jpg",
            condition: () => window.campaignTrail_temp && window.campaignTrail_temp.running_mate_id == 215
        }
    };

    const FEEDBACK_IMAGE_SELECTOR = "#visit_content img";
    let isProcessing = false;

    function handleAdvisorUpdate() {
        if (isProcessing) {
            return;
        }

        const feedbackImage = document.querySelector(FEEDBACK_IMAGE_SELECTOR);
        if (!feedbackImage) {
            return;
        }

        isProcessing = true;
        try {
            if (!window.campaignTrail_temp || !Array.isArray(window.campaignTrail_temp.player_answers)) {
                //console.log("Game state not ready, skipping image check.");
                return;
            }

            const answers = window.campaignTrail_temp.player_answers;
            if (answers.length === 0) {
                return;
            }

            const lastAnswerId = answers[answers.length - 1];
            const specialCase = SPECIAL_CASES[lastAnswerId];

            // check if the last answer is a special case and if its condition is met
            if (specialCase && specialCase.condition()) {
                if (feedbackImage.src !== specialCase.imageUrl) {
                    feedbackImage.src = specialCase.imageUrl;
                }
            }
        } catch (error) {
            console.error("Error during advisor image update:", error);
        } finally {
            isProcessing = false;
        }
    }
	
	window.handleAdvisorUpdate = handleAdvisorUpdate;

})();

// For changing running mates at the ending screens.
// historical running mates
const vpTableHistorical = {
    "Donald Trump": "Mike Pence",
    "Hillary Clinton": "Tim Kaine",
    "Gary Johnson/Others": "Bill Weld",
    "Jill Stein": "Ajamu Baraka"
};

function getTrumpVP(populistScore, aggressiveScore, embracedSanders, tookResponsibilityForEmails) {
	if (aggressiveScore <= -2 && tookResponsibilityForEmails) return "Scott Brown";
    if (populistScore >= 4 && embracedSanders) return "Ted Cruz";
    if (aggressiveScore >= 4 && populistScore >= 2) return "Mike Flynn";
	
	if (aggressiveScore >= 6) return "Newt Gingrich";
    if (populistScore >= 6) return "Sarah Palin";
    if (aggressiveScore >= 4) return "Chris Christie";
    if (populistScore >= 5) return "Tom Cotton";
    if (populistScore >= 4) return "Jeff Sessions";

    if (aggressiveScore <= -2) return "Bob Corker";
    if (populistScore <= -2) return "Mary Fallin";
    
    if (aggressiveScore >= -1 && aggressiveScore <= 3 && populistScore >= -1 && populistScore <= 3) return "Mike Pence";
    return "Mike Pence";
}

function getClintonVP() {
    const runningMateId = campaignTrail_temp.running_mate_id;
    
    switch (runningMateId) {
        case 211: return "Cory Booker";
        case 212: return "Deval Patrick";
		case 213: return "Joe Biden";
		case 214: return "Julian Castro";
		case 215: return "Eric Garcetti";
        case 209:
        default:
            return "Tim Kaine";
    }
}

function getJohnsonVP(populistScore, aggressiveScore) {
    if (populistScore >= 4 && aggressiveScore >= 4) return "Vermin Supreme";
    if (aggressiveScore >= 4) return "Jesse Ventura";
    if (populistScore >= 4) return "Austin Petersen";
	if (aggressiveScore <= -2) return "James P. Gray";
    if (populistScore <= -2 || aggressiveScore <= -1) return "Bill Weld";
    return "Bill Weld";
}

function getSteinVP(populistScore, aggressiveScore) {
	if (populistScore <= -3) return "Susan Sarandon";
    if (aggressiveScore >= 4) return "Chris Hedges";
    if (populistScore >= 4) return "Cheri Honkala";
	if (aggressiveScore >= 3) return "Rosa Clemente";
    if (populistScore <= -1) return "Nina Turner";
    return "Ajamu Baraka";
}

function addVPColumn(table, vpLookup) {
    if (!table || !table.rows) return;

    for (let i = 0; i < table.rows.length; i++) {
        const row = table.rows[i];
        if (i === 0) { // header row
            const headerCell = document.createElement('th');
            headerCell.innerText = "Running Mate";
            row.insertBefore(headerCell, row.cells[1]);
        } else { // data row
            const candidateNameCell = row.cells[0];
            if (!candidateNameCell) continue;

            // clean up the name to ensure a good match in our lookup table
            const name = candidateNameCell.innerText.replaceAll("-", "").trim();
            
            const dataCell = document.createElement('td');
            dataCell.innerText = vpLookup[name] || "John Egbert";
            row.insertBefore(dataCell, row.cells[1]);
        }
    }
}

// This adds the VPs to the final results table.
function onGameWindowChangeCandidates() {
    const detailsContainer = document.getElementById("overall_details_container");
    const statsContainer = document.getElementById("overall_vote_statistics");

    const processDetails = detailsContainer && !detailsContainer.classList.contains("done-vp");
    const processStats = statsContainer && !statsContainer.classList.contains("done-vp");
    if (!processDetails && !processStats) return;

 	const dynamicVPs = {
        "Donald Trump": getTrumpVP(window.populistScore, window.aggressiveScore, window.embracedSanders, window.tookResponsibilityForEmails),
        "Hillary Clinton": getClintonVP(),
        "Gary Johnson/Others": getJohnsonVP(window.populistScore, window.aggressiveScore),
        "Jill Stein": getSteinVP(window.populistScore, window.aggressiveScore)
    };

    // details container
    if (processDetails) {
        const tables = detailsContainer.querySelectorAll('table');
        if (tables.length > 0) addVPColumn(tables[0], dynamicVPs);        // the main results table 
        if (tables.length > 1) addVPColumn(tables[1], vpTableHistorical); // the historical comparison table
        detailsContainer.classList.add("done-vp"); // mark as processed
    }

    // stats container (only the first table)
    if (processStats) {
        const firstTable = statsContainer.querySelector('table'); 
        if (firstTable) {
            addVPColumn(firstTable, dynamicVPs);
        }
        statsContainer.classList.add("done-vp");
    }
}

window.dynamicEndingTable = { tick: onGameWindowChangeCandidates };

// This is a catch-all mutation observer so that
// we keep one having them all run at once
(function() {
    'use strict';

    if (window.bobert) {
        window.bobert.disconnect();
    }
	
	window.bobertTasks = [];
	
	const initialTasks = () => {		
		// trevor mooresies & others
		if (typeof window.handleAdvisorUpdate === 'function') {
			window.handleAdvisorUpdate();
		}
	
		// add VPs & etc to results
		if (window.dynamicEndingTable?.tick) {
			window.dynamicEndingTable.tick();
		}
		
		// recommended reading section
		if (window.recommendedReading?.ensureInitialized) {
			window.recommendedReading.ensureInitialized();
		}
		
    };
	
	window.bobertTasks.push(initialTasks);
	
	const handleMutations = (mutationsList) => {
        if (!window.bobertTasks) return;
        
        for (let i = 0; i < window.bobertTasks.length; i++) {
            try {
                window.bobertTasks[i]();
            } catch (e) {
                console.error("Zoinks! Error in bobert task:", e);
            }
        }
    };

    const targetNode = document.getElementById("game_window");
    const config = { childList: true, subtree: true };

    window.bobert = new MutationObserver(handleMutations);
    window.bobert.observe(targetNode, config);

    handleMutations();
    //console.log("bobert...");
})();

// slightly more optimized USmap
(function (e, t, n, r, i) {
  function s(e, t, n, r) {
    r = r instanceof Array ? r : [];
    var i = {};
    for (var s = 0; s < r.length; s++) {
      i[r[s]] = true;
    }
    var o = function (e) {
      this.element = e;
    };
    o.prototype = n;
    e.fn[t] = function () {
      var n = arguments;
      var r = this;
      this.each(function () {
        var s = e(this);
        var u = s.data("plugin-" + t);
        if (!u) {
          u = new o(s);
          s.data("plugin-" + t, u);
          if (u._init) {
            u._init.apply(u, n);
          }
        } else if (
          typeof n[0] == "string" &&
          n[0].charAt(0) != "_" &&
          typeof u[n[0]] == "function"
        ) {
          var a = Array.prototype.slice.call(n, 1);
          var f = u[n[0]].apply(u, a);
          if (n[0] in i) {
            r = f;
          }
        }
      });
      return r;
    };
  }
  var o = 900,
    u = 595,
    a = 50;
  var f = {
    stateStyles: {
      fill: "#333",
      stroke: "#666",
      "stroke-width": 1,
      "stroke-linejoin": "round",
      scale: [1, 1],
    },
    stateHoverStyles: {
      fill: "#33c",
      stroke: "#000",
      scale: [1.1, 1.1],
    },
    stateHoverAnimation: 500,
    stateSpecificStyles: {},
    stateSpecificHoverStyles: {},
    click: null,
    mouseover: null,
    mouseout: null,
    clickState: {},
    mouseoverState: {},
    mouseoutState: {},
    showLabels: true,
    labelWidth: 20,
    labelHeight: 15,
    labelGap: 6,
    labelRadius: 3,
    labelBackingStyles: {
      fill: "#333",
      stroke: "#666",
      "stroke-width": 1,
      "stroke-linejoin": "round",
      scale: [1, 1],
    },
    labelBackingHoverStyles: {
      fill: "#33c",
      stroke: "#000",
    },
    stateSpecificLabelBackingStyles: {},
    stateSpecificLabelBackingHoverStyles: {},
    labelTextStyles: {
      fill: "#fff",
      stroke: "none",
      "font-weight": 300,
      "stroke-width": 0,
      "font-size": "10px",
    },
    labelTextHoverStyles: {},
    stateSpecificLabelTextStyles: {},
    stateSpecificLabelTextHoverStyles: {},
  };
  var l = {
    _init: function (t) {
      this.options = {};
      e.extend(this.options, f, t);
      var n = this.element.width();
      var i = this.element.height();
      var s = this.element.width() / o;
      var l = this.element.height() / u;
      this.scale = Math.min(s, l);
      this.labelAreaWidth = Math.ceil(a / this.scale);
      var c = o + Math.max(0, this.labelAreaWidth - a);
      this.paper = r(this.element.get(0), c, u);
      this.paper.setSize(n, i);
      this.paper.setViewBox(0, 0, c, u, false);
      this.stateHitAreas = {};
      this.stateShapes = {};
      this.topShape = null;
      this._initCreateStates();
      this.labelShapes = {};
      this.labelTexts = {};
      this.labelHitAreas = {};
      if (this.options.showLabels) {
        this._initCreateLabels();
      }
	  var self = this;
      e(this.paper.canvas).on("click mouseover mouseout", function(evt) {
        var state = evt.target.dataState;
        
        if (state) {
            if (evt.type === "click") {
                self._onClick(evt);
            } else if (evt.type === "mouseover") {
                self._onMouseOver(evt);
            } else if (evt.type === "mouseout") {
                self._onMouseOut(evt);
            }
        }
      });
    },
    _initCreateStates: function () {
      var baseStyles = this.options.stateStyles;
      var paper = this.paper;
      var paths = {
        AL: "M631.30647,460.41572L629.81587,446.09422L627.06763,427.34158L627.22929,413.27709L628.03759,382.23824L627.87593,365.58718L628.04102,359.16812L672.5255,355.54867L672.3777,357.73109L672.53936,359.83269L673.18601,363.22756L676.58089,371.14893L679.00579,381.01024L680.46074,387.15335L682.07734,392.00317L683.5323,398.95458L685.63388,405.25934L688.22045,408.65423L688.70543,412.04909L690.64537,412.8574L690.80703,414.95899L689.02875,419.80881L688.54377,423.04203L688.38211,424.98195L689.99873,429.3468L690.32205,434.68159L689.51373,437.10651L690.16039,437.91481L691.61533,438.72311L691.94347,441.61193L686.34581,441.25838L679.55606,441.90503L654.01366,444.81491L643.6021,446.22168L643.38072,449.09908L645.15899,450.87735L647.74556,452.81727L648.32642,460.75271L642.78436,463.32561L640.03614,463.00229L642.78436,461.06236L642.78436,460.0924L639.71282,454.11096L637.44957,453.46432L635.99462,457.82915L634.70134,460.57738L634.0547,460.41572L631.30647,460.41572Z",
        AK: "M158.07671,453.67502L157.75339,539.03215L159.36999,540.00211L162.44156,540.16377L163.8965,539.03215L166.48308,539.03215L166.64475,541.94205L173.59618,548.73182L174.08117,551.3184L177.47605,549.37846L178.1227,549.2168L178.44602,546.14524L179.90096,544.52863L181.0326,544.36697L182.97253,542.91201L186.04409,545.01361L186.69074,547.92352L188.63067,549.05514L189.7623,551.48006L193.64218,553.25833L197.03706,559.2398L199.78529,563.11966L202.04855,565.86791L203.50351,569.58611L208.515,571.36439L213.68817,573.46598L214.65813,577.83084L215.14311,580.9024L214.17315,584.29729L212.39487,586.56054L210.77826,585.75224L209.32331,582.68067L206.57507,581.22573L204.7968,580.09409L203.98849,580.9024L205.44344,583.65065L205.6051,587.36885L204.47347,587.85383L202.53354,585.9139L200.43195,584.62061L200.91693,586.23722L202.21021,588.0155L201.40191,588.8238C201.40191,588.8238,200.59361,588.50048,200.10863,587.85383C199.62363,587.20719,198.00703,584.45895,198.00703,584.45895L197.03706,582.19569C197.03706,582.19569,196.71374,583.48898,196.06709,583.16565C195.42044,582.84233,194.7738,581.71071,194.7738,581.71071L196.55207,579.77077L195.09712,578.31582L195.09712,573.30432L194.28882,573.30432L193.48052,576.6992L192.34888,577.1842L191.37892,573.46598L190.73227,569.74777L189.92396,569.26279L190.24729,574.92094L190.24729,576.05256L188.79233,574.75928L185.23579,568.77781L183.13419,568.29283L182.48755,564.57462L180.87094,561.66472L179.25432,560.53308L179.25432,558.26983L181.35592,556.97654L180.87094,556.65322L178.28436,557.29986L174.88947,554.87495L172.30289,551.96504L167.45306,549.37846L163.41152,546.79188L164.70482,543.55866L164.70482,541.94205L162.92654,543.55866L160.01664,544.69029L156.29843,543.55866L150.64028,541.13375L145.14381,541.13375L144.49717,541.61873L138.03072,537.73885L135.92912,537.41553L133.18088,531.59573L129.62433,531.91905L126.06778,533.374L126.55277,537.90052L127.68439,534.99062L128.65437,535.31394L127.19941,539.67879L130.43263,536.93055L131.07928,538.54716L127.19941,542.91201L125.90612,542.58869L125.42114,540.64875L124.12785,539.84045L122.83456,540.97208L120.08632,539.19381L117.01475,541.29541L115.23649,543.397L111.8416,545.4986L107.15342,545.33693L106.66844,543.23534L110.38664,542.58869L110.38664,541.29541L108.12338,540.64875L109.09336,538.22384L111.35661,534.34397L111.35661,532.5657L111.51827,531.75739L115.88313,529.49413L116.85309,530.78742L119.60134,530.78742L118.30805,528.20085L114.58983,527.87752L109.57834,530.62576L107.15342,534.02064L105.37515,536.60723L104.24352,538.87049L100.04033,540.32543L96.96876,542.91201L96.645439,544.52863L98.908696,545.4986L99.717009,547.60018L96.96876,550.83341L90.502321,555.03661L82.742574,559.2398L80.640977,560.37142L75.306159,561.50306L69.971333,563.76631L71.749608,565.0596L70.294654,566.51455L69.809672,567.64618L67.061434,566.67621L63.828214,566.83787L63.019902,569.10113L62.049939,569.10113L62.37326,566.67621L58.816709,567.96951L55.90681,568.93947L52.511924,567.64618L49.602023,569.58611L46.368799,569.58611L44.267202,570.87941L42.65059,571.68771L40.548995,571.36439L37.962415,570.23276L35.699158,570.87941L34.729191,571.84937L33.112578,570.71775L33.112578,568.77781L36.184142,567.48452L42.488929,568.13117L46.853782,566.51455L48.955378,564.41296L51.86528,563.76631L53.643553,562.958L56.391794,563.11966L58.008406,564.41296L58.978369,564.08964L61.241626,561.3414L64.313196,560.37142L67.708076,559.72478L69.00137,559.40146L69.648012,559.88644L70.456324,559.88644L71.749608,556.16823L75.791141,554.71329L77.731077,550.99508L79.994336,546.46856L81.610951,545.01361L81.934272,542.42703L80.317657,543.72032L76.922764,544.36697L76.276122,541.94205L74.982838,541.61873L74.012865,542.58869L73.851205,545.4986L72.39625,545.33693L70.941306,539.51713L69.648012,540.81041L68.516388,540.32543L68.193068,538.3855L64.151535,538.54716L62.049939,539.67879L59.463361,539.35547L60.918305,537.90052L61.403286,535.31394L60.756645,533.374L62.211599,532.40404L63.504883,532.24238L62.858241,530.4641L62.858241,526.09925L61.888278,525.12928L61.079966,526.58423L54.936843,526.58423L53.481892,525.29094L52.835247,521.41108L50.733651,517.85452L50.733651,516.88456L52.835247,516.07625L52.996908,513.97465L54.128536,512.84303L53.320231,512.35805L52.026941,512.84303L50.895313,510.09479L51.86528,505.08328L56.391794,501.85007L58.978369,500.23345L60.918305,496.51525L63.666554,495.22195L66.253132,496.35359L66.576453,498.77851L69.00137,498.45517L72.23459,496.03026L73.851205,496.67691L74.821167,497.32355L76.437782,497.32355L78.701041,496.03026L79.509354,491.6654C79.509354,491.6654,79.832675,488.75551,80.479317,488.27052C81.125959,487.78554,81.44928,487.30056,81.44928,487.30056L80.317657,485.36062L77.731077,486.16893L74.497847,486.97723L72.557911,486.49225L69.00137,484.71397L63.989875,484.55231L60.433324,480.83411L60.918305,476.95424L61.564957,474.52932L59.463361,472.75105L57.523423,469.03283L58.008406,468.22453L64.798177,467.73955L66.899773,467.73955L67.869736,468.70951L68.516388,468.70951L68.354728,467.0929L72.23459,466.44626L74.821167,466.76958L76.276122,467.90121L74.821167,470.00281L74.336186,471.45775L77.084435,473.07437L82.095932,474.85264L83.874208,473.88268L81.610951,469.51783L80.640977,466.2846L81.610951,465.47629L78.21606,463.53636L77.731077,462.40472L78.21606,460.78812L77.407756,456.90825L74.497847,452.22007L72.072929,448.01688L74.982838,446.07694L78.21606,446.07694L79.994336,446.72359L84.197528,446.56193L87.915733,443.00539L89.047366,439.93382L92.765578,437.5089L94.382182,438.47887L97.130421,437.83222L100.84863,435.73062L101.98027,435.56896L102.95023,436.37728L107.47674,436.21561L110.22498,433.14405L111.35661,433.14405L114.91316,435.56896L116.85309,437.67056L116.36811,438.80219L117.01475,439.93382L118.63137,438.31721L122.51124,438.64053L122.83456,442.35873L124.7745,443.81369L131.88759,444.46033L138.19238,448.66352L139.64732,447.69356L144.82049,450.28014L146.92208,449.6335L148.86202,448.82518L153.71185,450.76512L158.07671,453.67502ZM42.973913,482.61238L45.075509,487.9472L44.913847,488.91717L42.003945,488.59384L40.225672,484.55231L38.447399,483.09737L36.02248,483.09737L35.86082,480.51078L37.639093,478.08586L38.770722,480.51078L40.225672,481.96573L42.973913,482.61238ZM40.387333,516.07625L44.105542,516.88456L47.823749,517.85452L48.632056,518.8245L47.015444,522.5427L43.94388,522.38104L40.548995,518.8245L40.387333,516.07625ZM19.694697,502.01173L20.826327,504.5983L21.957955,506.21492L20.826327,507.02322L18.72473,503.95166L18.72473,502.01173L19.694697,502.01173ZM5.9534943,575.0826L9.3483796,572.81934L12.743265,571.84937L15.329845,572.17269L15.814828,573.7893L17.754763,574.27429L19.694697,572.33436L19.371375,570.71775L22.119616,570.0711L25.029518,572.65768L23.897889,574.43595L19.533037,575.56758L16.784795,575.0826L13.066588,573.95097L8.7017347,575.40592L7.0851227,575.72924L5.9534943,575.0826ZM54.936843,570.55609L56.553455,572.49602L58.655048,570.87941L57.2001,569.58611L54.936843,570.55609ZM57.846745,573.62764L58.978369,571.36439L61.079966,571.68771L60.271663,573.62764L57.846745,573.62764ZM81.44928,571.68771L82.904234,573.46598L83.874208,572.33436L83.065895,570.39442L81.44928,571.68771ZM90.17899,559.2398L91.310623,565.0596L94.220522,565.86791L99.232017,562.958L103.59687,560.37142L101.98027,557.94651L102.46525,555.52159L100.36365,556.81488L97.453752,556.00657L99.070357,554.87495L101.01029,555.68325L104.89016,553.90497L105.37515,552.45003L102.95023,551.64172L103.75853,549.70178L101.01029,551.64172L96.322118,555.19827L91.472284,558.10817L90.17899,559.2398ZM132.53423,539.35547L134.95915,537.90052L133.98918,536.12224L132.21091,537.09221L132.53423,539.35547Z",
        AZ: "M144.9112,382.62909L142.28419,384.78742L141.96087,386.24237L142.44585,387.21233L161.36012,397.88192L173.48466,405.47996L188.19576,414.04797L205.00845,424.07092L217.29465,426.49583L242.24581,429.20074L259.50142,310.07367L175.76579,298.15642L172.6734,314.56888L171.06711,314.58419L169.35244,317.21335L166.83759,317.09903L165.58017,314.35556L162.8367,314.01263L161.9222,312.86952L161.00772,312.86952L160.09322,313.44108L158.14993,314.46988L158.03563,321.44286L157.80699,323.15753L157.23545,335.73177L155.7494,337.90368L155.17784,341.21871L157.92131,346.1341L159.17873,351.96398L159.97892,352.99278L161.00772,353.56434L160.8934,355.85056L159.29305,357.22229L155.86371,358.93696L153.92042,360.88026L152.43437,364.53821L151.86281,369.4536L149.00503,372.19707L146.94743,372.88294L147.08312,373.71282L146.62587,375.42749L147.08312,376.22767L150.74108,376.79921L150.16952,379.54269L148.68347,381.7146L144.9112,382.62909Z",
        AR: "M 593.825 343.053 L 589.845 343.77 L 584.733 343.136 L 585.153 341.534 L 588.133 338.967 L 589.077 335.311 L 587.248 332.339 L 508.83 334.853 L 510.43 341.712 L 510.43 349.942 L 511.802 360.916 L 512.031 398.753 L 514.317 400.697 L 517.289 399.325 L 520.033 400.468 L 520.713 407.041 L 576.334 405.901 L 577.48 403.81 L 577.193 400.261 L 575.368 397.289 L 576.966 395.804 L 575.368 393.292 L 576.052 390.782 L 577.42 385.177 L 579.938 383.114 L 579.252 380.83 L 582.91 375.458 L 585.654 374.089 L 585.54 372.596 L 585.195 370.77 L 588.052 365.172 L 590.455 363.915 L 590.898 360.516 L 589.913 358.294 L 587.336 355.515 L 588.275 354.795 L 590.929 352.374 L 591.479 350.355 L 592.759 346.308 L 593.825 343.053 Z",
        CA: "M144.69443,382.19813L148.63451,381.70951L150.12055,379.69807L150.66509,376.75698L147.11357,376.16686L146.5994,375.49864L147.0769,373.46633L146.91762,372.87666L148.84019,372.25707L151.88297,369.42439L152.46453,364.42929L153.84443,361.02718L155.78772,358.86092L159.30659,357.27125L160.96098,355.66642L161.02971,353.55758L160.03638,352.97757L159.01323,351.90484L157.85801,346.05639L155.17281,341.2263L155.73862,337.7213L153.31904,336.69199L84.257718,232.51359L103.15983,164.9121L36.079967,149.21414L34.573071,153.94738L34.41141,161.38376L29.238275,173.18497L26.166727,175.77154L25.843406,176.90316L24.06514,177.71147L22.610196,181.91464L21.801894,185.14785L24.550122,189.35102L26.166727,193.55419L27.29835,197.11072L26.975029,203.57714L25.196764,206.64869L24.550122,212.46847L23.580159,216.18666L25.358424,220.06651L28.106652,224.593L30.369899,229.44282L31.663182,233.48433L31.339862,236.71754L31.016541,237.20252L31.016541,239.3041L36.674657,245.60886L36.189676,248.03377L35.543034,250.29702L34.896392,252.23694L35.058052,260.48163L37.159638,264.19982L39.099564,266.78638L41.847792,267.27137L42.817755,270.01959L41.686132,273.57612L39.584545,275.19273L38.452922,275.19273L37.64462,279.07258L38.129601,281.98247L41.362811,286.3473L42.979415,291.6821L44.434359,296.37025L45.727643,299.4418L49.122513,305.26158L50.577457,307.84814L51.062439,310.75803L52.679043,311.72799L52.679043,314.1529L51.870741,316.09283L50.092476,323.20589L49.607494,325.14581L52.032402,327.89404L56.235574,328.37902L60.762067,330.15729L64.641918,332.25887L67.551807,332.25887L70.461695,335.33042L73.048262,340.18024L74.179886,342.44348L78.059737,344.54507L82.909551,345.35337L84.364495,347.45496L85.011137,350.68817L83.556193,351.33481L83.879514,352.30477L87.112725,353.11307L89.860953,353.27474L93.020842,351.58789L96.900696,355.79106L97.708998,358.05431L100.29557,362.25748L100.61889,365.49069L100.61889,374.867L101.10387,376.64526L111.12682,378.10021L130.84939,380.84843L144.69443,382.19813ZM56.559218,338.48145L57.852506,340.01723L57.690846,341.31052L54.457625,341.22969L53.891811,340.01723L53.245167,338.56228L56.559218,338.48145ZM58.49915,338.48145L59.711608,337.83481L63.268151,339.9364L66.339711,341.14885L65.450575,341.79551L60.924066,341.55301L59.307456,339.9364L58.49915,338.48145ZM79.191764,358.28493L80.970029,360.62901L81.778342,361.59898L83.314121,362.16479L83.879928,360.70984L82.909965,358.93157L80.242562,356.91081L79.191764,357.07247L79.191764,358.28493ZM77.736809,366.93379L79.515085,370.08618L80.727543,372.02612L79.272589,372.2686L77.979305,371.05615C77.979305,371.05615,77.251828,369.6012,77.251828,369.19704C77.251828,368.7929,77.251828,367.01462,77.251828,367.01462L77.736809,366.93379Z",
        CO: "M380.03242,320.96457L384.93566,234.63961L271.5471,221.99565L259.33328,309.93481L380.03242,320.96457Z",
        CT: "M 874.068 178.863 L 870.391 163.984 L 865.672 164.904 L 844.443 169.647 L 845.443 172.873 L 846.898 180.148 L 847.075 189.115 L 845.855 191.29 L 847.776 193.222 L 852.048 189.316 L 855.604 186.083 L 857.544 183.982 L 858.352 184.628 L 861.1 183.173 L 866.274 182.042 L 874.068 178.863 Z",
        DE: "M 825.626 228.279 L 825.994 226.132 L 826.369 224.441 L 824.746 224.839 L 823.131 225.306 L 820.925 227.071 L 822.645 232.114 L 824.908 237.772 L 827.01 247.471 L 828.626 253.776 L 833.638 253.615 L 839.78 252.434 L 837.516 245.048 L 836.546 245.533 L 832.989 243.108 L 831.211 238.42 L 829.271 234.863 L 826.124 231.993 L 825.26 229.895 L 825.626 228.279 Z",
        FL: "M759.8167,439.1428L762.08236,446.4614L765.81206,456.20366L771.14685,465.57996L774.86504,471.88472L779.71486,477.38118L783.75637,481.09937L785.37297,484.00926L784.24135,485.30254L783.43305,486.59582L786.34293,494.03221L789.25282,496.94209L791.83939,502.27689L795.39592,508.09667L799.92241,516.34135L801.2157,523.93939L801.70068,535.90227L802.34732,537.68053L802.024,541.0754L799.59909,542.36869L799.92241,544.30861L799.27577,546.24854L799.59909,548.67344L800.08407,550.61337L797.33585,553.84658L794.2643,555.30152L790.38445,555.46318L788.9295,557.07979L786.5046,558.04975L785.21131,557.56477L784.07969,556.59481L783.75637,553.68492L782.94806,550.29005L779.55319,545.11691L775.99666,542.85367L772.11681,542.53035L771.30851,543.82363L768.23696,539.4588L767.59032,535.90227L765.00375,531.86076L763.22549,530.72913L761.60888,532.83072L759.83062,532.5074L757.72903,527.49592L754.81914,523.61607L751.90925,518.28128L749.32269,515.20973L745.76616,511.49154L747.86774,509.06663L751.10095,503.57017L750.93929,501.95357L746.4128,500.98361L744.79619,501.63025L745.11952,502.27689L747.70608,503.24685L746.25114,507.77335L745.44284,508.25833L743.66457,504.21682L742.37129,499.367L742.04797,496.61877L743.50291,491.93062L743.50291,482.39265L740.43136,478.67446L739.13808,475.60291L733.96494,474.30963L732.02502,473.66299L730.40841,471.07642L727.01354,469.45981L725.88192,466.06494L723.13369,465.09498L720.70878,461.37679L716.50561,459.92185L713.59572,458.4669L711.00916,458.4669L706.96764,459.27521L706.80598,461.21513L707.61429,462.18509L707.1293,463.31672L704.05776,463.15506L700.33957,466.71159L696.78303,468.65151L692.90318,468.65151L689.66997,469.9448L689.34665,467.19657L687.73005,465.25664L684.82016,464.12502L683.20356,462.67007L675.12053,458.79022L667.52249,457.01196L663.15766,457.6586L657.17622,458.14358L651.19478,460.24517L647.71554,460.85813L647.47762,452.80838L644.89105,450.86846L643.11278,449.09019L643.4361,446.01863L653.62072,444.72535L679.16312,441.81546L685.95287,441.16882L691.38887,441.44909L693.97544,445.32895L695.43038,446.78389L703.52854,447.29911L714.34829,446.65247L735.86068,445.35918L741.3064,444.68481L746.41398,444.88932L746.84081,447.79921L749.07381,448.60751L749.30875,443.97751L747.78053,439.80456L749.08893,438.36473L754.64356,438.81948L759.8167,439.1428ZM772.36211,571.54788L774.78703,570.90124L776.08031,570.65875L777.53527,568.31466L779.87935,566.69805L781.17264,567.18304L782.87008,567.50636L783.27423,568.55715L779.79853,569.76961L775.59533,571.22456L773.25125,572.43702L772.36211,571.54788ZM785.86081,566.53639L787.07327,567.58719L789.82151,565.4856L795.15632,561.28241L798.87452,557.40254L801.38027,550.77444L802.35024,549.077L802.5119,545.68212L801.78442,546.1671L800.81446,548.99617L799.3595,553.6035L796.12628,558.8575L791.76144,563.06068L788.36656,565.00061L785.86081,566.53639Z",
        GA: "M672.29229,355.5518L672.29229,357.73422L672.45395,359.83582L673.10059,363.23069L676.49547,371.15206L678.92038,381.01337L680.37532,387.15648L681.99193,392.00629L683.44688,398.9577L685.54847,405.26247L688.13504,408.65735L688.62002,412.05222L690.55995,412.86052L690.72161,414.96212L688.94334,419.81193L688.45836,423.04515L688.2967,424.98508L689.91331,429.34992L690.23663,434.68472L689.42832,437.10963L690.07497,437.91794L691.52992,438.72624L691.73462,441.94433L693.96763,445.29386L696.21807,447.45591L704.13945,447.61757L714.9592,446.97093L736.47159,445.67765L741.91731,445.00328L746.49456,445.03101L746.65622,447.9409L749.24279,448.7492L749.56611,444.38436L747.9495,439.85786L749.08113,438.24126L754.90091,439.04956L759.87832,439.36734L759.1029,433.06855L761.36614,423.0456L762.82109,418.84242L762.3361,416.25586L765.67051,410.01156L765.16021,408.65988L763.2468,409.36446L760.66024,408.07116L760.01359,405.96957L758.72031,402.41304L756.45705,400.31145L753.87049,399.66481L752.25388,394.81499L749.32887,388.47999L745.1257,386.54006L743.0241,384.60013L741.73081,382.01356L739.62923,380.07363L737.36598,378.78034L735.10273,375.87045L732.03118,373.60721L727.50467,371.82893L727.01969,370.37399L724.59478,367.4641L724.1098,366.00915L720.71492,361.03867L717.19505,361.13784L713.44014,358.7817L712.02186,357.48842L711.69854,355.71015L712.56934,353.77023L714.79598,352.66009L714.16204,350.56287L672.29229,355.5518Z",
        HI: "M 233.088 519.309 L 235.027 515.753 L 237.291 515.43 L 237.614 516.238 L 235.512 519.309 L 233.088 519.309 Z M 243.272 515.591 L 249.415 518.178 L 251.517 517.855 L 253.134 513.975 L 252.487 510.58 L 248.284 510.095 L 244.242 511.873 L 243.272 515.591 Z M 273.988 525.614 L 277.706 531.111 L 280.131 530.787 L 281.263 530.302 L 282.718 531.596 L 286.436 531.434 L 287.406 529.979 L 284.496 528.201 L 282.556 524.483 L 280.454 520.926 L 274.634 523.836 L 273.988 525.614 Z M 294.195 534.506 L 295.489 532.566 L 300.177 533.536 L 300.824 533.051 L 306.967 533.697 L 306.643 534.991 L 304.057 536.446 L 299.692 536.122 L 294.195 534.506 Z M 299.53 539.679 L 301.47 543.559 L 304.542 542.427 L 304.865 540.81 L 303.248 538.709 L 299.53 538.386 L 299.53 539.679 Z M 306.482 538.547 L 308.745 535.637 L 313.433 538.062 L 317.798 539.194 L 322.163 541.942 L 322.163 543.882 L 318.606 545.66 L 313.756 546.63 L 311.332 545.175 L 306.482 538.547 Z M 323.133 554.067 L 324.749 552.773 L 328.144 554.39 L 335.742 557.947 L 339.137 560.048 L 340.754 562.473 L 342.694 566.838 L 346.735 569.424 L 346.412 570.718 L 342.532 573.951 L 338.329 575.406 L 336.874 574.759 L 333.802 576.538 L 331.378 579.771 L 329.114 582.681 L 327.336 582.519 L 323.779 579.932 L 323.456 575.406 L 324.103 572.981 L 322.486 567.323 L 320.385 565.545 L 320.223 562.958 L 322.486 561.988 L 324.588 558.916 L 325.073 557.947 L 323.456 556.168 L 323.133 554.067 Z",
        ID: "M 148.779 175.128 L 157.25 141.263 L 158.621 137.034 L 161.136 131.09 L 159.879 128.803 L 157.364 128.918 L 156.564 127.889 L 157.021 126.746 L 157.364 123.659 L 161.822 118.172 L 163.651 117.715 L 164.794 116.572 L 165.366 113.371 L 166.28 112.685 L 170.167 106.856 L 174.053 102.512 L 174.282 98.739 L 170.853 96.11 L 169.317 91.709 L 182.942 28.368 L 196.46 30.896 L 192.052 52.279 L 195.612 59.764 L 194.031 64.425 L 196.001 69.066 L 199.139 70.321 L 202.974 79.878 L 206.487 84.315 L 206.994 85.458 L 210.335 86.601 L 210.704 88.698 L 203.733 106.074 L 203.568 108.64 L 206.199 111.962 L 207.104 111.913 L 212.015 108.888 L 212.693 107.793 L 214.255 108.452 L 213.977 113.805 L 216.716 126.388 L 220.634 129.566 L 222.315 131.731 L 221.598 135.815 L 222.664 138.623 L 223.726 139.714 L 226.205 137.362 L 229.054 137.411 L 231.973 138.747 L 234.753 138.065 L 238.547 137.904 L 242.526 139.504 L 245.269 139.208 L 245.766 136.17 L 248.699 135.406 L 249.959 136.921 L 250.4 139.866 L 251.824 141.08 L 243.073 196.085 C 243.073 196.085 155.772 176.632 148.779 175.128 Z",
        IL: "M619.54145,300.34244L619.5727,297.11273L620.14009,292.46677L622.47262,289.55091L624.33927,285.47515L626.57229,281.47982L626.20079,276.22742L624.19558,272.68485L624.0992,269.33817L624.79403,264.06866L623.96862,256.89029L622.90228,241.11284L621.609,226.0955L620.68672,214.4563L620.41421,213.53491L619.60591,210.94834L618.31263,207.23015L616.69602,205.45188L615.24108,202.86532L615.00751,197.37636L569.21108,199.97461L569.4397,202.34656L571.72593,203.03243L572.64041,204.17554L573.09766,206.00452L576.98424,209.43386L577.67012,211.72009L576.98424,215.14943L575.15526,218.80739L574.4694,221.32223L572.18317,223.15122L570.35419,223.83709L565.09587,225.20882L564.41,227.0378L563.72413,229.09541L564.41,230.46715L566.23898,232.06751L566.01036,236.18271L564.18137,237.78307L563.49551,239.38343L563.49551,242.1269L561.66653,242.58414L560.06617,243.72726L559.83755,245.099L560.06617,247.1566L558.3515,248.47117L557.3227,251.27181L557.77994,254.92976L560.06617,262.24569L567.3821,269.79024L572.86903,273.4482L572.64041,277.79203L573.55491,279.16377L579.95634,279.62101L582.69981,280.99275L582.01395,284.65071L579.72772,290.5949L579.04185,293.79562L581.32807,297.6822L587.72951,302.94052L592.30197,303.62639L594.35956,308.65609L596.41717,311.8568L595.50268,314.82889L597.10304,318.9441L598.93202,321.00171L600.34605,320.12102L601.25371,318.04623L603.46679,316.29903L605.59826,315.68463L608.20079,316.86443L611.82778,318.24013L613.01673,317.9419L613.2166,315.68345L611.9293,313.27166L612.23352,310.89494L614.07192,309.54749L617.09446,308.7372L618.35536,308.27868L617.74275,306.8918L616.95138,304.53743L618.38398,303.55647L619.54145,300.34244Z",
        IN: "M619.56954,299.97132L619.63482,297.11274L620.11981,292.58623L622.38305,289.67635L624.16133,285.79648L626.74789,281.59331L626.26291,275.77352L624.48465,273.02529L624.16133,269.79208L624.96963,264.29561L624.48465,257.3442L623.19135,241.33979L621.89807,225.98203L620.9276,214.26201L623.99866,215.15152L625.45361,216.12148L626.58523,215.79816L628.68682,213.85824L631.51639,212.24125L636.60919,212.07921L658.59506,209.81595L664.17079,209.28279L665.67393,225.239L669.92528,262.08055L670.52374,267.85215L670.15224,270.1154L671.38022,271.91077L671.47661,273.28332L668.95532,274.88283L665.41589,276.43414L662.21376,276.98442L661.6153,281.85135L657.04061,285.16382L654.24419,289.17426L654.56751,291.55099L653.98617,293.08519L650.6597,293.08519L649.07417,291.46859L646.58086,292.73079L643.8979,294.23393L644.05957,297.28838L642.86578,297.54641L642.3979,296.52827L640.23102,295.02513L636.9807,296.36661L635.42939,299.37286L633.99155,298.56456L632.5366,296.96505L628.07226,297.45004L622.47943,298.42L619.56954,299.97132Z",
        IA: "M569.19154,199.5843L569.45592,202.3705L571.67964,202.94776L572.63358,204.17309L573.13359,206.02845L576.92643,209.3871L577.6123,211.7786L576.93796,215.20307L575.35565,218.43505L574.55631,221.17684L572.38356,222.77888L570.66805,223.35128L565.08903,225.21148L563.69757,229.06017L564.42621,230.43191L566.26672,232.1145L565.98379,236.15079L564.22064,237.68865L563.44923,239.33179L563.57645,242.10811L561.69014,242.56535L560.06469,243.67026L559.7859,245.02289L560.06469,247.13781L558.51367,248.25388L556.04314,245.1206L554.78057,242.67073L489.04475,245.18558L488.12672,245.35102L486.07432,240.83506L485.8457,234.20499L484.24534,230.08978L483.55948,224.83147L481.27325,221.1735L480.35877,216.37243L477.61529,208.82788L476.47218,203.45524L475.10044,201.28333L473.50008,198.53987L475.45406,193.69604L476.8258,187.98047L474.08233,185.92286L473.62508,183.17939L474.53958,180.66454L476.25425,180.66454L558.90825,179.39506L559.74251,183.57818L561.99469,185.13915L562.2514,186.56224L560.22186,189.95155L560.41227,193.15707L562.92713,196.95527L565.45392,198.24889L568.5332,198.75194L569.19154,199.5843Z",
        KS: "M507.88059,324.38028L495.26233,324.58471L449.17324,324.12748L404.61576,322.06985L379.98602,320.81244L383.87981,256.21747L405.96327,256.89264L446.2524,257.73404L490.55364,258.72162L495.64927,258.72162L497.83367,260.88402L499.85133,260.86264L501.49163,261.87511L501.42913,264.88434L499.60015,266.60971L499.2679,268.84188L501.11098,272.24421L504.06334,275.43927L506.39069,277.05373L507.69146,288.29455L507.88059,324.38028Z",
        KY: "M725.9944,295.2707L723.70108,297.67238L720.12289,301.66642L715.19834,307.13109L713.98257,308.84686L713.92007,310.94844L709.54021,313.11253L703.88209,316.50741L696.65022,318.30626L644.78233,323.20512L629.02277,324.98338L624.40157,325.49609L620.53322,325.46837L620.30627,329.68865L612.12686,329.83321L605.17545,330.47985L597.18797,330.41963L598.39575,329.09955L600.89529,327.5587L601.12392,324.35797L602.03841,322.52899L600.43159,319.99009L601.23342,318.08328L603.49668,316.30502L605.59826,315.65837L608.34649,316.95166L611.90303,318.24494L613.03466,317.92162L613.19632,315.65837L611.90303,313.23346L612.22635,310.97021L614.16628,309.51527L616.75286,308.86862L618.36946,308.22198L617.56116,306.44371L616.91452,304.50378L618.42114,303.50798C618.42442,303.47086,619.6751,299.98569,619.65943,299.85017L622.71265,298.37149L628.03244,297.40153L632.52648,296.91655L633.91892,298.54398L635.44719,299.41478L637.03796,296.30657L640.22504,295.02395L642.43013,296.50798L642.84069,297.50702L644.01421,297.24301L643.85254,294.29008L646.98341,292.54089L649.1315,291.46741L650.66086,293.12822L653.97901,293.08402L654.56634,291.51277L654.19883,289.24953L656.79936,285.25103L661.57591,281.81313L662.28186,276.97727L665.20688,276.52136L668.99834,274.87568L671.44166,273.16744L671.24333,271.60251L670.10088,270.14757L670.6667,267.15266L674.85155,267.03516L677.15146,266.28936L680.49885,267.71846L682.55296,272.0833L687.68525,272.09412L689.73626,274.30231L691.35171,274.15461L693.9534,272.87644L699.19046,273.44981L701.76538,273.66732L703.45296,271.61108L706.07091,270.1852L707.95269,269.4781L708.59933,272.31473L710.64276,273.37307L713.28552,275.45556L713.40299,281.1288L714.21129,282.70121L716.80101,284.25749L717.57265,286.552L721.73254,289.98894L723.53785,293.61218L725.9944,295.2707Z",
        LA: "M607.96706,459.16125L604.68245,455.99511L605.69236,450.49488L605.03101,449.6018L595.76934,450.60836L570.74102,451.06728L570.05683,448.6726L570.96964,440.2169L574.28552,434.27105L579.31688,425.58003L578.74281,423.18201L579.9994,422.50116L580.45833,420.54867L578.17209,418.49274L578.0603,416.55029L576.22964,412.20478L576.08259,405.86618L520.6088,406.79015L520.63737,416.36372L521.32324,425.73725L522.00911,429.62383L524.52396,433.73904L525.43845,438.76875L529.78228,444.25568L530.0109,447.4564L530.69677,448.14227L530.0109,456.60131L527.03881,461.631L528.63917,463.68861L527.95329,466.20345L527.26743,473.51938L525.89569,476.72009L526.01815,480.33654L530.70463,478.81639L542.81798,479.0234L553.16425,482.57993L559.63067,483.71156L563.34886,482.25661L566.58207,483.38824L569.81528,484.3582L570.62358,482.25661L567.39037,481.12499L564.8038,481.60997L562.05557,479.99337C562.05557,479.99337,562.21724,478.70008,562.86388,478.53842C563.51052,478.37676,565.93543,477.56846,565.93543,477.56846L567.71369,479.0234L569.49196,478.05344L572.72517,478.70008L574.18011,481.12499L574.50343,483.38824L579.02992,483.71156L580.80819,485.48982L579.99989,487.10643L578.7066,487.91473L580.32321,489.53133L588.72955,493.08786L592.28608,491.79458L593.25605,489.36967L595.84261,488.72303L597.62088,487.26809L598.91416,488.23805L599.72246,491.14794L597.45922,491.95624L598.10586,492.60288L601.50073,491.3096L603.76398,487.91473L604.57228,487.42975L602.47069,487.10643L603.27899,485.48982L603.11733,484.03488L605.21892,483.5499L606.35054,482.25661L606.99718,483.06491C606.99718,483.06491,606.83552,486.13646,607.64383,486.13646C608.45213,486.13646,611.847,486.78311,611.847,486.78311L615.88851,488.72303L616.85847,490.17798L619.76836,490.17798L620.89999,491.14794L623.16323,488.07639L623.16323,486.62144L621.86995,486.62144L618.47508,483.87322L612.6553,483.06491L609.42209,480.80167L610.55372,478.05344L612.81696,478.37676L612.97862,477.73012L611.20036,476.76016L611.20036,476.27517L614.43357,476.27517L616.21183,473.20363L614.91855,471.2637L614.59523,468.51547L613.14028,468.67713L611.20036,470.77872L610.55372,473.36529L607.48217,472.71864L606.5122,470.94038L608.29047,469.00045L610.1938,465.55485L609.1327,463.14258L607.96706,459.16125Z",
        ME: "M922.83976,78.830719L924.77969,80.932305L927.04294,84.650496L927.04294,86.590422L924.94135,91.278575L923.00142,91.925217L919.60655,94.996766L914.75674,100.49322C914.75674,100.49322,914.1101,100.49322,913.46346,100.49322C912.81682,100.49322,912.49349,98.391636,912.49349,98.391636L910.71523,98.553296L909.74527,100.00824L907.32036,101.46319L906.3504,102.91813L907.967,104.37307L907.48202,105.01972L906.99704,107.76794L905.05711,107.60628L905.05711,105.98968L904.73379,104.69639L903.27885,105.01972L901.50058,101.78651L899.399,103.07979L900.69228,104.53473L901.0156,105.66636L900.2073,106.95964L900.53062,110.03119L900.69228,111.64779L899.07568,114.23436L896.16579,114.71934L895.84247,117.62923L890.50767,120.70078L889.21439,121.18576L887.59778,119.73082L884.52623,123.28735L885.4962,126.52056L884.04125,127.81384L883.87959,132.17867L882.75631,138.43803L880.29406,137.28208L879.80907,134.21052L875.92922,133.07889L875.6059,130.33065L868.33115,106.88983L863.63257,92.250088L865.05311,92.131923L866.5669,92.541822L866.5669,89.955254L867.8752,85.458798L870.46177,80.770645L871.91672,76.729133L869.97679,74.304226L869.97679,68.322789L870.78509,67.352826L871.5934,64.604598L871.43174,63.149654L871.27007,58.29984L873.04834,53.450026L875.95823,44.5587L878.05981,40.355528L879.3531,40.355528L880.64638,40.517188L880.64638,41.648811L881.93967,43.912058L884.68789,44.5587L885.4962,43.750397L885.4962,42.780435L889.53771,39.870546L891.31597,38.092281L892.77092,38.253942L898.75235,40.678849L900.69228,41.648811L909.74527,71.555998L915.7267,71.555998L916.53501,73.495924L916.69667,78.345738L919.60655,80.608984L920.41486,80.608984L920.57652,80.124003L920.09154,78.99238L922.83976,78.830719ZM901.90801,108.97825L903.44379,107.44247L904.81791,108.49327L905.38372,110.91819L903.68628,111.80732L901.90801,108.97825ZM908.61694,103.07763L910.39521,104.93673C910.39521,104.93673,911.6885,105.01755,911.6885,104.69423C911.6885,104.37091,911.93099,102.67347,911.93099,102.67347L912.82013,101.86517L912.01182,100.08689L909.99106,100.81437L908.61694,103.07763Z",
        MD: "M 839.792 252.415 L 833.783 253.619 L 828.64 253.736 L 826.797 246.814 L 824.872 237.644 L 822.299 231.456 L 821.011 227.058 L 813.505 228.68 L 798.629 231.503 L 761.177 239.054 L 762.309 244.066 L 763.279 249.724 L 763.602 249.401 L 765.703 246.976 L 767.967 244.358 L 770.392 243.743 L 771.847 242.288 L 773.625 239.701 L 774.918 240.348 L 777.828 240.024 L 780.415 237.923 L 782.421 236.469 L 784.267 235.985 L 785.911 237.114 L 788.821 238.569 L 790.761 240.348 L 791.973 241.883 L 796.096 243.581 L 796.096 246.491 L 801.592 247.784 L 802.737 248.326 L 804.148 246.298 L 807.03 248.268 L 805.752 250.75 L 804.987 254.735 L 803.209 257.322 L 803.209 259.424 L 803.855 261.202 L 808.919 262.558 L 813.23 262.496 L 816.302 263.466 L 818.404 263.789 L 819.374 261.688 L 817.919 259.586 L 817.919 257.808 L 815.494 255.706 L 813.392 250.21 L 814.685 244.875 L 814.524 242.773 L 813.23 241.48 C 813.23 241.48 814.685 239.863 814.685 239.217 C 814.685 238.57 815.17 237.115 815.17 237.115 L 817.11 235.822 L 819.05 234.205 L 819.535 235.175 L 818.08 236.792 L 816.787 240.51 L 817.11 241.642 L 818.889 241.965 L 819.374 247.461 L 817.272 248.431 L 817.595 251.988 L 818.08 251.826 L 819.212 249.886 L 820.828 251.665 L 819.212 252.958 L 818.889 256.353 L 821.475 259.748 L 825.355 260.233 L 826.972 259.424 L 830.208 263.607 L 831.566 264.144 L 838.22 261.347 L 840.228 257.323 L 839.792 252.415 Z M 823.822 261.443 L 824.954 263.949 L 825.115 265.728 L 826.247 267.587 C 826.247 267.587 827.136 266.697 827.136 266.374 C 827.136 266.051 826.409 263.303 826.409 263.303 L 825.681 260.958 L 823.822 261.443 Z",
        MA: "M 899.623 173.254 L 901.795 172.568 L 902.253 170.853 L 903.281 170.968 L 904.31 173.254 L 903.053 173.711 L 899.166 173.826 L 899.623 173.254 Z M 890.25 174.054 L 892.536 171.425 L 894.137 171.425 L 895.966 172.911 L 893.565 173.94 L 891.393 174.969 L 890.25 174.054 Z M 855.451 152.066 L 873.098 147.425 L 875.361 146.779 L 877.275 143.983 L 881.012 142.32 L 883.901 146.732 L 881.476 151.906 L 881.153 153.361 L 883.093 155.947 L 884.224 155.139 L 886.003 155.139 L 888.266 157.725 L 892.146 163.707 L 895.702 164.192 L 897.966 163.222 L 899.744 161.444 L 898.935 158.695 L 896.834 157.079 L 895.379 157.887 L 894.409 156.594 L 894.894 156.109 L 896.996 155.947 L 898.774 156.755 L 900.714 159.18 L 901.684 162.09 L 902.007 164.515 L 897.804 165.97 L 893.924 167.91 L 890.044 172.436 L 888.104 173.891 L 888.104 172.921 L 890.529 171.466 L 891.014 169.688 L 890.206 166.617 L 887.296 168.072 L 886.488 169.527 L 886.973 171.79 L 884.906 172.79 L 882.159 168.263 L 878.764 163.898 L 876.694 162.086 L 870.16 163.962 L 865.068 165.013 L 844.393 169.605 L 843.725 164.837 L 844.372 154.248 L 848.661 153.359 L 855.451 152.066 Z",
        MI: "M 697.86 177.237 L 694.627 168.992 L 692.364 159.939 L 689.939 156.706 L 687.352 154.928 L 685.736 156.059 L 681.856 157.838 L 679.916 162.849 L 677.168 166.567 L 676.036 167.214 L 674.581 166.567 C 674.581 166.567 671.994 165.112 672.156 164.466 C 672.318 163.819 672.641 159.454 672.641 159.454 L 676.036 158.161 L 676.844 154.766 L 677.491 152.18 L 679.916 150.563 L 679.592 140.54 L 677.976 138.277 L 676.683 137.468 L 675.874 135.367 L 676.683 134.559 L 678.299 134.882 L 678.461 133.265 L 676.036 131.002 L 674.743 128.415 L 672.156 128.415 L 667.63 126.96 L 662.133 123.566 L 659.385 123.566 L 658.738 124.212 L 657.768 123.727 L 654.697 121.464 L 651.787 123.242 L 648.877 125.506 L 649.2 129.062 L 650.17 129.385 L 652.272 129.87 L 652.757 130.679 L 650.17 131.487 L 647.584 131.81 L 646.129 133.589 L 645.805 135.69 L 646.129 137.307 L 646.452 142.803 L 642.896 144.905 L 642.249 144.743 L 642.249 140.54 L 643.542 138.115 L 644.189 135.69 L 643.38 134.882 L 641.441 135.69 L 640.471 139.893 L 637.722 141.025 L 635.944 142.965 L 635.782 143.935 L 636.429 144.743 L 635.782 147.33 L 633.519 147.815 L 633.519 148.946 L 634.328 151.371 L 633.196 157.514 L 631.579 161.556 L 632.226 166.244 L 632.711 167.376 L 631.903 169.801 L 631.579 170.609 L 631.256 173.357 L 634.812 179.338 L 637.722 185.805 L 639.177 190.655 L 638.369 195.343 L 637.399 201.324 L 634.974 206.497 L 634.651 209.246 L 631.392 212.331 L 635.801 212.169 L 657.219 209.906 L 664.497 208.918 L 664.593 210.585 L 671.445 209.372 L 681.743 207.869 L 685.597 207.408 L 685.736 206.821 L 685.897 205.366 L 687.999 201.648 L 689.999 199.91 L 689.777 194.858 L 691.374 193.261 L 692.465 192.918 L 692.687 189.361 L 694.223 186.33 L 695.274 186.937 L 695.435 187.583 L 696.243 187.745 L 698.183 186.775 L 697.86 177.237 Z M 667.794 114.187 L 668.44 116.693 L 671.674 116.855 L 672.967 115.642 C 672.967 115.642 672.886 114.187 672.563 114.026 C 672.239 113.864 670.946 112.166 670.946 112.166 L 668.764 112.409 L 667.147 112.571 L 666.824 113.702 L 667.794 114.187 Z M 567.492 111.213 L 568.208 110.633 L 570.957 109.824 L 574.513 107.561 L 574.513 106.591 L 575.16 105.945 L 581.141 104.975 L 583.566 103.035 L 587.931 100.933 L 588.093 99.64 L 590.033 96.73 L 591.811 95.922 L 593.104 94.143 L 595.367 91.88 L 599.732 89.455 L 604.42 88.97 L 605.552 90.102 L 605.229 91.072 L 601.51 92.042 L 600.055 95.113 L 597.792 95.922 L 597.307 98.347 L 594.882 101.58 L 594.559 104.166 L 595.367 104.651 L 596.337 103.52 L 599.894 100.61 L 601.187 101.903 L 603.45 101.903 L 606.684 102.873 L 608.139 104.005 L 609.593 107.076 L 612.342 109.824 L 616.222 109.663 L 617.676 108.693 L 619.293 109.986 L 620.91 110.471 L 622.203 109.663 L 623.335 109.663 L 624.951 108.693 L 628.993 105.136 L 632.388 104.005 L 639.016 103.681 L 643.542 101.741 L 646.129 100.448 L 647.584 100.61 L 647.584 106.268 L 648.069 106.591 L 650.979 107.4 L 652.918 106.915 L 659.062 105.298 L 660.193 104.166 L 661.648 104.651 L 661.648 111.603 L 664.881 114.674 L 666.175 115.321 L 667.468 116.291 L 666.175 116.614 L 665.366 116.291 L 661.648 115.806 L 659.547 116.453 L 657.283 116.291 L 654.05 117.746 L 652.272 117.746 L 646.452 116.453 L 641.279 116.614 L 639.339 119.201 L 632.388 119.847 L 629.963 120.656 L 628.831 123.727 L 627.538 124.859 L 627.053 124.697 L 625.598 123.081 L 621.071 125.506 L 620.425 125.506 L 619.293 123.889 L 618.485 124.051 L 616.545 128.415 L 615.575 132.457 L 612.394 139.458 L 611.217 138.423 L 609.845 137.392 L 607.904 127.104 L 604.36 125.734 L 602.307 123.448 L 590.187 120.704 L 587.332 119.675 L 579.101 117.502 L 571.211 116.359 L 567.492 111.213 Z",
        MN: "M475.23781,128.82439L474.78056,120.36535L472.95158,113.04943L471.1226,99.560705L470.66535,89.729927L468.83637,86.300584L467.23601,81.270889L467.23601,70.982869L467.92187,67.096282L466.10094,61.644615L496.23336,61.679886L496.55668,53.435202L497.20332,53.273541L499.46657,53.758523L501.40649,54.566825L502.21479,60.063281L503.66974,66.206379L505.28634,67.822984L510.13616,67.822984L510.45948,69.277928L516.76424,69.601249L516.76424,71.702835L521.61405,71.702835L521.93737,70.409551L523.06899,69.277928L525.33224,68.631286L526.62552,69.601249L529.53541,69.601249L533.41526,72.187816L538.75006,74.612723L541.17497,75.097705L541.65995,74.127742L543.11489,73.64276L543.59987,76.552649L546.18644,77.845933L546.67142,77.360951L547.96471,77.522612L547.96471,79.624198L550.55127,80.594161L553.62282,80.594161L555.23943,79.785858L558.47264,76.552649L561.0592,76.067668L561.86751,77.845933L562.35249,79.139216L563.32245,79.139216L564.29241,78.330914L573.18374,78.007593L574.962,81.079142L575.60865,81.079142L576.32226,79.994863L580.76217,79.624198L580.15007,81.903657L576.21135,83.740782L566.96557,87.80191L562.19083,89.808807L559.11928,92.395375L556.69437,95.951905L554.43113,99.831756L552.65286,100.64006L548.12637,105.65153L546.83308,105.81319L542.5053,108.57031L540.04242,111.77542L539.8138,114.96681L539.90816,123.01016L538.53212,124.69891L533.45058,128.45888L531.2205,134.44129L534.09225,136.675L534.77214,139.90198L532.9169,143.14091L533.08769,146.88893L533.45655,153.61933L536.4848,156.62132L539.8138,156.62132L541.70491,159.75392L545.08408,160.25719L548.94324,165.92866L556.03053,170.04541L558.17368,172.92053L558.84483,179.36004L477.63333,180.50483L477.29541,144.82798L476.83817,141.85589L472.72296,138.42655L471.57984,136.59757L471.57984,134.9972L473.63744,133.39685L475.00918,132.02511L475.23781,128.82439Z",
        MS: "M631.55882,459.34458L631.30456,460.60073L626.13142,460.60073L624.67648,459.79243L622.57489,459.46911L615.78515,461.40903L614.00689,460.60073L611.42032,464.8039L610.31778,465.58192L609.19395,463.09394L608.05083,459.20735L604.6215,456.00664L605.7646,450.46209L605.07874,449.5476L603.24976,449.77622L595.33184,450.64959L570.78534,451.02296L570.0156,448.7976L570.88897,440.4208L574.00581,434.74799L579.23288,425.60309L578.78714,423.17049L580.024,422.51424L580.45987,420.59477L578.14239,418.51579L578.02727,416.37431L576.19155,412.25322L576.08255,406.29045L577.41008,403.80948L577.18678,400.39373L575.41729,397.31114L576.94371,395.82893L575.3731,393.32939L575.83035,391.67718L577.40775,385.15081L579.8937,383.11446L579.25203,380.74749L582.91,375.44496L585.74186,374.08854L585.52089,372.41338L585.23276,370.73228L588.10882,365.16461L590.45454,363.9331L590.60617,363.04009L627.94965,359.15892L628.13451,365.44225L628.29617,382.09331L627.48787,413.13216L627.32621,427.19665L630.07445,445.94929L631.55882,459.34458Z",
        MO: "M 558.44 248.113 L 555.92 245.026 L 554.777 242.74 L 490.42 245.14 L 488.134 245.255 L 489.391 247.769 L 489.163 250.056 L 491.677 253.942 L 494.764 258.057 L 497.85 260.801 L 500.011 261.029 L 501.508 261.944 L 501.508 264.916 L 499.679 266.516 L 499.222 268.803 L 501.28 272.232 L 503.794 275.204 L 506.309 277.033 L 507.681 288.693 L 507.995 324.765 L 508.224 329.452 L 508.681 334.835 L 531.114 333.968 L 554.32 333.283 L 575.125 332.482 L 586.779 332.251 L 588.949 335.677 L 588.265 338.985 L 585.177 341.388 L 584.605 343.225 L 589.983 343.682 L 593.878 342.997 L 595.596 337.503 L 597.135 330.447 L 598.357 329.02 L 600.941 327.604 L 600.993 324.554 L 602.009 322.617 L 600.314 320.074 L 598.983 321.058 L 596.991 318.831 L 595.706 314.072 L 596.507 311.553 L 594.563 308.126 L 592.732 303.55 L 587.933 302.751 L 580.964 297.152 L 579.245 293.038 L 580.044 289.838 L 582.104 283.78 L 582.562 280.916 L 580.613 279.885 L 573.758 279.087 L 572.73 277.375 L 572.618 273.145 L 567.131 269.714 L 560.156 261.942 L 557.87 254.626 L 557.639 250.401 L 558.44 248.113 Z",
        MT: "M369.20952,56.969133L338.5352,54.1613L309.27465,50.60477L280.01411,46.563258L247.68201,41.228463L229.25272,37.833593L196.52907,30.900857L192.05005,52.248389L195.47939,59.79293L194.10765,64.365382L195.93663,68.937833L199.13736,70.309572L203.75818,81.079025L206.45328,84.255548L206.91052,85.398666L210.33986,86.541784L210.79711,88.599377L203.70981,106.20333L203.70981,108.71818L206.22466,111.91889L207.13914,111.91889L211.94021,108.9468L212.62609,107.80368L214.22645,108.48955L213.99782,113.74787L216.7413,126.32212L219.71339,128.83696L220.62787,129.52283L222.45686,131.80905L221.99961,135.2384L222.68548,138.66773L223.8286,139.58223L226.11482,137.296L228.85829,137.296L232.05901,138.89636L234.57386,137.98187L238.68907,137.98187L242.34702,139.58223L245.0905,139.12498L245.54774,136.15288L248.51983,135.46702L249.89157,136.83876L250.34882,140.03947L251.77469,140.87411L253.66164,129.83937L360.40731,143.26829L369.20952,56.969133Z",
        NE: "M486.09787,240.70058L489.32848,247.72049L489.19985,250.02301L492.65907,255.51689L495.37836,258.66923L490.32888,258.66923L446.84632,257.73055L406.05946,256.84025L383.80724,256.05638L384.88001,234.72853L352.56177,231.80828L356.9056,187.79842L372.45193,188.82723L392.57072,189.97033L410.40329,191.11345L434.18005,192.25656L444.92531,191.79932L446.98291,194.08554L451.78399,197.05764L452.9271,197.97213L457.27093,196.60039L461.15752,196.14315L463.90099,195.91452L465.72997,197.28626L469.7874,198.88662L472.75949,200.48698L473.21674,202.08734L474.13123,204.14494L475.96021,204.14494L476.75819,204.19111L477.65242,208.87293L480.57268,217.34085L481.14521,221.09756L483.6687,224.87181L484.23829,229.98595L485.84553,234.22632L486.09787,240.70058Z",
        NV: "M196.39273,185.57552L172.75382,314.39827L170.92158,314.74742L169.34882,317.1536L166.97588,317.16429L165.50393,314.42082L162.88546,314.0424L162.11454,312.93477L161.07671,312.88073L158.29834,314.52502L157.98808,321.3105L157.62599,327.08767L157.27742,335.68048L155.83032,337.76964L153.3914,336.69561L84.311514,232.49442L103.30063,164.90951L196.39273,185.57552Z",
        NH: "M 880.799 142.425 L 881.668 141.348 L 882.758 138.057 L 880.215 137.144 L 879.73 134.072 L 875.85 132.941 L 875.527 130.192 L 868.252 106.752 L 863.651 92.209 L 862.754 92.203 L 862.107 93.82 L 861.46 93.335 L 860.491 92.365 L 859.036 94.305 L 858.987 99.337 L 859.299 105.004 L 861.239 107.753 L 861.239 111.794 L 857.52 116.857 L 854.934 117.989 L 854.934 119.12 L 856.066 120.898 L 856.066 129.466 L 855.257 138.681 L 855.096 143.531 L 856.066 144.824 L 855.904 149.351 L 855.419 151.129 L 856.388 151.838 L 873.175 147.414 L 875.35 146.811 L 877.194 144.038 L 880.799 142.425 Z",
        NJ: "M 829.679 188.46 L 827.357 191.194 L 827.357 194.266 L 825.417 197.338 L 825.255 198.954 L 826.549 200.247 L 826.387 202.672 L 824.124 203.804 L 824.932 206.552 L 825.094 207.684 L 827.842 208.007 L 828.812 210.594 L 832.368 213.019 L 834.793 214.635 L 834.793 215.444 L 831.81 218.14 L 830.193 220.403 L 828.738 223.152 L 826.475 224.445 L 826.013 226.047 L 825.77 227.26 L 825.161 229.867 L 826.253 232.111 L 829.487 235.021 L 834.336 237.284 L 838.378 237.931 L 838.54 239.385 L 837.731 240.355 L 838.055 243.104 L 838.863 243.104 L 840.964 240.679 L 841.773 235.829 L 844.521 231.787 L 847.593 225.321 L 848.724 219.825 L 848.077 218.693 L 847.916 209.317 L 846.299 205.922 L 845.168 206.73 L 842.419 207.053 L 841.934 206.568 L 843.066 205.598 L 845.168 203.659 L 845.231 202.565 L 844.846 199.131 L 845.42 196.383 L 845.302 194.414 L 842.495 192.663 L 837.402 191.487 L 833.265 190.106 L 829.679 188.46 Z",
        NM: "M288.15255,424.01315L287.37714,419.26505L296.02092,419.79045L326.19268,422.73635L353.46084,424.42624L355.67611,405.71877L359.53347,349.8428L361.27115,330.45357L362.84285,330.58213L363.66825,319.41874L259.6638,308.78279L242.16645,429.2176L257.62712,431.20675L258.9204,421.1838L288.15255,424.01315Z",
        NY: "M830.37944,188.7456L829.24781,187.77564L826.66123,187.61398L824.39799,185.67406L822.76738,179.54493L819.30892,179.63547L816.86521,176.92727L797.47989,181.30921L754.47811,190.0389L746.94846,191.26689L746.2103,184.79855L747.6384,183.67317L748.93168,182.54155L749.90165,180.92494L751.67991,179.79332L753.61984,178.01505L754.10482,176.39845L756.2064,173.65022L757.33803,172.68026L757.17637,171.71029L755.88308,168.63875L754.10482,168.47709L752.16489,162.33399L755.07478,160.55572L759.43961,159.10078L763.48113,157.80749L766.71434,157.32251L773.01909,157.16085L774.95902,158.45414L776.57562,158.6158L778.67721,157.32251L781.26378,156.19089L786.43691,155.70591L788.5385,153.92764L790.31676,150.69443L791.93337,148.75451L794.03495,148.75451L795.97488,147.62288L796.13654,145.35964L794.6816,143.25805L794.35828,141.80311L795.4899,139.70152L795.4899,138.24658L793.71163,138.24658L791.93337,137.43828L791.12507,136.30665L790.96341,133.72008L796.78318,128.22363L797.42982,127.41533L798.88477,124.50544L801.79466,119.97894L804.54289,116.26075L806.64447,113.83585L809.05957,112.01024L812.14093,110.7643L817.63738,109.47101L820.87059,109.63267L825.39709,108.17773L832.96228,106.10656L833.48207,111.08623L835.90699,117.55267L836.71529,122.72582L835.74533,126.60568L838.3319,131.13218L839.1402,133.23377L838.3319,136.14367L841.2418,137.43695L841.88844,137.76027L844.96,148.75321L844.42371,153.81288L843.93873,164.64415L844.74703,170.14062L845.55533,173.69716L847.01028,180.9719L847.01028,189.05494L845.87865,191.31819L847.71798,193.31098L848.51453,194.9894L846.57461,196.76767L846.89793,198.06095L848.19121,197.73763L849.64616,196.44435L851.9094,193.85778L853.04103,193.21114L854.65763,193.85778L856.92088,194.01944L864.84224,190.13959L867.75213,187.39136L869.04541,185.93642L873.24858,187.55302L869.85371,191.10955L865.97386,194.01944L858.8608,199.35423L856.27424,200.3242L850.45446,202.26412L846.41295,203.39575L845.23821,202.86282L844.99419,199.17429L845.47917,196.42605L845.31751,194.32447L842.504,192.62547L837.9775,191.6555L834.09764,190.52388L830.37944,188.7456Z",
        NC: "M834.98153,294.31554L837.06653,299.23289L840.62306,305.69931L843.04796,308.12422L843.6946,310.38747L841.2697,310.54913L842.078,311.19577L841.75468,315.39894L839.16811,316.69222L838.52147,318.79381L837.22819,321.7037L833.50999,323.3203L831.08509,322.99698L829.63014,322.83532L828.01354,321.54204L828.33686,322.83532L828.33686,323.80529L830.27679,323.80529L831.08509,325.09857L829.14516,331.40333L833.34833,331.40333L833.99498,333.01993L836.25822,330.75669L837.55151,330.2717L835.61158,333.82823L832.54003,338.67805L831.24675,338.67805L830.11512,338.19307L827.3669,338.83971L822.19376,341.26462L815.72734,346.59941L812.33247,351.28756L810.39255,357.75398L809.90757,360.17889L805.21941,360.66387L799.76628,362.00053L789.81987,353.798L777.21033,346.19995L774.30044,345.39164L761.69091,346.84659L757.41445,347.59674L755.79785,344.36352L752.82749,342.24682L736.3381,342.7318L729.06336,343.5401L720.01037,348.06661L713.86726,350.65317L692.68971,353.23975L693.1898,349.18542L694.96807,347.73048L697.71631,347.08383L698.36295,343.36563L702.56613,340.61741L706.44598,339.16245L710.64917,335.60592L715.014,333.50433L715.66064,330.43277L719.5405,326.55292L720.18714,326.39126C720.18714,326.39126,720.18714,327.52289,720.99545,327.52289C721.80375,327.52289,722.93538,327.84621,722.93538,327.84621L725.19863,324.28967L727.30022,323.64302L729.56346,323.96635L731.18008,320.40982L734.08997,317.82324L734.57495,315.72165L734.76245,312.07346L739.03895,312.05094L746.23754,311.19515L761.99477,308.94272L777.13081,306.85615L798.77129,302.1368L818.75461,297.87823L829.93155,295.47242L834.98153,294.31554ZM839.25199,327.52211L841.83857,325.01636L844.99095,322.42978L846.52673,321.78314L846.68839,319.76238L846.04175,313.61926L844.5868,311.27518L843.94015,309.41608L844.66763,309.17358L847.41587,314.67006L847.82002,319.11573L847.65836,322.51062L844.26348,324.04639L841.43441,326.47131L840.30279,327.68377L839.25199,327.52211Z",
        ND: "M475.30528,128.91846L474.69037,120.48479L473.01342,113.66887L471.12193,100.64465L470.66469,89.657624L468.92523,86.580482L467.16862,81.386086L467.19987,70.941816L467.82323,67.117729L465.98913,61.649968L437.34688,61.085941L418.75593,60.439299L392.24361,59.146015L369.29727,57.012146L362.30403,124.18898L417.23627,127.53263L475.30528,128.91846Z",
        OH: "M735.32497,193.32832L729.23143,197.38167L725.35158,199.64492L721.95671,203.36311L717.9152,207.24296L714.68199,208.05126L711.7721,208.53624L706.27564,211.12281L704.17406,211.28447L700.77919,208.21292L695.60605,208.85957L693.01949,207.40462L690.63842,206.05379L685.74585,206.7572L675.56123,208.37381L664.35436,210.55854L665.64765,225.18882L667.42592,238.92999L670.01248,262.37079L670.5783,267.20196L674.70065,267.07294L677.12556,266.26463L680.48936,267.76777L682.55985,272.1326L687.69879,272.1155L689.59053,274.2342L691.3517,274.1689L693.89009,272.82744L696.39426,273.19894L701.81554,273.68162L703.54251,271.54894L705.88816,270.25566L707.95865,269.57481L708.60529,272.32305L710.38357,273.29301L713.85926,275.63708L716.04168,275.55626L717.3748,275.06378L717.55951,272.30225L719.14487,270.84729L719.24403,266.05457C719.24403,266.05457,720.26799,261.94551,720.26799,261.94551L721.56726,261.34423L722.88861,262.49197L723.42676,264.18899L725.14589,263.15157L725.58487,261.69082L724.46818,259.78776L724.53447,257.47333L725.28347,256.40102L727.43623,253.09454L728.48645,251.5512L730.58804,252.03618L732.85129,250.41957L735.92284,247.0247L738.69433,242.94597L739.01466,237.89046L739.49964,232.87897L739.32286,227.57209L738.36802,224.67731L738.71926,223.48753L740.52365,221.73742L738.23486,212.69009L735.32497,193.32832Z",
        OK: "M380.34313,320.82146L363.65895,319.54815L362.77873,330.50058L383.24411,331.65746L415.29966,332.96106L412.96506,357.37971L412.50781,375.21228L412.73644,376.81264L417.08027,380.4706L419.13787,381.61371L419.82374,381.38509L420.50961,379.32748L421.88135,381.15647L423.93895,381.15647L423.93895,379.78473L426.68242,381.15647L426.22518,385.04305L430.34039,385.27167L432.85523,386.41479L436.97044,387.10066L439.48529,388.92964L441.77152,386.87204L445.20086,387.5579L447.71571,390.98724L448.63019,390.98724L448.63019,393.27347L450.91642,393.95933L453.20264,391.67311L455.03163,392.35897L457.54647,392.35897L458.46097,394.87383L464.76204,396.9528L466.13378,396.26694L467.96276,392.15173L469.10587,392.15173L470.24899,394.20933L474.3642,394.8952L478.02215,396.26694L480.99425,397.18143L482.82324,396.26694L483.5091,393.75209L487.85293,393.75209L489.91053,394.66658L492.654,392.60897L493.79712,392.60897L494.48299,394.20933L498.59819,394.20933L500.19855,392.15173L502.02754,392.60897L504.08514,395.12383L507.28585,396.9528L510.48658,397.8673L512.42766,398.98623L512.03856,361.76922L510.66681,350.79524L510.50635,341.9229L509.06646,335.38517L508.28826,328.20553L508.22012,324.38931L496.08328,324.70805L449.67324,324.25081L404.63433,322.19319L380.34313,320.82146Z",
        OR: "M148.72184,175.53153L157.57154,140.73002L158.62233,136.5005L160.9767,130.87727L160.36119,129.71439L157.84633,129.66821L156.56473,127.99751L157.02197,126.53344L157.52538,123.28656L161.98353,117.79961L163.81251,116.70046L164.95562,115.55735L166.44166,111.99172L170.48872,106.32232L174.05435,102.45992L174.28297,99.008606L171.01411,96.539924L169.2307,91.897299L156.56693,88.285329L141.47784,84.741679L126.04582,84.855985L125.58858,83.484256L120.10163,85.54186L115.64349,84.970301L113.24295,83.36994L111.98553,84.055815L107.29877,83.827183L105.5841,82.455454L100.32578,80.39785L99.525598,80.512166L95.181768,79.02611L93.238477,80.855093L87.065665,80.512166L81.121482,76.396957L81.807347,75.596777L82.035968,67.823604L79.749743,63.937027L75.634535,63.365468L74.94867,60.850621L72.594738,60.384056L66.796213,62.44284L64.532966,68.909258L61.299757,78.932207L58.066547,85.398626L53.055073,99.463087L46.588654,113.04256L38.505631,125.65208L36.565705,128.56197L35.757403,137.12997L36.143498,149.2102L148.72184,175.53153Z",
        PA: "M825.1237,224.69205L826.43212,224.42105L828.76165,223.1678L829.97353,220.68473L831.59014,218.42148L834.82335,215.34992L834.82335,214.54162L832.39844,212.92502L828.8419,210.5001L827.87194,207.91353L825.1237,207.59021L824.96204,206.45858L824.15374,203.71035L826.417,202.57873L826.57866,200.15381L825.28536,198.86052L825.44702,197.24391L827.38696,194.17236L827.38696,191.1008L830.08459,188.45492L829.16431,187.77994L826.64023,187.58703L824.34574,185.64711L822.79582,179.53105L819.29124,179.63157L816.83601,176.92824L798.74502,181.12601L755.74324,189.8557L746.85189,191.31064L746.23122,184.78925L740.86869,189.8569L739.5754,190.34188L735.37311,193.35077L738.28387,212.48822L740.76553,222.21758L744.33733,241.47907L747.60664,240.84139L759.55022,239.33892L797.47685,231.67372L812.35306,228.8504L820.65341,227.22804L820.92052,226.98951L823.02212,225.37289L825.1237,224.69205Z",
        RI: "M 874.07 178.895 L 870.374 163.939 L 876.644 162.094 L 878.835 164.021 L 882.141 168.342 L 884.829 172.744 L 881.83 174.369 L 880.536 174.207 L 879.405 175.985 L 876.98 177.925 L 874.07 178.895 Z",
        SC: "M764.94328,408.16488L763.16622,409.13438L760.57965,407.84109L759.93301,405.7395L758.63973,402.18297L756.37647,400.08137L753.7899,399.43473L752.1733,394.58492L749.42506,388.60347L745.22189,386.66353L743.12029,384.72361L741.82701,382.13704L739.72542,380.1971L737.46217,378.90382L735.19892,375.99393L732.12737,373.73069L727.60086,371.95241L727.11588,370.49747L724.69098,367.58758L724.20599,366.13262L720.81111,360.95949L717.41624,361.12115L713.37472,358.69623L712.08144,357.40295L711.75812,355.62468L712.56642,353.68476L714.82967,352.71478L714.31885,350.4257L720.08695,348.08913L729.20245,343.50013L736.97718,342.69182L753.09158,342.26934L755.72983,344.14677L757.40893,347.50499L761.71128,346.89501L774.32081,345.44005L777.2307,346.24836L789.84024,353.84642L799.94832,361.9681L794.52715,367.42644L791.94058,373.56954L791.4556,379.8743L789.839,380.6826L788.70737,383.43083L786.28247,384.07747L784.18088,387.634L781.43265,390.38223L779.16941,393.7771L777.5528,394.5854L773.99627,397.98027L771.08638,398.14193L772.05635,401.37514L767.04487,406.8716L764.94328,408.16488Z",
        SD: "M476.44687,204.02465L476.39942,203.44378L473.50371,198.59834L475.36394,193.88623L476.85667,187.99969L474.0748,185.91998L473.68964,183.17652L474.48204,180.62217L477.67055,180.63738L477.54747,175.63124L477.21417,145.45699L476.59644,141.68941L472.52412,138.35848L471.54149,136.68152L471.47899,135.0727L473.50111,133.5433L475.03333,131.87763L475.27829,129.22084L417.0212,127.62049L362.22199,124.1714L356.89672,187.86259L371.48699,188.76639L391.43684,189.972L409.17989,190.90059L432.95665,192.20417L444.93935,191.77953L446.90565,194.02471L452.10029,197.27806L452.86418,198.00081L457.40562,196.548L463.94616,195.93309L465.62146,197.26936L469.82597,198.86549L472.77103,200.50132L473.17001,201.98513L474.2095,204.22601L476.44687,204.02465Z",
        TN: "M 696.678 318.254 L 644.785 323.266 L 629.025 325.044 L 624.404 325.557 L 620.536 325.529 L 620.315 329.63 L 612.129 329.894 L 605.178 330.54 L 597.087 330.416 L 595.673 337.489 L 593.903 342.976 L 592.823 346.226 L 591.731 349.717 L 590.978 352.356 L 587.423 355.484 L 589.934 358.299 L 590.911 360.483 L 590.619 362.987 L 692.645 353.255 L 693.049 349.3 L 694.859 347.809 L 697.694 347.06 L 698.366 343.343 L 702.464 340.638 L 706.511 339.144 L 710.595 335.573 L 715.031 333.548 L 715.552 330.481 L 719.617 326.496 L 720.167 326.382 C 720.167 326.382 720.199 327.513 721.007 327.513 C 721.815 327.513 722.947 327.868 722.947 327.868 L 725.21 324.28 L 727.28 323.633 L 729.556 323.928 L 731.154 320.396 L 734.109 317.752 L 734.531 315.813 L 734.84 312.101 L 732.693 311.902 L 730.092 313.93 L 723.098 313.959 L 704.739 316.346 L 696.678 318.254 Z",
        TX: "M361.46423,330.57358L384.15502,331.65952L415.24771,332.80264L412.9131,356.25844L412.61634,374.41196L412.68448,376.49375L417.02831,380.31218L419.01496,381.75934L420.19917,381.19965L420.57254,379.38193L421.71286,381.18555L423.8245,381.22948L423.82183,379.78239L425.49177,380.74966L426.63047,381.15853L426.2712,385.12618L430.35939,385.21969L433.28471,386.41686L437.23945,386.94224L439.62083,389.02122L441.74493,386.94505L445.46987,387.55996L447.69078,390.7849L448.76574,391.10586L448.60527,393.07113L450.81888,393.86342L453.14903,391.80862L455.28205,392.42354L457.51143,392.45902L458.4445,394.89446L464.77259,397.00891L466.36564,396.24198L467.85511,392.06427L468.19583,392.06427L469.10232,392.14591L470.33137,394.21454L474.26125,394.87982L477.59825,396.0027L481.02388,397.19867L482.86446,396.22367L483.57822,393.70883L488.03144,393.75303L489.84018,394.68381L492.63943,392.5773L493.74307,392.6215L494.59411,394.22657L498.64883,394.22657L500.1677,392.19795L502.03507,392.60519L503.9811,395.00847L507.50167,397.05262L510.36043,397.86243L511.87405,398.66227L514.32075,400.65959L517.36379,399.3318L520.05488,400.47068L520.61869,406.57662L520.57893,416.27879L521.26479,425.8128L521.96697,429.41791L524.6423,433.83777L525.54048,438.7885L529.75643,444.32652L529.95245,447.47146L530.69882,448.2573L529.96875,456.63737L527.09665,461.64387L528.62962,463.79674L527.99954,466.13482L527.32997,473.53914L525.82565,476.87714L526.12053,480.37949L520.45565,481.96467L510.59436,486.49117L509.6244,488.43109L507.03783,490.37102L504.93625,491.82596L503.64296,492.63426L497.98485,497.96906L495.23662,500.07065L489.90182,503.30385L484.24371,505.72876L477.93895,509.12363L476.16069,510.57858L470.34091,514.13511L466.94604,514.78175L463.06619,520.2782L459.02468,520.60153L458.05471,522.54145L460.31796,524.48138L458.86301,529.97783L457.56973,534.50433L456.43811,538.38418L455.62981,542.91067L456.43811,545.33558L458.21637,552.28698L459.18634,558.43007L460.9646,561.1783L459.99464,562.63325L456.92309,564.57317L451.26497,560.69332L445.76852,559.5617L444.47523,560.04668L441.24202,559.40004L437.03885,556.32849L431.86572,555.19687L424.26767,551.802L422.16609,547.92214L420.8728,541.45573L417.6396,539.5158L416.99295,537.25255L417.6396,536.60591L417.96292,533.21104L416.66963,532.5644L416.02299,531.59444L417.31627,527.2296L415.69967,524.96636L412.46646,523.67307L409.07159,519.30824L405.51506,512.68016L401.31189,510.09359L401.47355,508.15367L396.13875,495.86747L395.33045,491.6643L393.55219,489.72438L393.39053,488.26943L387.40909,482.93464L384.82252,479.86309L384.82252,478.73146L382.23595,476.62988L375.44621,475.49825L368.00983,474.85161L364.93828,472.58837L360.41179,474.36663L356.85526,475.82158L354.59201,479.05478L353.62205,482.77298L349.25722,488.91607L346.83231,491.34098L344.24574,490.37102L342.46748,489.23939L340.52755,488.59275L336.6477,486.32951L336.6477,485.68286L334.86944,483.74294L329.6963,481.64135L322.25992,473.88165L319.99667,469.1935L319.99667,461.11047L316.76346,454.64405L316.27848,451.89583L314.66188,450.92586L313.53025,448.82428L308.51878,446.72269L307.2255,445.10609L300.11243,437.18472L298.81915,433.95151L294.13099,431.68826L292.67604,427.32339L290.08945,424.41352L288.14954,423.92856L287.50031,419.25092L295.50218,419.93681L324.53717,422.68026L353.57225,424.28062L355.80578,404.8188L359.69233,349.26378L361.29272,330.51646L362.66446,330.54504M461.69381,560.20778L461.128,553.0947L458.37976,545.90078L457.81394,538.86853L459.34972,530.62382L462.66378,523.75323L466.13948,518.33758L469.29188,514.78103L469.93852,515.02353L465.16952,521.65163L460.80468,528.19891L458.78391,534.827L458.46059,540.00016L459.34972,546.14328L461.9363,553.3372L462.42128,558.51034L462.58294,559.9653L461.69381,560.20778Z",
        UT: "M 259.498 310.105 L 175.749 298.233 L 196.337 185.641 L 243.071 196.11 L 241.632 205.067 L 239.584 218.202 L 247.129 219.168 L 263.535 220.973 L 271.746 221.829 L 259.498 310.105 Z",
        VT: "M 844.484 154.058 L 844.801 148.712 L 841.91 137.928 L 841.264 137.605 L 838.354 136.312 L 839.162 133.402 L 838.354 131.3 L 835.654 126.66 L 836.624 122.78 L 835.815 117.607 L 833.39 111.141 L 832.585 106.218 L 859.004 99.486 L 859.313 105.008 L 861.229 107.751 L 861.229 111.792 L 857.522 116.85 L 854.935 117.993 L 854.924 119.113 L 856.234 120.633 L 855.923 128.731 L 855.314 137.989 L 855.086 143.546 L 856.056 144.84 L 855.894 149.41 L 855.409 151.1 L 856.423 151.827 L 848.986 153.334 L 844.484 154.058 Z",
        VA: "M831.63885,266.06892L831.49494,264.12189L837.94837,261.57201L837.17796,264.78985L834.25801,268.56896L833.83992,273.15478L834.30167,276.54522L832.4737,281.52338L830.30943,283.43952L828.83909,278.79871L829.28498,273.3496L830.87198,269.16653L831.63885,266.06892ZM834.97904,294.37028L776.80486,306.94571L739.37789,312.22478L732.69956,311.8496L730.11431,313.77598L722.77518,313.99667L714.39307,314.97434L703.47811,316.58896L713.94754,310.97776L713.93442,308.90283L715.45447,306.7567L726.00825,295.25527L729.95497,299.73273L733.73798,300.69671L736.28144,299.55639L738.51866,298.24523L741.05527,299.58875L744.96944,298.16099L746.84617,293.60465L749.44709,294.14467L752.30233,292.01342L754.1016,292.50702L756.92881,288.83045L757.27706,286.74734L756.3134,285.47177L757.31617,283.60514L762.59044,271.32799L763.20721,265.59291L764.4361,265.06937L766.61463,267.51224L770.55049,267.21107L772.4797,259.63744L775.27369,259.07658L776.32344,256.33551L778.90326,253.98863L781.67509,248.29344L781.76002,243.22589L791.58153,247.04871C792.26238,247.38913,792.41441,241.99956,792.41441,241.99956L796.06697,243.59789L796.1353,246.53605L801.91955,247.83554L804.0525,249.01174L805.71242,251.06743L805.05787,254.7161L803.11043,257.30708L803.22028,259.36615L803.80924,261.21906L808.78799,262.48749L813.23926,262.52737L816.30809,263.48601L818.2516,263.79531L818.96641,266.88377L822.15685,267.2863L823.02492,268.48632L822.58543,273.1764L823.96016,274.27895L823.48121,276.20934L824.71062,276.99911L824.48882,278.38371L821.79483,278.28877L821.88379,279.90429L824.16478,281.44716L824.28632,282.85906L826.05943,284.64444L826.55122,287.16857L823.99818,288.54988L825.5704,290.04418L831.37142,288.35835L834.97904,294.37028Z",
        WA: "M102.07324,7.6117734L106.43807,9.0667177L116.1377,11.814946L124.7057,13.754871L144.7516,19.412988L167.70739,25.071104L182.93051,28.278277L169.29815,91.864088L156.85315,88.33877L141.34514,84.768091L126.11585,84.801329L125.66028,83.45663L120.06106,85.635923L115.46563,84.899179L113.31866,83.315125L112.00545,83.973101L107.26979,83.832858L105.57143,82.483225L100.30839,80.370922L99.573419,80.51784L95.184297,78.993392L93.290999,80.810771L87.025093,80.512038L81.099395,76.386336L81.878352,75.453573L81.999575,67.776121L79.717576,63.93642L75.602368,63.32938L74.924958,60.818764L72.649446,60.361832L69.094498,61.592408L66.831251,58.373161L67.154572,55.463272L69.9028,55.139951L71.519405,51.09844L68.932837,49.966816L69.094498,46.248625L73.459331,45.601984L70.711103,42.853756L69.256158,35.740695L69.9028,32.830807L69.9028,24.909444L68.124535,21.676234L70.387782,12.299927L72.489368,12.784908L74.914275,15.694797L77.662503,18.281364L80.895712,20.22129L85.422205,22.322876L88.493756,22.969518L91.403645,24.424462L94.798518,25.394425L97.061764,25.232765L97.061764,22.807857L98.355048,21.676234L100.45663,20.38295L100.77996,21.514574L101.10328,23.292839L98.840029,23.77782L98.516708,25.879406L100.29497,27.334351L101.4266,29.759258L102.07324,31.699183L103.52818,31.537523L103.68984,30.244239L102.71988,28.950955L102.2349,25.717746L103.0432,23.939481L102.39656,22.484537L102.39656,20.22129L104.17483,16.66476L103.0432,14.078192L100.61829,9.2283781L100.94162,8.4200758L102.07324,7.6117734ZM92.616548,13.590738L94.637312,13.429078L95.122294,14.803197L96.658073,13.186582L99.002155,13.186582L99.810458,14.722361L98.274678,16.419801L98.92133,17.228114L98.193853,19.248875L96.819734,19.653021C96.819734,19.653021,95.930596,19.733857,95.930596,19.410536C95.930596,19.087215,97.385551,16.823958,97.385551,16.823958L95.688111,16.258141L95.36479,17.713095L94.637312,18.359737L93.10153,16.09648L92.616548,13.590738Z",
        DC: "M 805.819 250.844 L 803.961 249.02 L 802.729 248.333 L 804.172 246.311 L 807.061 248.259 L 805.819 250.844 Z",
        WV: "M761.18551,238.96731L762.29752,243.91184L763.38096,249.94317L765.51125,247.36283L767.77449,244.29127L770.31287,243.67572L771.76782,242.22078L773.54609,239.63421L774.99107,240.28085L777.90096,239.95753L780.48754,237.85594L782.49443,236.40268L784.33966,235.91769L785.64358,236.93416L789.28683,238.75579L791.22676,240.53406L792.60088,241.82734L791.83916,247.38228L786.00425,244.84106L781.759,243.21904L781.65786,248.39747L778.91022,253.9342L776.38019,256.36086L775.1881,259.11025L772.54452,259.61035L771.64668,263.21223L770.60345,267.1619L766.63521,267.50264L764.31148,265.06376L763.24033,265.62317L762.60765,271.09287L761.25736,274.62737L756.29896,285.58234L757.19565,286.74304L756.98979,288.65158L754.1811,292.53605L752.3726,291.99176L749.40455,294.1515L746.86217,293.57929L744.86294,298.13486C744.86294,298.13486,741.60363,299.56508,740.94003,299.50258C740.77952,299.48746,738.47093,298.25348,738.47093,298.25348L736.13441,299.63285L733.72461,300.67725L729.97992,299.78813L728.85852,298.61985L726.6663,295.59649L723.52371,293.60837L721.81214,289.98513L717.52726,286.51694L716.88061,284.25369L714.29404,282.79874L713.48573,281.18214L713.24324,275.92816L715.42566,275.84733L717.3656,275.03903L717.52726,272.2908L719.14386,270.83585L719.30552,265.82437L720.27548,261.94451L721.56877,261.29787L722.86205,262.42949L723.34704,264.20776L725.12531,263.23779L725.61029,261.62119L724.47867,259.84292L724.47867,257.41801L725.44863,256.12472L727.71188,252.72985L729.00516,251.27491L731.10676,251.75989L733.37,250.14327L736.44155,246.7484L738.70481,242.86854L739.02813,237.21043L739.51311,232.19894L739.51311,227.51078L738.38149,224.43923L739.35145,222.98427L740.63493,221.69099L744.12618,241.51811L748.75719,240.76696L761.18551,238.96731Z",
        WI: "M615.06589,197.36866L614.99915,194.21124L613.82004,189.68474L613.1734,183.54165L612.04178,181.11674L613.01174,178.04519L613.82004,175.1353L615.27499,172.54874L614.62834,169.15387L613.9817,165.59734L614.46668,163.81907L616.40661,161.39416L616.56827,158.64593L615.75997,157.35265L616.40661,154.76608L615.95409,150.59537L618.70232,144.93726L621.61221,138.14752L621.77387,135.88427L621.45055,134.91431L620.64224,135.39929L616.43907,141.70405L613.69084,145.74556L611.75092,147.52383L610.94262,149.78707L608.98767,150.59537L607.85605,152.5353L606.4011,152.21198L606.23944,150.43371L607.53273,148.00881L609.63431,143.32065L611.41258,141.70405L612.40341,139.3462L609.84296,137.44486L607.86814,127.07787L604.32067,125.73589L602.37441,123.42756L590.2447,120.70592L587.36881,119.69387L579.15569,117.52658L571.23777,116.36783L567.47261,111.23716L566.72221,111.79117L565.5243,111.62951L564.87765,110.49789L563.54364,110.79444L562.41201,110.9561L560.63375,111.92606L559.66378,111.27942L560.31043,109.33949L562.25035,106.26794L563.38197,105.13632L561.44205,103.68138L559.34046,104.48968L556.43057,106.4296L548.99419,109.66281L546.0843,110.30945L543.17442,109.82447L542.19269,108.94622L540.07599,111.7814L539.84737,114.52487L539.84737,122.9839L538.70425,124.58427L533.44593,128.47084L531.15971,134.41503L531.61695,134.64365L534.1318,136.70126L534.81766,139.90198L532.98868,143.10269L532.98868,146.98928L533.44593,153.61933L536.41802,156.59143L539.84737,156.59143L541.67635,159.79215L545.10568,160.24939L548.99227,165.96496L556.07957,170.08017L558.13717,172.82364L559.05167,180.25388L559.73753,183.5689L562.02376,185.16926L562.25238,186.541L560.19478,189.97033L560.4234,193.17106L562.93825,197.05764L565.4531,198.20075L568.42519,198.65799L569.76753,200.03811L615.06589,197.36866Z",
        WY: "M360.37668,143.27587L253.63408,129.81881L239.5506,218.27684L352.81521,231.86233L360.37668,143.27587Z",
      };
      var attrs = {};
      var hitAreaAttrs = {
        fill: "#000",
        "stroke-width": 0,
        opacity: 0,
        cursor: "pointer",
      };

      var stateShapes = {};
      var stateHitAreas = {};
	  
	  for (var s in paths) {
        if (!paths.hasOwnProperty(s)) continue;
        var pathData = paths[s];

        var specificStyles = this.options.stateSpecificStyles[s];
        var attrs = specificStyles ? e.extend({}, baseStyles, specificStyles) : baseStyles;

        stateShapes[s] = paper.path(pathData).attr(attrs);
      }

      var hitAreaAttrs = {
        fill: "#000",
        "stroke-width": 0,
        opacity: 0,
        cursor: "pointer",
      };

      for (var s in paths) {
        if (!paths.hasOwnProperty(s)) continue;
        var pathData = paths[s];
        
        stateHitAreas[s] = paper.path(pathData).attr(hitAreaAttrs);
        stateHitAreas[s].node.dataState = s;
      }

      this.stateShapes = stateShapes;
      this.stateHitAreas = stateHitAreas;
      this.topShape = null;
    },
    _initCreateLabels: function () {
      var paper = this.paper;
      var labelStates = ["VT", "NH", "MA", "RI", "CT", "NJ", "DE", "MD", "DC"];
      var baseX = 1000;
      var baseY = 230;
      var labelWidth = this.options.labelWidth;
      var labelHeight = this.options.labelHeight;
      var labelGap = this.options.labelGap;
      var labelRadius = this.options.labelRadius;
      var scaledWidth = labelWidth / this.scale;
      var scaledHeight = labelHeight / this.scale;
      var columnOffset = (labelWidth + labelGap) / this.scale;
      var rowOffset = ((labelHeight + labelGap) / this.scale) * 0.5;
      var scaledRadius = labelRadius / this.scale;
      var backingStyles = this.options.labelBackingStyles;
      var textStyles = this.options.labelTextStyles;
      var hitAreaAttrs = {
        fill: "#000",
        "stroke-width": 0,
        opacity: 0,
        cursor: "pointer",
      };
      
      for (var i = 0, w, x, y, attrs; i < labelStates.length; ++i) {
        w = labelStates[i];
        x = ((i + 1) % 2) * columnOffset + baseX;
        y = i * rowOffset + baseY;
        
        attrs = {};
        if (this.options.stateSpecificLabelBackingStyles[w]) {
          e.extend(attrs, backingStyles, this.options.stateSpecificLabelBackingStyles[w]);
        } else {
          attrs = backingStyles;
        }
        this.labelShapes[w] = paper.rect(x, y, scaledWidth, scaledHeight, scaledRadius).attr(attrs);
        
        attrs = {};
        if (this.options.stateSpecificLabelTextStyles[w]) {
          e.extend(attrs, textStyles, this.options.stateSpecificLabelTextStyles[w]);
        } else {
          e.extend(attrs, textStyles);
        }
        if (attrs["font-size"]) {
          attrs["font-size"] = parseInt(attrs["font-size"]) / this.scale + "px";
        }
        this.labelTexts[w] = paper.text(x + scaledWidth / 2, y + scaledHeight / 2, w).attr(attrs);
        
		this.labelHitAreas[w] = paper.rect(x, y, scaledWidth, scaledHeight, scaledRadius).attr(hitAreaAttrs).toFront();
        this.labelHitAreas[w].node.dataState = w;
      }
    },
    _getStateFromEvent: function (e) {
      var t = (e.target && e.target.dataState) || e.dataState;
      return this._getState(t);
    },
    _getState: function (e) {
      if (!this._stateDataCache) {
        this._stateDataCache = {};
      }

      if (this._stateDataCache[e]) {
        return this._stateDataCache[e];
      }

      var t = this.stateShapes[e];
      var n = this.stateHitAreas[e];
      var r = this.labelShapes[e];
      var i = this.labelTexts[e];
      var s = this.labelHitAreas[e];
      
      var stateData = {
        shape: t,
        hitArea: n,
        name: e,
        labelBacking: r,
        labelText: i,
        labelHitArea: s,
      };

      this._stateDataCache[e] = stateData;

      return stateData;
    },
    _onMouseOut: function (e) {
      var t = this._getStateFromEvent(e);
      if (!t.hitArea) {
        return;
      }
      return !this._triggerEvent("mouseout", e, t);
    },
    _defaultMouseOutAction: function (t) {
      var n = {};
      if (this.options.stateSpecificStyles[t.name]) {
        e.extend(
          n,
          this.options.stateStyles,
          this.options.stateSpecificStyles[t.name]
        );
      } else {
        n = this.options.stateStyles;
      }
      t.shape.animate(n, this.options.stateHoverAnimation);
      if (t.labelBacking) {
        n = {};
        if (this.options.stateSpecificLabelBackingStyles[t.name]) {
          e.extend(
            n,
            this.options.labelBackingStyles,
            this.options.stateSpecificLabelBackingStyles[t.name]
          );
        } else {
          n = this.options.labelBackingStyles;
        }
        t.labelBacking.animate(n, this.options.stateHoverAnimation);
      }
    },
    _onClick: function (e) {
      var t = this._getStateFromEvent(e);
      if (!t.hitArea) {
        return;
      }
      return !this._triggerEvent("click", e, t);
    },
    _onMouseOver: function (e) {
      var t = this._getStateFromEvent(e);
      if (!t.hitArea) {
        return;
      }
      return !this._triggerEvent("mouseover", e, t);
    },
    _defaultMouseOverAction: function (t) {
      this.bringShapeToFront(t.shape);
      var n = {};
      if (this.options.stateSpecificHoverStyles[t.name]) {
        e.extend(
          n,
          this.options.stateHoverStyles,
          this.options.stateSpecificHoverStyles[t.name]
        );
      } else {
        n = this.options.stateHoverStyles;
      }
      t.shape.animate(n, this.options.stateHoverAnimation);
      if (t.labelBacking) {
        n = {};
        if (this.options.stateSpecificLabelBackingHoverStyles[t.name]) {
          e.extend(
            n,
            this.options.labelBackingHoverStyles,
            this.options.stateSpecificLabelBackingHoverStyles[t.name]
          );
        } else {
          n = this.options.labelBackingHoverStyles;
        }
        t.labelBacking.animate(n, this.options.stateHoverAnimation);
      }
    },
    _triggerEvent: function (t, n, r) {
      var i = r.name;
      var s = false;
      var o = e.Event("usmap" + t + i);
      o.originalEvent = n;
      if (this.options[t + "State"][i]) {
        s = this.options[t + "State"][i](o, r) === false;
      }
      if (o.isPropagationStopped()) {
        this.element.trigger(o, [r]);
        s = s || o.isDefaultPrevented();
      }
      if (!o.isPropagationStopped()) {
        var u = e.Event("usmap" + t);
        u.originalEvent = n;
        if (this.options[t]) {
          s = this.options[t](u, r) === false || s;
        }
        if (!u.isPropagationStopped()) {
          this.element.trigger(u, [r]);
          s = s || u.isDefaultPrevented();
        }
      }
      if (!s) {
        switch (t) {
          case "mouseover":
            this._defaultMouseOverAction(r);
            break;
          case "mouseout":
            this._defaultMouseOutAction(r);
            break;
        }
      }
      return !s;
    },
    trigger: function (e, t, n) {
      t = t.replace("usmap", "");
      e = e.toUpperCase();
      var r = this._getState(e);
      this._triggerEvent(t, n, r);
    },
    bringShapeToFront: function (e) {
	  if (this.topShape === e) return;
      
      if (this.topShape) {
        e.insertAfter(this.topShape);
      }
      this.topShape = e;
    },
  };
  var c = [];
  s(e, "usmap", l, c);
})(jQuery, document, window, Raphael);