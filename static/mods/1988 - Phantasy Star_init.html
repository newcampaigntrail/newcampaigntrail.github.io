campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 15,
        "fields": {
            "year": 1988,
            "summary": "<p>For twenty years, Alis Landale has been the rightful queen of the Algol system. Once the legendary hero who dethroned the tyrant Lassic and destroyed the corruption of the Dark Falz, she had long since settled into the simple structures of day-to-day government.</p><p>One night, she had a horrid vision in her dreams. She saw the looming beast of darkness she once slew rise from the ashes of legend and ensnare another world in its claws - a world without magic, without heroic warriors, and without the means to destroy Dark Falz. Awakening in a cold sweat, she found herself in the very same world from her nightmare. But, thankfully, she was not alone; and Alis Landale was never one to back down from a fight.</p>",
            "image_url": "https://i.imgur.com/QIceDdd.png",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://i.imgur.com/JSEqRs7.png",
            "recommended_reading": "<h4 style=\"margin-top: 0.5em;\">Books and Links</h4>Peter Goldman - <a href=\"http://www.amazon.com/exec/obidos/ASIN/B012HU7SZA/amhius20-20\" target=\"_blank\">The Quest for the Presidency, 1988</a></br>L.A. Times, November 10, 1988 - <a href=\"http://articles.latimes.com/1988-11-10/news/mn-299_1_dukakis-lost-reelection\" target=\"_blank\">How Presidential Race Was Won-and Lost : Michael S. Dukakis</a></br>L.A. Times, November 10, 1988 - <a href=\"http://articles.latimes.com/1988-11-10/news/mn-302_1_george-bush\" target=\"_blank\">How Presidential Race Was Won--and Lost : George Bush</a></br><a href=\"http://www.usnews.com/news/articles/2008/01/17/the-photo-op-that-tanked\" target=\"_blank\">Michael Dukakis: The Photo Op That Tanked</a>",
            "has_visits": 1,
            "no_electoral_majority_image": "https://www.jetsimon.com/public/static/images/2012-no-majority.jpg",
            "creator": "Dan Bryan",
            "display_year": "1988 - Phantasy Star"
        }
    }
]

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 152,
        "fields": {
            "first_name": "George",
            "last_name": "Bush",
            "election": 15,
            "party": "Republican",
            "state": "Texas",
            "priority": 2,
            "description": "<p>George Bush has served as Vice President for eight years, and also as a UN Ambassador, Director of the RNC, and Director of the CIA. He is hoping to succeed the popular Reagan, but fights the impression that he is <em>too</em> dependent on his former boss. He must prove he has the independence, ideological rigor, and strength to serve as President, all while finding some way to reduce the popularity of his opponent. Bush appears to be trailing badly as the campaign begins.</p>",
            "color_hex": "#bb3636",
            "secondary_color_hex": "#d6aaaa",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/george-bush-1988.jpg",
            "electoral_victory_message": "<h3>Congratulations! You have won the 1988 election.</h3><p>In spite of a hard-fought challenge from Michael Dukakis, you have held on to succeed Ronald Reagan.</p><p>Whatever you did, it must have worked. Observers were leaving your campaign for dead just a few months ago. On the political front, you can continue the policies of Reagan or turn in a more moderate direction. Internationally, you can hopefully oversee a period of relaxed tension with the Soviet Union.</p>",
            "electoral_loss_message": "<h3>Sorry. You have lost the 1988 election.</h3><p>Perhaps it was always a long-shot -- the American people just seemed ready to move on from Reagan.</p><p>Time will tell if Dukakis governs as a moderate, a liberal, or a technocrat. A lot can happen in four years, but the early gossip is that Bob Dole has the inside track for the 1992 nomination. Your next steps are unclear.</p>",
            "no_electoral_majority_message": "<h3>Sorry. You have lost the 1988 election.</h3><p>Although the Electoral College was tied, the Democrats have won a solid majority in the House, and will elevate Michael Dukakis to the Presidency.</p><p>Time will tell if Dukakis governs as a moderate, a liberal, or a technocrat. A lot can happen in four years, but the early gossip is that Bob Dole has the inside track for the 1992 nomination. Your next steps are unclear.</p>",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 153,
        "fields": {
            "first_name": "Alis",
            "last_name": "Landale",
            "election": 15,
            "party": "Democratic",
            "state": "New York",
            "priority": 1,
            "description": "Alis soon comes to learn the city she woke up in is named New York City, and it resides within a land known as the United States of America. This country has no monarch; rather, the leadership is elected democratically. It is certainly fascinating, but she commits to learn more later and focus on the job at hand.</p>Dark Falz's presence on Earth is minimal, at least compared to Algol in her youth. But the darkness is there, and it is hungry. For years, the United States - one of two ginormous powers on the globe - has been lead by a man named Ronald Reagan. He has spent his time dismantling works of compassion and efforts of justice. American finances are a time bomb, millions of citizens are in personal crises the administration does nothing to resolve, and yet it looks as if Reagan's successor - a man named George Bush - is going to win his own election in a landslide.</p> Dark Falz's influence has its opponents, but they have been in disarray for years. On the advice of her trusted comrade Noah, Alis has decided to take matters into her own hands. She is going to run for President.",
            "color_hex": "#54aadb",
            "secondary_color_hex": "#b0def5",
            "is_active": 1,
            "image_url": "https://assets.mycast.io/actor_images/actor-alis-landale-808020_small.jpg?1688852271",
            "electoral_victory_message": "<font color='White'><h3>ALIS LANDALE ELECTED FIRST FEMALE PRESIDENT</h3><p>The headline across the bottom of the television screen reads like a forbidden tome. You are drawn to it compulsively, as if it were a magical spell of its own. But it isn't. It is simply the truth.</p><p>The Vice President calls you soon after, and the conversation is cordial. He thanks you for a race well run; you thank him for his service. As you put the telephone down you feel a massive weight lift off of your chest. It is not your armor, nor your tunic. It is the knowledge that once again, you have broken the back of darkness in the universe.</p><p>It is clear that Dark Falz is not something that dissipates easily. It will return, somehow and someway, and when it does you will undoubtedly be drawn to battle once again. But today, it recedes. And whenever, wherever it rears its ugly head again, you will stomp it out once more. Because you are Alis Landale. Liberator of your home. Queen of your star system. Devoted warrior of light. And now, Leader of the Free World.</p></font>",
            "electoral_loss_message": "<div style='overflow-y:scroll;height:200px;padding-right:7px'><font color='White'><h3>BUSH DEFEATS LANDALE, DEMOCRATS FALL SILENT</h3><p>Perhaps it was never meant to be. Nobody figured you had a chance in the first place, after all. And yet the results are so terribly bitter all the same.</p><p>You knew something was going wrong when Biden could not look you in the eyes. The other Democrats, the normal people in the room, slowly trickled out until all that was left was you. Even your old friends were out on the town tonight.</p><p>Your eyes fall to the ground and your body follows; on your knees you breathe silently. There's nothing you can really do right now, is there?</p><p>In the corner of the room, the small apartment you've been keeping since you woke up on Earth, are your sword and shield. Those pieces of red Laconian steel were enough to topple both a tyrant and his puppet-master, and yet they were not enough to carry a Republic's confidence.</p><p>But the sword is still there, and so is the shield. You are still breathing. Stand up again, Alis, and let not the darkness march unfettered.</p></font>",
            "no_electoral_majority_message": "<h3>No majority<h3><p>i got nothing dawg how did you get here</p>",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 154,
        "fields": {
            "first_name": "Ron",
            "last_name": "Paul",
            "election": 15,
            "party": "Libertarian",
            "state": "Texas",
            "priority": 3,
            "description": "'",
            "color_hex": "#FFFF00",
            "secondary_color_hex": "#FFFFC0",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 155,
        "fields": {
            "first_name": "Lenora",
            "last_name": "Fulani/Other",
            "election": 15,
            "party": "Independent",
            "state": "Pennsylvania",
            "priority": 4,
            "description": "'",
            "color_hex": "#00C100",
            "secondary_color_hex": "#A1FFA1",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 156,
        "fields": {
            "first_name": "Dan",
            "last_name": "Quayle",
            "election": 15,
            "party": "Republican",
            "state": "Indiana",
            "priority": 5,
            "description": "'",
            "color_hex": "#FF0000",
            "secondary_color_hex": "#FFA0A0",
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/static/images/dan-quayle-1988.jpg",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>Dan Quayle has served as a Senator from Indiana for the past seven years. He would be an unexpected choice, and the first baby boomer to run on a national ticket. He does not have a long record of achievement at the highest stage, but he could have some appeal to social conservatives, Midwesterners, and younger voters. There is some skepticism about his intellect, and his campaigning and debating ability.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 159,
        "fields": {
            "first_name": "Joe",
            "last_name": "Biden",
            "election": 15,
            "party": "Democratic",
            "state": "Delaware",
            "priority": 8,
            "description": "'",
            "color_hex": "#0000FF",
            "secondary_color_hex": "#90C0FF",
            "is_active": 0,
            "image_url": "https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/Joe_Biden_on_the_senate_floor_1986.jpg/250px-Joe_Biden_on_the_senate_floor_1986.jpg",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>By all accounts, you are going to lose. Even with Reagan's scandals, the national mood is closer to him than to you. To the average American, you are a complete oddity. You have no elected experience, are a woman, and your own confidants know you can't hope to explain that you're a queen from outer space. The Democratic Party, the premier opposition to the danger Reagan and Bush represent, are extremely hesitant to listen to you; let alone actually support you.</p><p>Joe Biden is here out of pity and curiosity. He cannot truly understand your situation, but he does know what it's like to be done for, to have lost long before any decisions were made. He is here to put up a decent show, display some campaigning chops on the national stage, and hopefully make sure the Democrats aren't completely dismantled.</p>",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 163,
        "fields": {
            "first_name": "Andre",
            "last_name": "Marrou",
            "election": 15,
            "party": "Libertarian",
            "state": "Alaska",
            "priority": 12,
            "description": "'",
            "color_hex": "#FFFF00",
            "secondary_color_hex": "#FFFFC0",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 164,
        "fields": {
            "first_name": "Other",
            "last_name": "Other",
            "election": 15,
            "party": "Independent",
            "state": "Pennsylvania",
            "priority": 13,
            "description": "'",
            "color_hex": "#00C100",
            "secondary_color_hex": "#A1FFA1",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "'",
            "candidate_score": 0,
            "running_mate": true
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 106,
        "fields": {
            "candidate": 155,
            "running_mate": 164
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 105,
        "fields": {
            "candidate": 154,
            "running_mate": 163
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 98,
        "fields": {
            "candidate": 152,
            "running_mate": 156
        }
    },
    {
        "model": "campaign_trail.running_mate",
        "pk": 117763,
        "fields": {
            "candidate": 153,
            "running_mate": 159
        }
    }
]

campaignTrail_temp.credits = "@pabloni21"

campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 25,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 15,
        "candidates": [
            152,
            153,
            154,
            155
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 15,
        "candidates": [
            152,
            153,
            154,
            155
        ]
    }
]

campaignTrail_temp.temp_election_list = [
    {
        "id": 15,
        "year": 1988,
        "is_premium": 0,
        "display_year": "1988 - Phantasy Star"
    }
]

jet_data = {
    "headerColor": "#0a0e29",
    "windowColor": "#606298",
    "containerColor": "#557ae0",
    "innerWindowColor": "#00abad",
    "bannerImageUrl": "https://i.imgur.com/y2kQTeW.png",
    "backgroundImageUrl": "https://i.redd.it/i-took-a-bunch-of-hd-screenshots-of-pso-to-use-as-v0-qo87gn4t5on81.png?width=2560&format=png&auto=webp&s=4f6fa977c05eef314200c69e699a36de8aa18f14",
    "endingTextColor": "#def7ff",
    "customQuote": ""
}

//#startcode



nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#0a0e29";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#14152a";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#263254";

document.getElementById("header").src = "https://i.imgur.com/y2kQTeW.png";

document.body.background = "https://i.redd.it/i-took-a-bunch-of-hd-screenshots-of-pso-to-use-as-v0-qo87gn4t5on81.png?width=2560&format=png&auto=webp&s=4f6fa977c05eef314200c69e699a36de8aa18f14";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#00abad!important;}</style>";

//#endcode

// Initialise custom music

e.music = {};
e.music.shuffleEnabled = false;
e.music.Volume=0.3;
e.music.loopEnabled = false;
var element = document.getElementById('my-invisible-element');
$("#music_player")[0].children[0].style.display = "none"
$("#music_player")[0].children[1].style.display = "none"
document.getElementById("modLoadReveal").style.display = "none"
document.getElementById("modloaddiv").style.display = "none"
musicBox = document.getElementById("music_player")
musicBox.style.display = ""
var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0
toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
            // Get the audio element
            var audio = document.getElementById("campaigntrailmusic");
            timeTracker = document.createElement("div");
            timeTracker.id ='timeTracker'
            timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:180px;
      width:200px;
      background-color:#999999;
      float:right;
      padding: 10px;
      `
            $("#trackSelParent")[0].prepend(timeTracker);
            $("#trackSelParent")[0].prepend(document.createElement("br"));
            var positionDisplay = document.createElement("gg");
            positionDisplay.id = "position-display";
            var timeSlider = document.createElement("input");
            timeSlider.type = "range";
            timeSlider.min = 0;
            timeSlider.max = 1;
            timeSlider.step = 0.001;
            timeSlider.value = 0;
            timeSlider.style.width = "200px";
            timeSlider.id = "time-slider";
            var pausePlay = document.createElement("button");
            pausePlay.id = "position-display";
            pausePlay.innerHTML = "<b>Pause</b>"
            pausePlay.style.width = "100%";
            pausePlay.style.margin = "2px";
            pausePlay.addEventListener("click", event => {
                event.preventDefault();
                updatePositionDisplay();
                let audio = document.getElementById("campaigntrailmusic");
                if (audio.paused) {
                    audio.play();
                    event.target.innerHTML = "<b>Pause</b>";
                    return;
                }
                audio.pause();
                event.target.innerHTML = "<b>Play</b>";
                return;
            })
            var shuffleButton = document.createElement("button");
            shuffleButton.id = "shuffle-button";
            shuffleButton.innerHTML = "<b>Shuffle</b>"
            shuffleButton.style.width = "100%"
            shuffleButton.style.margin = "2px";;
            shuffleButton.addEventListener("click", event => {
                event.preventDefault();
                e.music.shuffleEnabled = !e.music.shuffleEnabled;
                event.target.innerHTML = e.music.shuffleEnabled ? "<b>Unshuffle</b>" : "<b>Shuffle</b>";
                if (e.music.shuffleEnabled) {
                    shuffledIndices = shuffle(trackIndices.slice());
                    let currentTrackIndex = Number(document.querySelector('input[name="trackSelector"]:checked').value);
                    shuffledIndices = shuffledIndices.filter(index => index !== currentTrackIndex);
                    shuffledIndices.unshift(currentTrackIndex);
                }
            });
            var skipButton = document.createElement("button");
            skipButton.id = "skip-button";
            skipButton.innerHTML = "<b>Skip</b>"
            skipButton.style.width = "100%";
            skipButton.style.margin = "2px"; // Add margin
            skipButton.addEventListener("click", event => {
                event.preventDefault();
                let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
                let newSel;
                if (e.music.shuffleEnabled) {
                    if (!shuffledIndices) {
                        shuffledIndices = shuffle(trackIndices.slice());
                    }
                    let currentIndex = shuffledIndices.findIndex(index => index === selected);
                    if (currentIndex === shuffledIndices.length - 1) {
                        shuffledIndices = shuffle(trackIndices.slice());
                        currentIndex = -1;
                    }
                    newSel = shuffledIndices[currentIndex + 1];
                } else {
                    newSel = selected + 1 === soundtracks[e.selectedSoundtrack].tracklist.length ? 0 : selected + 1;
                }
                let buttons = Array.from(document.getElementById("trackSel").children).filter(f => {
                        return f.tagName == "LABEL"
                    }).map(f => f.children[0])
                buttons[newSel].click()
            });
            skipButton.style.width = "50%";
            var loopButton = document.createElement("button");
            loopButton.id = "loop-button";
            loopButton.innerHTML = e.music.loopEnabled ? "<b>Unloop</b>" : "<b>Loop Song</b>";  // Check the initial loop state
            loopButton.style.width = "50%";  // Match the width with skipButton
            loopButton.style.margin = "2px";
            loopButton.addEventListener("click", event => {
                event.preventDefault();
                e.music.loopEnabled = !e.music.loopEnabled;
                let audio = document.getElementById("campaigntrailmusic");
                audio.loop = e.music.loopEnabled;  // Set the audio's loop property
                event.target.innerHTML = e.music.loopEnabled ? "<b>Unloop</b>" : "<b>Loop Song</b>";  // Toggle the button text
            });
            var volumeLabel = document.createElement("gg");
            volumeLabel.id = "volume-label";
            volumeLabel.innerHTML = "<br><b>Volume: </b>"
            var volumeSlider = document.createElement("input");
            volumeSlider.type = "range";
            volumeSlider.min = 0;
            volumeSlider.max = 1;
            volumeSlider.step = 0.001;
            volumeSlider.value = 0;
            volumeSlider.style.width = "200px";
            volumeSlider.id = "volume-slider";
            audio.volume= e.music.Volume;
            volumeSlider.value = audio.volume;
            timeTracker.appendChild(pausePlay);
            if (audio.volume === 0) {
                audio.pause();
                pausePlay.innerHTML = "<b>Play</b>";  // Update the pause button text to "Play"
            }
            timeTracker.appendChild(shuffleButton);
            var buttonContainer = document.createElement("div");
            buttonContainer.style.display = "flex"; // Makes children inline
            buttonContainer.style.justifyContent = "space-between";
            skipButton.style.flex = "1"; // Makes it take up equal space
            skipButton.style.marginRight = "5px"; // Adds some space between the buttons

            loopButton.style.marginRight = "0px";

            buttonContainer.appendChild(skipButton);
            buttonContainer.appendChild(loopButton);

            timeTracker.appendChild(buttonContainer); // Add the container to timeTracker instead of individual buttons
            timeTracker.appendChild(positionDisplay);
            timeTracker.appendChild(timeSlider);
            timeTracker.appendChild(volumeLabel);
            timeTracker.appendChild(volumeSlider);
            updatePositionDisplay();
            function updatePositionDisplay() {
                positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
                timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
            }
            function changeTime() {
                positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
                audio.currentTime = timeSlider.value * audio.duration;
            }
            updateVolume = event => {
                audio.volume = event.target.value;
                e.music.Volume=audio.volume;
            }
            setInterval(updatePositionDisplay, 1000);
            timeSlider.addEventListener("input", changeTime);
            volumeSlider.addEventListener("input", updateVolume)
        }

    function newMusicPlayer(previousBgImage = null) {
            trackSel = document.createElement("div");
            trackSel.id = "trackSelParent";
            let z = `<div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
            z += `<b><select id='selectSoundtrack'><option value='` + soundtracks[e.selectedSoundtrack].name + `'>` + soundtracks[e.selectedSoundtrack].name + "</option>"
            for (i in soundtracks) {
                if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
                    z += `<option value='` + soundtracks[i].name + `'>` + soundtracks[i].name + `</option>`
                }
            }
            z += `</select></b><br><br>`
                // <label><input type="radio" name="option" value="option1">Option 1</label><br>
            for (i in soundtracks[e.selectedSoundtrack].tracklist) {
                let a = soundtracks[e.selectedSoundtrack].tracklist[i]
                let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="` + i + `">` + a.name + `</label><br>`
                z += b
            }
            z += "</div><br><br>"
            trackSel.innerHTML = z
            musicBox.appendChild(trackSel);
            Array.from(document.getElementById("trackSel").children).filter(f => {
                return f.tagName == "LABEL"
            }).map(f => f.children[0])[0].checked = true
            soundtrackSelector = document.getElementById("selectSoundtrack")
            soundtrackSelector.onchange = function() {
                let currentBgImage = document.getElementById("trackSel").style.backgroundImage;

                for (i in soundtracks) {
                    if (soundtracks[i].name == soundtrackSelector.value) {
                        e.selectedSoundtrack = i;
                        break;
                    }
                }
                e.music.shuffleEnabled = false;
                shuffledIndices = null;

                document.getElementById("trackSelParent").remove();
                newMusicPlayer(currentBgImage);  // Pass the current background image to the next function invocation.
            };
            var matches = document.querySelectorAll('.trackSelector');
            for (match in matches) {
                matches[match].onchange = function() {
                    audio = $("#campaigntrailmusic")[0];
                    audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
                    audio.currentTime = 0
                }
            }
            musicBox.children[2].loop = false
            musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

            trackIndices = Array.from({length: soundtracks[e.selectedSoundtrack].tracklist.length}, (_, i) => i);

            musicBox.children[2].onended = function() {
                if (e.music.loopEnabled) {
                    this.play();  // If loop is enabled, simply play the same track again
                } else {
                let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
                let newSel;
                if (e.music.shuffleEnabled) {
                    if (!shuffledIndices) {
                        shuffledIndices = shuffle(trackIndices.slice());
                    }
                    let currentIndex = shuffledIndices.findIndex(index => index === selected);
                    if (currentIndex === shuffledIndices.length - 1) {
                        shuffledIndices = shuffle(trackIndices.slice());
                        currentIndex = -1;
                    }
                    newSel = shuffledIndices[currentIndex + 1];
                } else {
                    newSel = selected + 1 === soundtracks[e.selectedSoundtrack].tracklist.length ? 0 : selected + 1;
                }
                let buttons = Array.from(document.getElementById("trackSel").children).filter(f => {
                        return f.tagName == "LABEL"
                    }).map(f => f.children[0])
                buttons[newSel].click()
                }
            }

            for (w = 0; w < 7; w++) {
              document.getElementById("trackSelParent").appendChild(document.createElement("br"))
            }
            generateTime();
           if (previousBgImage) {
                document.getElementById("trackSel").style.backgroundImage = previousBgImage;
                 document.getElementById("timeTracker").style.backgroundImage = previousBgImage;
            }
        }
        clamp = function(a, max, min, overflow = true) {
            if (overflow) {
                return a > max ? min : a < min ? max : a;
            }
            return a > max ? max : a < min ? min : a;
        }
        var soundtracks = {

    0: {
    name: "Phantasy Star OST - PSG",
    tracklist: [
      {
        "name": "Title",
        "url": "https://file.garden/aV8MTnSmtyzzckGy/PS1OST/Phantasy%20Star%20OST%20-%20Title%20-%20PSG.mp3"
      },
      {
        "name": "Battle",
        "url": "https://file.garden/aV8MTnSmtyzzckGy/PS1OST/Phantasy%20Star%20OST%20-%20Battle%20-%20PSG.mp3"
      },
      {
        "name": "Church",
        "url": "https://file.garden/aV8MTnSmtyzzckGy/PS1OST/Phantasy%20Star%20OST%20-%20Church%20-%20PSG.mp3"
      },
      {
        "name": "Sky City",
        "url": "https://file.garden/aV8MTnSmtyzzckGy/PS1OST/Phantasy%20Star%20OST%20-%20Sky%20City%20-%20PSG.mp3"
      },
      {
        "name": "Dark Falz",
        "url": "https://file.garden/aV8MTnSmtyzzckGy/PS1OST/Phantasy%20Star%20OST%20-%20Dark%20ForceFalz%20-%20PSG.mp3"
      },
      {
        "name": "Ending",
        "url": "https://file.garden/aV8MTnSmtyzzckGy/PS1OST/Phantasy%20Star%20OST%20-%20Ending%20-%20PSG.mp3"
      }
    ]
},
    1: { 
    name: "Phantasy Star OST - FM",
    tracklist: [
        {
            "name": "Title",
            "url": "https://file.garden/aV8MTnSmtyzzckGy/PS1OST/Phantasy%20Star%20OST%20-%20Title%20-%20FM.mp3"
        },
        {
            "name": "Battle",
            "url": "https://file.garden/aV8MTnSmtyzzckGy/PS1OST/Phantasy%20Star%20OST%20-%20Battle%20-%20FM.mp3"
        },
        {
            "name": "Church",
            "url": "https://file.garden/aV8MTnSmtyzzckGy/PS1OST/Phantasy%20Star%20OST%20-%20Church%20-%20FM.mp3"
        },
        {
            "name": "Sky City",
            "url": "https://file.garden/aV8MTnSmtyzzckGy/PS1OST/Phantasy%20Star%20OST%20-%20Sky%20City%20-%20FM.mp3"
        },
        {
            "name": "Dark Falz",
            "url": "https://file.garden/aV8MTnSmtyzzckGy/PS1OST/Phantasy%20Star%20OST%20-%20Dark%20ForceFalz%20-%20FM.mp3"
        },
        {
            "name": "Ending",
            "url": "https://file.garden/aV8MTnSmtyzzckGy/PS1OST/Phantasy%20Star%20OST%20-%20Ending%20-%20FM.mp3"
        }
    ]
}, 
}

newMusicPlayer()

e=campaignTrail_temp

var changeGameDisp = (hide) => {
  disp = "";
  if (hide) {
    disp = "none";
  }
  document.getElementsByClassName("inner_window_w_desc")[0].style.display = disp
};

e.creditsPage = () => {
  credits_html = `
    <h3>Coding</h3>
    <p><font color='#e382c1'>pabloni21, with help from Jet's Tools and Astro's guide</font></p>
    <h3>Writing</h3>
    <p><font color='#e382c1'>pabloni21</font></p>
    <h3>Playtester</h3>
    <p>Big Tony</p>
    <h3>Music Credit</h3>
    <p>Phantasy Star 1987, music composed by Tokuhiko Uwabo.</p>
    <h1><font color='White'>Important Thanks</font></h1>
    <div style='width: 70%;text-overflow: ellipsis;text-align:center;display: block;margin-left: auto;margin-right: auto;'>
    <p>Credit and thank you to Decstar for the music and credits systems, Jet and StrawberryMaster for the modmaking and coding tools, and Astro for the tutorials.</p>
    <p>Phantasy Star by SEGA. Rest in peace Rieko Kodama, and thank you for your work.</p>
    <h2><font color = 'White'>From the modder</font></h2>
    <p>thank you for playing my mod! this is the first mod i've developed and finished and i'm happy with how it's turned out. if you'd like to talk to me about either this mod or the other project i've been working on, please feel free to message me (Discord works best)! thank you! <3 pabs</p>
    </div>
  `
  changeGameDisp(true);
  var spacer = document.createElement("amongusspacerthisisntarealelement");
  spacer.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
  document
    .getElementsByClassName("inner_window_w_desc")[0]
    .children[1].appendChild(spacer);
    changeGameDisp(true);
    var menuHeader = document.createElement("div");
    menuHeader.classList.add("inner_window_front");
    menuHeader.innerHTML = `<h1 style='font-family: "Arial";'><font color='#b6e2ff'>Credits</font></h1>`;
    menuHeader.id = "SOTUheader";
    menuHeader.style = "height: 50px;background-color:#2d2d2d";
    var newMenu = document.createElement("div");
    newMenu.classList.add("inner_window_front");
    newMenu.id = "SOTUmenu";
    newMenu.style = `height:260px;background-color:#2d2d2d;color:white;overflow-y: scroll;`;

    newMenu.innerHTML = credits_html;
    let z = document.getElementById("game_window");
    var backButton = document.createElement("button");
    backButton.style =
      "position: relative; bottom: -13px; left: -380px; width: 150px; height: 80px;font-size:40px;padding-top:5px;padding-left:8px";
    backButton.id = "backSOTUBtn";
    backButton.innerHTML = `<b>BACK</b>`;
    backButton.onclick = function () {
      document.getElementById("SOTUheader").remove();
      document.getElementById("SOTUmenu").remove();
      document.getElementById("backSOTUBtn").remove();
      changeGameDisp(false);
    };
    z.appendChild(menuHeader);
    z.appendChild(newMenu);
    z.appendChild(backButton);

}

e.credits = "<button onclick='e.creditsPage()'>Credits</button>"