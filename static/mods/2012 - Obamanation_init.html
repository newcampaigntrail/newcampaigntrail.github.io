campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 9,
        "fields": {
            "year": 2012,
            "summary": `Barack Hussein Obama. The first Black president. The Antichrist. The demagogic liar has succeeded in advancing himself to the highest office in the land on the premise he'd fulfill the hopes and channel the grievances of all the extremists and victims who've placed him there. Under the ever-present eyes of his teachers, the time has come to take his place as the fourth horseman of the apocalypse that will ring in a new America.</p><p>Tasked with truly defining himself and exposing his innermost ambitions, he must act upon events most extraordinary, all conveniently placed before him as if by the cruel hand of fate itself. Will he maintain the radical tutelage instilled in him from his swinging Chicago days, or betray them all at the risk of a tarnished legacy? Whatever he decides to do, it'll take all his wits, snake oil charm, and manipulative cunning to not go down with the ship he's sinking.`,
            "site_description": `<p>Barack Hussein Obama. The first Black president. <b>The Antichrist.</b> The demagogic liar has succeeded in advancing himself to the highest office in the land on the premise he'd fulfill the hopes and channel the grievances of all the extremists and victims who've placed him there. Under the ever-present eyes of his teachers, the time has come to take his place as the fourth horseman of the apocalypse that will ring in a new America.<br><br>Tasked with truly defining himself and exposing his innermost ambitions, he must act upon events most extraordinary, all conveniently placed before him as if by the cruel hand of fate itself. Will he maintain the radical tutelage instilled in him from his swinging Chicago days, or betray them all at the risk of a tarnished legacy? Whatever he decides to do, it'll take all his wits, snake oil charm, and manipulative cunning to not go down with the ship he's sinking.</p>`,
            "image_url": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/AZJd8oG.gif",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/zXSQiZr.png",
            "recommended_reading": `<a href="https://quranonline.net/" target="_blank">The Holy Quran</a>`,
            "has_visits": 1,
            "no_electoral_majority_image": "/static/images/2012-no-majority.jpg",
        }
    }
]
campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 77,
        "fields": {
            "first_name": "Barack",
            "last_name": "Obama",
            "election": 9,
            "party": "Democratic",
            "state": "Disputed",
            "priority": 1,
            "description": "<p>The smooth and charming Barack Obama from parts unknown was the perfect agent of ''change'' when he arrived on the scene in 2008. With a blinding smile, armed with a fine-tuned folksy vernacular (modified on command), the freshman Senator and community organizer didn't spend his early years under the careful mentorship of Bill Ayers, Louis Farrakhan and Jeremiah Wright for nothing. He's a man on a mission from a lower power.<p></p>He's sacrificed much to be where he is today, having had to endure the muck of middle America, having to allow racist jackals like Hillary Clinton infiltrate his Cabinet to appease the blob. Yet if all goes according to plan, it'll have been worth it. Be it by hook or by crook, Obama will strive to tear down this country and rebuild, brick-by-brick. But if that course may alter, his arrogance will refuse defeat, even if it means a little ''compromise'' here and there. So long as he wins in the end, it'll have been for the greater good.</p>",
            "color_hex": '#184794',
            "secondary_color_hex": '#9c5151',
            "is_active": 1,
            "image_url": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/hPU7oJl.png",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": null,
            "candidate_score": 1.0,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 81,
        "fields": {
            "first_name": "Joe",
            "last_name": "Biden",
            "election": 9,
            "party": "Democratic",
            "state": "Delaware",
            "priority": 5,
            "description": "'",
            "color_hex": '#FF0000',
            "secondary_color_hex": '#FFA0A0',
            "is_active": 0,
            "image_url": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/RSeSB97.png",
            "electoral_victory_message": "'",
            "electoral_loss_message": "'",
            "no_electoral_majority_message": "'",
            "description_as_running_mate": "<p>A man past his prime, older than the most senile Watergate baby, Joe Biden may have had several facial and follicle remodels over the years but he's hardly changed. Just as it was when he first entered public office, Biden is as out of his element as ever, harboring the same barely candescent ticker occupying his head and inclination to grope and molest women (and next of kin). Everyone knows he's only here because the people demanded a more experienced, <i>whiter</i> presence to make the ticket of the radical headliner more palatable.<p></p>If certain individuals in the administration have it their way, and if Scranton Joe (circa 1953) doesn't mind his business, he just might suffer the humiliating spectale of a premature sacking. But Joe knows his time is running out, and if he doesn't make his voice heard now, he might never get the opportunity again.</p>",
            "candidate_score": 0.0,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 78,
        "fields": {
            "first_name": "The",
            "last_name": "Republican Party",
            "election": 9,
            "party": "Republican",
            "state": "The Heartland",
            "priority": 2,
            "description": "<p></p>",
            "color_hex": '#910c0c',// "#0000",
            "secondary_color_hex": '#9badc4',// "#90C0",
            "is_active": 0,
            "image_url": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/a4od9z3.jpeg",
            "electoral_victory_message": "n/a",
            "electoral_loss_message": "n/a",
            "no_electoral_majority_message": "n/a",
            "description_as_running_mate": "'",
            "candidate_score": 1.0,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 79,
        "fields": {
            "first_name": "The",
            "last_name": "Greens",
            "election": 9,
            "party": "Independent",
            "state": "Connecticut",
            "priority": 3,
            "description": "'",
            "color_hex": '#4EAF41',// "#0000",
            "secondary_color_hex": '#A1FFA1',// "#A0A0",
            "is_active": 0,
            "image_url": "/static/images/ralph-nader-2000.jpg",
            "electoral_victory_message": "n/a",
            "electoral_loss_message": "n/a",
            "no_electoral_majority_message": "n/a",
            "description_as_running_mate": "'",
            "candidate_score": 1.0,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 80,
        "fields": {
            "first_name": "The",
            "last_name": "Libertarians",
            "election": 9,
            "party": "Libertarian/Other",
            "state": "Indiana",
            "priority": 4,
            "description": "'",
            "color_hex": '#D3AF41',// "#0000",
            "secondary_color_hex": '#FFFFC0',// "#A0A0",
            "is_active": 0,
            "image_url": "'",
            "electoral_victory_message": "n/a",
            "electoral_loss_message": "n/a",
            "no_electoral_majority_message": "n/a",
            "description_as_running_mate": "'",
            "candidate_score": 1.0,
            "running_mate": false
        }
    }
]
campaignTrail_temp.running_mate_json = [
    { model: "campaign_trail.running_mate", pk: 106, fields: { candidate: 155, running_mate: 164 } },
    { model: "campaign_trail.running_mate", pk: 76, fields: { candidate: 116, running_mate: 120 } },
    { model: "campaign_trail.running_mate", pk: 67, fields: { candidate: 94, running_mate: 104 } },
    { model: "campaign_trail.running_mate", pk: 74, fields: { candidate: 107, running_mate: 114 } },
    { model: "campaign_trail.running_mate", pk: 66, fields: { candidate: 93, running_mate: 103 } },
    { model: "campaign_trail.running_mate", pk: 81, fields: { candidate: 118, running_mate: 125 } },
    { model: "campaign_trail.running_mate", pk: 7, fields: { candidate: 18, running_mate: 38 } },
    { model: "campaign_trail.running_mate", pk: 8, fields: { candidate: 19, running_mate: 39 } },
    { model: "campaign_trail.running_mate", pk: 82, fields: { candidate: 119, running_mate: 126 } },
    { model: "campaign_trail.running_mate", pk: 116, fields: { candidate: 168, running_mate: 178 } },
    { model: "campaign_trail.running_mate", pk: 161, fields: { candidate: 203, running_mate: 215 } },
    { model: "campaign_trail.running_mate", pk: 57, fields: { candidate: 80, running_mate: 90 } },
    { model: "campaign_trail.running_mate", pk: 56, fields: { candidate: 79, running_mate: 89 } },
    { model: "campaign_trail.running_mate", pk: 160, fields: { candidate: 202, running_mate: 214 } },
    { model: "campaign_trail.running_mate", pk: 115, fields: { candidate: 167, running_mate: 177 } },
    { model: "campaign_trail.running_mate", pk: 46, fields: { candidate: 69, running_mate: 73 } },
    { model: "campaign_trail.running_mate", pk: 47, fields: { candidate: 70, running_mate: 76 } },
    { model: "campaign_trail.running_mate", pk: 96, fields: { candidate: 144, running_mate: 150 } },
    { model: "campaign_trail.running_mate", pk: 97, fields: { candidate: 145, running_mate: 151 } },
    { model: "campaign_trail.running_mate", pk: 105, fields: { candidate: 154, running_mate: 163 } },
    { model: "campaign_trail.running_mate", pk: 1, fields: { candidate: 16, running_mate: 30 } },
    { model: "campaign_trail.running_mate", pk: 87, fields: { candidate: 131, running_mate: 135 } },
    { model: "campaign_trail.running_mate", pk: 94, fields: { candidate: 143, running_mate: 148 } },
    { model: "campaign_trail.running_mate", pk: 89, fields: { candidate: 132, running_mate: 137 } },
    { model: "campaign_trail.running_mate", pk: 3, fields: { candidate: 17, running_mate: 31 } },
    { model: "campaign_trail.running_mate", pk: 155, fields: { candidate: 201, running_mate: 209 } },
    { model: "campaign_trail.running_mate", pk: 92, fields: { candidate: 142, running_mate: 146 } },
    { model: "campaign_trail.running_mate", pk: 41, fields: { candidate: 25, running_mate: 62 } },
    { model: "campaign_trail.running_mate", pk: 22, fields: { candidate: 20, running_mate: 45 } },
    { model: "campaign_trail.running_mate", pk: 48, fields: { candidate: 77, running_mate: 81 } },
    { model: "campaign_trail.running_mate", pk: 26, fields: { candidate: 21, running_mate: 49 } },
    { model: "campaign_trail.running_mate", pk: 77, fields: { candidate: 117, running_mate: 121 } },
    { model: "campaign_trail.running_mate", pk: 68, fields: { candidate: 105, running_mate: 108 } },
    { model: "campaign_trail.running_mate", pk: 37, fields: { candidate: 24, running_mate: 58 } },
    { model: "campaign_trail.running_mate", pk: 150, fields: { candidate: 200, running_mate: 204 } },
    { model: "campaign_trail.running_mate", pk: 33, fields: { candidate: 23, running_mate: 55 } },
    { model: "campaign_trail.running_mate", pk: 101, fields: { candidate: 153, running_mate: 159 } },
    { model: "campaign_trail.running_mate", pk: 44, fields: { candidate: 67, running_mate: 71 } },
    { model: "campaign_trail.running_mate", pk: 62, fields: { candidate: 92, running_mate: 99 } },
    { model: "campaign_trail.running_mate", pk: 71, fields: { candidate: 106, running_mate: 111 } },
    { model: "campaign_trail.running_mate", pk: 18, fields: { candidate: 36, running_mate: 18 } },
    { model: "campaign_trail.running_mate", pk: 45, fields: { candidate: 68, running_mate: 72 } },
    { model: "campaign_trail.running_mate", pk: 98, fields: { candidate: 152, running_mate: 156 } },
    { model: "campaign_trail.running_mate", pk: 13, fields: { candidate: 29, running_mate: 27 } },
    { model: "campaign_trail.running_mate", pk: 12, fields: { candidate: 27, running_mate: 29 } },
    { model: "campaign_trail.running_mate", pk: 58, fields: { candidate: 91, running_mate: 95 } },
    { model: "campaign_trail.running_mate", pk: 99, fields: { candidate: 152, running_mate: 157 } },
    { model: "campaign_trail.running_mate", pk: 63, fields: { candidate: 92, running_mate: 100 } },
    { model: "campaign_trail.running_mate", pk: 107, fields: { candidate: 165, running_mate: 169 } },
    { model: "campaign_trail.running_mate", pk: 111, fields: { candidate: 166, running_mate: 173 } },
    { model: "campaign_trail.running_mate", pk: 85, fields: { candidate: 68, running_mate: 129 } },
    { model: "campaign_trail.running_mate", pk: 83, fields: { candidate: 67, running_mate: 127 } },
    { model: "campaign_trail.running_mate", pk: 108, fields: { candidate: 165, running_mate: 170 } },
    { model: "campaign_trail.running_mate", pk: 59, fields: { candidate: 91, running_mate: 96 } },
    { model: "campaign_trail.running_mate", pk: 15, fields: { candidate: 29, running_mate: 40 } },
    { model: "campaign_trail.running_mate", pk: 113, fields: { candidate: 166, running_mate: 175 } },
    { model: "campaign_trail.running_mate", pk: 112, fields: { candidate: 166, running_mate: 174 } },
    { model: "campaign_trail.running_mate", pk: 60, fields: { candidate: 91, running_mate: 97 } },
    { model: "campaign_trail.running_mate", pk: 109, fields: { candidate: 165, running_mate: 171 } },
    { model: "campaign_trail.running_mate", pk: 73, fields: { candidate: 106, running_mate: 113 } },
    { model: "campaign_trail.running_mate", pk: 34, fields: { candidate: 23, running_mate: 44 } },
    { model: "campaign_trail.running_mate", pk: 9, fields: { candidate: 27, running_mate: 33 } },
    { model: "campaign_trail.running_mate", pk: 10, fields: { candidate: 27, running_mate: 40 } },
    { model: "campaign_trail.running_mate", pk: 69, fields: { candidate: 105, running_mate: 109 } },
    { model: "campaign_trail.running_mate", pk: 102, fields: { candidate: 153, running_mate: 160 } },
    { model: "campaign_trail.running_mate", pk: 110, fields: { candidate: 165, running_mate: 172 } },
    { model: "campaign_trail.running_mate", pk: 20, fields: { candidate: 36, running_mate: 42 } },
    { model: "campaign_trail.running_mate", pk: 19, fields: { candidate: 36, running_mate: 41 } },
    { model: "campaign_trail.running_mate", pk: 16, fields: { candidate: 29, running_mate: 33 } },
    { model: "campaign_trail.running_mate", pk: 93, fields: { candidate: 142, running_mate: 147 } },
    { model: "campaign_trail.running_mate", pk: 103, fields: { candidate: 153, running_mate: 161 } },
    { model: "campaign_trail.running_mate", pk: 72, fields: { candidate: 106, running_mate: 112 } },
    { model: "campaign_trail.running_mate", pk: 151, fields: { candidate: 200, running_mate: 205 } },
    { model: "campaign_trail.running_mate", pk: 86, fields: { candidate: 68, running_mate: 130 } },
    { model: "campaign_trail.running_mate", pk: 78, fields: { candidate: 117, running_mate: 122 } },
    { model: "campaign_trail.running_mate", pk: 61, fields: { candidate: 91, running_mate: 98 } },
    { model: "campaign_trail.running_mate", pk: 84, fields: { candidate: 67, running_mate: 128 } },
    { model: "campaign_trail.running_mate", pk: 43, fields: { candidate: 25, running_mate: 64 } },
    { model: "campaign_trail.running_mate", pk: 42, fields: { candidate: 25, running_mate: 63 } },
    { model: "campaign_trail.running_mate", pk: 40, fields: { candidate: 24, running_mate: 61 } },
    { model: "campaign_trail.running_mate", pk: 39, fields: { candidate: 24, running_mate: 60 } },
    { model: "campaign_trail.running_mate", pk: 38, fields: { candidate: 24, running_mate: 59 } },
    { model: "campaign_trail.running_mate", pk: 95, fields: { candidate: 143, running_mate: 149 } },
    { model: "campaign_trail.running_mate", pk: 100, fields: { candidate: 152, running_mate: 158 } },
    { model: "campaign_trail.running_mate", pk: 30, fields: { candidate: 21, running_mate: 51 } },
    { model: "campaign_trail.running_mate", pk: 28, fields: { candidate: 21, running_mate: 50 } },
    { model: "campaign_trail.running_mate", pk: 24, fields: { candidate: 20, running_mate: 47 } },
    { model: "campaign_trail.running_mate", pk: 17, fields: { candidate: 29, running_mate: 31 } },
    { model: "campaign_trail.running_mate", pk: 11, fields: { candidate: 27, running_mate: 31 } },
    { model: "campaign_trail.running_mate", pk: 79, fields: { candidate: 117, running_mate: 123 } },
    { model: "campaign_trail.running_mate", pk: 80, fields: { candidate: 117, running_mate: 124 } },
    { model: "campaign_trail.running_mate", pk: 90, fields: { candidate: 132, running_mate: 138 } },
    { model: "campaign_trail.running_mate", pk: 4, fields: { candidate: 17, running_mate: 32 } },
    { model: "campaign_trail.running_mate", pk: 153, fields: { candidate: 200, running_mate: 207 } },
    { model: "campaign_trail.running_mate", pk: 104, fields: { candidate: 153, running_mate: 162 } },
    { model: "campaign_trail.running_mate", pk: 157, fields: { candidate: 201, running_mate: 211 } },
    { model: "campaign_trail.running_mate", pk: 25, fields: { candidate: 20, running_mate: 48 } },
    { model: "campaign_trail.running_mate", pk: 159, fields: { candidate: 201, running_mate: 213 } },
    { model: "campaign_trail.running_mate", pk: 88, fields: { candidate: 131, running_mate: 136 } },
    { model: "campaign_trail.running_mate", pk: 70, fields: { candidate: 105, running_mate: 110 } },
    { model: "campaign_trail.running_mate", pk: 2, fields: { candidate: 16, running_mate: 34 } },
    { model: "campaign_trail.running_mate", pk: 35, fields: { candidate: 23, running_mate: 56 } },
    { model: "campaign_trail.running_mate", pk: 64, fields: { candidate: 92, running_mate: 101 } },
    { model: "campaign_trail.running_mate", pk: 36, fields: { candidate: 23, running_mate: 57 } },
    { model: "campaign_trail.running_mate", pk: 5, fields: { candidate: 17, running_mate: 33 } },
    { model: "campaign_trail.running_mate", pk: 6, fields: { candidate: 17, running_mate: 37 } },
    { model: "campaign_trail.running_mate", pk: 23, fields: { candidate: 20, running_mate: 46 } },
    { model: "campaign_trail.running_mate", pk: 152, fields: { candidate: 200, running_mate: 206 } },
    { model: "campaign_trail.running_mate", pk: 154, fields: { candidate: 200, running_mate: 208 } },
    { model: "campaign_trail.running_mate", pk: 21, fields: { candidate: 36, running_mate: 43 } },
    { model: "campaign_trail.running_mate", pk: 91, fields: { candidate: 132, running_mate: 139 } },
    { model: "campaign_trail.running_mate", pk: 32, fields: { candidate: 21, running_mate: 53 } },
    { model: "campaign_trail.running_mate", pk: 31, fields: { candidate: 21, running_mate: 52 } },
    { model: "campaign_trail.running_mate", pk: 156, fields: { candidate: 201, running_mate: 210 } },
    { model: "campaign_trail.running_mate", pk: 158, fields: { candidate: 201, running_mate: 212 } },
    { model: "campaign_trail.running_mate", pk: 75, fields: { candidate: 106, running_mate: 115 } },
    { model: "campaign_trail.running_mate", pk: 65, fields: { candidate: 92, running_mate: 102 } }
];

campaignTrail_temp.opponents_default_json = [
    { election: 20, candidates: [201, 202, 203, 200] },
    { election: 16, candidates: [167, 168, 166, 165] },
    { election: 3, candidates: [19, 18, 17, 16] },
    { election: 9, candidates: [77, 78, 79, 80] },
    { election: 15, candidates: [154, 155, 152, 153] },
    { election: 10, candidates: [93, 94, 91, 92] },
    { election: 4, candidates: [25, 24, 23] },
    { election: 11, candidates: [107, 105, 106] },
    { election: 12, candidates: [116, 118, 119, 117] },
    { election: 14, candidates: [143, 145, 144, 142] },
    { election: 5, candidates: [22, 20, 21] },
    { election: 8, candidates: [69, 70, 67, 68] },
    { election: 13, candidates: [133, 134, 132, 131] }
];

campaignTrail_temp.opponents_weighted_json = [
    { election: 20, candidates: [201, 200, 202, 203] },
    { election: 16, candidates: [165, 166, 167, 168] },
    { election: 3, candidates: [16, 17, 18, 19] },
    { election: 9, candidates: [78, 77, 79, 80] },
    { election: 15, candidates: [153, 152, 154, 155] },
    { election: 10, candidates: [91, 92, 93] },
    { election: 4, candidates: [24, 25] },
    { election: 11, candidates: [105, 106, 107] },
    { election: 12, candidates: [116, 117, 118, 119] },
    { election: 14, candidates: [142, 143, 144, 145] },
    { election: 5, candidates: [21, 20, 22] },
    { election: 8, candidates: [68, 67, 69, 70] },
    { election: 13, candidates: [131, 134, 132, 133] }
];

campaignTrail_temp.temp_election_list = [
    {
        "id": 9,
        "year": 2012,
        "is_premium": 0,
        "display_year": "2012 - Obamanation"
    }
];
campaignTrail_temp.credits = `
    <button onclick='credits()'>Cannonbollocks & ᴛʜᴇ ᴏʙᴀᴍᴀɴᴀᴛɪᴏɴ ꜰᴀɴ ᴄʟᴜʙ</button>
    `;

$("#dynamic-favicon").attr("href", "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/MCA5gSZ.png");

const creditsItemsA = [
    { photo: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/MFevdkW.png', name: 'Cannonbollocks (Accurate_Feature9970)', text: 'Lead/Coding/Co-Writer' },
    { photo: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/MJL3qtR.png', name: 'Murraythedog', text: 'Co-Writer' },
    { photo: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/39tZy0x.png', name: 'StrawberryMaster', text: 'UI Help/Without their extraordinary help, this Definitive Edition wouldn\'t exist.' },
    { photo: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/beuz34a.png', name: 'imfakeithink', text: 'Ending Help/Other Help/President of ᴛʜᴇ ᴏʙᴀᴍᴀɴᴀᴛɪᴏɴ ꜰᴀɴ ᴄʟᴜʙ' },
    { photo: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/EAbZNjN.png', name: 'DysonEngineer', text: 'Ending Help/Other Help' },
    { photo: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/HFNOmgt.png', name: 'Girlie', text: 'Other Help' },
    { photo: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/CUhRYCg.png', name: 'Shockonomics', text: 'Ending Help' },
    { photo: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/2e7fMuY.png', name: 'ThatQuayleSimp (Evening_Wave_4174)', text: 'Other Help' },
    { photo: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/T9bc2Ah.png', name: 'el_pres', text: 'UI Help/Ending Help' }
];

const specialThanks = [
    "Jet", "Thatchmaster", "TheBigCheese87", "Massachusetts4Stockdale",
    "Ettingermentum", "velvet", "Datoggy", "Ohas"
];

let savedX = null;
let savedY = null;

campaignTrail_temp.credits = `
	  <button onclick='openCredits(event)'>Cannonbollocks & ᴛʜᴇ ᴏʙᴀᴍᴀɴᴀᴛɪᴏɴ ꜰᴀɴ ᴄʟᴜʙ</button>
	`;
$("#dynamic-favicon").attr("href", "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/MCA5gSZ.png");

function makeGroupBox(title) {
    const fs = document.createElement('fieldset');
    fs.className = 'comp-box';
    const legend = document.createElement('legend');
    legend.className = 'comp-legend';
    legend.textContent = title;
    fs.appendChild(legend);
    return fs;
}

function makeDraggable(element, handle) {
    let isDragging = false;
    let offsetX, offsetY;
    const dragHandle = handle || element;
    dragHandle.onmousedown = function (event) {
        if (event.target.tagName === 'BUTTON' || event.target.tagName === 'INPUT' || event.target.tagName === 'UL') return;
        isDragging = true;
        offsetX = event.clientX - element.getBoundingClientRect().left;
        offsetY = event.clientY - element.getBoundingClientRect().top;
        document.body.classList.add('is-dragging');
        document.onmousemove = function (event) {
            if (isDragging) {
                const newX = event.clientX - offsetX;
                const newY = event.clientY - offsetY;
                element.style.left = newX + 'px';
                element.style.top = newY + 'px';
                savedX = newX;
                savedY = newY;
            }
        };
        document.onmouseup = function () {
            isDragging = false;
            document.body.classList.remove('is-dragging');
            document.onmousemove = null;
            document.onmouseup = null;
        };
        event.preventDefault();
    };
}

if (!document.getElementById('drag_style')) {
    const dragStyle = document.createElement('style');
    dragStyle.id = 'drag_style';
    dragStyle.innerHTML = `.is-dragging * { user-select: none; }`;
    document.head.appendChild(dragStyle);
}

window.openCredits = function (ev) {
    if (!document.getElementById('credits_inline_styles')) {
        const style = document.createElement('style');
        style.id = 'credits_inline_styles';
        style.textContent = `
		  #popOutMenu .window-body { background: #fff; font-family: "Segoe UI", Arial, sans-serif; }
		  #popOutMenu .comp-box { border: 1px solid #a9c3ea; border-radius: 4px; padding: 8px 10px 10px; background: #ffffff; position: relative; }
		  #popOutMenu .comp-legend { color: #0b54b4; font-weight: 700; font-size: 13px; padding: 2px 8px; border: 1px solid #a9c3ea; border-radius: 4px; background: linear-gradient(#eef5ff, #dfeaff); box-shadow: inset 0 1px 0 #ffffff; }
		  #popOutMenu .comp-box::after { content: ""; display: block; height: 1px; margin-top: 6px; background: linear-gradient(to right, #cfe0fb, #a9c3ea, #cfe0fb); }
		  #popOutMenu .comp-legend + * { margin-top: 6px; }
		  #popOutMenu .credits-list { list-style: none; margin: 0; padding: 2px; height: 245px; overflow-y: auto; }
		  #popOutMenu .candidate { display: flex; align-items: flex-start; margin: 0 8px 6px 0; }
		  #popOutMenu .candidate .photo { width: 85px; height: 85px; border: 1px solid #000; margin-right: 10px; flex-shrink: 0; }
		  #popOutMenu .candidate .info { flex: 1; min-width: 0; }
		  #popOutMenu .candidate .namebar { display: inline-flex; align-items: center; gap: 6px; padding: 2px 8px; margin: 0 0 6px 0; border: 1px solid #cdcdcd; border-radius: 3px; background: linear-gradient(#f7f7f7, #e6e6e6); }
		  #popOutMenu .candidate .namebar .bullet { width: 14px; height: 14px; border-radius: 50%; background: linear-gradient(#fefefe, #ececec); border: 1px solid; box-shadow: 0 1px 0 #fff, inset 0 1px 1px rgba(0,0,0,.12); position: relative; flex: 0 0 auto; }
		  #popOutMenu .candidate .namebar .bullet::after { content: ""; position: absolute; top: 50%; left: 50%; width: 6px; height: 6px; border-radius: 50%; transform: translate(-50%, -50%); box-shadow: inset 0 0 0 1px rgba(0,0,0,.08); }
		  #popOutMenu .candidate .namebar .bullet.blue { border-color: #6aa0e8; }
		  #popOutMenu .candidate .namebar .bullet.blue::after { background: #2f6cc9; }
		  #popOutMenu .candidate .namebar .cand-name { font-weight: 700; font-size: 15px; line-height: 1.1; color: #0045AC; }
		  #popOutMenu .candidate .cand-text { margin: 0; font-size: 11px; line-height: 1.3; }
		  #popOutMenu .credits-header { margin-bottom: 12px; }
		  #popOutMenu .credits-header h3 { margin: 0; font-size: 18px; font-weight: 700; color: #0045AC; }
		  #popOutMenu .credits-header p { margin: 2px 0 0 0; font-size: 13px; font-style: normal; }
		  #popOutMenu .thanks-columns { display: flex; gap: 20px; }
		  #popOutMenu .thanks-columns ul { list-style-type: none; padding-left: 5px; margin: 0; font-size: 11px; }
		  #popOutMenu .thanks-columns li { margin-bottom: 3px; position: relative; padding-left: 12px; }
		  #popOutMenu .thanks-columns li::before { content: '•'; position: absolute; left: 0; top: 0; }
		`;
        document.head.appendChild(style);
    }

    let popOutMenu = document.getElementById('popOutMenu');
    if (popOutMenu) popOutMenu.remove();

    popOutMenu = document.createElement('div');
    popOutMenu.id = 'popOutMenu';
    popOutMenu.className = 'window active';
    popOutMenu.style.cssText = 'position: absolute; width: 500px; z-index: 1000;';

    const titleBar = document.createElement('div');
    titleBar.className = 'title-bar';
    const titleBarText = document.createElement('div');
    titleBarText.className = 'title-bar-text';
    titleBarText.textContent = 'Credits';
    const titleBarControls = document.createElement('div');
    titleBarControls.className = 'title-bar-controls';
    const closeButton = document.createElement('button');
    closeButton.setAttribute('aria-label', 'Close');
    closeButton.onclick = window.closeCredits;
    titleBarControls.appendChild(closeButton);
    titleBar.appendChild(titleBarText);
    titleBar.appendChild(titleBarControls);
    popOutMenu.appendChild(titleBar);

    const windowBody = document.createElement('div');
    windowBody.className = 'window-body';
    windowBody.style.padding = '10px';

    const topSection = document.createElement('div');
    topSection.style.display = 'grid';
    topSection.style.gridTemplateColumns = '1.7fr 1fr';
    topSection.style.gap = '10px';
    topSection.style.marginBottom = '10px';
    topSection.style.alignItems = 'start';

    const leftColumn = document.createElement('div');
    const header = document.createElement('div');
    header.className = 'credits-header';
    header.innerHTML = `<h3>OBAMANATION</h3><p>No You Can't: The Definitive Edition</p>`;

    const thanksGroup = makeGroupBox('Special Thanks');
    const thanksColumns = document.createElement('div');
    thanksColumns.className = 'thanks-columns';
    const list1 = document.createElement('ul');
    const list2 = document.createElement('ul');
    specialThanks.slice(0, 4).forEach(name => {
        const li = document.createElement('li');
        li.textContent = name;
        list1.appendChild(li);
    });
    specialThanks.slice(4).forEach(name => {
        const li = document.createElement('li');
        li.textContent = name;
        list2.appendChild(li);
    });
    thanksColumns.appendChild(list1);
    thanksColumns.appendChild(list2);
    thanksGroup.appendChild(thanksColumns);

    leftColumn.appendChild(header);
    leftColumn.appendChild(thanksGroup);

    const newsGroup = makeGroupBox('Latest News');
    const qpic = document.createElement('img');
    qpic.src = "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/FChrhqE.png";
    qpic.style.cssText = 'width: 150px; height: auto; display: block; margin: 0 auto;';
    newsGroup.appendChild(qpic);

    topSection.appendChild(leftColumn);
    topSection.appendChild(newsGroup);
    windowBody.appendChild(topSection);

    const teamGroup = makeGroupBox('Development Team');
    const teamList = document.createElement('ul');
    teamList.className = 'credits-list has-scrollbar';
    const fragment = document.createDocumentFragment();
    creditsItemsA.forEach(item => {
        const menuItem = document.createElement('div'); menuItem.className = 'candidate';
        const photo = document.createElement('img'); photo.className = 'photo'; photo.src = item.photo;
        const info = document.createElement('div'); info.className = 'info';
        const namebar = document.createElement('div'); namebar.className = 'namebar';
        const bullet = document.createElement('span'); bullet.className = 'bullet blue';
        const name = document.createElement('span'); name.className = 'cand-name'; name.textContent = item.name;
        const text = document.createElement('p'); text.className = 'cand-text'; text.innerHTML = item.text;
        namebar.appendChild(bullet); namebar.appendChild(name);
        info.appendChild(namebar); info.appendChild(text);
        menuItem.appendChild(photo); menuItem.appendChild(info);
        fragment.appendChild(menuItem);
    });
    teamList.appendChild(fragment);
    teamGroup.appendChild(teamList);
    windowBody.appendChild(teamGroup);

    popOutMenu.appendChild(windowBody);
    document.body.appendChild(popOutMenu);

    makeDraggable(popOutMenu, titleBar);

    if (savedX !== null && savedY !== null) {
        popOutMenu.style.left = savedX + 'px';
        popOutMenu.style.top = savedY + 'px';
    } else {
        const evt = ev || window.event;
        const buttonRect = evt?.target?.getBoundingClientRect() ? evt.target.getBoundingClientRect() : { right: window.innerWidth / 2, top: window.innerHeight / 2 };
        const initialX = Math.max(0, buttonRect.right + window.scrollX - popOutMenu.offsetWidth);
        const initialY = Math.max(0, buttonRect.top + window.scrollY - 100);
        popOutMenu.style.left = initialX + 'px';
        popOutMenu.style.top = initialY + 'px';
    }
    popOutMenu.style.display = 'block';
}

window.closeCredits = function () {
    const popOutMenu = document.getElementById('popOutMenu');
    if (popOutMenu) {
        const rect = popOutMenu.getBoundingClientRect();
        savedX = rect.left;
        savedY = rect.top;
        popOutMenu.remove();
    }
}

campaignTrail_temp.show_premium = true;
campaignTrail_temp.premier_ab_test_version = -1;

e = campaignTrail_temp

campaignTrail_temp.difficulty_level_json = [
    {
        "model": "campaign_trail.difficulty_level",
        "pk": 3,
        "fields": {
            "name": "Standard",
            "multiplier": 0.97
        }
    },
    {
        "model": "campaign_trail.difficulty_level",
        "pk": 5,
        "fields": {
            "name": "Obaminable",
            "multiplier": 0.93
        }
    }
];

// helper to ensure a stylesheet is appended only once
function ensureStylesheet(url, id) {
	// if an id is provided and exists, bail out
	if (id && document.getElementById(id)) return;
	// if a link with same href already exists, bail out
	if (document.querySelector('link[rel="stylesheet"][href="' + url + '"]')) return;
	const link = document.createElement('link');
	link.rel = 'stylesheet';
	link.href = url;
	if (id) link.id = id;
	document.head.appendChild(link);
}

ensureStylesheet('https://unpkg.com/7.css', 'unpkg-7css');

function ensureMetaViewport() {
    if (!document.querySelector('meta[name="viewport"]')) {
        const m = document.createElement('meta');
        m.name = 'viewport';
        m.content = 'width=device-width, initial-scale=1';
        document.head.appendChild(m);
    }
}

applyGlobalStyles.sheets = {};

function applyGlobalStyles(css, id = 'app-theme') {
    if ('adoptedStyleSheets' in document && 'replaceSync' in CSSStyleSheet.prototype) {
        if (!applyGlobalStyles.sheets[id]) {
            applyGlobalStyles.sheets[id] = new CSSStyleSheet();
            document.adoptedStyleSheets = [...document.adoptedStyleSheets, applyGlobalStyles.sheets[id]];
        }
        applyGlobalStyles.sheets[id].replaceSync(css);
        return;
    }

    let el = document.getElementById(id);
    if (!el) {
        el = document.createElement('style');
        el.id = id;
        document.head.appendChild(el);
    }
    el.textContent = css;
}

const css = `		
					#closeButton {
						background: none;
						border: none;
						outline: none;
						padding: 0;
						cursor: pointer;
					}
					.inner_inner_window h3 {
						background-color: #E8EFFF;
						background: linear-gradient(to bottom, #768fa6, #8fa7bd);
					}
					#opponent_selection_id_button_p {
						color: #fff;
					}						

					/* Override xp.css focus and hover styles */
					#closeButton:focus,
					#closeButton:active,
					#closeButton:hover {
						outline: none;
						box-shadow: none;
						border: none;
					}

					h3 {
						font-size:1.17em!important;
						font-family: Segoe UI, "Helvetica Neue", Helvetica, sans-serif!important;
					}
				
					label {
						font-size:0.92em!important;
						font-family: Segoe UI, "Helvetica Neue", Helvetica, sans-serif!important;
					}
				body {
                    background-image: url(https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/zUFIWre.jpeg);
                    background-position: center;
                    background-size: cover;
                    display: flex !important;
                }

                .container {
                    background-color: #1d2754 !important;;
                    border: 0em;
                    border-left: .2em double #cccccc !important;
                    border-right: .2em double #cccccc !important;
                    padding: 0.0em;
                    width: 100em !important;
                }
				
				#game_window {
                    background-color: #1d2754 !important;;
                    background-image: url(https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/ENrcfdQ.png);
                    border: .1em double #ffffff;
                    max-width: 1000px;
                }

                #results_container {
                    color: #fff;
                }
                .inner_window_w_desc {
                    background: rgba(10, 20, 60, 0.6) !important;
                }

                .campaign_trail_start_emphasis {
                    background-color: #F8F8F8;
                }

			  .overlay_window {
				  height: auto;
			  }

			  #closeButton:hover {
				  outline: none;
				  border: none;
			  }

			  /* Image positioned in the bottom-right */
			  #closeIcon {
				  position: absolute;
				  bottom: 0;
				  left: 0;
				  width: 52px;  /* Adjust as needed */
				  height: 20px; /* Adjust as needed */
			  }

	
			label {
			  display:inline-block;
			}
  
			.content_single li {
			  line-height: 1.39em;
			}
  
			input[type=radio]+label {
			  display: inline;
			}
	
			.mytooltip {
				position: relative;
				display: inline-block;
				cursor: pointer;
				color: #00e;
				text-decoration: underline #84c8db;
				text-underline-offset: 2px;
			}
	
			.mytooltip .mytooltiptext {
				width: 240px;
				background-color: #00a2ed;
				color: black;
				text-align: center;
				border-radius: 6px;
				padding: 10px;
				position: absolute;
				z-index: 99;
				bottom: 20%;
				left: 20%;
				margin-left: -90px;
				opacity: 0;
				transition: opacity 0.3s;
				border: 1px solid black;
				pointer-events: none;
				font-size: 13px !important;
				line-height: 1.5em !important;
				font-weight: normal !important;
				font-style: normal !important;
			}
	
			.mytooltip .mytooltiptext img {
				max-width: 240px;
				height: auto;
			}

	
			.mytooltip:hover .mytooltiptext {
				opacity: 1;
				transition-delay: 0.5s;
			}			
			
			/* this is specifically for tooltips inside the advisor feedback module */
			#visit_window .mytooltiptext {
			  padding: .1em 1.2em .75em;
			}
  
			#final_results_description p {
			  color: white;
			  font-family: Segoe UI;
			}
  
			#overall_details_container h3,
			#overall_election_details h4,
			#main_content_area_reading p,
			#main_content_area_reading h3.results_tab_header,
			.inner_window_w_desc h3,
			#credits {
			  color: white;
			}
			
			#hidden_checkbox {
			  opacity: 1;
			  appearance: auto;
			}
			
			/* 7.css overrides */
			#bottomBar::before, #bottomBar::after {
				content: none;
			}
			
			/* Other accessibility fixes */
			#state_info {
				height: auto;
			}
			#recommended_reading_box {
			  padding: .5em;
			}
			#overall_result h3 {
			  padding: .2em 0;
			}
			#election_id, #candidate_id, #running_mate_id, #game_type_id, #difficulty_level_id,
			#sort_tab, #state_tab {
			  color: #000;
			}
			#menu_container, #overall_result_container, #state_result_container {
			  background: transparent !important;
			}
			#visit_buttons, #election_night_buttons, #winner_buttons {
				margin-bottom: 1em;
			}
			.overlay_window h3 {
				background: linear-gradient(to left, #d9f0ff, #abcde3, #ccebff);
			}
			#state_result_data_summary table td:first-child span,
			#overall_details_container table td:first-child span,
			.final_results_table td:first-child span {
				border: 1px solid rgba(0, 0, 0, 0.2);
				display: inline-flex;
				height: 1em;
				margin-right: .25em;
				text-indent: -9999px;
				vertical-align: text-bottom;
				width: 1em;
			}

			/* Vista-like styling by weedsoldier */
			:root {
				--glass-bg: rgba(10, 20, 60, 0.6);
				--glass-border: 1px solid rgba(0, 0, 0, 0.4);
				--glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.1),
								inset 0 1px 0 rgba(255, 255, 255, 0.5),
								inset 0 -1px 0 rgba(255, 255, 255, 0.1);
				--glass-backdrop: blur(2px) saturate(180%) contrast(110%);
				--glass-radius: 6px;
				--text-shadow-subtle: 0 1px 2px rgba(0, 0, 0, 0.5);
				--text-shadow-strong: 0 1px 2px rgba(0, 0, 0, 0.8);
				--sheen-gradient: linear-gradient(90deg,
					rgba(255, 255, 255, 0.25) 0%,
					rgba(255, 255, 255, 0.0) 45%,
					rgba(255, 255, 255, 0.0) 55%,
					rgba(255, 255, 255, 0.25) 100%);
			}

			p, div, label, td, td span, th, li span {
				font-family: Segoe UI, "Helvetica Neue", Helvetica, sans-serif;
			}

			.container {
				background: linear-gradient(180deg, #01446A 0%, #01446A 15%, #002036 100%);
				box-shadow: 0 0 20px rgba(0, 0, 0, 0.6);
			}

			#game_window {
				background: rgba(40, 60, 120, 0.45) url(https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/ENrcfdQ.png) center/cover no-repeat;
				box-shadow: 0 5px 10px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.4);
				border-radius: 2px;
			}

			#inner_window_2.inner_window_w_desc {
				height: calc(100% - 74px);
				background: var(--glass-bg);
				backdrop-filter: var(--glass-backdrop);
				border: none;
				box-shadow: var(--glass-shadow);
				overflow: hidden;
			}

			#inner_window_3.inner_window_w_desc, #inner_window_4.inner_window_w_desc {
				height: calc(100% - 74px);
				border: none;
				overflow: hidden;
			}

			.inner_window_w_desc::before,
			.overlay_window h3::before,
			.mytooltip .mytooltiptext::before {
				content: "";
				position: absolute;
				inset: 0;
				background: var(--sheen-gradient);
                mix-blend-mode: screen;
                pointer-events: none;
                opacity: 1;
                z-index: -100;
			}

			.overlay_window h3::before {
				background: linear-gradient(90deg,
					rgba(204, 226, 255, 0.5) 0%,
					rgba(187, 224, 255, 0.25) 45%,
					rgba(187, 224, 255, 0.25) 55%,
					rgba(204, 226, 255, 0.5) 100%);
				border-radius: var(--glass-radius) var(--glass-radius) 0 0;
                z-index: -100;
			}

			.overlay_window,
			#visit_window {
				padding-bottom: 10px;
				background: linear-gradient(180deg, #fff 0%, #f0f0f0 50%, #fff 100%);
				border: none;
				border-radius: 0 0 var(--glass-radius) var(--glass-radius);
			}

			.overlay_window p,
			#visit_window p {
				font-weight: normal;
				text-shadow: var(--text-shadow-subtle);
			}

			.overlay_window h3 {
				position: relative;
				top: -1.84em;
				left: -0.09em;
				padding: 0.15em 1em 0.25em;
				font-weight: normal !important;
				text-align: left;
				background: transparent !important;
				color: #fff;
				text-shadow: 0 0 10px #000, 0 0 20px #000, 0 0 30px #000;
				border: var(--glass-border);
				border-bottom: 0.1em double #C9C9C9;
				width: 29.7em;
				box-shadow: var(--glass-shadow);
				backdrop-filter: var(--glass-backdrop);
				border-radius: var(--glass-radius) var(--glass-radius) 0 0;
				overflow: hidden;
			}

			.mytooltip .mytooltiptext {
				background: var(--glass-bg) !important;
				color: white !important;
				border-radius: 2px !important;
				border: var(--glass-border);
				box-shadow: var(--glass-shadow);
				backdrop-filter: var(--glass-backdrop);
				z-index: 100;
			}

			.mytooltip .mytooltiptext img {
				border: none !important;
			}

			#results_container,
			#overall_details_container h3,
			#overall_election_details h4,
			#main_content_area_reading p,
			#main_content_area_reading h3.results_tab_header,
			.inner_window_w_desc h3,
			#credits {
				text-shadow: var(--text-shadow-strong);
			}

			.campaign_trail_start_emphasis {
				background: linear-gradient(to bottom, rgba(255, 255, 255, 0.85), rgba(230, 230, 230, 0.6));
				border: 1px solid rgba(255, 255, 255, 0.4);
				border-radius: var(--glass-radius);
			}

			#closeButton:hover {
				filter: brightness(1.2);
			}

			#closeIcon {
				opacity: 0.8;
				transition: opacity 0.2s ease-in-out;
			}

			#closeIcon:hover {
				opacity: 1;
			}

			.content_single {
				border: none;
				padding-top: 2px;
			}
			
			#overall_vote_statistics, #state_result_data_summary {
				text-shadow: none;
			}
			
			/* this is so checkboxes do appear */
			#difficulty_level input {
			  appearance: checkbox;
			  opacity: 1;
			}
			
			/* Mobile compatibility fixes - partially inspired by those of TTNW */
			@media only screen and (max-width: 768px) {
			
			 /* necessary to ensure the music player stays in position */
			  #game_window {
				flex: 1 1 auto;
				min-height: clamp(400px, 45vh, 600px);
				height: auto;
				align-self: stretch;
				overflow: visible;
				box-sizing: border-box;
				background-position: center bottom;
				background-repeat: no-repeat;
				background-size: cover;
			  }
			
			  #question_form button, #inner_window_2 button, #inner_window_3 button, #inner_window_4 button, #game_window button, #headquarter button, #advisorsDiv button {
				font-size: clamp(16px, 4.2vw, 20px);
				line-height: 1.2;
				padding: 10px 16px;
				min-height: 44px;
			  }
			  
			  #inner_window_2 button, #inner_window_3 button, #inner_window_4 button, #game_window button, #headquarter button, #advisorsDiv button {
				font-size: 1em;
				line-height: 2em;
			  }

			.inner_window_question button, #visit_window button, #map_footer {
				line-height: 2.5em;
			  }
			  
			  #map_footer {
				padding-right: 10em;
			  }
			  .inner_window_question, #results_container, #map_footer, #overall_details_container, #main_content_area_reading, #inner_window_2, #inner_window_3, #inner_window_4, #advisors {
				font-size: 1.8em;
			  }

			  .inner_window_question {
				height: auto !important;
				min-height: 0 !important;
				max-height: none !important;
				position: static !important;
				top: auto !important;
				bottom: auto !important;
				flex: 0 1 auto !important;
				align-self: auto !important;
				grid-row: auto !important;
				grid-column: auto !important;
				justify-self: auto !important;
				display: flow-root !important;
				overflow: visible !important;
				box-sizing: border-box !important;
				max-height: 395px;
			  }

				#question_form input[type="radio"] {
					width: 1.3em;
					height: 1.3em;
					margin: 0 10px 0 0;
					transform: none;
					align-self: center;
				}

				#question_form input[type="radio"] + label {
				    display: inline-block;
					font-size: clamp(16px, 5.2vw, 20px);
					line-height: 1.3;
					padding: 10px 12px;
					min-height: 44px;
				}

				#question_form button,
				#inner_window_2 button,
				#inner_window_3 button,
				#inner_window_4 button,
				#game_window button,
				#headquarter button,
				#advisorsDiv button {
					font-size: clamp(16px, 4.2vw, 20px);
					line-height: 1.2;
					padding: 10px 16px;
					min-height: 44px;
				}

				#question_form input[type="radio"] + label:hover,
				#question_form input[type="radio"] + label:focus {
				    display: inline-block;
					font-size: clamp(16px, 5.2vw, 20px);
					line-height: 1.3;
					padding: 10px 12px;
					font-weight: 400;
					background: #e8e8e8; /* only change background */
				}
				
				.overlay_window img {
				  width: 15em;
				  height: auto;
				}
				
				.overlay_window h3 {
				  padding: .5rem x .5rem;
				  font-size: 24px;
				}
				
			/* for the default CTS/NCT footer */
			  #game_window g {
				display: flex;
				flex-flow: row wrap;
				justify-content: center;
				align-items: center;
				gap: 8px;
				padding: 10px 5px;
			  }
			  
			  #candidate_pic, img#candidate_pic {
				order: 1;
				width: 13.5em;
				height: auto;
				flex-shrink: 0;
				margin: 0;
			  }
			  
			  .inner_window_sign_display {
				order: 2;
				flex: 1;
				min-width: 180px;
				max-width: 285px;
				display: flex;
				flex-direction: column;
				align-items: center;
				margin: 0;
			  }
			  
			  #running_mate_pic, img#running_mate_pic {
				order: 3;
				width: 13.5em;
				height: auto;
				flex-shrink: 0;
				margin: 0;
			  }
			  
			  .inner_window_sign_display img {
				max-width: 258px;
			  }
				
			/* other fixes to not break things */
			#map_container {
			  height: 30.78em;
			}
			
			.visit_text {
			  display: inline-flex;
			}
			
			#results_container {
			  display: flex;
			  flex-flow: column wrap;
			  max-height: 80dvh;
			  overflow: hidden;
			}
							
			}
			
`;

ensureMetaViewport();
applyGlobalStyles(css, 'mod-style');

let contentBox = document.getElementsByClassName("content_box")[0];
let contentSingle = document.getElementsByClassName("content_single")[0];
let containerRef = document.getElementsByClassName("container")[0];

function createBanner(url, sibling, isLeft) {
    let div = document.createElement("div");
    let img = document.createElement("img");
    
    div.style.cssText = "position: relative; margin: auto;";
    img.src = url;
    
    let x = document.createElement("div");
    x.innerText = "_";
    x.style.cssText = "position: absolute; padding: 5px; font-size: 2pt; cursor: pointer;";
    
    div.appendChild(x);
    div.appendChild(img);
    
    if (isLeft) {
        sibling.parentNode.insertBefore(div, sibling);
    } else {
        sibling.parentNode.insertBefore(div, sibling.nextSibling);
    }
    
    x.onclick = () => div.style.visibility = "hidden";
    
    return img;
}

// for the 100% completion and old portraits functions
(function () {
  if (typeof window === "undefined") return;
  const gameWindow = document.getElementById("game_window");
  if (!gameWindow) return;

  const PORTRAITS = {
    new: {
      obama: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/W4ayzx8.png',
      biden: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/GLusm2i.png',
      clinton: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/ksVJksH.png',
    },
    old: {
      obama: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/5WhyIQ6.png',
      biden: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/oIoUxiw.png',
      clinton: 'https://file.garden/aNtAfG887DiA_7lO/Obamanation/XFU4bbA.png',
    },
  };

  window.getPortraitUrls = function() {
    if (!window.campaignTrail_temp) window.campaignTrail_temp = {};
    const useOld = window.campaignTrail_temp.use_old_portraits === true;
    return useOld ? PORTRAITS.old : PORTRAITS.new;
  };

  const NORMALIZE = (s) => (typeof s === "string" ? s.trim().toLowerCase() : "");

  // read and parse unlockedAch from localStorage
  function readUnlockedAch() {
    const raw = localStorage.getItem("unlockedAch");
    if (!raw) return null;
    try {
      return JSON.parse(raw);
    } catch {
      return null;
    }
  }

  // turn many possible shapes into a set of normalized achievement titles
  function makeTitleSetFromValue(value) {
    const set = new Set();
    if (!value) return set;

    if (Array.isArray(value)) {
      for (const v of value) {
        if (typeof v === "string") set.add(NORMALIZE(v));
        else if (v && typeof v === "object") {
          // object might be { title: {...} } or {name: 'Title'}
          if (v.name && typeof v.name === "string") set.add(NORMALIZE(v.name));
          else if (v.title && typeof v.title === "string") set.add(NORMALIZE(v.title));
          else {
            // include any string keys if it's an object keyed by title
            Object.keys(v).forEach((k) => set.add(NORMALIZE(k)));
          }
        }
      }
    } else if (typeof value === "object") {
      // if keys look like titles (not numeric), add them
      Object.keys(value).forEach((k) => {
        // if the value is truthy (true/object), treat the key as unlocked title
        if (value[k] !== false && value[k] !== 0 && value[k] != null) {
          set.add(NORMALIZE(k));
        }
      });

      // gather titles from nested objects too
      Object.values(value).forEach((v) => {
        if (Array.isArray(v)) {
          for (const item of v) {
            if (typeof item === "string") set.add(NORMALIZE(item));
            else if (item && typeof item === "object") {
              if (item.name) set.add(NORMALIZE(item.name));
              else if (item.title) set.add(NORMALIZE(item.title));
              else Object.keys(item).forEach((k) => set.add(NORMALIZE(k)));
            }
          }
        } else if (v && typeof v === "object") {
          Object.keys(v).forEach((k) => {
            if (v[k] !== false && v[k] !== 0 && v[k] != null) set.add(NORMALIZE(k));
          });
        } else if (typeof v === "string") {
          set.add(NORMALIZE(v));
        }
      });
    } else if (typeof value === "string") {
      set.add(NORMALIZE(value));
    }

    return set;
  }

  function findObamanationUnlockedSet(parsed, requiredNormalized) {
    if (!parsed) return null;

    // if parsed is an array of strings/objects, flatten it
    if (Array.isArray(parsed)) {
      const flat = makeTitleSetFromValue(parsed);
      return flat;
    }

    // if parsed is an object
    if (typeof parsed === "object") {
      // quick check: do top-level keys include all required titles?
      const topKeys = Object.keys(parsed).map(NORMALIZE);
      const topKeySet = new Set(topKeys);
      const allTopHaveRequired = requiredNormalized.every((r) => topKeySet.has(r));
      if (allTopHaveRequired) {
        return makeTitleSetFromValue(parsed);
      }

      // check for nested entries that cover all required titles
      for (const [k, v] of Object.entries(parsed)) {
        // if the key looks like a mod identifier that references Obamanation, prefer it
        const keyNorm = NORMALIZE(k);
        if (keyNorm.includes("obamanation") || keyNorm.includes("obama") || keyNorm.includes("2012")) {
          const candidateSet = makeTitleSetFromValue(v);
          const covers = requiredNormalized.every((r) => candidateSet.has(r));
          if (covers) return candidateSet;
        }
      }

      // otherwise, scan every nested value and pick the one that best matches required titles
      let bestMatch = null;
      let bestMatchCount = -1;
      for (const v of Object.values(parsed)) {
        const candidateSet = makeTitleSetFromValue(v);
        const matchCount = requiredNormalized.filter((r) => candidateSet.has(r)).length;
        if (matchCount > bestMatchCount) {
          bestMatchCount = matchCount;
          bestMatch = candidateSet;
        }
      }
      // if best match covers everything, return it
      if (bestMatch && requiredNormalized.every((r) => bestMatch.has(r))) return bestMatch;

      // treat top-level keys as the global unlocked set
      return makeTitleSetFromValue(parsed);
    }

    return null;
  }

  function allRequiredUnlocked(unlockedSet) {
    if (!window.campaignTrail_temp || !window.campaignTrail_temp.achievements) return false;
    const required = Object.keys(window.campaignTrail_temp.achievements || {});
    if (required.length === 0) return false;
    const requiredNormalized = required.map(NORMALIZE);
    return requiredNormalized.every((r) => unlockedSet.has(r));
  }

  // find or create a layout container for all settings (difficulty, toggles).
  function getOrCreateLayoutContainer() {
    const difficultyEl = document.getElementById("difficulty_level");
    if (!difficultyEl) return null;
    
    let container = document.getElementById("mod_settings_container");
    if (container) return container;

    const formEl = difficultyEl.querySelector("form[name='difficulty_level_selection']");
    if (!formEl) return null;

    container = document.createElement("div");
    container.id = "mod_settings_container";
    Object.assign(container.style, {
      display: "flex",
      flexFlow: "row wrap",
      justifyContent: "center",
      alignItems: "center",
      gap: "2em",
      marginTop: "1em",
    });

    difficultyEl.insertBefore(container, formEl);
    container.appendChild(formEl);
    
    // clean up original <p> tags if they exist to prevent extra space
    const paragraphs = formEl.querySelectorAll("p");
    paragraphs.forEach(p => p.style.display = "none");

    return container;
  }

  // create a toggle checkbox element
  function createToggle(options) {
    if (document.getElementById(options.id)) return null;

    const toggleContainer = document.createElement("div");
    toggleContainer.style.textAlign = "center";
    
    const label = document.createElement("label");
    Object.assign(label.style, { cursor: "pointer", color: "#f7f7f7", fontWeight: "bold" });

    const checkbox = document.createElement("input");
    Object.assign(checkbox, { type: "checkbox", id: options.id });
    Object.assign(checkbox.style, { marginRight: "10px", verticalAlign: "text-bottom" });
    checkbox.checked = Boolean(window.campaignTrail_temp?.[options.storageKey]);

    checkbox.addEventListener("change", function () {
      if (!window.campaignTrail_temp) window.campaignTrail_temp = {};
      window.campaignTrail_temp[options.storageKey] = this.checked;

      if (options.onChangeCallback) {
        try { options.onChangeCallback(this.checked); } catch (e) { /* ignore */ }
      }
      try {
        document.dispatchEvent(new CustomEvent(options.eventName, { detail: { enabled: this.checked } }));
      } catch (e) { /* ignore */ }
    });

    label.appendChild(checkbox);
    label.appendChild(document.createTextNode(options.labelText));

    const note = document.createElement("div");
    Object.assign(note.style, { fontSize: ".8rem", color: "#f0f0f0", marginTop: "4px", maxWidth: "250px" });
    note.textContent = options.descriptionText;

    toggleContainer.appendChild(label);
    toggleContainer.appendChild(note);
    return toggleContainer;
  }

  function initToggles() {
    const container = getOrCreateLayoutContainer();
    if (!container) return;

    // old portraits toggle
    const portraitToggle = createToggle({
      id: 'portrait_checkbox',
      storageKey: 'use_old_portraits',
      labelText: 'Alt. Portraits',
      descriptionText: 'Use the original portraits for Obama, Biden and Clinton.',
      eventName: 'portraitModeToggled',
      onChangeCallback: (enabled) => { if (typeof window.refreshPortraits === "function") window.refreshPortraits(); }
    });
    if (portraitToggle) container.appendChild(portraitToggle);

    // 100% mode toggle
    const parsed = readUnlockedAch();
    if (parsed) {
      const required = Object.keys(window.campaignTrail_temp?.achievements || {});
      if (required.length > 0) {
        const requiredNormalized = required.map(NORMALIZE);
        const unlockedSet = findObamanationUnlockedSet(parsed, requiredNormalized);
        if (unlockedSet && requiredNormalized.every((r) => unlockedSet.has(r))) {
          const hiddenModeToggle = createToggle({
            id: 'hidden_checkbox',
            storageKey: 'hidden_mode',
            labelText: '100% Mode',
            descriptionText: 'Congratulations on completing THE OBAMANATION! Please enjoy this exclusive endgame mode.',
            eventName: 'hiddenModeToggled',
            onChangeCallback: (enabled) => { if (typeof window.enableHiddenMode === "function") window.enableHiddenMode(enabled); }
          });
          if (hiddenModeToggle) container.appendChild(hiddenModeToggle);
        }
      }
    }
  }

  function forceDisplayHiddenMode() {
    const container = getOrCreateLayoutContainer();
    if (!container) return;
    const hiddenModeToggle = createToggle({
      id: 'hidden_checkbox',
      storageKey: 'hidden_mode',
      labelText: '100% Mode (forced)',
      descriptionText: 'Congratulations on completing THE OBAMANATION! Please enjoy this exclusive endgame mode.',
      eventName: 'hiddenModeToggled',
      onChangeCallback: (enabled) => { if (typeof window.enableHiddenMode === "function") window.enableHiddenMode(enabled); }
    });
    if (hiddenModeToggle) container.appendChild(hiddenModeToggle);
    console.log("Hidden mode checkbox available for testing.");
  }

  // expose the function
  window.test_forceShowHiddenFeature = forceDisplayHiddenMode;

  try { initToggles(); } catch (e) { /* ignore */ }

  // ensure checkbox is injected if difficulty panel appears later
  const observer = new MutationObserver(() => {
    try {
      // if the container doesn't exist yet but the difficulty element does, run init.
      if (document.getElementById("difficulty_level") && !document.getElementById("mod_settings_container")) {
        initToggles();
      }
    } catch (e) { /* ignore */ }
  });

  observer.observe(gameWindow, { childList: true, subtree: true });
})();

// The banner system from 2016ALOT
(function () {
    const gameWindow = document.getElementById("game_window");
    if (!gameWindow) return;

    // configuration object
    const CONFIG = {
        bannerHeight: 60,
        fadeTransition: 250,
        preloadCount: 4,
        enablePreloading: true,
        enableLocalStorage: true,
        hoverEffect: true,
        clickCooldown: 150,
        maxCacheSize: 20,
        useRequestIdleCallback: true
    };

    // banner list
    const banners = [{
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/7XmMaJY.jpeg",
        alt: "Romney banner",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/YEkARdf.jpeg",
        alt: "Romney banner 2",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/thufQyE.jpeg",
        alt: "Bachmann banner",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/UsxAPKI.png",
        alt: "Bachmann banner 2",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/xm0QayS.png",
        alt: "Newt banner",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/fVq2Sl3.jpeg",
        alt: "Newt banner 2",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/GfNHWpv.gif",
        alt: "Newt banner 3",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/9Vg9RLG.gif",
        alt: "Paul banner",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/zHquJx2.gif",
        alt: "Paul banner 2",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/ukLm8N4.png",
        alt: "Obama banner",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/f0PKMJT.jpeg",
        alt: "Obama banner 2",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/NtmO7rS.jpeg",
        alt: "Obama banner 3",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/YpMlnsi.jpeg",
        alt: "Americans Elect banner",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/0F2FLEq.gif",
        alt: "Paul banner 3",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/q8xpBk8.png",
        alt: "Obama banner 4",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/wxATRjI.png",
        alt: "Obama banner 5",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/4Hx16oH.gif",
        alt: "Paul banner 4",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/UjvXM13.jpeg",
        alt: "Romney banner 3",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/uXqDDRh.jpeg",
        alt: "Obama banner 6",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/LSvy7G2.png",
        alt: "Obama banner 7",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/0dPPCYB.jpeg",
        alt: "Obama banner 8",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/jErplfc.jpeg",
        alt: "NRA banner",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/RgEMcAU.jpeg",
        alt: "Bing banner",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/8EGiNz6.gif",
        alt: "Newt banner 4",
        weight: 1
    },
    {
        url: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/lLF89xd.jpeg",
        alt: "Romney banner 4",
        weight: 1
    },
    ];

    // caching system
    class BannerCache {
        constructor() {
            this.imageCache = new Map();
            this.loadedUrls = new Set();
            this.storageKey = 'vintageBannerCache_v2';
            this.maxCacheAge = 7 * 24 * 60 * 60 * 1000; // 7 days
            this.cacheAccessOrder = [];

            if (CONFIG.enableLocalStorage) {
                this.loadFromStorage();
            }
        }

        saveToStorage() {
            if (!CONFIG.enableLocalStorage) return;

            try {
                const cacheData = {
                    timestamp: Date.now(),
                    urls: Array.from(this.loadedUrls)
                };
                localStorage.setItem(this.storageKey, JSON.stringify(cacheData));
            } catch (e) {
                // silent fail
            }
        }

        loadFromStorage() {
            try {
                const cached = localStorage.getItem(this.storageKey);
                if (!cached) return;

                const data = JSON.parse(cached);
                const age = Date.now() - data.timestamp;

                if (age < this.maxCacheAge) {
                    this.loadedUrls = new Set(data.urls);
                } else {
                    localStorage.removeItem(this.storageKey);
                }
            } catch (e) {
                // silent fail
            }
        }

        preloadImage(url) {
            if (this.imageCache.has(url)) {
                this.updateCacheOrder(url);
                return Promise.resolve(this.imageCache.get(url));
            }

            return new Promise((resolve, reject) => {
                const img = new Image();
                let timeoutId;

                const cleanup = () => {
                    clearTimeout(timeoutId);
                    img.onload = img.onerror = null;
                };

                timeoutId = setTimeout(() => {
                    cleanup();
                    reject(new Error(`Timeout: ${url}`));
                }, 8000);

                img.onload = () => {
                    cleanup();
                    this.addToCache(url, img);
                    resolve(img);
                };

                img.onerror = () => {
                    cleanup();
                    reject(new Error(`Failed: ${url}`));
                };

                // set image loading priority to low
                img.fetchPriority = "low";
                img.src = url;
            });
        }

        addToCache(url, img) {
            // LRU cache eviction policy
            if (this.imageCache.size >= CONFIG.maxCacheSize && !this.imageCache.has(url)) {
                const lruUrl = this.cacheAccessOrder.shift();
                this.imageCache.delete(lruUrl);
            }

            this.imageCache.set(url, img);
            this.updateCacheOrder(url);
            this.loadedUrls.add(url);
            this.saveToStorage();
        }

        updateCacheOrder(url) {
            // remove url if it exists in the order array
            const index = this.cacheAccessOrder.indexOf(url);
            if (index > -1) {
                this.cacheAccessOrder.splice(index, 1);
            }
            // add to the end (most recently used)
            this.cacheAccessOrder.push(url);
        }

        preloadBatch(urls) {
            if (!CONFIG.enablePreloading) return Promise.resolve();

            if (CONFIG.useRequestIdleCallback && window.requestIdleCallback) {
                return new Promise(resolve => {
                    window.requestIdleCallback(() => {
                        const promises = urls.map(url =>
                            this.preloadImage(url).catch(() => null)
                        );
                        Promise.allSettled(promises).then(resolve);
                    }, { timeout: 2000 });
                });
            } else {
                const promises = urls.map(url =>
                    this.preloadImage(url).catch(() => null)
                );
                return Promise.allSettled(promises);
            }
        }

        getCachedImage(url) {
            const img = this.imageCache.get(url);
            if (img) {
                this.updateCacheOrder(url);
            }
            return img || null;
        }
    }

    // weighted random selection with memoization
    const bannerSelector = (() => {
        let weightSum = null;

        const getTotalWeight = () => {
            if (weightSum === null) {
                weightSum = banners.reduce((sum, banner) => sum + banner.weight, 0);
            }
            return weightSum;
        };

        return {
            getRandomBanner(excludeRecent = []) {
                const availableBanners = banners.filter(b => !excludeRecent.includes(b.url));

                if (availableBanners.length === 0) {
                    const currentUrl = excludeRecent[excludeRecent.length - 1];
                    return banners.find(b => b.url !== currentUrl) || banners[0];
                }

                const totalWeight = availableBanners.reduce((sum, banner) => sum + banner.weight, 0);
                let random = Math.random() * totalWeight;

                for (const banner of availableBanners) {
                    random -= banner.weight;
                    if (random <= 0) return banner;
                }

                return availableBanners[0];
            },

            // precompute weighted selection table
            initializeSelectionTable() {
                getTotalWeight();
            }
        };
    })();

    // banner system
    class ClickableBannerSystem {
        constructor() {
            this.createElements();

            this.cache = new BannerCache();
            this.currentBanner = null;
            this.recentBanners = [];
            this.isTransitioning = false;
            this.lastClickTime = 0;
            this.rafId = null;

            this.init();
        }

        init() {
            this.setupEventListeners();
            bannerSelector.initializeSelectionTable();

            Promise.resolve()
                .then(() => this.preloadInitialBanners())
                .then(() => this.displayRandomBanner())
                .catch(() => {
                    // fallback if preloading fails
                    this.displayRandomBanner();
                });

            // cleanup on page unload
            window.addEventListener('beforeunload', () => {
                this.destroy();
            });
        }

        createElements() {
            this.container = document.createElement("div");
            this.imageElement = document.createElement("img");
            this.clickIndicator = document.createElement("div");

            this.container.id = "bottomBar";
            this.container.setAttribute('tabindex', '0');
            this.container.setAttribute('role', 'button');
            this.container.setAttribute('aria-label', 'Click to change banner');

            this.container.style.cssText = `
                height: ${CONFIG.bannerHeight}px;
                font-size: 12px;
                border-style: none;
                border-width: 5px;
				box-shadow: none;
                background: transparent;
                padding: 0;
                margin: 1em .3em 1em 1em;
                position: relative;
                overflow: hidden;
                cursor: pointer;
                transition: transform 200ms ease-in-out, box-shadow 200ms ease-in-out;
                user-select: none;
                border-radius: 3px;
            `;

            this.imageElement.style.cssText = `
                width: 100%; 
                height: 100%; 
                object-fit: contain; 
                display: block;
                transition: opacity ${CONFIG.fadeTransition}ms ease-in-out;
                pointer-events: none;
            `;

            this.clickIndicator.style.cssText = `
                position: absolute;
                top: 2px;
                right: 4px;
                width: 16px;
                height: 16px;
                background: rgba(255, 255, 255, 0.8);
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 10px;
                font-weight: bold;
                color: #333;
                opacity: 0;
                transition: opacity 200ms ease-in-out, transform 150ms ease-in-out;
                pointer-events: none;
                z-index: 10;
                box-shadow: 0 1px 3px rgba(0,0,0,0.3);
            `;
            this.clickIndicator.textContent = "↻";

            // append elements
            this.container.appendChild(this.imageElement);
            this.container.appendChild(this.clickIndicator);
            gameWindow.insertAdjacentElement("afterend", this.container);
        }

        setupEventListeners() {
            this.container.onclick = (e) => {
                e.preventDefault();
                const now = Date.now();
                if (now - this.lastClickTime < CONFIG.clickCooldown || this.isTransitioning) {
                    return;
                }
                this.lastClickTime = now;
                this.nextBanner();
            };

            // hover effects
            if (CONFIG.hoverEffect) {
                this.container.onmouseenter = () => {
                    if (this.isTransitioning) return;

                    cancelAnimationFrame(this.rafId);
                    this.rafId = requestAnimationFrame(() => {
                        this.container.style.background = 'transparent';
                        this.container.style.transform = 'scale(1.02)';
                        this.container.style.boxShadow = '0 2px 8px rgba(0,0,0,0.2)';
                        this.clickIndicator.style.opacity = '1';
                    });
                };

                this.container.onmouseleave = () => {
                    cancelAnimationFrame(this.rafId);
                    this.rafId = requestAnimationFrame(() => {
                        this.container.style.transform = 'scale(1)';
                        this.container.style.boxShadow = 'none';
                        this.clickIndicator.style.opacity = '0';
                    });
                };
            }

            // keyboard accessibility
            this.container.onkeydown = (e) => {
                if (e.code === 'Space' || e.code === 'Enter') {
                    e.preventDefault();
                    this.nextBanner();
                }
            };
        }

        async preloadInitialBanners() {
            // prioritize preloading based on banner weights
            const sortedBanners = [...banners]
                .sort((a, b) => b.weight - a.weight)
                .slice(0, CONFIG.preloadCount);

            const urlsToPreload = sortedBanners.map(b => b.url);
            return this.cache.preloadBatch(urlsToPreload);
        }

        async displayBanner(banner, useTransition = false) {
            if (this.isTransitioning) return;

            const cachedImg = this.cache.getCachedImage(banner.url);

            if (useTransition && CONFIG.fadeTransition > 0) {
                this.isTransitioning = true;
                this.imageElement.style.opacity = '0';

                setTimeout(() => {
                    requestAnimationFrame(() => {
                        if (cachedImg) {
                            this.imageElement.src = cachedImg.src;
                        } else {
                            this.imageElement.src = banner.url;
                        }
                        this.imageElement.alt = banner.alt;

                        // force reflow to ensure transition works
                        void this.imageElement.offsetWidth;
                        this.imageElement.style.opacity = '1';
                        this.isTransitioning = false;
                    });
                }, CONFIG.fadeTransition / 2);
            } else {
                requestAnimationFrame(() => {
                    if (cachedImg) {
                        this.imageElement.src = cachedImg.src;
                    } else {
                        this.imageElement.src = banner.url;
                    }
                    this.imageElement.alt = banner.alt;
                });
            }

            this.currentBanner = banner;

            // track recent banners
            this.recentBanners.push(banner.url);
            if (this.recentBanners.length > 3) {
                this.recentBanners.shift();
            }

            // preload next banner if not cached
            if (!cachedImg) {
                this.cache.preloadImage(banner.url).catch(() => {
                    // silent fail
                });
            }

            // opportunistically preload next potential banners
            if (CONFIG.useRequestIdleCallback && window.requestIdleCallback) {
                window.requestIdleCallback(() => {
                    const nextBanners = banners
                        .filter(b => !this.recentBanners.includes(b.url) && !this.cache.imageCache.has(b.url))
                        .sort((a, b) => b.weight - a.weight)
                        .slice(0, 2);

                    this.cache.preloadBatch(nextBanners.map(b => b.url));
                }, { timeout: 5000 });
            }
        }

        displayRandomBanner() {
            const banner = bannerSelector.getRandomBanner(this.recentBanners);
            this.displayBanner(banner, this.currentBanner !== null);
        }

        nextBanner() {
            this.displayRandomBanner();

            requestAnimationFrame(() => {
                this.clickIndicator.style.transform = 'scale(1.2)';

                setTimeout(() => {
                    requestAnimationFrame(() => {
                        this.clickIndicator.style.transform = 'scale(1)';
                    });
                }, 150);
            });
        }

        destroy() {
            cancelAnimationFrame(this.rafId);

            if (this.container) {
                this.container.onclick = null;
                this.container.onmouseenter = null;
                this.container.onmouseleave = null;
                this.container.onkeydown = null;

                if (this.container.parentNode) {
                    this.container.parentNode.removeChild(this.container);
                }
            }

            this.container = null;
            this.imageElement = null;
            this.clickIndicator = null;
        }
    }

    const bannerSystem = new ClickableBannerSystem();

    window.vintageBannerSystem = {
        next: () => bannerSystem.nextBanner(),
        current: () => bannerSystem.currentBanner?.alt || 'Loading...'
    };
})();

(function () {
    const hasPageScrollbar = document.documentElement.scrollHeight > document.documentElement.clientHeight;
    document.body.classList.toggle('has-scrollbar', hasPageScrollbar);
}
)();

tooltipList = [
    { searchString: "George Bush", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/U86BSCC.jpeg> Don't know what you got until it's gone." },
    { searchString: "Reverend Wright", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/hVCiyDT.jpeg> One of your ex-mentors, persona non grata in Washington." },
    { searchString: "Wright", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/hVCiyDT.jpeg> One of your ex-mentors, persona non grata in Washington." },
    { searchString: "Tom Daschle", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/diZNN3g.jpeg> Former Democratic Senate Majority Leader from South Dakota. Product of a bygone era." },
    { searchString: "Daschle", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/diZNN3g.jpeg> Former Democratic Senate Majority Leader from South Dakota. Product of a bygone era." },
    { searchString: "Donna Shalala", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/pTtr7Uh.jpeg> Castro devotee." },
    { searchString: "John Kitzhaber", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/EugQH3l.jpeg> He wears blue jeans, so he's just like you and me." },
    { searchString: "Jennifer Granholm", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/bCiRAO2.jpeg> Distinguished <i>Dating Game</i> alumni, along with Paul Reubens, Steve Martin and Rodney Alcala." },
    { searchString: "Kathleen Sebelius", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/rdm30hS.jpeg> Doomed to irrelevancy and alternate history fiction." },
    { searchString: "Nancy Pelosi", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/HcKjSNG.jpeg> Facebook Status: Hammered." },
    { searchString: "Pelosi", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/HcKjSNG.jpeg> Facebook Status: Hammered." },
    { searchString: "Harry Reid", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/mxKgddi.jpeg> The Democratic Senate Majority Leader, confident this country is ready to embrace a “light-skinned” African-American “with no Negro dialect” such as yourself." },
    { searchString: "Reid", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/mxKgddi.jpeg> The Democratic Senate Majority Leader, confident this country is ready to embrace a “light-skinned” African-American “with no Negro dialect” such as yourself." },
    { searchString: "Gibbs", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/8n3Wihe.jpeg> White House Press Secretary." },
    { searchString: "Hillary's husband", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/xs7jPNm.jpeg> Serial predator and your Secretary of State's “beard.” Previously the first Black president." },
    { searchString: "blob", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/XT16zfN.jpeg> As Rhodes calls it, a conglomerate of supposedly nefarious forces who seek further involvement in the Middle East. Many of them currently residing in your Cabinet." },
    { searchString: "Rhodes", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/8eJ6O6i.jpeg> Speechwriter and advisor on national security. One of the idealistic liberals in your administration." },
    { searchString: "Bill", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/kMIZs2u.jpeg> That little devil on your shoulder." },
    { searchString: "Ayers", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/kMIZs2u.jpeg> That little devil on your shoulder." },
    { searchString: "Farrakhan", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/6AIeA3j.png> Shadow spiritual advisor." },
    { searchString: "David Axelrod", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/UlwyKpX.jpeg> Storyteller." },
    { searchString: "Axelrod", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/UlwyKpX.jpeg> Storyteller." },
    { searchString: "Rahm Emanuel", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/QksyHVq.jpeg> Angry." },
    { searchString: "Rahm", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/QksyHVq.jpeg> Angry." },
    { searchString: "Mitch McConnell", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/LROSY6r.jpeg> Part-time Senate Republican leader, full-time hater." },
    { searchString: "McConnell", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/LROSY6r.jpeg> Part-time Senate Republican leader, full-time hater." },
    { searchString: "John Boehner", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/HFRocAv.jpeg> House Republican leader." },
    { searchString: "Boehner", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/HFRocAv.jpeg> House Republican leader." },
    { searchString: "Bob Bauer", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/ujXmSnP.jpeg> White House Counsel. The sledgehammer." },
    { searchString: "Robert Gates", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/eti4kCD.jpeg> A testament to the amount of change we should be expecting from your presidency?" },
    { searchString: "Larry Summers", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/CbA8pXH.jpeg> Alleged economist. Failing upwards." },
    { searchString: "Barney", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/KQhRYUr.jpeg> Nipples protruding." },
    { searchString: "Barney Frank", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/KQhRYUr.jpeg> Nipples protruding." },
    { searchString: "Glenn Beck", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/nZJc2Yl.jpeg> School's in session." },
    { searchString: "Michelle", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/JZJTOJc.jpeg> Proud of her country." },
    { searchString: "Muammar Gaddafi", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/3X5d8we.jpeg> Libya's strongman. That is how you spell it, right?" },
    { searchString: "Hosni Mubarak", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/BhPZfnn.jpeg> President of Egypt." },
    { searchString: "Mubarak", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/BhPZfnn.jpeg> President of Egypt." },
    { searchString: "Osama bin Laden", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/GYK52Cp.jpeg> Chickens come to roost." },
    { searchString: "Boris Johnson", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/XqIMQ67.jpeg> Seconds before disaster." },
    { searchString: "midterm losses", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/IqA2JrJ.jpeg> The 2010 midterms saw the Democrats clobbered as several Senate seats flipped Republican, only held together by a 50-50 tie; the House returned to GOP control by an overwhelming margin, dethroning Speaker Pelosi and her ilk." },
    { searchString: "Eric Holder", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/ORXMiSq.jpeg> Your resident hatchet man." },
    { searchString: "Loretta Lynch", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/hHWoxWC.jpeg> Holder's replacement, the new Attorney General." },
    { searchString: "David Cameron", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/m68tcuG.jpeg> Pigfucker." },
    { searchString: "Nicolas Sarkozy", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/jS3kPlD.jpeg> The arbiter of what makes a good world leader." },
    { searchString: "Kamala Harris", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/IXS6ixu.jpeg> Existing in the context of what came before her." },
    { searchString: "Goodwin Liu", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/FBuxDTi.jpeg> The potential bane of Justice Alito's existence." },
    { searchString: "Keith Ellison", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/RoxtRdg.jpeg> Time to break out the Quran again." },
    { searchString: "Arab Spring", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/hqRI0dL.jpeg> Anti-government protests breaking out across the Middle East, triggered by a fatigue of charismatic demagogues, breadlines, and economic stagnation. Take note, Barack." },
    { searchString: "Harvey Weinstein", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/PsPrD5v.jpeg> Tinseltown Democrat megadonor." },
    { searchString: "Pete Souza's photo", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/snKgPIP.jpeg> History in the making." },
    { searchString: "Leon Panetta", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/aFz0JKk.jpeg> Director of the CIA, succeeding Michael Hayden." },
    { searchString: "John Brennan", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/baYNzND.jpeg> Homeland Security advisor, drone apologist, “principal coordinator” of our kill lists." },
    { searchString: "Binyamin Netanyahu", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/EeIYss4.jpeg> Mr. America." },
    { searchString: "Bibi", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/EeIYss4.jpeg> Mr. America." },
    { searchString: "Cantor", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/HWl4eS8.jpeg> Republican House Majority Leader." },
    { searchString: "Gaddafi's fate", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/jolDsmN.jpeg> “We came, we saw, he died!”" },
    { searchString: "Bashar al-Assad", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/TDIiBV1.jpeg> He must go. He must go. He must go. He must go. He must go. He must go. He must go." },
    { searchString: "Vladimir Putin", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/5itQANU.jpeg> President of the Russian Federation since 1999, ignoring the fake one they currently have in-office." },
    { searchString: "John Bolton", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/wnqkyuY.jpeg> <i>The Lorax</i>, starring Zac Efron, Taylor Swift, Danny DeVito and Ed Helms, coming to theaters next year." },
    { searchString: "Daley", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/mJ3oAyt.jpeg> He and his dad will both be voting for you next year." },
    { searchString: "Occupy Wall Street", explanationText: "Somehow made New York smell worse than it already does." },
    { searchString: "birth certificate", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/iJIwau2.jpeg> The question on everyone's mind." },
    { searchString: "birth certificates", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/iJIwau2.jpeg> The question on everyone's mind." },
    { searchString: "George Osborne", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/kWiT3io.jpeg> Not a pigfucker, though we're looking into it." },
    { searchString: "François Hollande", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/yZ2E0kO.jpeg> Destined to be a popular leader." },
    { searchString: "Ted Turner", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/3jWZkyf.jpeg> Mouth of the South." },
    { searchString: "most receptive to his message", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/94Z1Mzh.jpeg> Crackers." },
    { searchString: "Rmoney", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/eYqjoZ0.jpeg> Ching ching." },
    { searchString: "Anthony Weiner", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/OuxWbq2.jpeg> Former congressman, husband to Clinton aide, and one of the world's great sleazebags." },
    { searchString: "Sun Myung Moon", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/rMncfiP.jpeg> Korean cult leader." },
    { searchString: "turned out to be more of a red ripple", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/RglaWRY.jpeg> The 2010 midterms saw the Democrats fare much better than originally thought, keeping hold of a 53 seat majority in the Senate following close wins in Illinois and Wisconsin; the House returned to GOP control, but by a smaller than estimated margin, dethroning Speaker Pelosi and her ilk." },
    { searchString: "Saudi King Abdullah", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/fW2MoLm.jpeg> 30 wives and counting." },
    { searchString: "Duncan", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/xX4ysZG.jpeg> Secretary of Education and mastermind behind Common Core." },
    { searchString: "Molech", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/CT8v1VB.jpeg> Where the magic happens." },
    { searchString: "Kevin Spacey", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/pnpaYFJ.jpeg> Open secret." },
    { searchString: "guacamole bowl", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/Cu30O7e.jpeg> While supplies last." },
    { searchString: "Robert Mueller", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/pbBm3QV.jpeg> Uniparty whore, agent of the state, ugly prick." },
    { searchString: "elder Bush", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/W7DDGzs.jpeg> Looking for some ass to grab." },
    { searchString: "Bush's daddy", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/W7DDGzs.jpeg> Looking for some ass to grab." },
    { searchString: "Nancy Reagan", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/JWofLqw.jpeg> Known for the full-throated support she'd give to the men in her life." },
    { searchString: "empty chair", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/lSIHFsU.jpeg> #PWNED" },
    { searchString: "Malik Obama", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/9WbOJVi.jpeg> A brotherly bond that'll surely stand the test of time." },
    { searchString: "Slenderman", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/wn6lU0p.jpeg> Leers over less children than your vice president." },
    { searchString: "From the angle of the photo taken", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/cOKOnNd.jpeg> A big hug." },
    { searchString: "Timothy Geithner", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/EVCHISL026EC104H__31526.jpg> Treasury Secretary and the one who'll be taking the blame for all of this." },
    { searchString: "election fortification", explanationText: "<img src=https://file.garden/aNtAfG887DiA_7lO/Obamanation/Louis%20Farrakhan%201985%20LOC.jpg> They thought they had dominoes, but the Minister awards the faithful. 59 seats, only one off from the filibuster-proof majority we started with, yet nothing to scoff at. The House, once upon a time the peoples' chamber, remains a Democratic hold by a slim margin, with Speaker Pelosi set to return." },
    { searchString: "Ben Bernanke", explanationText: "<img src=https://vz.cnwimg.com/wp-content/uploads/2010/08/Ben-Bernanke.jpg> Chair of the Federal Reserve. Only man with enough guts to stop your financial kamikaze." },
    { searchString: "Bernanke", explanationText: "<img src=https://vz.cnwimg.com/wp-content/uploads/2010/08/Ben-Bernanke.jpg> Chair of the Federal Reserve. Only man with enough guts to stop your financial kamikaze." },
    { searchString: "Eric Cantor", explanationText: "<img src=https://static01.nyt.com/images/2014/06/11/us/politics/11ASSESS-hp/11ASSESS-hp-articleLarge.jpg?quality=75&auto=webp&disable=upscale> Having quickly rose to power amid your overspending budget, Cantor has beheaded John Boehner to claim his spot on the Speaker's chair." }

];

campaignTrail_temp.banner1 = createBanner("https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/dXHtTbw.png", containerRef, true);
campaignTrail_temp.banner2 = createBanner("https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/CB4vjMS.png", containerRef, false);

campaignTrail_temp.global_parameter_json[0].fields.question_count = 39

RecReading = true

document.getElementById("header").src = "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/HlUShxi_2.png"
nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#08043d"
nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#cccccc"
document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title

corrr = `
	<div style="font-size: 11px; font-family: monospace; color: white; background: #08043d">
	<h2 style="font-style: normal;">
	<img src="https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/IhlpkjW.png" alt="THE OBAMANATION" style="margin-top: 5px; width: 950.4px; height: auto;">
	</h2>
	</div>
	`;

// the music player
class Song {
    constructor(title, artist, genre, coverLink, audioLink) {
        this.title = title;
        this.artist = artist;
        this.genre = genre;
        this.coverLink = coverLink;
        this.audioLink = audioLink;
    }
}

class Playlist {
    constructor() {
        this.songs = [];
        this.currentSongIndex = 0;
    }

    addSong(song) {
        this.songs.push(song);
    }

    getCurrentSong() {
        return this.songs[this.currentSongIndex];
    }

    playNext() {
        this.currentSongIndex = (this.currentSongIndex + 1) % this.songs.length;
    }

    playPrevious() {
        this.currentSongIndex = (this.currentSongIndex - 1 + this.songs.length) % this.songs.length;
    }
}
window.Playlist = Playlist
window.Song = Song

let playlist;

function changePlaylist(newPlaylist) {
    playlist = newPlaylist;
    playlist.currentSongIndex = 0;
    const audio = document.getElementById("audio");
    const uiElements = {
        cover: document.getElementById("cover"),
        title: document.getElementById("title"),
        artist: document.getElementById("artist"),
        genre: document.getElementById("genre"),
        playPauseButton: document.getElementById("playPauseButton")
    };
    playSong(audio, uiElements);
}
window.changePlaylist = changePlaylist

//  function to update the UI
function updateUI(song, uiElements) {
    uiElements.cover.src = song.coverLink;
    uiElements.title.textContent = song.title;
    uiElements.artist.textContent = song.artist;
    uiElements.genre.textContent = song.genre;
}

// function to play a song
function playSong(audio, uiElements) {
    const currentSong = playlist.getCurrentSong();
    updateUI(currentSong, uiElements);
    audio.src = currentSong.audioLink;
    audio.play();
    uiElements.playPauseButton.src = "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/qLb9UqQ.png";
}

function setupMusicPlayer() {
    const songData = [
        { title: "Queen of Hearts", artist: "Fucked Up", genre: "Punk", cover: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/y1p4zEg.jpeg", audio: "https://file.garden/ZjghkE74SkXuNmZh/Queen%20of%20Hearts.mp3" },
        { title: "Millennium of the Blind", artist: "Megadeth", genre: "Metal", cover: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/Six3bC3.jpeg", audio: "https://file.garden/ZlwBsQzAvyz0wLEA/Millennium%20of%20The%20Blind.mp3" },
        { title: "Hussein", artist: "Blue Scholars", genre: "Hip-Hop", cover: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/jCzb20O.jpeg", audio: "https://file.garden/ZjghkE74SkXuNmZh/Hussein.mp3" },
        { title: "Terrorist Threats", artist: "Ab-Soul (ft. Danny Brown, Jhene Aiko)", genre: "Rap", cover: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/Uarvapg.jpeg", audio: "https://file.garden/ZkYlpFmp3wv99L22/Ab-Soul.mp3" },
        { title: "Headlines", artist: "Drake", genre: "Rap", cover: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/NNMiAp3.jpeg", audio: "https://file.garden/aGMtX3HRbS8W-RJ6/Drake%20%20%20Headlines%20Explicit%20HD.mp3" },
        { title: "Words I Never Said", artist: "Lupe Fiasco (ft. Skylar Grey)", genre: "Rap", cover: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/fGT2dTk.jpeg", audio: "https://file.garden/ZjwDHsS1nDDehStj/Words%20I%20Never%20Said.mp3" },
        { title: "Illuminati", artist: "Korn (ft. Excision, Downlink)", genre: "Metal", cover: "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/I3RwsaS.jpeg", audio: "https://file.garden/ZlwBsQzAvyz0wLEA/Illuminati.mp3" }
    ];

    playlist = new Playlist();
    songData.forEach(s => playlist.addSong(new Song(s.title, s.artist, s.genre, s.cover, s.audio)));
	
	window.defaultPlaylist = playlist;

    function addAndPlaySong(song) {
        const audio = document.getElementById("audio");
        const uiElements = {
            cover: document.getElementById("cover"),
            title: document.getElementById("title"),
            artist: document.getElementById("artist"),
            genre: document.getElementById("genre"),
            playPauseButton: document.getElementById("playPauseButton")
        };

        playlist.addSong(song);
        playlist.currentSongIndex = playlist.songs.length - 1;

        playSong(audio, uiElements);
    }
    window.addAndPlaySong = addAndPlaySong;

    // build the player structure
    const playerContainer = document.createElement("div");
    playerContainer.id = "player";
    playerContainer.innerHTML = `
			<img id="cover" />
			<div id="rightPanel">
				<div id="info-container">
					<div id="song-info">
						<h3 id="title"></h3>
						<p id="artist"></p>
						<p id="genre"></p>
					</div>
				</div>
				<div id="controls-container">
					<div id="progress-bar-container">
						<div id="progress"></div>
					</div>
					<div id="bottom-controls">
						<div id="controls">
							<img id="prevButton" src="https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/tbB2NMq.png" alt="Previous">
							<img id="playPauseButton" src="https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/gZME5QC.png" alt="Play/Pause">
							<img id="nextButton" src="https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/e69GXWV.png" alt="Next">
						</div>
						<div id="volume-container">
							<img src="https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/fvct8dN.png" alt="Volume">
							<input type="range" id="volumeSlider" min="0" max="9" step="1" value="2">
						</div>
					</div>
				</div>
			</div>
		`;

    gameWindow_player.insertAdjacentElement("afterend", playerContainer);

    // cache all DOM elements
    const uiElements = {
        cover: document.getElementById("cover"),
        title: document.getElementById("title"),
        artist: document.getElementById("artist"),
        genre: document.getElementById("genre"),
        prevButton: document.getElementById("prevButton"),
        playPauseButton: document.getElementById("playPauseButton"),
        nextButton: document.getElementById("nextButton"),
        progressBar: document.getElementById("progress"),
        progressBarContainer: document.getElementById("progress-bar-container"),
        volumeSlider: document.getElementById("volumeSlider")
    };

    const audio = document.createElement("audio");
    audio.id = "audio";
    audio.volume = uiElements.volumeSlider.value / 9;

    // setup event listeners
    uiElements.playPauseButton.addEventListener("click", () => {
        if (audio.paused) {
            audio.play();
            uiElements.playPauseButton.src = "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/qLb9UqQ.png";
        } else {
            audio.pause();
            uiElements.playPauseButton.src = "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/gZME5QC.png";
        }
    });

    uiElements.nextButton.addEventListener("click", () => {
        playlist.playNext();
        playSong(audio, uiElements);
    });

    uiElements.prevButton.addEventListener("click", () => {
        playlist.playPrevious();
        playSong(audio, uiElements);
    });

    audio.addEventListener("timeupdate", () => {
        if (audio.duration) {
            const progress = (audio.currentTime / audio.duration) * 100;
            uiElements.progressBar.style.width = progress + "%";
        }
    });

    audio.addEventListener("ended", () => {
        playlist.playNext();
        playSong(audio, uiElements);
    });

    uiElements.progressBarContainer.addEventListener("click", (e) => {
        const rect = uiElements.progressBarContainer.getBoundingClientRect();
        const clickX = e.clientX - rect.left;
        const width = uiElements.progressBarContainer.offsetWidth;
        audio.currentTime = (clickX / width) * audio.duration;
    });

    uiElements.volumeSlider.addEventListener("input", (e) => {
        audio.volume = e.target.value / 9;
    });

    document.body.appendChild(audio);

    // initial load
    const initialSong = playlist.getCurrentSong();
    updateUI(initialSong, uiElements);
    audio.src = initialSong.audioLink;

    audio.play().then(() => {
        uiElements.playPauseButton.src = "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/qLb9UqQ.png";
    }).catch(error => {
        uiElements.playPauseButton.src = "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/gZME5QC.png";
        console.log("Audio autoplay was prevented. User must interact with the page first.");
    });
}

const musicPlayer = `
		#player {
			font-family: 'Segoe UI', sans-serif;
			display: flex;
			flex-direction: row;
			align-items: center;
			gap: 15px;
			padding: 0 10px;
			height: 191px;
			background: linear-gradient(to bottom, #0e3583, #02143b);
			border-radius: 5px;
			border: 1px solid #4a6a9b;
			box-shadow: 0 0 10px rgba(74, 106, 155, 0.5);
			color: white;
			overflow: hidden;
		}

		#cover {
			width: 180px;
			height: 180px;
			border: 2px solid #fff;
			box-shadow: 5px 5px 10px rgba(0,0,0,0.4);
			flex-shrink: 0;
		}

		#rightPanel {
			display: flex;
			flex-direction: column;
			flex-grow: 1;
			min-width: 0;
		}

		#info-container {
			display: flex;
			flex-direction: column;
			justify-content: center;
			flex-grow: 1;
			padding-left: 5px;
		}

		#song-info #title {
			font-size: 1.5em;
			font-weight: 600;
			margin: 0 0 5px 0;
			color: #ffffff;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
		}

		#song-info #artist, #song-info #genre {
			font-size: 1em;
			margin: 0;
			color: #d0e0ff;
		}

		#controls-container {
			display: flex;
			flex-direction: column;
			justify-content: center;
			background-color: rgba(0, 0, 0, 0.25);
			margin-top: .5em;
			padding: 8px;
			border-radius: 4px;
		}
		
		#bottom-controls {
			display: flex;
			justify-content: space-between;
			align-items: center;
			width: 100%;
		}

		#controls {
			display: flex;
			align-items: center;
			gap: 15px;
		}
		
		#controls img {
			cursor: pointer;
			opacity: 0.9;
			transition: opacity 0.2s;
		}
		
		#prevButton, #nextButton {
			height: 36px;
		}

		#controls img:hover {
			opacity: 1;
		}

		#progress-bar-container {
			width: 100%;
			height: 6px;
			background-color: #001f5c;
			border-radius: 3px;
			cursor: pointer;
			margin-bottom: 8px;
		}

		#progress {
			height: 100%;
			width: 0%;
			background-color: #7db700;
			border-radius: 3px;
		}
		
		#volume-container {
			display: flex;
			align-items: center;
			gap: 8px;
		}
		
		#volumeSlider {
			-webkit-appearance: none;
			appearance: none;
			width: 100px;
			height: 4px;
			outline: none;
			border-radius: 2px;
			opacity: 0.8;
			transition: opacity .2s;
			margin: 0 .25em 0 0; 
		}
		
		#volumeSlider:hover {
			opacity: 1;
		}

		#volumeSlider::-webkit-slider-thumb {
			-webkit-appearance: none;
			appearance: none;
			width: 14px;
			height: 14px;
			background: #ffffff;
			cursor: pointer;
			border-radius: 50%;
			border: 1px solid #777;
			margin-top: 2px;
			position: relative;
			z-index: 2;
		}

		#volumeSlider::-moz-range-thumb {
			width: 14px;
			height: 14px;
			background: #ffffff;
			cursor: pointer;
			border-radius: 50%;
			border: 1px solid #777;
		}

		/* fix for Firefox track height to match webkit */
		#volumeSlider::-moz-range-track {
			height: 4px;
			background: #ffffff;
			border-radius: 2px;
		}
	`;

applyGlobalStyles(musicPlayer, 'music-player');

const gameWindow_player = document.getElementById("game_window");
setupMusicPlayer();

campaignTrail_temp.achievements = {
    "I Rebuke You, Satan": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/DTCKvKx.png",
        "description": "Catch a whiff of pure evil and live to tell the tale.",
        "cannotBeCheated": true
    },
    "It's Not Happening": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/YZCxNVu.png",
        "description": "Defeat Ron Paul.",
        "cannotBeCheated": true
    },
    "Outlaw": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/5aydcc8.png",
        "description": "Defeat Joe Arpaio.",
        "cannotBeCheated": true
    },
    "This Time, It's Personal": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/yd9qImF.png",
        "description": "Make a sequel better than the original.",
        "cannotBeCheated": true
    },
    "Where's Your God Now?": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/sF3itRJ.png",
        "description": "Defeat Michele Bachmann.",
        "cannotBeCheated": true
    },
    "You've Been Trumped": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/9kbvSlc.png",
        "description": "Defeat Donald Trump.",
        "cannotBeCheated": true
    },
    "The King is Dead": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/7tw2CVu.png",
        "description": "Defeat David Petraeus.",
        "cannotBeCheated": true
    },
    "I Hate the 90s": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/ER3QjLQ.png",
        "description": "Defeat Newt Gingrich.",
        "cannotBeCheated": true
    },
    "Telestial": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/ON3RJ8K.png",
        "description": "Defeat the Sesame Street Slasher.",
        "cannotBeCheated": true
    },
    "A Fortunate Son": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/qrLloDz.png",
        "description": "Clap Jeb Bush.",
        "cannotBeCheated": true
    },
    "Big Apple, Little Worm": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/RPVYlBZ.png",
        "description": "Defeat Michael Bloomberg.",
        "cannotBeCheated": true
    },
    "Off to the Hague": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/85S14GJ.png",
        "description": "Defeat Condoleezza Rice.",
        "cannotBeCheated": true
    },
    "Like a Rolling Stone": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/CXiqkD8.png",
        "description": "Defeat Stanley McChrystal.",
        "cannotBeCheated": true
    },
    "Obama's Blunder": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/cUyEBhs.png",
        "description": "Defeat an heir to the throne and his usurper.",
        "cannotBeCheated": true
    },
    "R.I.N.O.": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/fSDjoxC.png",
        "description": "Defeat Jon Huntsman.",
        "cannotBeCheated": true
    },
    "The Bigger They Are...": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/LNvwi1K.png",
        "description": "Beat Goliath.",
        "cannotBeCheated": true
    },
    "Six Shots": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/y8E9cPA.png",
        "description": "Defeat Clint Eastwood.",
        "cannotBeCheated": true
    },
    "Back to Sleep": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/4DcOT9v.png",
        "description": "Defeat Ben Carson.",
        "cannotBeCheated": true
    },
    "The Philosopher King": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/AMG2sY1.png",
        "description": "In the face of opposition, successfully betray your ideals.",
        "cannotBeCheated": true
    },
    "I've Changed": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/kln6F31.png",
        "description": "Pass the Affordable Care Act.",
        "cannotBeCheated": true
    },
    "National + Democratic + Marxist": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/427ZrDw.png",
        "description": "Pass the public option.",
        "cannotBeCheated": true
    },
    "Mastery of the Law": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/7vCwBjT.png",
        "description": "Remake the ideological make-up of the Supreme Court.",
        "cannotBeCheated": true
    },
    "Zero Dark Thirty": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/3EXLcEw.png",
        "description": "Have 99 problems, and make sure bin Laden ain't one.",
        "cannotBeCheated": true
    },
    "Leading from Behind": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/pNpryph.png",
        "description": "Become the neoliberal assassin you were meant to be.",
        "cannotBeCheated": true
    },
    "Hope and Regime Change": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/HQXG7FR.png",
        "description": "Help the Muslim Brotherhood ascend to power.",
        "cannotBeCheated": true
    },
    "Thanks, Obama": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/vndAL33.png",
        "description": "Fail to deliver and win anyway.",
        "cannotBeCheated": true
    },
    "Enemies to Lovers": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/AMhn7t4.png",
        "description": "Dump Biden.",
        "cannotBeCheated": true
    },
    "Homewrecker": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/1EBuYXs.png",
        "description": "Ruin a war hero's life.",
        "cannotBeCheated": true
    },
    "From the River to the Sea": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/QHA5X5v.png",
        "description": "Make your allegiance known.",
        "cannotBeCheated": true
    },
    "Weekend at Bernie's": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/UHNEC1s.png",
        "description": "Talk down an angry old man from playing spoiler.",
        "cannotBeCheated": true
    },
    "Far from Kenya": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/uVv3z88.png",
        "description": "(Almost) lose it all.",
        "cannotBeCheated": true
    },
    "Highway to Hell": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/VA6d1S1.png",
        "description": "Take over.",
        "cannotBeCheated": true
    },
    "Ermahgerd...Terxes": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/QabMDFI.png",
        "description": "Ruin a venture capitalist's life.",
        "cannotBeCheated": true
    },
    "Promises Change": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/cjucmW8.png",
        "description": "Win a landslide victory.",
        "cannotBeCheated": true
    },
    "Dances with Smurfs": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/N73nNHS.png",
        "description": "Make a true patriot president.",
        "cannotBeCheated": true
    },
    "Worst President of My Lifetime": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/F5MeTbQ.png",
        "description": "Lose to the worst of the worst.",
        "cannotBeCheated": true
    },
    "rƎVO⅃ution": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/MJMBn24.png",
        "description": "Lose to the fringe.",
        "cannotBeCheated": true
    },
    "Angel of Light": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/wnGR6Nb.png",
        "description": "Bring death and destruction and win.",
        "cannotBeCheated": true
    },
    "war criminal :(": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/NWfugXm.png",
        "description": "Fulfill your destiny.",
        "cannotBeCheated": true
    },
    "Barry Soetoro": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/bAYUC63.png",
        "description": "Finish what you started.",
        "cannotBeCheated": true
    },
    "Flint and Steel Bars": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/oGEWkO2.png",
        "description": "Achieve the true ending.",
        "cannotBeCheated": true
    },
    "12.21.12.": {
        "image": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/wvidBI4.png",
        "description": "Survive on your own.",
        "cannotBeCheated": true
    }
}

campaignTrail_temp.modBoxTheme = {
    "header_color": "#69295a",
    "header_text_color": "#FBFBFB",
    "header_image_url": "https://file.garden/aNtAfG887DiA_7lO/Obamanation/Code1/npg4Eq3.png",
    "description_text_color": "#000000",
    "description_background_color": "#FBFBFB",
    "main_color": "#010012",
    "secondary_color": "#69295a",
    "ui_text_color": "#FFFFFF"
}