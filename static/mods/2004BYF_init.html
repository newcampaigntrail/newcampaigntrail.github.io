e = campaignTrail_temp;

            nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#363636";

            nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#7176fe";

            document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

            $("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

            $(".container")[0].style.backgroundColor = "#d24141";

            document.getElementById("header").src = "https://assets.trump.com/website/lifestyle/yourefired_.jpg";

            document.body.background = "https://encrypted-tbn1.gstatic.com/shopping?q=tbn:ANd9GcQTuz74BSGuYMkQvsUJiMNc8baqADSPOvGJgRjlMAn3YAUzZQLMhywi7EH0QjKhY072rAY2i3rLV0NkdRGh2b75488KzvPlB68BZNJUQOLvob6WDyfkfY3B&usqp=CAc";
e.election_json = [{"model":"campaign_trail.election","pk":9,"fields":{"year":2000,"summary":"<p>In the aftermath of a horrific attack on the World Trade Center on September 11, 2001, President George W. Bush, after being elected by 537 votes in Florida and the Supreme Court stopping the statewide recount, is seeking another term as President of the United States. Bush led the country through two wars, the largest tax cuts in history, a reform in the education system, and much more. <p>His opponent in this race is one that no one had expected, real estate mogul and New York businessman Donald J. Trump, who has ran an anti-NAFTA, anti-war, anti-establishment campaign that politics hasn't seen in a long time. Can Donald Trump pull off the upset and stun the pundits once again and become the 44th President of the United States, firing George W. Bush? Or will the voters not want to change leadership during times of war and re-elect President George W. Bush? </p></p>","image_url":"https://cf.geekdo-images.com/Z2554vyl_R3BooAmi1IaWw__opengraph/img/vAogjzWTzssNIrIgWot49WqQrQY=/0x0:2500x1313/fit-in/1200x630/filters:strip_icc()/pic1175306.jpg","winning_electoral_vote_number":270,"advisor_url":"https://www.newsday.com/_next/image?url=https%3A%2F%2Fcdn.newsday.com%2Fimage-service%2Fversion%2Fc%3AZTc4YzZhZWEtMDM2Yy00%3ANDg3Njcw%2Fopjan230504.jpg%3Ff%3DLandscape%2B16%253A9%26w%3D770%26q%3D1&w=1920&q=80","recommended_reading":"<h4>CANON RESULTS</h4>George W. Bush gets re-elected with 343 electoral votes to Donald Trump's 195 electoral votes, flipping the states of Oregon, New Mexico, Iowa, Wisconsin, Pennsylvania, and New Jersey from 2000. Trump is unable to flip any states that Bush won in 2000, although he will get close in states like Ohio, West Virginia, Arkansas, and Missouri. Meanwhile, Bush would get close to flipping Michigan, Minnesota, California, Maine, Delaware, and Washington. This is due to Trump's utter lack of experience and the fact that Bush is a wartime President. Donald Trump would not have been trusted as commander-in-chief as a result of that. However, working-class Reagan Democrats would've come out heavily for Trump in the Midwest and even Coal Country as a result of his anti-NAFTA messaging and anti-immigration rhetoric. Much of the Midwest would stay red however due to the suburbs going heavily towards Bush, even more so than they did in 2000 or against John Kerry. The Southwest, Florida, and Oregon go red due to immigration. NJ goes red due to foreign policy.<h4>Note From Modder</h4><p>I can't believe that this is my 10th mod, and I really hope all of you have enjoyed playing my mods so far as much as I have making them. I've thought about doing a mod like this for some time now, but I felt like no one would want to see any 2004 mods because of the sheer popularity of W., but Trump isn't seen in W. or any other mods in 2004, until now. In terms of future mods, keep playing 2004: Bush, You're Fired to find out what my 11th mod will be, which is gonna be a pretty heavy CYOA mod, so it may take a bit longer. I also need to see how much time I have this summer due to work, but I'm gonna try my best to get the mod out somewhere around late July/early August. Thanks, everyone! </p><p>-Environmental_Cap104 </p>","has_visits":1,"no_electoral_majority_image":"../static/images/2012-no-majority.jpg"}}];e.temp_election_list = [{"id":9,"year":2000,"is_premium":0,"display_year":"2004: Bush, You're Fired"}];e.credits = "Environmental_Cap104";e.global_parameter_json = [{"model":"campaign_trail.global_parameter","pk":1,"fields":{"vote_variable":1.125,"max_swing":0.12,"start_point":0.94,"candidate_issue_weight":10,"running_mate_issue_weight":3,"issue_stance_1_max":-0.71,"issue_stance_2_max":-0.3,"issue_stance_3_max":-0.125,"issue_stance_4_max":0.125,"issue_stance_5_max":0.3,"issue_stance_6_max":0.71,"global_variance":0.01,"state_variance":0.005,"question_count":25,"default_map_color_hex":"#C9C9C9","no_state_map_color_hex":"#999999"}}];e.candidate_json = [{"model":"campaign_trail.candidate","pk":77,"fields":{"first_name":"George W.","last_name":"Bush","election":9,"party":"Republican","state":"Texas","priority":1,"description":"George W. Bush is the President.","color_hex":"#d51a1a","secondary_color_hex":null,"is_active":0,"image_url":"https://i.imgur.com/FZaUht5.png","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false}},{"model":"campaign_trail.candidate","pk":78,"fields":{"first_name":"Donald","last_name":"Trump","election":9,"party":"Democratic","state":"New York","priority":1,"description":"After shocking the political establishment in a way that no one ever saw coming, New York businessman and real estate mogul Donald Trump has taken the Democratic nomination in 2004. No one foresaw a candidate like Mr. Trump even run for President, even though he ran in 2000 under the Reform Party. <p><p>His campaign is fairly unorthodox for a Democrat, in that he is very dovish on foreign policy, strongly anti-illegal immigration, anti-NAFTA, and he attacks almost anyone who gets in his way. He has stunned the pundits and the political establishment throughout the entire 2004 campaign season, but time will tell if he will do it again and become the 44th President of the United States by defeating an incumbent war-time President George W. Bush. Most people say no chance, but does Trump and his campaign know something that none of us will know? Or will the general consensus be correct and Bush gets another four-year term?</p></p>","color_hex":"#1616b1","secondary_color_hex":null,"is_active":1,"image_url":"https://i.imgur.com/esIG83l.png","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false}},{"model":"campaign_trail.candidate","pk":79,"fields":{"first_name":"Ralph","last_name":"Nader","election":9,"party":"Green","state":"Connecticut","priority":1,"description":"Dummy Example is a veteran from Hell. He loves puppies and magic! Dummy Example will unite America!<br><br>New line<br><br>This is <b>bold</b> and this <i>italic</i>!","color_hex":"#147b33","secondary_color_hex":null,"is_active":0,"image_url":"https://s.wsj.net/public/resources/images/MI-BK114_NADER1_DV_20110623162145.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false}},{"model":"campaign_trail.candidate","pk":1004,"fields":{"first_name":"Dennis","last_name":"Kucinich","election":9,"party":"Democratic","state":"Ohio","priority":1,"description":"","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://upload.wikimedia.org/wikipedia/commons/e/ef/Dennis_Kucinich.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"Dennis Kucinich is a 4-term Congressman from Cleveland, Ohio who has one of your rivals for a short time in the 2004 Democratic Primaries. He was also the mayor of Cleveland for a few years back in the 70s. He is a lot like you in many ways, in that he is strongly against the War on Terror, anti-NAFTA, and knows how to put up a good fight to anyone that gets in his way. <p><p> He is quite liberal on many issues, which might not help with independents who are already wary of you in the first place. Not to mention, he isn't too popular with mainstream voters. However, his protectionist, anti-NAFTA message could help you lock down the Midwest, including his home state of Ohio, with its 20 electoral votes potentially deciding the election like Florida did four years ago. </p></p>","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"1"}},{"model":"campaign_trail.candidate","pk":1005,"fields":{"first_name":"Russ","last_name":"Feingold","election":9,"party":"Democratic","state":"Wisconsin","priority":1,"description":"Dummy Example is a veteran from Hell. He loves puppies and magic! Dummy Example will unite America!<br><br>New line<br><br>This is <b>bold</b> and this <i>italic</i>!","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://upload.wikimedia.org/wikipedia/commons/b/b0/Russ_Feingold_official_photo.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"Russ Feingold has served Wisconsin in the Senate for the last twelve years. He is a strong anti-Iraq libertarian progressive, and was the only Senator to oppose the PATRIOT Act after the 9/11 attacks. For those reasons, he is quite similar to you except that he's been in the Senate for 12 years and is quite experienced. He could also help you double down on your anti-NAFTA messaging, as he is an icon among economic populists. A strong liberal like Feingold won't do you many favors with the moderate wing of the Democratic Party, but he can help you lock down the Upper Midwest and his home state of Wisconsin, all of which are expected to be critical battlegrounds this year.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"1"}},{"model":"campaign_trail.candidate","pk":1006,"fields":{"first_name":"John","last_name":"Edwards","election":9,"party":"Democratic","state":"North Carolina","priority":1,"description":"Dummy Example is a veteran from Hell. He loves puppies and magic! Dummy Example will unite America!<br><br>New line<br><br>This is <b>bold</b> and this <i>italic</i>!","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://cdn.britannica.com/45/102145-050-29615250/John-Edwards.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"John Edwards is a freshman Senator from North Carolina, and one of your strongest rivals in the Democratic primaries. He could help unite the party after many Democrats being wary of supporting you in the general election, especially with moderates and Southerners. Edwards did vote for the Iraq War though, which will likely turn off many of your hardcore supporters. Not to mention, he is somewhat light on experience as well, as he only served six years in the Senate after upsetting incumbent Republican Lauch Faircloth in 1998. Most don't expect North Carolina to be competitive this year, but Edwards could definitely make a difference in some states that Al Gore was unable to win four years ago, such as Arkansas, Tennessee, and obviously Florida due to his Southern DNA.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"1"}},{"model":"campaign_trail.candidate","pk":1007,"fields":{"first_name":"Dick","last_name":"Gephardt","election":9,"party":"Democratic","state":"Missouri","priority":1,"description":"Dummy Example is a veteran from Hell. He loves puppies and magic! Dummy Example will unite America!<br><br>New line<br><br>This is <b>bold</b> and this <i>italic</i>!","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://i.imgur.com/6tfJe0X.png","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"Dick Gephardt is the former House Minority Leader, having served the St Louis, Missouri area in Congress since 1977. He is a strong political insider, which will help balance the ticket as you are very inexperienced. He is a mainstream liberal Democrat, who is notably liberal on gay rights and, like you, very economically protectionist. However, he was a cosponsor of the authorization resolution for the Iraq War but has seemed to pivot on that issue since. His state of Missouri is America's longest-standing bellwether state, and a win in Missouri would put you in a very good position to win the presidency.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"1"}},{"model":"campaign_trail.candidate","pk":1008,"fields":{"first_name":"Jim","last_name":"McGreevey","election":9,"party":"Democratic","state":"New Jersey","priority":1,"description":"Dummy Example is a veteran from Hell. He loves puppies and magic! Dummy Example will unite America!<br><br>New line<br><br>This is <b>bold</b> and this <i>italic</i>!","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://i.imgur.com/JIm4Jlt.png","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"Jim McGreevey has served as Governor of New Jersey since 2001. He is quite light on experience, which won't help you balance the ticket when it comes to that. He was also the first governor in the country to endorse you in the 2004 Democratic primaries. He is liberal especially on social issues and gay marriage, which may be a bit unpopular at this day and age. Rumor has it that he may also have some marital and sexual issues, which may come back to haunt him and your campaign. New Jersey is expected to be much closer than usual due to the distrust in your foreign policy in the aftermath of the 9/11 attacks, and McGreevey could give you a boost there, as well as in the rest of the Northeast, including the big battleground state of Pennsylvania.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"1"}}];e.running_mate_json = [{"model":"campaign_trail.running_mate","pk":2001,"fields":{"candidate":78,"running_mate":1004}},{"model":"campaign_trail.running_mate","pk":2002,"fields":{"candidate":78,"running_mate":1005}},{"model":"campaign_trail.running_mate","pk":2003,"fields":{"candidate":78,"running_mate":1006}},{"model":"campaign_trail.running_mate","pk":2004,"fields":{"candidate":78,"running_mate":1007}},{"model":"campaign_trail.running_mate","pk":2005,"fields":{"candidate":78,"running_mate":1008}}];
campaignTrail_temp.opponents_default_json = JSON.parse("[{\"election\": 9, \"candidates\": [77, 78, 79]}]");
HistHexcolour=["#d51a1a","#1616b1","#147b33"];
        HistName=["George W. Bush","Donald Trump","Ralph Nader"];
        HistEV=[343,195,0];
        HistPV=["64,071,275","55,389,862","2,812,289"];
        HistPVP=["52.4%","45.3%","2.3%"];

var changeGameDisp = (hide) => {
  disp = "";
  if (hide) {
    disp = "none";
  }
  document.getElementsByClassName("inner_window_w_desc")[0].style.display = disp
};

e.creditsPage = () => {
  credits_html = `
    <h3>Coding</h3>
    <p>Environmental_Cap104</p>
    <h3>Writing</h3>
    <p>Environmental_Cap104</p>
    <h3>Misc.</h3>
    <p>DecstarG for the Music Player</p>
    <p>All Who Playtested</p>
    <h3>Music Credit</h3>
    <p>JibJab.com - This Land</p>
    <p>Eminem - Lose Yourself</p>
    <p>O-Zone - Dragostea Din Tei</p>
    <p>The O'Jays - For The Love of Money</p>
    <p>Bruce Springsteen - Born in the U.S.A.</p><br><br>
  `
  changeGameDisp(true);
  var spacer = document.createElement("amongusspacerthisisntarealelement");
  spacer.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
  document
    .getElementsByClassName("inner_window_w_desc")[0]
    .children[1].appendChild(spacer);
    changeGameDisp(true);
    var menuHeader = document.createElement("div");
    menuHeader.classList.add("inner_window_front");
    menuHeader.innerHTML = `<h1 style='font-family: "Times New Roman";'><font color='#0496f7'>Credits</font></h1>`;
    menuHeader.id = "SOTUheader";
    menuHeader.style = "height: 50px;background-color:#2d2d2d";
    var newMenu = document.createElement("div");
    newMenu.classList.add("inner_window_front");
    newMenu.id = "SOTUmenu";
    newMenu.style = `height:260px;background-color:#2d2d2d;color:white;overflow-y: scroll;`;

    newMenu.innerHTML = credits_html;
    let z = document.getElementById("game_window");
    var backButton = document.createElement("button");
    backButton.style =
      "position: relative; bottom: -13px; left: -380px; width: 150px; height: 80px;font-size:40px;padding-top:5px;padding-left:8px";
    backButton.id = "backSOTUBtn";
    backButton.innerHTML = `<b>BACK</b>`;
    backButton.onclick = function () {
      document.getElementById("SOTUheader").remove();
      document.getElementById("SOTUmenu").remove();
      document.getElementById("backSOTUBtn").remove();
      changeGameDisp(false);
    };
    z.appendChild(menuHeader);
    z.appendChild(newMenu);
    z.appendChild(backButton);

}

e.credits = "<button onclick='e.creditsPage()'>Credits</button>"


// Initialise custom music

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#999999;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";

    volumeSlider.value = audio.volume;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      audio = $("#campaigntrailmusic")[0];
      audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      audio.currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}


// Track list

var soundtracks = {
  0: {
    name: "Fire the Illegitimate President Bush",
    tracklist: [
      {
        "name": "The O'Jays - For The Love of Money",
        "url": "https://audio.jukehost.co.uk/9tLikNen7aIyqvYKF4M9OSGKQO1Zep5k"
      },
      {
        "name": "JibJab.com - This Land",
        "url": "https://audio.jukehost.co.uk/hTGOF3hbivRcLeuAdjNXzCZvH9V7X53e"
      },
      {
        "name": "Eminem - Lose Yourself",
        "url": "https://audio.jukehost.co.uk/Sz37vQvj3REAW7dleQ8paQF3Qhgp3A8v"
      },
      {
        "name": "O-Zone - Dragostea din Tei",
        "url": "https://audio.jukehost.co.uk/fb66j73ZbmfBSV1OLXkejgeTAN6hijJJ"
      },
      {
        "name": "Bruce Springsteen - Born in the U.S.A.",
        "url": "https://audio.jukehost.co.uk/nTAs0tOICWMYQRnvpLA9zxDZJEjHEU59"
      },              
    ]
  }
}

// Set up new music player

newMusicPlayer()

RecReading=true
