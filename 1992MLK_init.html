e = campaignTrail_temp;


            nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#000599";


            nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#df0000";


            document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;


            $("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;


            $(".container")[0].style.backgroundColor = "#0400ff";


            document.getElementById("header").src = "https://matrix.redditspace.com/_matrix/media/r0/download/reddit.com/rr0byulntpac1";


            document.body.background = "https://i.pinimg.com/474x/c5/89/5e/c5895ef3c0cd247272fc6b70b4a87f18.jpg";


            e.election_json = [{"model":"campaign_trail.election","pk":15,"fields":{"year":1988,"summary":"President George Bush aims to be re-elected in 1992 following the Persian Gulf War. The Democratic field, divided and without a clear frontrunner in the early days, has coalesced around well-known civil rights activist and current 20-year Atlanta Congressman Martin Luther King Jr. On top of that, independent Texas billionaire Ross Perot is running a third-party anti-NAFTA campaign.<br><br>If elected, Martin Luther King Jr will be the first African-American President of the United States, and would be a fairly liberal one at that. For those reasons, that could lead people to believe that President Bush, in spite of his broken promises, immense party fatigue, and Ross Perot's candidacy, could hold on for another four-year term for the Republican Party. The 1992 election is expected to be one of the most fascinating races in many years, due to all of the peculiar factors of this race. ","image_url":"https://i.imgur.com/PY87BrD.png","winning_electoral_vote_number":270,"advisor_url":"https://i.imgur.com/CRMtzP3.png","recommended_reading":"<div style='overflow-y:scroll;height:370px;'><h4 style=\\\"margin-top: 0.5em;\\\"></h4><h4>Lore</h4><p>On April 4, 1968, Martin Luther King Jr survives his assassination attempt in Memphis after James Earl Ray misses his shot. He would then work on fighting against economic and racial inequality in the United States, on top of the anti-Vietnam War movement. King would then run for Georgia's 5th Congressional District in 1972 to replace the retiring Representative Fletcher Thompson. He would win the seat, and serve until 1992, when he would run for President. He would have a tough fight to the presidency, in spite of President George H.W. Bush's unpopularity and Ross Perot's anti-NAFTA third-party campaign. However, after getting through a nasty primary, he would ultimately lose to Bush as a result of his staunch liberalism, and unfortunately, his race. <br><br><img src='https://i.imgur.com/qkxDX4E.png' width='600px'></p><h4>Note from Environmental_Cap104</h4><p>This is the seventh mod I created, after Cruz 2016, Arnold Amendment 2016, 2012 GOP Trump, 2020BERN, 2000: Former Presidents, and 2003CA. It was a really fun mod to create, despite many hurdles along the way. I learned a lot about TNCT modding that I've never known before making this mod throughout production, and I feel like that has really boosted the quality of my mods. I especially want to thank Astro, LBJ is GOD, and everyone that playtested this mod and made it better than I could have done so alone. Now on to the mod itself: This is the first ever TNCT mod to have Martin Luther King Jr in it, and I have always thought MLK would've ran for President had he lived, in spite of some of the troubles and controversies surrounding him. He had a lot of potential to do a lot more for the United States had he lived, and I felt like entering politics would've suited him best, if he actually wanted to make the changes that he's advocated for during his career. Anyways, thank you for playing the mod. You can refresh the mod to play again, be on the lookout for future Environmental Cap mods, or check out the other mods I have made. <br><br>","has_visits":1,"no_electoral_majority_image":"../static/images/2012-no-majority.jpg"}}];e.temp_election_list = [{"id":15,"year":1988,"is_premium":0,"display_year":"1992MLK"}];e.credits = "Environmental_Cap104";e.global_parameter_json =  [{"model":"campaign_trail.global_parameter","pk":1,"fields":{"vote_variable":1.125,"max_swing":0.12,"start_point":0.94,"candidate_issue_weight":10,"running_mate_issue_weight":3,"issue_stance_1_max":-0.71,"issue_stance_2_max":-0.3,"issue_stance_3_max":-0.125,"issue_stance_4_max":0.125,"issue_stance_5_max":0.3,"issue_stance_6_max":0.71,"global_variance":0.01,"state_variance":0.005,"question_count":25,"default_map_color_hex":"#C9C9C9","no_state_map_color_hex":"#999999"}}];e.candidate_json = [{"model":"campaign_trail.candidate","pk":153,"fields":{"first_name":"Martin Luther","last_name":"King","election":15,"party":"Democratic","state":"Georgia","priority":1,"description":"<div style='overflow-y:scroll;height:200px;'>Martin Luther King Jr is probably the most well-known African-American politician in American history, who has had a long career in activism, grassroots lobbying, and public service. He is regarded as the leader of the Civil Rights movement in the 1950s and 1960s, making powerful speeches such as his \"I Have a Dream\" and \"I've Been to the Mountaintop\" speeches, as well as writing his \"Letter from a Birmingham Jail\". <br><br>After surviving multiple assassination attempts, he began his political career in 1972 taking Georgia's 5th Congressional district, and has served the Atlanta area ever since in Congress. He is fairly liberal for the country, and some may argue, even his party. He has fought for economic and racial equality throughout all his years in public service.<br><br>In order to win the election, he will likely need to moderate on some issues, or hope that independent billionaire Ross Perot will take enough votes away from incumbent President Bush to end the 12-year dominance of the White House by the Republican Party. Either way though, many expect a heavy lift for MLK if he wants to make his Dream complete to become the first African-American president of the United States.</div>","color_hex":"#0000ff","secondary_color_hex":null,"is_active":1,"image_url":"https://i.imgur.com/xvKs2xP.jpeg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":true}},{"model":"campaign_trail.candidate","pk":154,"fields":{"first_name":"Ross","last_name":"Perot","election":15,"party":"Independent","state":"Texas","priority":1,"description":"Ross Perot is a businessman from Texas who’s running as an independent. Unlike most 3rd party candidates, he actually has a chance to win. However, Perot has to play his cards just right and hope his campaign doesn’t tank.<br><br>Policy-wise, Perot is a protectionist who opposes NAFTA, believing it to be detrimental to American manufacturing, and also wants to have a balanced budget.<br><br>Good luck, you’re going to need it.","color_hex":"#bb00ff","secondary_color_hex":null,"is_active":0,"image_url":"https://theamericanleader.org/wp-content/uploads/2019/10/Ross_Perot_CP_Allan_Warren_cropped.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false}},{"model":"campaign_trail.candidate","pk":152,"fields":{"first_name":"George H.W.","last_name":"Bush","election":15,"party":"Republican","state":"Texas","priority":1,"description":"George Bush is the current President of the United States who lost popularity after he backed out of his campaign promise to not raise taxes. He must prove he has the independence, ideological rigor, and strength to serve as President, all while finding some way to reduce the popularity of his opponent. Bush appears to be trailing badly as the campaign begins.","color_hex":"#ff0000","secondary_color_hex":null,"is_active":0,"image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ee/George_H._W._Bush_presidential_portrait_%28cropped%29.jpg/800px-George_H._W._Bush_presidential_portrait_%28cropped%29.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":null,"candidate_score":1,"running_mate":false,"scrollable":false}},{"model":"campaign_trail.candidate","pk":1004,"fields":{"first_name":"Jay","last_name":"Rockefeller","election":15,"party":"Democratic","state":"West Virginia","priority":1,"description":"Jay Rockefeller is a Senator from West Virginia, and a member of the prestigious Rockefeller Family. He was also the Governor of West Virginia for eight years before getting elected to the Senate in 1984. He is fairly popular there, which could help you a lot where otherwise you would’ve likely underperformed past Democrats.<p><p>He is a mainstream Democrat, and is a true political insider, which could hurt or help your campaign, depending on how you run it. But if you want to run on healthcare, economic issues, and party leadership, Jay Rockefeller could be a good choice.","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1e/Jay_Rockefeller_portrait_%283x4%29.jpg/674px-Jay_Rockefeller_portrait_%283x4%29.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"Jay Rockefeller is a Senator from West Virginia, and a member of the prestigious Rockefeller Family. He was also the Governor of West Virginia for eight years before getting elected to the Senate in 1984. He is fairly popular there, which could help you a lot where otherwise you would’ve likely underperformed past Democrats.<p><p>He is a mainstream Democrat, and is a true political insider, which could hurt or help your campaign, depending on how you run it. But if you want to run on healthcare, economic issues, and party leadership, Jay Rockefeller could be a good choice.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"0"}},{"model":"campaign_trail.candidate","pk":1005,"fields":{"first_name":"Joe","last_name":"Biden","election":15,"party":"Democratic","state":"Delaware","priority":1,"description":"Joe Biden has served 20 years in the Senate, representing Delaware. He is known to be fairly moderate, and has a track record of working across party lines. He is notably tough on crime, and somewhat strong on foreign policy, even in a post-Cold War Era. Overall, he could be a good choice if you want to balance the ticket this year. <p><p>Geographically, he could be a huge asset in his home state of Delaware, as well as New Jersey and Pennsylvania, which are expected to be amongst the most competitive states in this election cycle. He is also known to be gaffe-prone, which could give some bad feelings, especially considering Dan Quayle’s unpopularity.","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://i.imgur.com/VXfnvKU.png","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"Joe Biden has served 20 years in the Senate, representing Delaware. He is known to be fairly moderate, and has a track record of working across party lines. He is notably tough on crime, and somewhat strong on foreign policy, even in a post-Cold War Era. Overall, he could be a good choice if you want to balance the ticket this year. <p><p>Geographically, he could be a huge asset in his home state of Delaware, as well as New Jersey and Pennsylvania, which are expected to be amongst the most competitive states in this election cycle. He is also known to be gaffe-prone, which could give some bad feelings, especially considering Dan Quayle’s unpopularity.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"0"}},{"model":"campaign_trail.candidate","pk":1006,"fields":{"first_name":"Paul","last_name":"Tsongas","election":15,"party":"Democratic","state":"Massachusetts","priority":1,"description":"Paul Tsongas is a former Senator from Massachusetts, serving one term from 1979 to 1985. He was also one of your rivals in the Democratic primaries, so he could be a good choice if you want to unite the party after a rather divisive and contested primary. He is also fairly liberal on most issues, but fiscally conservative, whether that will hurt or help you. <p><p>Although he doesn’t give you much of a geographical boost because Massachusetts is so heavily Democratic, he can help on economic issues and social issues. Keep in mind that he was diagnosed with lymphoma, causing him to leave the Senate. Due to this, his health could be a prominent issue in the 1992 campaign and that might work against you.","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://m.media-amazon.com/images/M/MV5BNjJkZWMyMmQtNzM0ZC00N2M4LTg3MTAtNzI2YjRiZjY5NTUzXkEyXkFqcGdeQXVyNjUxMjc1OTM@._V1_.jpg","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"Paul Tsongas is a former Senator from Massachusetts, serving one term from 1979 to 1985. He was also one of your rivals in the Democratic primaries, so he could be a good choice if you want to unite the party after a rather divisive and contested primary. He is also fairly liberal on most issues, but fiscally conservative, whether that will hurt or help you. <p><p>Although he doesn’t give you much of a geographical boost because Massachusetts is so heavily Democratic, he can help on economic issues and social issues. Keep in mind that he was diagnosed with lymphoma, causing him to leave the Senate. Due to this, his health could be a prominent issue in the 1992 campaign and that might work against you.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"0"}},{"model":"campaign_trail.candidate","pk":1007,"fields":{"first_name":"James","last_name":"Blanchard","election":15,"party":"Democratic","state":"Michigan","priority":1,"description":"James Blanchard is the former Governor of Michigan, who was defeated in a massive upset by John Engler in 1990. He is particularly strong on economic issues, and is credited for leading one of the most dramatic economic turnarounds in the history of state government in Michigan. He is also very strong on economic protectionism, which could help with blue-collar workers who otherwise may have gone towards Perot. If you want to run on the economy, James Blanchard could be one of the best choices for that.<p><p>Furthermore, Michigan is expected to be one of the most competitive states in this election, and his geographical advantage could prove to be vital there, as well as in the rest of the Midwest.","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/James_Blanchard_%28MI%29_%28cropped%29.png/220px-James_Blanchard_%28MI%29_%28cropped%29.png","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"James Blanchard is the former Governor of Michigan, who was defeated in a massive upset by John Engler in 1990. He is particularly strong on economic issues, and is credited for leading one of the most dramatic economic turnarounds in the history of state government in Michigan. He is also very strong on economic protectionism, which could help with blue-collar workers who otherwise may have gone towards Perot. If you want to run on the economy, James Blanchard could be one of the best choices for that.<p><p>Furthermore, Michigan is expected to be one of the most competitive states in this election, and his geographical advantage could prove to be vital there, as well as in the rest of the Midwest.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"0"}},{"model":"campaign_trail.candidate","pk":1008,"fields":{"first_name":"Jerry","last_name":"Brown","election":15,"party":"Democratic","state":"California","priority":1,"description":"Jerry Brown is the former Governor of California, serving from 1975 to 1983. He was also one of your rivals in the 1992 primaries. His strongest issues are economic protectionism, taxes, and campaign finance, and he ran a populist reform candidate in the primaries. <p><p>Furthermore, California is an absolute must-win for you this year, and the former Governor could really help you there a lot. He could also help siphon some of Ross Perot’s support especially in the Midwest, and could help run an outsider campaign. That messaging may be exactly what you need to win the election when it otherwise would’ve likely been a heavier lift for you.","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://charlie-p-2ac84d7056ca7f9d.s3.amazonaws.com/clips/thumbnails/000/016/019/search_medium/1HY155_001_lt.jpg?1456547720","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"Jerry Brown is the former Governor of California, serving from 1975 to 1983. He was also one of your rivals in the 1992 primaries. His strongest issues are economic protectionism, taxes, and campaign finance, and he ran a populist reform candidate in the primaries. <p><p>Furthermore, California is an absolute must-win for you this year, and the former Governor could really help you there a lot. He could also help siphon some of Ross Perot’s support especially in the Midwest, and could help run an outsider campaign. That messaging may be exactly what you need to win the election when it otherwise would’ve likely been a heavier lift for you.","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"0"}},{"model":"campaign_trail.candidate","pk":1009,"fields":{"first_name":"Bill","last_name":"Clinton","election":15,"party":"Democratic","state":"Arkansas","priority":1,"description":"Bill Clinton is the current Governor of Arkansas, and has been for 10 consecutive years. He was also your strongest rival in the Democratic primaries, and choosing him would likely help you a lot with uniting the party after such a divisive primary. He is fairly moderate and bipartisan, but he is notable for supporting universal healthcare. <p><p>Without Clinton, you would’ve likely been shut out of the South due to racial issues, but with Bill Clinton, he should give you a huge boost in Arkansas, and some other states down South. Just keep in mind that he may have some infidelity issues that may or may not impact the race. ","color_hex":"#0000ff","secondary_color_hex":null,"is_active":0,"image_url":"https://i.imgur.com/CfNF8w8.png","electoral_victory_message":"<h3>REAL PATRIOT DUMMY EXAMPLE SWEEPS</h3>","electoral_loss_message":"<h3>Fake News?</h3>","no_electoral_majority_message":"<h3>DUMMY EXAMPLE RETURNS TO HELL</h3>","description_as_running_mate":"Bill Clinton is the current Governor of Arkansas, and has been for 10 consecutive years. He was also your strongest rival in the Democratic primaries, and choosing him would likely help you a lot with uniting the party after such a divisive primary. He is fairly moderate and bipartisan, but he is notable for supporting universal healthcare. <p><p>Without Clinton, you would’ve likely been shut out of the South due to racial issues, but with Bill Clinton, he should give you a huge boost in Arkansas, and some other states down South. Just keep in mind that he may have some infidelity issues that may or may not impact the race. ","candidate_score":1,"running_mate":true,"scrollable":false,"partner":"0"}}];e.running_mate_json = [{"model":"campaign_trail.running_mate","pk":2001,"fields":{"candidate":153,"running_mate":1004}},{"model":"campaign_trail.running_mate","pk":2002,"fields":{"candidate":153,"running_mate":1005}},{"model":"campaign_trail.running_mate","pk":2003,"fields":{"candidate":153,"running_mate":1006}},{"model":"campaign_trail.running_mate","pk":2004,"fields":{"candidate":153,"running_mate":1007}},{"model":"campaign_trail.running_mate","pk":2005,"fields":{"candidate":153,"running_mate":1008}},{"model":"campaign_trail.running_mate","pk":2006,"fields":{"candidate":153,"running_mate":1009}}];
campaignTrail_temp.opponents_default_json = JSON.parse("[{\"election\": 15, \"candidates\": [152, 153, 154]}]");
HistHexcolour=["#ff0000","#0000ff","#bb00ff"];
        HistName=["George H.W. Bush","Martin Luther King Jr.","Ross Perot"];
        HistEV=[286,252,0];
        HistPV=["45,019,741","42,711,224","16,356,601"];
        HistPVP=["43.3%","41.0%","15.7%"];
var changeGameDisp = (hide) => {
  disp = "";
  if (hide) {
    disp = "none";
  }
  document.getElementsByClassName("inner_window_w_desc")[0].style.display = disp
};

e.creditsPage = () => {
  credits_html = `
    <h3>Coding</h3>
    <p>Environmental_Cap104</p>
    <h3>Writing</h3>
    <p>Environmental_Cap104</p>
    <h3>Playtesting</h3>
    <p>Environmental_Cap104</p>
    <p>LBJ IS GOD</p>
    <p>ItsAstronomical</p>
    <p>SkyBlue</p>
    <p>tmaelo</p>
    <p>Senator Savior</p>
    <p>OptimusWall</p>
    <p>maxthecat5905</p>
    <p>muffenboy2003</p>
    <h3>Misc.</h3>
    <p>thecupojo3 for the Banner</p>
    <p>DecstarG for the Music Player</p>
    <p>Anyone else that I forgot to credit and that contributed</p>
    <h3>Music Credit</h3>
    <p>Marvin Gaye, Tammi Terrell - Ain’t No Mountain High Enough</p>
    <p>Aretha Franklin - Respect</p>
    <p>Whitney Houston - I Will Always Love You</p>
    <p>Bob Marley - One Love</p>
    <p>Common, John Legend - Glory</p><br><br>
  `
  changeGameDisp(true);
  var spacer = document.createElement("amongusspacerthisisntarealelement");
  spacer.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
  document
    .getElementsByClassName("inner_window_w_desc")[0]
    .children[1].appendChild(spacer);
    changeGameDisp(true);
    var menuHeader = document.createElement("div");
    menuHeader.classList.add("inner_window_front");
    menuHeader.innerHTML = `<h1 style='font-family: "Times New Roman";'><font color='#0496f7'>Credits</font></h1>`;
    menuHeader.id = "SOTUheader";
    menuHeader.style = "height: 50px;background-color:#2d2d2d";
    var newMenu = document.createElement("div");
    newMenu.classList.add("inner_window_front");
    newMenu.id = "SOTUmenu";
    newMenu.style = `height:260px;background-color:#2d2d2d;color:white;overflow-y: scroll;`;

    newMenu.innerHTML = credits_html;
    let z = document.getElementById("game_window");
    var backButton = document.createElement("button");
    backButton.style =
      "position: relative; bottom: -13px; left: -380px; width: 150px; height: 80px;font-size:40px;padding-top:5px;padding-left:8px";
    backButton.id = "backSOTUBtn";
    backButton.innerHTML = `<b>BACK</b>`;
    backButton.onclick = function () {
      document.getElementById("SOTUheader").remove();
      document.getElementById("SOTUmenu").remove();
      document.getElementById("backSOTUBtn").remove();
      changeGameDisp(false);
    };
    z.appendChild(menuHeader);
    z.appendChild(newMenu);
    z.appendChild(backButton);

}

e.credits = "<button onclick='e.creditsPage()'>Credits</button>"


// Initialise custom music

$("#music_player")[0].children[0].style.display="none"
$("#music_player")[0].children[1].style.display="none"

document.getElementById("modLoadReveal").style.display="none"
document.getElementById("modloaddiv").style.display="none"

musicBox = document.getElementById("music_player")
musicBox.style.display=""

var trackSel;
e = campaignTrail_temp
e.selectedSoundtrack = 0

toTime = (seconds) => {
  var date = new Date(null);
  date.setSeconds(seconds);
  return date.toISOString().substr(11, 8);
}

generateTime = () => {
    // Get the audio element
    var audio = document.getElementById("campaigntrailmusic");

    timeTracker = document.createElement("div");
    timeTracker.style = `
      text-align:left;
      border-style:solid;
      border-width:3px;
      height:150px;
      width:200px;
      background-color:#999999;
      float:right;
      padding: 10px;
    `
    $("#trackSelParent")[0].prepend(timeTracker);
    $("#trackSelParent")[0].prepend(document.createElement("br"));

    // Create a new element to display the current position of the audio
    var positionDisplay = document.createElement("gg");
    positionDisplay.id = "position-display";

    // Create a new slider element to change the time
    var timeSlider = document.createElement("input");
    timeSlider.type = "range";
    timeSlider.min = 0;
    timeSlider.max = 1;
    timeSlider.step = 0.001;
    timeSlider.value = 0;
    timeSlider.style.width = "200px";
    timeSlider.id = "time-slider";

    var pausePlay = document.createElement("button");
    pausePlay.id = "position-display";
    pausePlay.innerHTML = "<b>Pause</b>"
    pausePlay.style.width = "100%";


    pausePlay.addEventListener("click", event => {
      event.preventDefault();
      updatePositionDisplay();
      let audio = document.getElementById("campaigntrailmusic");
      if (audio.paused) {
        audio.play();
        event.target.innerHTML = "<b>Pause</b>";
        return;
      }
      audio.pause();
      event.target.innerHTML = "<b>Play</b>";
      return;
    })

    var volumeLabel = document.createElement("gg");
    volumeLabel.id = "volume-label";
    volumeLabel.innerHTML = "<br><b>Volume: </b>"

    var volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.min = 0;
    volumeSlider.max = 1;
    volumeSlider.step = 0.001;
    volumeSlider.value = 0;
    volumeSlider.style.width = "200px";
    volumeSlider.id = "volume-slider";

    volumeSlider.value = audio.volume;

    timeTracker.appendChild(pausePlay);
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(document.createElement("br"));
    timeTracker.appendChild(positionDisplay);
    timeTracker.appendChild(timeSlider);
    timeTracker.appendChild(volumeLabel);
    timeTracker.appendChild(volumeSlider);

    updatePositionDisplay();

    //for (let i = 0; i < 10; i++)
    //timeTracker.append(document.createElement("br"));


    // Function to update the position display
    function updatePositionDisplay() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
    }

    // Function to change the time of the audio
    function changeTime() {
      positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
      audio.currentTime = timeSlider.value * audio.duration;
    }

    updateVolume = event => {
      audio.volume = event.target.value;
    }
    
    // Update the position display and slider every second
    setInterval(updatePositionDisplay, 1000);

    // Listen for changes to the time slider and change the time of the audio
    timeSlider.addEventListener("input", changeTime);
    volumeSlider.addEventListener("input", updateVolume)
}

function newMusicPlayer() {
  trackSel = document.createElement("div");
  trackSel.id = "trackSelParent"
  let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
  z += `<b><select id='selectSoundtrack'><option value='`+soundtracks[e.selectedSoundtrack].name+`'>`+soundtracks[e.selectedSoundtrack].name+"</option>"
  for (i in soundtracks) {
    if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
      z += `<option value='`+soundtracks[i].name+`'>`+soundtracks[i].name+`</option>`
    }
  }
  z += `</select></b><br><br>`
  // <label><input type="radio" name="option" value="option1">Option 1</label><br>
  for (i in soundtracks[e.selectedSoundtrack].tracklist) {
    let a = soundtracks[e.selectedSoundtrack].tracklist[i]
    let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="`+i+`">`+a.name+`</label><br>`
    z += b
  }
  z += "</div><br><br>"
  trackSel.innerHTML = z

  // select correct song

  musicBox.appendChild(trackSel);
  Array.from(document.getElementById("trackSel").children).filter(f=>{
    return f.tagName == "LABEL"
  }).map(f=>f.children[0])[0].checked = true

  // set soundtrack changer

  soundtrackSelector = document.getElementById("selectSoundtrack")
  soundtrackSelector.onchange = function() {
    for (i in soundtracks) {
      if (soundtracks[i].name == soundtrackSelector.value) {
        e.selectedSoundtrack = i
        break
      }
    }
    document.getElementById("trackSelParent").remove()
    newMusicPlayer()
  }

  var matches = document.querySelectorAll('.trackSelector');

  for (match in matches) {
    matches[match].onchange = function() {
      audio = $("#campaigntrailmusic")[0];
      audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
      audio.currentTime = 0
    }
  }

  musicBox.children[2].loop = false
  musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

  musicBox.children[2].onended = function() {
    console.log("next track")
    let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
    let newSel = clamp(selected+1, soundtracks[e.selectedSoundtrack].tracklist.length-1, 0)
    let buttons = Array.from(document.getElementById("trackSel").children).filter(f=>{
      return f.tagName == "LABEL"
    }).map(f=>f.children[0])
    //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
    buttons[newSel].click()
  }

  for (w = 0; w < 7; w++) {
    document.getElementById("trackSelParent").appendChild(document.createElement("br"))
  }
  
  generateTime();
}

clamp = function(a, max, min, overflow=true) {
  if (overflow) {
    return a > max ? min : a < min ? max : a;
  }
  return a > max ? max : a < min ? min : a;
}


// Track list

var soundtracks = {
  0: {
    name: "Dream Coming True in ‘92",
    tracklist: [
      {
        "name": "Marvin Gaye, Tammi Terrell - Ain’t No Mountain High Enough",
        "url": "https://audio.jukehost.co.uk/SzdwwoFdBp5djWUxjtjlxQW0iJDyGnh5"
      },
      {
        "name": "Aretha Franklin - Respect",
        "url": "https://audio.jukehost.co.uk/WOylsgJcCQ8CMuiNMt13nWiUJ5tlqGcH"
      },
      {
        "name": "Whitney Houston - I Will Always Love You",
        "url": "https://audio.jukehost.co.uk/Se9vybavZTY2TLgmPEpZsY5VABZdrWiF"
      },
      {
        "name": "Bob Marley - One Love",
        "url": "https://audio.jukehost.co.uk/TDzoL9xXODOkfX1hKmmmLMIqF57PfHfP"
      },
      {
        "name": "Common, John Legend - Glory",
        "url": "https://audio.jukehost.co.uk/RJBPwLPFE8btWWMjhwX9d8TavgGBAdMG"
      },
    ]
  }
}

// Set up new music player

newMusicPlayer()


RecReading=true
